
> myfarmstand-mobile@1.0.0 test
> jest

FAIL src/hooks/marketing/__tests__/useProductBundles.test.tsx (7.59 s)
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useProductBundles - Bundle Listing with Role-based Access › should fetch product bundles with role-based filtering

    TypeError: _queryKeyFactory.bundleKeys.byStatusPaginated is not a function

      92 |
      93 |   return useQuery({
    > 94 |     queryKey: bundleKeys.byStatusPaginated(status, pagination),
         |                          ^
      95 |     queryFn: async (): Promise<PaginatedResponse<ProductBundleTransform>> => {
      96 |       if (!effectiveUserId) {
      97 |         throw new Error('Authentication required for bundle access');

      at byStatusPaginated (src/hooks/marketing/useProductBundles.ts:94:26)
      at useProductBundles (src/hooks/marketing/__tests__/useProductBundles.test.tsx:182:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductBundles.test.tsx:181:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useProductBundles - Bundle Listing with Role-based Access › should enforce role-based access control for bundle management

    TypeError: _queryKeyFactory.bundleKeys.byStatusPaginated is not a function

      92 |
      93 |   return useQuery({
    > 94 |     queryKey: bundleKeys.byStatusPaginated(status, pagination),
         |                          ^
      95 |     queryFn: async (): Promise<PaginatedResponse<ProductBundleTransform>> => {
      96 |       if (!effectiveUserId) {
      97 |         throw new Error('Authentication required for bundle access');

      at byStatusPaginated (src/hooks/marketing/useProductBundles.ts:94:26)
      at useProductBundles (src/hooks/marketing/__tests__/useProductBundles.test.tsx:212:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductBundles.test.tsx:211:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useProductBundles - Bundle Listing with Role-based Access › should support featured bundle filtering

    TypeError: _queryKeyFactory.bundleKeys.byStatusPaginated is not a function

      92 |
      93 |   return useQuery({
    > 94 |     queryKey: bundleKeys.byStatusPaginated(status, pagination),
         |                          ^
      95 |     queryFn: async (): Promise<PaginatedResponse<ProductBundleTransform>> => {
      96 |       if (!effectiveUserId) {
      97 |         throw new Error('Authentication required for bundle access');

      at byStatusPaginated (src/hooks/marketing/useProductBundles.ts:94:26)
      at useProductBundles (src/hooks/marketing/__tests__/useProductBundles.test.tsx:258:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductBundles.test.tsx:257:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useProductBundles - Bundle Listing with Role-based Access › should handle empty bundle results gracefully

    TypeError: _queryKeyFactory.bundleKeys.byStatusPaginated is not a function

      92 |
      93 |   return useQuery({
    > 94 |     queryKey: bundleKeys.byStatusPaginated(status, pagination),
         |                          ^
      95 |     queryFn: async (): Promise<PaginatedResponse<ProductBundleTransform>> => {
      96 |       if (!effectiveUserId) {
      97 |         throw new Error('Authentication required for bundle access');

      at byStatusPaginated (src/hooks/marketing/useProductBundles.ts:94:26)
      at useProductBundles (src/hooks/marketing/__tests__/useProductBundles.test.tsx:294:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductBundles.test.tsx:293:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useProductBundles - Bundle Listing with Role-based Access › should use centralized query key factory for bundles

    TypeError: _queryKeyFactory.bundleKeys.byStatusPaginated is not a function

      92 |
      93 |   return useQuery({
    > 94 |     queryKey: bundleKeys.byStatusPaginated(status, pagination),
         |                          ^
      95 |     queryFn: async (): Promise<PaginatedResponse<ProductBundleTransform>> => {
      96 |       if (!effectiveUserId) {
      97 |         throw new Error('Authentication required for bundle access');

      at byStatusPaginated (src/hooks/marketing/useProductBundles.ts:94:26)
      at useProductBundles (src/hooks/marketing/__tests__/useProductBundles.test.tsx:324:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductBundles.test.tsx:323:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useBundlePerformance - Sales Tracking and Analytics › should fetch bundle performance with sales metrics

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "bundle-1"

    Number of calls: 0

      378 |
      379 |       expect(result.current.data).toEqual(mockPerformance);
    > 380 |       expect(mockProductBundleService.getBundlePerformance).toHaveBeenCalledWith('bundle-1');
          |                                                             ^
      381 |     });
      382 |
      383 |     it('should handle bundles with no sales data', async () => {

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useProductBundles.test.tsx:380:61)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useCreateBundle - Bundle Creation with Product Associations › should create bundle with product associations and pricing

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"bundleDescription": "Variety of fresh vegetables", "bundleDiscountAmount": 8, "bundleName": "Fresh Produce Pack", "bundlePrice": 45.99, "campaignId": "campaign-2", "displayOrder": 100, "isActive": true, "isFeatured": false, "products": [{"displayOrder": 1, "productId": "product-1", "quantity": 2}, {"displayOrder": 2, "productId": "product-2", "quantity": 1}]}, "user-1"

    Number of calls: 0

      523 |       });
      524 |
    > 525 |       expect(mockProductBundleService.createBundle).toHaveBeenCalledWith(
          |                                                     ^
      526 |         bundleData,
      527 |         'user-1'
      528 |       );

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useProductBundles.test.tsx:525:53)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useBundleInventoryImpact - Cross-role Integration › should calculate inventory impact for bundle quantities

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: [{"productId": "product-1", "quantity": 2}, {"productId": "product-2", "quantity": 1}], 10

    Number of calls: 0

      702 |       });
      703 |
    > 704 |       expect(mockProductBundleService.calculateInventoryImpact).toHaveBeenCalledWith(
          |                                                                 ^
      705 |         bundleProducts,
      706 |         10
      707 |       );

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useProductBundles.test.tsx:704:65)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useBundleInventoryImpact - Cross-role Integration › should provide reorder recommendations for inventory planning

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 1
    Received array:  [{"productId": "product-low-stock", "suggestedLevel": 100}]

      801 |       });
      802 |
    > 803 |       expect(result.current.data?.recommendations.suggestedReorderLevels).toHaveLength(2);
          |                                                                           ^
      804 |     });
      805 |
      806 |     it('should integrate with inventory service for real-time data', async () => {

      at Object.toHaveLength (src/hooks/marketing/__tests__/useProductBundles.test.tsx:803:75)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useBundleInventoryImpact - Cross-role Integration › should integrate with inventory service for real-time data

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      844 |
      845 |       // Integration with inventory service should be seamless
    > 846 |       expect(result.current.data?.availability.isAvailable).toBe(true);
          |                                                             ^
      847 |     });
      848 |   });
      849 |

      at Object.toBe (src/hooks/marketing/__tests__/useProductBundles.test.tsx:846:61)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useUpdateBundleProducts - Bundle Product Management › should update bundle product associations

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "bundle-1", {"products": [{"displayOrder": 1, "productId": "product-1", "quantity": 3}, {"displayOrder": 2, "productId": "product-3", "quantity": 1}]}, "user-1"

    Number of calls: 0

      890 |       });
      891 |
    > 892 |       expect(mockProductBundleService.updateBundleProducts).toHaveBeenCalledWith(
          |                                                             ^
      893 |         'bundle-1',
      894 |         { products: updatedProducts },
      895 |         'user-1'

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useProductBundles.test.tsx:892:61)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › Performance and Error Handling › should handle service failures gracefully

    TypeError: _queryKeyFactory.bundleKeys.byStatusPaginated is not a function

      92 |
      93 |   return useQuery({
    > 94 |     queryKey: bundleKeys.byStatusPaginated(status, pagination),
         |                          ^
      95 |     queryFn: async (): Promise<PaginatedResponse<ProductBundleTransform>> => {
      96 |       if (!effectiveUserId) {
      97 |         throw new Error('Authentication required for bundle access');

      at byStatusPaginated (src/hooks/marketing/useProductBundles.ts:94:26)
      at useProductBundles (src/hooks/marketing/__tests__/useProductBundles.test.tsx:992:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductBundles.test.tsx:991:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › Performance and Error Handling › should maintain performance targets for bundle operations

    TypeError: _queryKeyFactory.bundleKeys.byStatusPaginated is not a function

      92 |
      93 |   return useQuery({
    > 94 |     queryKey: bundleKeys.byStatusPaginated(status, pagination),
         |                          ^
      95 |     queryFn: async (): Promise<PaginatedResponse<ProductBundleTransform>> => {
      96 |       if (!effectiveUserId) {
      97 |         throw new Error('Authentication required for bundle access');

      at byStatusPaginated (src/hooks/marketing/useProductBundles.ts:94:26)
      at useProductBundles (src/hooks/marketing/__tests__/useProductBundles.test.tsx:1023:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductBundles.test.tsx:1022:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › Performance and Error Handling › should implement proper caching for inventory impact calculations

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

      1079 |
      1080 |       // Implementation should cache expensive inventory calculations
    > 1081 |       expect(mockProductBundleService.calculateInventoryImpact).toHaveBeenCalledTimes(2);
           |                                                                 ^
      1082 |     });
      1083 |   });
      1084 |

      at Object.toHaveBeenCalledTimes (src/hooks/marketing/__tests__/useProductBundles.test.tsx:1081:65)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › Cross-System Integration › should support integration with campaign management

    expect(received).toBe(expected) // Object.is equality

    Expected: "campaign-summer"
    Received: undefined

      1111 |       });
      1112 |
    > 1113 |       expect(result.current.data?.campaignId).toBe('campaign-summer');
           |                                               ^
      1114 |     });
      1115 |
      1116 |     it('should trigger inventory notifications for stock level changes', async () => {

      at Object.toBe (src/hooks/marketing/__tests__/useProductBundles.test.tsx:1113:47)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/inventory/__tests__/integration/integrationVerification.test.tsx (9.986 s)
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Integration Verification Tests (GREEN Phase) › should verify integration layers work together

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      125 |
      126 |     // Wait for both to load
    > 127 |     await waitFor(() => {
          |                  ^
      128 |       expect(inventoryResult.current.isSuccess).toBe(true);
      129 |       expect(movementResult.current.isSuccess).toBe(true);
      130 |     });

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/integrationVerification.test.tsx:127:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Integration Verification Tests (GREEN Phase) › should verify cache invalidation integration works

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      164 |     );
      165 |
    > 166 |     await waitFor(() => {
          |                  ^
      167 |       expect(result.current.isSuccess).toBe(true);
      168 |     });
      169 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/integrationVerification.test.tsx:166:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Integration Verification Tests (GREEN Phase) › should verify error handling integration across layers

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      184 |     );
      185 |
    > 186 |     await waitFor(() => {
          |                  ^
      187 |       expect(result.current.isError).toBe(true);
      188 |     }, { timeout: 3000 });
      189 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/integrationVerification.test.tsx:186:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/__tests__/integration/analyticsIntegration.test.ts (10.028 s)
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Analytics Pipeline Integration Tests › Operational to Strategic Data Flow › should validate complete sales analytics pipeline

    expect(received).toBeGreaterThan(expected)

    Expected: > 0.95
    Received:   0

      78 |       const dataQuality = await validateDataQuality(rawSalesData, strategicMetrics);
      79 |       
    > 80 |       expect(dataQuality.completeness_score).toBeGreaterThan(0.95);
         |                                              ^
      81 |       expect(dataQuality.accuracy_score).toBeGreaterThan(0.98);
      82 |
      83 |       const pipelineTime = performance.now() - pipelineStart;

      at Object.toBeGreaterThan (src/__tests__/integration/analyticsIntegration.test.ts:80:46)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Analytics Pipeline Integration Tests › Real-Time Analytics Processing › should handle real-time inventory updates

    expect(received).toBeNull()

    Received: undefined

      256 |         .insert(inventoryMovement);
      257 |
    > 258 |       expect(movementError).toBeNull();
          |                             ^
      259 |
      260 |       // Step 2: Update inventory levels
      261 |       const { error: updateError } = await supabase

      at Object.toBeNull (src/__tests__/integration/analyticsIntegration.test.ts:258:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Analytics Pipeline Integration Tests › Cross-Role Analytics Integration › should provide role-specific analytics views

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      610 | function validateRoleDataAccess(role: string, analytics: any): void {
      611 |     // Validate that role has appropriate access
    > 612 |     expect(analytics.permissions.length).toBeGreaterThan(0);
          |                                          ^
      613 |   }
      614 |
      615 | async function getAnalyticsForRole(role: string): Promise<any> {

      at toBeGreaterThan (src/__tests__/integration/analyticsIntegration.test.ts:612:42)
      at Object.validateRoleDataAccess (src/__tests__/integration/analyticsIntegration.test.ts:310:9)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/role-based/__tests__/useUserRole.test.tsx (10.443 s)
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● useUserRole - Phase 1 › should fetch user role successfully

    expect(received).toEqual(expected) // deep equality

    Expected: {"createdAt": "2024-01-01T00:00:00Z", "id": "role-123", "isActive": true, "permissions": ["view_inventory"], "roleType": "inventory_staff", "updatedAt": "2024-01-01T00:00:00Z", "userId": "user-456"}
    Received: undefined

      92 |
      93 |     // Wait for hook to initialize and complete (race test pattern)
    > 94 |     await waitFor(() => {
         |                  ^
      95 |       expect(result.current.data).toEqual(mockRole);
      96 |       expect(result.current.isLoading).toBe(false);
      97 |     }, { timeout: 3000 });

      at Object.<anonymous> (src/hooks/role-based/__tests__/useUserRole.test.tsx:94:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useUserRole - Phase 1 › should handle user role not found

    expect(received).toBeNull()

    Received: undefined

      113 |     });
      114 |
    > 115 |     expect(result.current.data).toBeNull();
          |                                 ^
      116 |     expect(result.current.isLoading).toBe(false);
      117 |   });
      118 |

      at Object.toBeNull (src/hooks/role-based/__tests__/useUserRole.test.tsx:115:33)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useUserRole - Phase 1 › should use current user when no userId provided

    expect(received).toEqual(expected) // deep equality

    Expected: {"createdAt": "2024-01-01T00:00:00Z", "id": "role-current", "isActive": true, "permissions": [], "roleType": "admin", "updatedAt": "2024-01-01T00:00:00Z", "userId": "current-user-123"}
    Received: undefined

      139 |     });
      140 |
    > 141 |     expect(result.current.data).toEqual(mockRole);
          |                                 ^
      142 |     // Verify service was called with current user ID
      143 |     expect(mockRolePermissionService.getUserRole).toHaveBeenCalledWith('current-user-123');
      144 |   });

      at Object.toEqual (src/hooks/role-based/__tests__/useUserRole.test.tsx:141:33)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useUserRole - Phase 1 › should fetch with current user when no userId provided

    expect(received).toBe(expected) // Object.is equality

    Expected: "fetching"
    Received: undefined

      152 |
      153 |     // With current user mocked, the query should fetch
    > 154 |     expect(result.current.fetchStatus).toBe('fetching');
          |                                        ^
      155 |     expect(result.current.queryKey).toEqual(['roles', 'user', 'current-user-123']);
      156 |   });
      157 |

      at Object.toBe (src/hooks/role-based/__tests__/useUserRole.test.tsx:154:40)

  ● useUserRole - Phase 1 › should handle service errors gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      165 |     });
      166 |
    > 167 |     await waitFor(() => {
          |                  ^
      168 |       expect(result.current.isError).toBe(true);
      169 |     });
      170 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useUserRole.test.tsx:167:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useUserRole - Phase 1 › should cache results appropriately

    expect(received).toEqual(expected) // deep equality

    Expected: {"createdAt": "2024-01-01T00:00:00Z", "id": "role-123", "isActive": true, "permissions": [], "roleType": "marketing_staff", "updatedAt": "2024-01-01T00:00:00Z", "userId": "user-456"}
    Received: undefined

      207 |     });
      208 |
    > 209 |     expect(result.current.data).toEqual(mockRole);
          |                                 ^
      210 |
      211 |     // Clear mock calls
      212 |     jest.clearAllMocks();

      at Object.toEqual (src/hooks/role-based/__tests__/useUserRole.test.tsx:209:33)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useUserRole - Phase 1 › should retry network errors but not auth errors

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      229 |     });
      230 |
    > 231 |     await waitFor(() => {
          |                  ^
      232 |       expect(result.current.isError).toBe(true);
      233 |     });
      234 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useUserRole.test.tsx:231:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useUserRole - Phase 1 › should configure appropriate stale time for role data

    TypeError: queryClient.getQueryState is not a function

      245 |     // Role data should be considered fresh for 5 minutes (roles change infrequently)
      246 |     const queryData = queryClient.getQueryData(['roles', 'user', 'user-456']);
    > 247 |     const queryState = queryClient.getQueryState(['roles', 'user', 'user-456']);
          |                                    ^
      248 |     
      249 |     // This verifies the hook is configured with appropriate staletime
      250 |     expect(result.current).toBeDefined();

      at Object.getQueryState (src/hooks/role-based/__tests__/useUserRole.test.tsx:247:36)

  ● useUserRole - Phase 1 › should properly isolate different user roles

    expect(received).toEqual(expected) // deep equality

    Expected: {"createdAt": "2024-01-01T00:00:00Z", "id": "role-1", "isActive": true, "permissions": ["view_inventory"], "roleType": "inventory_staff", "updatedAt": "2024-01-01T00:00:00Z", "userId": "user-1"}
    Received: undefined

      304 |
      305 |     // Verify proper user isolation
    > 306 |     expect(result1.current.data).toEqual(user1Role);
          |                                  ^
      307 |     expect(result2.current.data).toEqual(user2Role);
      308 |     expect(result1.current.data?.roleType).toBe('inventory_staff');
      309 |     expect(result2.current.data?.roleType).toBe('marketing_staff');

      at Object.toEqual (src/hooks/role-based/__tests__/useUserRole.test.tsx:306:34)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/marketing/__tests__/useProductContent.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.error
      You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one.

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at popActScope (node_modules/react/cjs/react.development.js:828:17)
      at node_modules/react/cjs/react.development.js:1111:17

    console.error
      You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one.

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at popActScope (node_modules/react/cjs/react.development.js:828:17)
      at node_modules/react/cjs/react.development.js:1111:17

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useProductContent - Individual Content Fetching › should fetch single product content with transformation

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "content-1", "user-1"

    Number of calls: 0

      182 |
      183 |       expect(result.current.data).toEqual(mockContent);
    > 184 |       expect(mockProductContentService.getProductContent).toHaveBeenCalledWith('content-1', 'user-1');
          |                                                           ^
      185 |     });
      186 |
      187 |     it('should handle content not found gracefully', async () => {

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useProductContent.test.tsx:184:59)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useProductContent - Individual Content Fetching › should enforce role-based access control for content viewing

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "unauthorized-user", "content_management"

    Number of calls: 0

      235 |       });
      236 |
    > 237 |       expect(mockRolePermissionService.hasPermission).toHaveBeenCalledWith(
          |                                                       ^
      238 |         'unauthorized-user',
      239 |         'content_management'
      240 |       );

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useProductContent.test.tsx:237:55)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useProductContent - Individual Content Fetching › should handle concurrent content requests efficiently

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

      308 |       });
      309 |
    > 310 |       expect(mockProductContentService.getProductContent).toHaveBeenCalledTimes(2);
          |                                                           ^
      311 |     });
      312 |   });
      313 |

      at Object.toHaveBeenCalledTimes (src/hooks/marketing/__tests__/useProductContent.test.tsx:310:59)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useContentByStatus - Workflow State Filtering › should fetch content filtered by workflow status

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "draft", {"limit": 10, "page": 1}, "user-1"

    Number of calls: 0

      354 |
      355 |       expect(result.current.data).toEqual(mockContentList);
    > 356 |       expect(mockProductContentService.getContentByStatus).toHaveBeenCalledWith(
          |                                                            ^
      357 |         'draft',
      358 |         { page: 1, limit: 10 },
      359 |         'user-1'

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useProductContent.test.tsx:356:60)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useUpdateProductContent - Content Mutation with Optimistic Updates › should update product content with optimistic UI updates

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "content-1", {"contentStatus": "published", "marketingTitle": "Updated Title"}, "user-1"

    Number of calls: 0

      498 |       });
      499 |
    > 500 |       expect(mockProductContentService.updateProductContent).toHaveBeenCalledWith(
          |                                                              ^
      501 |         'content-1',
      502 |         updateData,
      503 |         'user-1'

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useProductContent.test.tsx:500:62)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useUpdateProductContent - Content Mutation with Optimistic Updates › should support batch content operations with progress tracking

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: [{"data": {"marketingTitle": "Updated 1"}, "id": "content-1"}, {"data": {"marketingTitle": "Updated 2"}, "id": "content-2"}], "user-1"

    Number of calls: 0

      616 |       });
      617 |
    > 618 |       expect(mockProductContentService.batchUpdateContent).toHaveBeenCalledWith(
          |                                                            ^
      619 |         batchUpdates,
      620 |         'user-1'
      621 |       );

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useProductContent.test.tsx:618:60)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useUploadContentImage - File Upload with Progress Tracking › should upload content image with progress callbacks

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      690 |       expect(progressUpdates).toHaveLength(2);
      691 |       expect(progressUpdates[1].percentage).toBe(100);
    > 692 |       expect(mockProductContentService.uploadContentImage).toHaveBeenCalled();
          |                                                            ^
      693 |     });
      694 |
      695 |     it('should validate file type and size constraints', async () => {

      at Object.toHaveBeenCalled (src/hooks/marketing/__tests__/useProductContent.test.tsx:692:60)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useUploadContentImage - File Upload with Progress Tracking › should support multiple concurrent uploads

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

      831 |       ]);
      832 |
    > 833 |       expect(mockProductContentService.uploadContentImage).toHaveBeenCalledTimes(2);
          |                                                            ^
      834 |     });
      835 |   });
      836 |

      at Object.toHaveBeenCalledTimes (src/hooks/marketing/__tests__/useProductContent.test.tsx:833:60)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useContentWorkflow - State Transition Management › should manage content workflow state transitions

    Can't access .root on unmounted test renderer

      858 |       } as any);
      859 |
    > 860 |       const { result } = renderHook(
          |                                    ^
      861 |         () => useContentWorkflow(),
      862 |         { wrapper: createWrapper() }
      863 |       );

      at Object.get [as root] (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14491:19)
      at root (node_modules/@testing-library/react-native/src/render.tsx:102:29)
      at buildRenderResult (node_modules/@testing-library/react-native/src/render.tsx:70:10)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductContent.test.tsx:860:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useContentWorkflow - State Transition Management › should validate workflow transition rules

    Can't access .root on unmounted test renderer

      895 |       } as any);
      896 |
    > 897 |       const { result } = renderHook(
          |                                    ^
      898 |         () => useContentWorkflow(),
      899 |         { wrapper: createWrapper() }
      900 |       );

      at Object.get [as root] (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14491:19)
      at root (node_modules/@testing-library/react-native/src/render.tsx:102:29)
      at buildRenderResult (node_modules/@testing-library/react-native/src/render.tsx:70:10)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductContent.test.tsx:897:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useContentWorkflow - State Transition Management › should support collaborative workflow with real-time updates

    Can't access .root on unmounted test renderer

      936 |       } as any);
      937 |
    > 938 |       const { result } = renderHook(
          |                                    ^
      939 |         () => useContentWorkflow(),
      940 |         { wrapper: createWrapper() }
      941 |       );

      at Object.get [as root] (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14491:19)
      at root (node_modules/@testing-library/react-native/src/render.tsx:102:29)
      at buildRenderResult (node_modules/@testing-library/react-native/src/render.tsx:70:10)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductContent.test.tsx:938:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useContentWorkflow - State Transition Management › should handle workflow conflicts in collaborative environments

    Can't access .root on unmounted test renderer

      962 |       } as any);
      963 |
    > 964 |       const { result } = renderHook(
          |                                    ^
      965 |         () => useContentWorkflow(),
      966 |         { wrapper: createWrapper() }
      967 |       );

      at Object.get [as root] (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14491:19)
      at root (node_modules/@testing-library/react-native/src/render.tsx:102:29)
      at buildRenderResult (node_modules/@testing-library/react-native/src/render.tsx:70:10)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductContent.test.tsx:964:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › Performance and Error Handling › should handle service timeouts gracefully

    Can't access .root on unmounted test renderer

      1001 |       } as any);
      1002 |
    > 1003 |       const { result } = renderHook(
           |                                    ^
      1004 |         () => useProductContent('content-1', 'user-1'),
      1005 |         { wrapper: createWrapper() }
      1006 |       );

      at Object.get [as root] (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14491:19)
      at root (node_modules/@testing-library/react-native/src/render.tsx:102:29)
      at buildRenderResult (node_modules/@testing-library/react-native/src/render.tsx:70:10)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductContent.test.tsx:1003:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › Performance and Error Handling › should implement proper error recovery strategies

    Can't access .root on unmounted test renderer

      1038 |       } as any);
      1039 |
    > 1040 |       const { result, rerender } = renderHook(
           |                                              ^
      1041 |         () => useProductContent('content-1', 'user-1'),
      1042 |         { wrapper: createWrapper() }
      1043 |       );

      at Object.get [as root] (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14491:19)
      at root (node_modules/@testing-library/react-native/src/render.tsx:102:29)
      at buildRenderResult (node_modules/@testing-library/react-native/src/render.tsx:70:10)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductContent.test.tsx:1040:46)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › Performance and Error Handling › should maintain performance targets for content operations

    Can't access .root on unmounted test renderer

      1074 |       } as any);
      1075 |
    > 1076 |       const { result } = renderHook(
           |                                    ^
      1077 |         () => useProductContent('content-1', 'user-1'),
      1078 |         { wrapper: createWrapper() }
      1079 |       );

      at Object.get [as root] (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14491:19)
      at root (node_modules/@testing-library/react-native/src/render.tsx:102:29)
      at buildRenderResult (node_modules/@testing-library/react-native/src/render.tsx:70:10)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductContent.test.tsx:1076:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/hooks/inventory/__tests__/useInventoryItems.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● useInventoryItems Hook Tests (RED Phase) › useInventoryItem › should fetch single inventory item with role-based filtering

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "123"

    Number of calls: 0

      116 |
      117 |       expect(result.current.data).toEqual(mockInventoryItem);
    > 118 |       expect(mockInventoryService.getInventoryItem).toHaveBeenCalledWith('123');
          |                                                     ^
      119 |     });
      120 |
      121 |     it('should handle null inventory ID gracefully', () => {

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useInventoryItems.test.tsx:118:53)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryItems Hook Tests (RED Phase) › useInventoryByProduct › should fetch inventory by product ID with user isolation

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "product-1"

    Number of calls: 0

      255 |
      256 |       expect(result.current.data).toEqual(mockInventory);
    > 257 |       expect(mockInventoryService.getInventoryByProduct).toHaveBeenCalledWith('product-1');
          |                                                          ^
      258 |     });
      259 |
      260 |     it('should handle null product ID', () => {

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useInventoryItems.test.tsx:257:58)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryItems Hook Tests (RED Phase) › useLowStockItems › should fetch low stock items with threshold filtering

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      349 |
      350 |       expect(result.current.data).toEqual(mockLowStockResult);
    > 351 |       expect(mockInventoryService.getLowStockItems).toHaveBeenCalled();
          |                                                     ^
      352 |     });
      353 |
      354 |     it('should auto-refresh low stock items every 5 minutes', () => {

      at Object.toHaveBeenCalled (src/hooks/inventory/__tests__/useInventoryItems.test.tsx:351:53)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/inventory/__tests__/useStockMovements.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● useStockMovements Hook Tests (RED Phase) › useMovementHistory › should fetch movement history with pagination and filtering

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"inventoryItemId": "123", "limit": 10, "offset": 0}

    Number of calls: 0

      122 |
      123 |       expect(result.current.data).toEqual(mockMovementHistory);
    > 124 |       expect(mockStockMovementService.getMovementHistory).toHaveBeenCalledWith({
          |                                                           ^
      125 |         inventoryItemId: '123',
      126 |         limit: 10,
      127 |         offset: 0

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useStockMovements.test.tsx:124:59)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useStockMovements Hook Tests (RED Phase) › useMovementHistory › should handle pagination correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"inventoryItemId": "123", "limit": 1, "offset": 0}

    Number of calls: 0

      172 |
      173 |       expect(result.current.data?.success).toHaveLength(1);
    > 174 |       expect(mockStockMovementService.getMovementHistory).toHaveBeenCalledWith({
          |                                                           ^
      175 |         inventoryItemId: '123',
      176 |         limit: 1,
      177 |         offset: 0

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useStockMovements.test.tsx:174:59)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useStockMovements Hook Tests (RED Phase) › useStockMovements (with filtering) › should fetch movements with filter criteria

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"endDate": "2024-01-02T00:00:00Z", "movementType": "sale", "startDate": "2024-01-01T00:00:00Z"}

    Number of calls: 0

      303 |
      304 |       expect(result.current.data).toEqual(mockFilteredMovements);
    > 305 |       expect(mockStockMovementService.getMovementsByFilter).toHaveBeenCalledWith({
          |                                                             ^
      306 |         movementType: 'sale',
      307 |         startDate: '2024-01-01T00:00:00Z',
      308 |         endDate: '2024-01-02T00:00:00Z'

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useStockMovements.test.tsx:305:61)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useStockMovements Hook Tests (RED Phase) › useRecordMovement › should record stock movement with complete audit trail

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"inventoryItemId": "123", "movementType": "sale", "newStock": 95, "performedBy": "staff-1", "previousStock": 100, "quantityChange": -5, "reason": "Customer order", "referenceOrderId": "order-456"}

    Number of calls: 0

      456 |       });
      457 |
    > 458 |       expect(mockStockMovementService.recordMovement).toHaveBeenCalledWith(movementInput);
          |                                                       ^
      459 |       expect(result.current.data).toEqual(mockRecordedMovement);
      460 |     });
      461 |

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useStockMovements.test.tsx:458:55)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useStockMovements Hook Tests (RED Phase) › useBatchMovements › should fetch movements by batch ID for bulk operation tracking

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "batch-123"

    Number of calls: 0

      610 |
      611 |       expect(result.current.data).toEqual(mockBatchMovements);
    > 612 |       expect(mockStockMovementService.getBatchMovements).toHaveBeenCalledWith('batch-123');
          |                                                          ^
      613 |     });
      614 |
      615 |     it('should handle empty batch results', async () => {

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useStockMovements.test.tsx:612:58)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useStockMovements Hook Tests (RED Phase) › useBatchMovements › should verify movements are ordered by performed_at

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 0
    Received array:  []

      690 |
      691 |       const movements = result.current.data?.success || [];
    > 692 |       expect(movements).toHaveLength(2);
          |                         ^
      693 |       
      694 |       // Verify chronological order
      695 |       if (movements.length >= 2) {

      at Object.toHaveLength (src/hooks/inventory/__tests__/useStockMovements.test.tsx:692:25)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useStockMovements Hook Tests (RED Phase) › useMovementAnalytics › should provide movement analytics with aggregations

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"endDate": "2024-01-31T23:59:59Z", "groupBy": "day", "startDate": "2024-01-01T00:00:00Z"}

    Number of calls: 0

      749 |
      750 |       expect(result.current.data).toEqual(mockAnalytics);
    > 751 |       expect(mockStockMovementService.getMovementAnalytics).toHaveBeenCalledWith({
          |                                                             ^
      752 |         startDate: '2024-01-01T00:00:00Z',
      753 |         endDate: '2024-01-31T23:59:59Z',
      754 |         groupBy: 'day'

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useStockMovements.test.tsx:751:61)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useStockMovements Hook Tests (RED Phase) › useMovementAnalytics › should handle different grouping options

    expect(received).toEqual(expected) // deep equality

    - Expected  -  6
    + Received  + 13

      Object {
        "success": Array [
          Object {
    -       "averageQuantity": 12.5,
    -       "impact": "neutral",
    -       "movementCount": 2,
    -       "movementType": "adjustment",
    -       "totalQuantity": 25,
    +       "averageQuantity": 50,
    +       "impact": "positive",
    +       "movementCount": 3,
    +       "movementType": "restock",
    +       "totalQuantity": 150,
    +     },
    +     Object {
    +       "averageQuantity": 15,
    +       "impact": "negative",
    +       "movementCount": 5,
    +       "movementType": "sale",
    +       "totalQuantity": 75,
          },
        ],
    -   "totalProcessed": 1,
    +   "totalProcessed": 2,
      }

      781 |       });
      782 |
    > 783 |       expect(result.current.data).toEqual(mockWeeklyAnalytics);
          |                                   ^
      784 |     });
      785 |
      786 |     it('should validate analytics data structure', async () => {

      at Object.toEqual (src/hooks/inventory/__tests__/useStockMovements.test.tsx:783:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx (15.606 s)
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● useNavigationPermissions Hook › single permission checks › should check permission for allowed screen

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      68 |       );
      69 |
    > 70 |       await waitFor(() => {
         |                    ^
      71 |         expect(result.current.allowed).toBe(true);
      72 |       });
      73 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:70:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useNavigationPermissions Hook › single permission checks › should check permission for denied screen

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      85 |       );
      86 |
    > 87 |       await waitFor(() => {
         |                    ^
      88 |         expect(result.current.allowed).toBe(false);
      89 |       });
      90 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:87:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useNavigationPermissions Hook › single permission checks › should handle permission check errors

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      101 |       );
      102 |
    > 103 |       await waitFor(() => {
          |                    ^
      104 |         expect(result.current.checked).toBe(true);
      105 |       });
      106 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:103:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useNavigationPermissions Hook › batch permission checks › should check permissions for multiple screens

    expect(received).toBe(expected) // Object.is equality

    Expected: 3
    Received: undefined

      128 |       );
      129 |
    > 130 |       await waitFor(() => {
          |                    ^
      131 |         expect(result.current.length).toBe(3);
      132 |       });
      133 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:130:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useNavigationPermissions Hook › batch permission checks › should handle mixed success/error in batch check

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: undefined

      169 |       );
      170 |
    > 171 |       await waitFor(() => {
          |                    ^
      172 |         expect(result.current.length).toBe(2);
      173 |       });
      174 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:171:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useNavigationPermissions Hook › caching behavior › should cache results when enabled

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      198 |       );
      199 |
    > 200 |       await waitFor(() => {
          |                    ^
      201 |         expect(result.current.allowed).toBe(true);
      202 |       });
      203 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:200:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useNavigationPermissions Hook › caching behavior › should not cache when caching is disabled

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      224 |       );
      225 |
    > 226 |       await waitFor(() => {
          |                    ^
      227 |         expect(result.current.allowed).toBe(true);
      228 |       });
      229 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:226:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useNavigationPermissions Hook › different user roles › should work with admin role

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      250 |       );
      251 |
    > 252 |       await waitFor(() => {
          |                    ^
      253 |         expect(result.current.allowed).toBe(true);
      254 |       });
      255 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:252:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useNavigationPermissions Hook › different user roles › should work with farmer role

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      273 |       );
      274 |
    > 275 |       await waitFor(() => {
          |                    ^
      276 |         expect(result.current.allowed).toBe(true);
      277 |       });
      278 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:275:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useNavigationPermissions Hook › loading and error states › should handle user role loading state

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      296 |       );
      297 |
    > 298 |       expect(result.current.checked).toBe(false);
          |                                      ^
      299 |       expect(result.current.allowed).toBe(false);
      300 |     });
      301 |

      at Object.toBe (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:298:38)

  ● useNavigationPermissions Hook › loading and error states › should handle missing user role

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      314 |       );
      315 |
    > 316 |       expect(result.current.checked).toBe(true);
          |                                      ^
      317 |       expect(result.current.allowed).toBe(false);
      318 |     });
      319 |   });

      at Object.toBe (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:316:38)

  ● useNavigationPermissions Hook › utility methods › should provide checkPermission method

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Object {
    -   "allowed": true,
    +   "allowed": false,
        "checked": true,
    -   "error": undefined,
    +   "error": "User role not available",
        "screen": "CartScreen",
      }

      333 |
      334 |       const permission = await result.current.checkPermission('CartScreen');
    > 335 |       expect(permission).toEqual({
          |                          ^
      336 |         screen: 'CartScreen',
      337 |         allowed: true,
      338 |         checked: true,

      at Object.toEqual (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:335:26)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useNavigationPermissions Hook › query key usage › should use user-specific query keys

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      351 |       );
      352 |
    > 353 |       await waitFor(() => {
          |                    ^
      354 |         expect(result.current.checked).toBe(true);
      355 |       });
      356 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:353:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/hooks/inventory/__tests__/integration/performance.test.tsx (15.964 s)
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Performance Integration Tests (RED Phase) › Large Dataset Handling › should handle 1000+ inventory items efficiently

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      124 |       );
      125 |
    > 126 |       await waitFor(() => {
          |                    ^
      127 |         expect(result.current.isSuccess).toBe(true);
      128 |       });
      129 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/performance.test.tsx:126:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration Tests (RED Phase) › Large Dataset Handling › should handle 10,000+ stock movements with pagination

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      157 |       );
      158 |
    > 159 |       await waitFor(() => {
          |                    ^
      160 |         expect(result.current.isSuccess).toBe(true);
      161 |       });
      162 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/performance.test.tsx:159:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration Tests (RED Phase) › Large Dataset Handling › should handle large low stock queries with filtering

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      187 |       );
      188 |
    > 189 |       await waitFor(() => {
          |                    ^
      190 |         expect(result.current.isSuccess).toBe(true);
      191 |       });
      192 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/performance.test.tsx:189:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration Tests (RED Phase) › Bulk Operation Performance › should handle bulk updates of 100+ items efficiently

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      236 |       });
      237 |
    > 238 |       await waitFor(() => {
          |                    ^
      239 |         expect(result.current.isSuccess).toBe(true);
      240 |       });
      241 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/performance.test.tsx:238:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Performance Integration Tests (RED Phase) › Bulk Operation Performance › should handle partial failures in large batch operations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      283 |       });
      284 |
    > 285 |       await waitFor(() => {
          |                    ^
      286 |         expect(result.current.isSuccess).toBe(true);
      287 |       });
      288 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/performance.test.tsx:285:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Performance Integration Tests (RED Phase) › Cache Efficiency › should efficiently invalidate related caches after bulk operations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      331 |       );
      332 |
    > 333 |       await waitFor(() => {
          |                    ^
      334 |         expect(lowStockResult.current.isSuccess).toBe(true);
      335 |       });
      336 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/performance.test.tsx:333:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration Tests (RED Phase) › Cache Efficiency › should handle complex query key invalidation patterns efficiently

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      380 |       );
      381 |
    > 382 |       await waitFor(() => {
          |                    ^
      383 |         expect(lowStockResult.current.isSuccess).toBe(true);
      384 |         expect(movementsResult.current.isSuccess).toBe(true);
      385 |       });

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/performance.test.tsx:382:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration Tests (RED Phase) › Memory Usage Validation › should maintain reasonable memory usage with large datasets

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      418 |
      419 |       // Wait for all to load
    > 420 |       await waitFor(() => {
          |                    ^
      421 |         hooks.forEach(hook => {
      422 |           expect(hook.current.isSuccess).toBe(true);
      423 |         });

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/performance.test.tsx:420:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration Tests (RED Phase) › Memory Usage Validation › should handle memory cleanup after component unmount

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      449 |       );
      450 |
    > 451 |       await waitFor(() => {
          |                    ^
      452 |         expect(result.current.isSuccess).toBe(true);
      453 |       });
      454 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/performance.test.tsx:451:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration Tests (RED Phase) › Analytics Performance › should handle complex analytics queries efficiently

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      501 |       );
      502 |
    > 503 |       await waitFor(() => {
          |                    ^
      504 |         expect(result.current.isSuccess).toBe(true);
      505 |       });
      506 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/performance.test.tsx:503:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/tests/allServices.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.log
      🔐 Starting login process for: test@example.com

      at Function.log (src/services/authService.ts:199:15)

    console.log
      🧹 Clearing any existing session...

      at Function.log (src/services/authService.ts:218:15)

    console.log
      ✅ No existing session found

      at Function.log (src/services/authService.ts:228:17)

    console.log
      🔑 Attempting Supabase authentication...

      at Function.log (src/services/authService.ts:235:15)

    console.log
      🔍 Supabase auth response user data: {
        "id": "user-123",
        "email": "test@example.com"
      }

      at Function.log (src/services/authService.ts:250:15)

    console.log
      🔍 Supabase auth response session data: {
        "access_token": "mock-access-token",
        "refresh_token": "mock-refresh-token"
      }

      at Function.log (src/services/authService.ts:251:15)

    console.warn
      Invalid Supabase session data: {
        error: '[\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "number",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "expires_in"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "token_type"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "object",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "user"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  }\n' +
          ']',
        invalidData: {
          access_token: 'mock-access-token',
          refresh_token: 'mock-refresh-token'
        }
      }

      418 |       return;
      419 |     }
    > 420 |     originalWarn(...args);
          |                 ^
      421 |   };
      422 |   
      423 |   console.error = (...args: any[]) => {

      at console.apply [as warn] (src/test/base-setup.ts:420:17)
      at warn (src/services/authService.ts:74:13)
      at Function.validateSupabaseSession (src/services/authService.ts:255:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      Login error: Error: Invalid session data received
          at validateSupabaseSession (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/authService.ts:78:11)
          at Function.validateSupabaseSession (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/authService.ts:255:32)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error (src/services/authService.ts:315:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.log
      🔐 Starting login process for: test@example.com

      at Function.log (src/services/authService.ts:199:15)

    console.log
      🧹 Clearing any existing session...

      at Function.log (src/services/authService.ts:218:15)

    console.log
      ✅ No existing session found

      at Function.log (src/services/authService.ts:228:17)

    console.log
      🔑 Attempting Supabase authentication...

      at Function.log (src/services/authService.ts:235:15)

    console.error
      Login error: Error: Invalid login credentials
          at Function.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/authService.ts:242:15)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error (src/services/authService.ts:315:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.log
      🚪 Starting simplified logout process...

      at Function.log (src/services/authService.ts:417:15)

    console.log
      ✅ Supabase session cleared

      at Function.log (src/services/authService.ts:424:17)

    console.log
      🧹 Starting simple token cleanup...

      at Function.log (src/services/tokenService.ts:104:15)

    console.log
      ✅ SecureStore cleanup completed

      at Function.log (src/services/tokenService.ts:112:17)

    console.log
      🧹 Local tokens cleared

      at Function.log (src/services/authService.ts:429:15)

    console.log
      🔐 Starting login process for: invalid-email

      at Function.log (src/services/authService.ts:199:15)

    console.error
      [VALIDATION_MONITOR] Validation error in ValidationPipeline.AuthService.login {
        timestamp: '2025-08-24T20:13:22.615Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ValidationPipeline.AuthService.login',
          errorMessage: 'email must be a valid email address',
          errorCode: 'INPUT_VALIDATION_FAILED',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/utils/validationPipeline.ts:98:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      Login error: Error: email must be a valid email address
          at Function.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/utils/validationPipeline.ts:435:13)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error (src/services/authService.ts:315:15)
          at Generator.throw (<anonymous>)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)

    console.log
      🛒 getCart() called - fetching from Supabase...

      at Object.log (src/services/cartService.ts:77:13)

    console.log
      👤 User auth status: authenticated

      at Object.log (src/services/cartService.ts:81:15)

    console.log
      📡 Fetching cart items from Supabase for user: user-123

      at Object.log (src/services/cartService.ts:89:15)

    console.log
      📊 Found 1 cart items

      at Object.log (src/services/cartService.ts:106:15)

    console.log
      🛍️ Fetching products for cart items: [ 'product-123' ]

      at Object.log (src/services/cartService.ts:110:15)

    console.error
      Error in getCart: TypeError: _supabase.supabase.from(...).select(...).in is not a function
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/cartService.ts:121:12)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Object.error (src/services/cartService.ts:207:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.log
      🛒 getCart() called - fetching from Supabase...

      at Object.log (src/services/cartService.ts:77:13)

    console.log
      👤 User auth status: not authenticated

      at Object.log (src/services/cartService.ts:81:15)

    console.log
      🚫 User not authenticated, returning empty cart

      at Object.log (src/services/cartService.ts:84:17)

    console.log
      📊 Checking stock for product: product-123

      at Object.log (src/services/cartService.ts:312:15)

    console.error
      Error in addItem: TypeError: _supabase.supabase.from(...).select(...).eq(...).eq is not a function
          at Object.eq (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/cartService.ts:318:10)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Object.error (src/services/cartService.ts:447:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.log
      📊 Checking stock for product: product-123

      at Object.log (src/services/cartService.ts:312:15)

    console.error
      Error in addItem: TypeError: _supabase.supabase.from(...).select(...).eq(...).eq is not a function
          at Object.eq (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/cartService.ts:318:10)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Object.error (src/services/cartService.ts:447:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.log
      🔄 Processing online payment for order total: 21.7

      at log (src/services/orderService.ts:380:15)

    console.log
      🔍 RPC result.order structure: {
        id: 'order-123',
        hasCustomerInfo: false,
        hasSubtotal: true,
        hasTotalAmount: false,
        keys: [
          'id',               'user_id',
          'customer_email',   'customer_name',
          'customer_phone',   'items',
          'subtotal',         'tax_amount',
          'total_amount',     'status',
          'fulfillment_type', 'payment_method',
          'payment_status',   'created_at',
          'updated_at'
        ],
        fullStructure: {
          id: 'order-123',
          user_id: 'user-123',
          customer_email: 'test@example.com',
          customer_name: 'Test User',
          customer_phone: '555-0123',
          items: [ [Object] ],
          subtotal: 20,
          tax_amount: 1.6,
          total_amount: 21.6,
          status: 'pending',
          fulfillment_type: 'pickup',
          payment_method: 'online',
          payment_status: 'paid',
          created_at: '2025-08-24T20:13:21.764Z',
          updated_at: '2025-08-24T20:13:21.764Z'
        }
      }

      at log (src/services/orderService.ts:430:13)

    console.log
      🔍 Calculated values for fallbacks: {
        subtotal: 20,
        tax: 1.7,
        total: 21.7,
        paymentStatus: 'paid',
        customerInfo: { name: 'Test User', email: 'test@example.com', phone: '555-0123' }
      }

      at log (src/services/orderService.ts:440:13)

    console.log
      🔍 Final orderObject before validation: {
        id: 'order-123',
        customer_name: 'Test User',
        customer_email: 'test@example.com',
        subtotal: 20,
        total_amount: 21.6,
        fulfillment_type: 'pickup',
        status: 'pending',
        allKeys: [
          'id',               'user_id',
          'customer_name',    'customer_email',
          'customer_phone',   'order_items',
          'subtotal',         'tax_amount',
          'total_amount',     'fulfillment_type',
          'status',           'payment_method',
          'payment_status',   'notes',
          'pickup_date',      'pickup_time',
          'delivery_address', 'special_instructions',
          'created_at',       'updated_at',
          'customerId',       'customerInfo',
          'items',            'tax',
          'total',            'fulfillmentType',
          'paymentMethod',    'paymentStatus',
          'pickupDate',       'pickupTime',
          'deliveryAddress',  'specialInstructions',
          'createdAt',        'updatedAt'
        ]
      }

      at log (src/services/orderService.ts:500:13)

    console.warn
      Failed to broadcast new order: TypeError: (0 , _typeMappers.getOrderCustomerId) is not a function
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/orderService.ts:532:35
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      418 |       return;
      419 |     }
    > 420 |     originalWarn(...args);
          |                 ^
      421 |   };
      422 |   
      423 |   console.error = (...args: any[]) => {

      at console.apply [as warn] (src/test/base-setup.ts:420:17)
      at warn (src/services/orderService.ts:541:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.log
      📧 Sending order confirmation notification for order: order-123

      at log (src/services/notificationService.ts:75:15)

    console.log
      📱 Push notification sent: {
        to: 'user-123',
        title: '✅ Order confirmed!',
        body: "Thank you Test User! Your order #er-123 has been confirmed. We'll notify you when it's ready for pickup. ",
        data: {
          orderId: 'order-123',
          pickupDate: undefined,
          pickupTime: undefined,
          total: 21.6
        }
      }

      at Function.log (src/services/notificationService.ts:161:15)

    console.log
      📧 Email notification sent: {
        to: 'test@example.com',
        subject: '✅ Order confirmed!',
        body: "Thank you Test User! Your order #er-123 has been confirmed. We'll notify you when it's ready for pickup. "
      }

      at Function.log (src/services/notificationService.ts:224:15)

    console.warn
      Failed to log notification: TypeError: _supabase.supabase.from(...).insert is not a function
          at Function.insert (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/notificationService.ts:323:10)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Function.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Function.apply [as logNotification] (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/notificationService.ts:313:39)
          at Function.logNotification (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/notificationService.ts:139:31)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      418 |       return;
      419 |     }
    > 420 |     originalWarn(...args);
          |                 ^
      421 |   };
      422 |   
      423 |   console.error = (...args: any[]) => {

      at console.apply [as warn] (src/test/base-setup.ts:420:17)
      at Function.warn (src/services/notificationService.ts:339:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Function.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Function.apply [as logNotification] (src/services/notificationService.ts:313:39)
      at Function.logNotification (src/services/notificationService.ts:139:31)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.log
      ✅ Order confirmation notification sent for order: order-123

      at log (src/services/orderService.ts:548:15)

    console.error
      Unexpected error in submitOrder: Error: Customer information is required
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/orderService.ts:325:13
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
          at apply (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/orderService.ts:318:25)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/tests/allServices.test.ts:460:39)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.then.completed (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/testWorker.js:106:12)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at error (src/services/orderService.ts:605:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/services/orderService.ts:318:25)
      at Object.<anonymous> (src/tests/allServices.test.ts:460:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.error
      Order not found: order-123

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at error (src/services/orderService.ts:640:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.warn
      ⚠️ Could not validate order order-123 after status update (likely validation issue), but status update succeeded

      418 |       return;
      419 |     }
    > 420 |     originalWarn(...args);
          |                 ^
      421 |   };
      422 |   
      423 |   console.error = (...args: any[]) => {

      at console.apply [as warn] (src/test/base-setup.ts:420:17)
      at warn (src/services/orderService.ts:766:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      Error in getProducts: TypeError: _supabase.supabase.from(...).select(...).in is not a function
          at ProductService.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/productService.ts:171:14)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at ProductService.error (src/services/productService.ts:205:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      Error in getProductById: TypeError: _supabase.supabase.from(...).select(...).eq(...).eq is not a function
          at ProductService.eq (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/productService.ts:289:10)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at ProductService.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at ProductService.apply [as getProductById] (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/productService.ts:276:23)
          at Object.getProductById (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/tests/allServices.test.ts:542:43)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.then.completed (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/testWorker.js:106:12)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at ProductService.error (src/services/productService.ts:339:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at ProductService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at ProductService.apply [as getProductById] (src/services/productService.ts:276:23)
      at Object.getProductById (src/tests/allServices.test.ts:542:43)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.error
      Error in searchProducts: TypeError: _supabase.supabase.from(...).select(...).in is not a function
          at ProductService.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/productService.ts:399:12)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at ProductService.error (src/services/productService.ts:371:15)
          at Generator.throw (<anonymous>)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)

    console.error
      ❌ Failed to send product broadcast: stock-updated TypeError: Cannot read properties of undefined (reading 'sendProductBroadcast')
          at Function.sendProductBroadcast (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/utils/broadcastHelper.ts:77:45)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Function.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Function.apply [as sendProductUpdate] (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/utils/broadcastHelper.ts:74:33)
          at ProductService.sendProductUpdate (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/productService.ts:503:31)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error (src/utils/broadcastHelper.ts:85:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Function.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Function.apply [as sendProductUpdate] (src/utils/broadcastHelper.ts:74:33)
      at ProductService.sendProductUpdate (src/services/productService.ts:503:31)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.warn
      Failed to broadcast product stock update: TypeError: Cannot read properties of undefined (reading 'sendProductBroadcast')
          at Function.sendProductBroadcast (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/utils/broadcastHelper.ts:77:45)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Function.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Function.apply [as sendProductUpdate] (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/utils/broadcastHelper.ts:74:33)
          at ProductService.sendProductUpdate (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/productService.ts:503:31)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      418 |       return;
      419 |     }
    > 420 |     originalWarn(...args);
          |                 ^
      421 |   };
      422 |   
      423 |   console.error = (...args: any[]) => {

      at console.apply [as warn] (src/test/base-setup.ts:420:17)
      at ProductService.warn (src/services/productService.ts:509:17)
          at Generator.throw (<anonymous>)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)

    console.log
      🧹 Starting simple token cleanup...

      at Function.log (src/services/tokenService.ts:104:15)

    console.log
      ✅ SecureStore cleanup completed

      at Function.log (src/services/tokenService.ts:112:17)

    console.log
      🚀 Setting up SECURE order updates broadcast subscriptions...

      at Function.log (src/services/realtimeService.ts:33:13)

    console.error
      ❌ Failed to set up secure user order subscription: TypeError: Cannot read properties of undefined (reading 'generateSecureChannelName')
          at Function.generateSecureChannelName (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/realtimeService.ts:50:54)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Function.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Function.apply [as subscribeToUserOrderChannel] (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/realtimeService.ts:47:51)
          at Function.subscribeToUserOrderChannel (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/realtimeService.ts:36:16)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error (src/services/realtimeService.ts:103:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Function.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Function.apply [as subscribeToUserOrderChannel] (src/services/realtimeService.ts:47:51)
      at Function.subscribeToUserOrderChannel (src/services/realtimeService.ts:36:16)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      ❌ Failed to set up secure product subscription: TypeError: Cannot read properties of undefined (reading 'generateSecureChannelName')
          at Function.generateSecureChannelName (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/realtimeService.ts:172:54)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Function.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Function.apply [as subscribeToProductUpdates] (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/realtimeService.ts:169:41)
          at Object.subscribeToProductUpdates (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/tests/allServices.test.ts:646:29)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.then.completed (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/testWorker.js:106:12)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error (src/services/realtimeService.ts:221:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Function.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Function.apply [as subscribeToProductUpdates] (src/services/realtimeService.ts:169:41)
      at Object.subscribeToProductUpdates (src/tests/allServices.test.ts:646:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.error
      ❌ Failed to set up secure cart subscription: TypeError: Cannot read properties of undefined (reading 'generateSecureChannelName')
          at Function.generateSecureChannelName (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/realtimeService.ts:239:54)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error (src/services/realtimeService.ts:307:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.log
      🚀 Initializing all SECURE broadcast subscriptions...

      at Function.log (src/services/realtimeService.ts:316:13)

    console.error
      ❌ Failed to set up secure product subscription: TypeError: Cannot read properties of undefined (reading 'generateSecureChannelName')
          at Function.generateSecureChannelName (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/realtimeService.ts:172:54)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Function.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Function.apply [as subscribeToProductUpdates] (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/realtimeService.ts:169:41)
          at Function.subscribeToProductUpdates (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/realtimeService.ts:322:14)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Function.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Function.apply [as initializeAllSubscriptions] (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/realtimeService.ts:315:42)
          at Object.initializeAllSubscriptions (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/tests/allServices.test.ts:666:29)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.then.completed (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/testWorker.js:106:12)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error (src/services/realtimeService.ts:221:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Function.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Function.apply [as subscribeToProductUpdates] (src/services/realtimeService.ts:169:41)
      at Function.subscribeToProductUpdates (src/services/realtimeService.ts:322:14)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Function.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Function.apply [as initializeAllSubscriptions] (src/services/realtimeService.ts:315:42)
      at Object.initializeAllSubscriptions (src/tests/allServices.test.ts:666:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.log
      🚀 Setting up SECURE order updates broadcast subscriptions...

      at Function.log (src/services/realtimeService.ts:33:13)

    console.error
      ❌ Failed to set up secure user order subscription: TypeError: Cannot read properties of undefined (reading 'generateSecureChannelName')
          at Function.generateSecureChannelName (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/realtimeService.ts:50:54)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Function.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Function.apply [as subscribeToUserOrderChannel] (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/realtimeService.ts:47:51)
          at Function.subscribeToUserOrderChannel (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/realtimeService.ts:36:16)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error (src/services/realtimeService.ts:103:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Function.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Function.apply [as subscribeToUserOrderChannel] (src/services/realtimeService.ts:47:51)
      at Function.subscribeToUserOrderChannel (src/services/realtimeService.ts:36:16)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      ❌ Failed to set up secure cart subscription: TypeError: Cannot read properties of undefined (reading 'generateSecureChannelName')
          at Function.generateSecureChannelName (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/realtimeService.ts:239:54)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error (src/services/realtimeService.ts:307:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.log
      ✅ All SECURE broadcast subscriptions initialized

      at Function.log (src/services/realtimeService.ts:327:15)

    console.log
      🔄 Starting stock restoration for order order-123, reason: order_cancelled

      at Function.log (src/services/stockRestorationService.ts:51:15)

    console.log
      Stock restoration event: {
        order_id: 'order-123',
        customer_email: 'test@example.com',
        restoration_reason: 'order_cancelled',
        items_restored: 1,
        items_failed: 0,
        restored_items_data: [
          {
            productId: 'product-123',
            productName: 'Test Product',
            quantityRestored: 2,
            newStockLevel: 7
          }
        ],
        failed_items_data: [],
        total_quantity_restored: 2,
        created_at: '2025-08-24T20:13:25.057Z'
      }

      at Function.log (src/services/stockRestorationService.ts:267:15)

    console.log
      ✅ Stock restoration completed: Stock restored for 1 items from order order-123

      at Function.log (src/services/stockRestorationService.ts:106:15)

    console.log
      🔄 Starting stock restoration for order order-123, reason: order_cancelled

      at Function.log (src/services/stockRestorationService.ts:51:15)

    console.log
      Stock restoration event: {
        order_id: 'order-123',
        customer_email: 'test@example.com',
        restoration_reason: 'order_cancelled',
        items_restored: 0,
        items_failed: 1,
        restored_items_data: [],
        failed_items_data: [
          {
            productId: 'product-123',
            productName: 'Test Product',
            quantity: 2,
            error: 'Product not found'
          }
        ],
        total_quantity_restored: 0,
        created_at: '2025-08-24T20:13:25.159Z'
      }

      at Function.log (src/services/stockRestorationService.ts:267:15)

    console.log
      ✅ Stock restoration completed: Failed to restore stock for order order-123

      at Function.log (src/services/stockRestorationService.ts:106:15)

    console.log
      🚨 Emergency stock restoration: 5 units for product product-123

      at Function.log (src/services/stockRestorationService.ts:310:15)

    console.log
      📊 Checking stock for product: product-123

      at Object.log (src/services/cartService.ts:312:15)

    console.error
      Error in addItem: TypeError: _supabase.supabase.from(...).select(...).eq(...).eq is not a function
          at Object.eq (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/cartService.ts:318:10)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Object.error (src/services/cartService.ts:447:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › AuthService › should login successfully with valid credentials

    Invalid session data received

      76 |       invalidData: session
      77 |     });
    > 78 |     throw new Error('Invalid session data received');
         |           ^
      79 |   }
      80 | };
      81 |

      at validateSupabaseSession (src/services/authService.ts:78:11)
      at Function.validateSupabaseSession (src/services/authService.ts:255:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › AuthService › should validate email format

    expect(received).rejects.toThrow(expected)

    Expected substring: "Please enter a valid email address"
    Received message:   "email must be a valid email address"

          433 |     if (!result.success) {
          434 |       const errorMessage = result.errors?.join('; ') || 'Validation failed';
        > 435 |       throw new Error(errorMessage);
              |             ^
          436 |     }
          437 |
          438 |     return result.data!;

      at Function.<anonymous> (src/utils/validationPipeline.ts:435:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (src/tests/allServices.test.ts:261:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● All Services Test Suite › CartService › should get cart for authenticated user

    TypeError: _supabase.supabase.from(...).select(...).in is not a function

      119 |           min_pre_order_quantity, max_pre_order_quantity, created_at, updated_at
      120 |         `)
    > 121 |         .in('id', productIds)
          |            ^
      122 |         .eq('is_available', true);
      123 |
      124 |       if (productsError) {

      at Object.<anonymous> (src/services/cartService.ts:121:12)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › CartService › should add item to cart successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      352 |       const result = await cartService.addItem(mockProduct, 2);
      353 |
    > 354 |       expect(result.success).toBe(true);
          |                              ^
      355 |       expect(supabase.rpc).toHaveBeenCalledWith('upsert_cart_item', {
      356 |         input_user_id: 'user-123',
      357 |         input_product_id: 'product-123',

      at Object.toBe (src/tests/allServices.test.ts:354:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › CartService › should handle insufficient stock

    expect(received).toContain(expected) // indexOf

    Expected substring: "Only 1 more items can be added"
    Received string:    "Failed to add item to cart. Please try again."

      391 |
      392 |       expect(result.success).toBe(false);
    > 393 |       expect(result.message).toContain('Only 1 more items can be added');
          |                              ^
      394 |     });
      395 |   });
      396 |

      at Object.toContain (src/tests/allServices.test.ts:393:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › OrderService › should validate required customer information

    expect(received).toBe(expected) // Object.is equality

    Expected: "Missing required customer information"
    Received: "Unexpected error: Customer information is required"

      461 |
      462 |       expect(result.success).toBe(false);
    > 463 |       expect(result.error).toBe('Missing required customer information');
          |                            ^
      464 |     });
      465 |
      466 |     it('should get order by ID', async () => {

      at Object.toBe (src/tests/allServices.test.ts:463:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › OrderService › should get order by ID

    expect(received).toBeTruthy()

    Received: null

      478 |       const order = await getOrder('order-123');
      479 |
    > 480 |       expect(order).toBeTruthy();
          |                     ^
      481 |       expect(order?.id).toBe('order-123');
      482 |     });
      483 |

      at Object.toBeTruthy (src/tests/allServices.test.ts:480:21)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › ProductService › should get all products

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      524 |       const result = await productService.getProducts();
      525 |
    > 526 |       expect(result.success).toBe(true);
          |                              ^
      527 |       expect(result.products).toHaveLength(1);
      528 |     });
      529 |

      at Object.toBe (src/tests/allServices.test.ts:526:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › ProductService › should get product by ID

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      542 |       const result = await productService.getProductById('product-123');
      543 |
    > 544 |       expect(result.success).toBe(true);
          |                              ^
      545 |       expect(result.product?.id).toBe('product-123');
      546 |     });
      547 |

      at Object.toBe (src/tests/allServices.test.ts:544:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › ProductService › should search products

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      564 |       const result = await productService.searchProducts('test');
      565 |
    > 566 |       expect(result.success).toBe(true);
          |                              ^
      567 |       expect(result.products).toHaveLength(1);
      568 |     });
      569 |

      at Object.toBe (src/tests/allServices.test.ts:566:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › RealtimeService › should subscribe to order updates

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      640 |       await RealtimeService.subscribeToOrderUpdates();
      641 |       
    > 642 |       expect(supabase.channel).toHaveBeenCalled();
          |                                ^
      643 |     });
      644 |
      645 |     it('should subscribe to product updates', async () => {

      at Object.toHaveBeenCalled (src/tests/allServices.test.ts:642:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › RealtimeService › should subscribe to product updates

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      646 |       await RealtimeService.subscribeToProductUpdates();
      647 |       
    > 648 |       expect(supabase.channel).toHaveBeenCalled();
          |                                ^
      649 |     });
      650 |
      651 |     it('should subscribe to cart updates', async () => {

      at Object.toHaveBeenCalled (src/tests/allServices.test.ts:648:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › RealtimeService › should subscribe to cart updates

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      656 |       await RealtimeService.subscribeToCartUpdates();
      657 |       
    > 658 |       expect(supabase.channel).toHaveBeenCalled();
          |                                ^
      659 |     });
      660 |
      661 |     it('should initialize all subscriptions', async () => {

      at Object.toHaveBeenCalled (src/tests/allServices.test.ts:658:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › RealtimeService › should initialize all subscriptions

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 3
    Received number of calls: 0

      666 |       await RealtimeService.initializeAllSubscriptions();
      667 |       
    > 668 |       expect(supabase.channel).toHaveBeenCalledTimes(3); // order, product, cart
          |                                ^
      669 |     });
      670 |
      671 |     it('should get subscription status', () => {

      at Object.toHaveBeenCalledTimes (src/tests/allServices.test.ts:668:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › Service Integration Tests › should handle cross-service workflows

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      775 |       // Add item to cart
      776 |       const cartResult = await cartService.addItem(mockProduct, 2);
    > 777 |       expect(cartResult.success).toBe(true);
          |                                  ^
      778 |
      779 |       // Submit order
      780 |       (supabase.rpc as jest.Mock).mockResolvedValue({

      at Object.toBe (src/tests/allServices.test.ts:777:34)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/executive/__tests__/useBusinessInsights.test.tsx (16.801 s)
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in undefined.undefined {
        timestamp: '2025-08-24T20:13:17.738Z',
        type: 'PATTERN_SUCCESS',
        details: {
          pattern: 'insight_generation_single',
          context: 'useInsightGeneration.generateInsightMutation',
          description: 'Successfully generated correlation insight',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in undefined.undefined {
        timestamp: '2025-08-24T20:13:17.856Z',
        type: 'PATTERN_SUCCESS',
        details: {
          pattern: 'insight_generation_single',
          context: 'useInsightGeneration.generateInsightMutation',
          description: 'Successfully generated correlation insight',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in undefined.undefined {
        timestamp: '2025-08-24T20:13:17.963Z',
        type: 'PATTERN_SUCCESS',
        details: {
          pattern: 'insight_generation_batch',
          context: 'useInsightGeneration.generateBatchMutation',
          description: 'Successfully generated 3 batch insights',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

  ● useBusinessInsights Hook - Phase 4.3 › useBusinessInsights › should fetch business insights with role-based filtering

    expect(received).toEqual(expected) // deep equality

    Expected: {"insights": [{"affectedAreas": ["inventory", "marketing"], "confidenceScore": 0.89, "id": "insight-1", "impactLevel": "high", "insightTitle": "Inventory-Marketing Correlation", "insightType": "correlation"}, {"affectedAreas": ["sales"], "confidenceScore": 0.75, "id": "insight-2", "impactLevel": "medium", "insightTitle": "Sales Trend Analysis", "insightType": "trend"}], "metadata": {"averageConfidence": 0.82, "generatedAt": "2024-01-15T10:00:00Z", "totalInsights": 2}}
    Received: undefined

      152 |       });
      153 |
    > 154 |       expect(result.current.data).toEqual(mockInsights);
          |                                   ^
      155 |       expect(result.current.data?.insights).toHaveLength(2);
      156 |       expect(result.current.data?.metadata.averageConfidence).toBe(0.82);
      157 |     });

      at Object.toEqual (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:154:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useBusinessInsights Hook - Phase 4.3 › useBusinessInsights › should filter insights by impact level

    expect(received).toEqual(expected) // deep equality

    Expected: [{"confidenceScore": 0.91, "id": "high-1", "impactLevel": "high"}, {"confidenceScore": 0.95, "id": "critical-1", "impactLevel": "critical"}]
    Received: undefined

      181 |       );
      182 |
    > 183 |       await waitFor(() => {
          |                    ^
      184 |         expect(result.current.data).toEqual(mockHighImpactInsights);
      185 |       });
      186 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:183:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › useBusinessInsights › should support real-time insight updates

    expect(received).toEqual(expected) // deep equality

    Expected: {"insights": [{"confidenceScore": 0.8, "id": "1"}]}
    Received: undefined

      201 |       );
      202 |
    > 203 |       await waitFor(() => {
          |                    ^
      204 |         expect(result.current.data).toEqual(mockInitialInsights);
      205 |       });
      206 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:203:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › useBusinessInsights › should handle insight recommendation actions

    expect(received).toEqual(expected) // deep equality

    Expected: [{"actions": ["Increase inventory levels", "Optimize marketing spend"], "insightId": "rec-1", "priorityScore": 8.5}]
    Received: undefined

      236 |       );
      237 |
    > 238 |       await waitFor(() => {
          |                    ^
      239 |         expect(result.current.recommendations).toEqual(mockRecommendations.recommendations);
      240 |       });
      241 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:238:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › useInsightGeneration › should generate automated insights with confidence scoring

    expect(received).toEqual(expected) // deep equality

    - Expected  - 8
    + Received  + 2

      Object {
    -   "confidenceScore": 0.87,
    -   "id": "gen-1",
    -   "insightType": "correlation",
    -   "statisticalSignificance": 0.001,
    -   "supportingData": Object {
    -     "correlationCoefficient": 0.82,
    -     "sampleSize": 150,
    -   },
    +   "confidenceScore": 0.8,
    +   "id": "1",
      }

      278 |       });
      279 |
    > 280 |       expect(result.current.generatedInsight).toEqual(mockGeneratedInsight);
          |                                               ^
      281 |       expect(result.current.generatedInsight?.statisticalSignificance).toBeLessThan(0.05);
      282 |     });
      283 |

      at Object.toEqual (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:280:47)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useBusinessInsights Hook - Phase 4.3 › useInsightGeneration › should handle insight generation failures gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"confidenceScore": 0.85, "id": "1"}

      295 |
      296 |       await act(async () => {
    > 297 |         await expect(result.current.generateInsight()).rejects.toThrow('Insufficient data');
          |               ^
      298 |       });
      299 |
      300 |       expect(result.current.generationError).toBeDefined();

      at expect (node_modules/expect/build/index.js:113:15)
      at expect (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:297:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at callback (node_modules/@testing-library/react-native/src/act.ts:31:24)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1081:22)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:296:16)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › useAnomalyDetection › should detect anomalies in business metrics with alerting

    expect(received).toEqual(expected) // deep equality

    Expected: [{"actualValue": 1800, "deviationScore": 3.5, "expectedValue": 1000, "insightId": "anomaly-1", "shouldAlert": true}]
    Received: undefined

      357 |       );
      358 |
    > 359 |       await waitFor(() => {
          |                    ^
      360 |         expect(result.current.anomalies).toEqual(mockAnomalies.anomalies);
      361 |       });
      362 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:359:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › useAnomalyDetection › should support real-time anomaly monitoring

    expect(received).toEqual(expected) // deep equality

    Expected: []
    Received: undefined

      384 |       );
      385 |
    > 386 |       await waitFor(() => {
          |                    ^
      387 |         expect(result.current.anomalies).toEqual([]);
      388 |       });
      389 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:386:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › useAnomalyDetection › should provide anomaly trend analysis

    expect(received).toEqual(expected) // deep equality

    Expected: {"anomalies": [{"count": 2, "date": "2024-01-01"}, {"count": 3, "date": "2024-01-02"}, {"count": 1, "date": "2024-01-03"}], "averagePerDay": 2, "trend": "decreasing"}
    Received: undefined

      421 |       );
      422 |
    > 423 |       await waitFor(() => {
          |                    ^
      424 |         expect(result.current.anomalyTrends).toEqual(mockAnomalyTrends);
      425 |       });
      426 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:423:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › Insight Lifecycle Management › should update insight status with lifecycle tracking

    TypeError: result.current.updateInsightStatus is not a function

      445 |
      446 |       await act(async () => {
    > 447 |         await result.current.updateInsightStatus('insight-1', { is_active: false });
          |                              ^
      448 |       });
      449 |
      450 |       expect(result.current.lastUpdatedInsight).toEqual(mockUpdatedInsight);

      at updateInsightStatus (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:447:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at callback (node_modules/@testing-library/react-native/src/act.ts:31:24)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1081:22)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:446:16)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › Insight Lifecycle Management › should track insight view and interaction metrics

    TypeError: result.current.markInsightViewed is not a function

      458 |
      459 |       await act(async () => {
    > 460 |         result.current.markInsightViewed('insight-1');
          |                        ^
      461 |         result.current.markInsightActioned('insight-1', 'recommendation_followed');
      462 |       });
      463 |

      at markInsightViewed (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:460:24)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at callback (node_modules/@testing-library/react-native/src/act.ts:31:24)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1081:22)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:459:16)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › Query Key Factory Integration › should extend query keys with insight-specific parameters

    expect(received).toEqual(expected) // deep equality

    - Expected  - 7
    + Received  + 0

      Array [
        "executive",
        "businessInsights",
    -   Object {
    -     "dateRange": "2024-01-01,2024-01-31",
    -     "impactFilter": Array [
    -       "high",
    -     ],
    -     "insightType": "correlation",
    -   },
      ]

      495 |       );
      496 |
    > 497 |       await waitFor(() => {
          |                    ^
      498 |         expect(result.current.queryKey).toEqual([
      499 |           'executive',
      500 |           'businessInsights',

      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:497:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › Cache Invalidation Strategies › should invalidate related insights when metrics update

    TypeError: result.current.invalidateRelatedInsights is not a function

      517 |
      518 |       await act(async () => {
    > 519 |         await result.current.invalidateRelatedInsights(['inventory', 'marketing']);
          |                              ^
      520 |       });
      521 |
      522 |       expect(queryClient.invalidateQueries).toHaveBeenCalledWith({

      at invalidateRelatedInsights (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:519:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at callback (node_modules/@testing-library/react-native/src/act.ts:31:24)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1081:22)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:518:16)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › Cache Invalidation Strategies › should implement smart cache warming for predictive insights

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      532 |       );
      533 |
    > 534 |       await waitFor(() => {
          |                    ^
      535 |         expect(result.current.isPrefetching).toBe(false);
      536 |       });
      537 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:534:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › Error Recovery and Resilience › should implement circuit breaker for repeated failures

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      556 |       );
      557 |
    > 558 |       await waitFor(() => {
          |                    ^
      559 |         expect(result.current.isError).toBe(true);
      560 |       });
      561 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:558:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › Error Recovery and Resilience › should provide fallback insights during outages

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      574 |       );
      575 |
    > 576 |       await waitFor(() => {
          |                    ^
      577 |         expect(result.current.isUsingFallback).toBe(true);
      578 |       });
      579 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:576:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/hooks/role-based/__tests__/useRoleNavigation.test.tsx (6.485 s)
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● useRoleNavigation Hook › generateMenuItems › should fetch menu items for current role

    expect(received).toEqual(expected) // deep equality

    - Expected  - 14
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "HomeScreen",
    -     "icon": "home",
    -     "name": "Home",
    -     "permissions": Array [],
    -   },
    -   Object {
    -     "component": "ProductsScreen",
    -     "icon": "shopping-bag",
    -     "name": "Products",
    -     "permissions": Array [],
    -   },
    - ]
    + Array []

      82 |       });
      83 |
    > 84 |       await waitFor(() => {
         |                    ^
      85 |         expect(result.current.menuItems).toEqual(mockMenuItems);
      86 |       });
      87 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:84:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleNavigation Hook › generateMenuItems › should handle menu generation errors

    expect(received).toBeTruthy()

    Received: null

      100 |       });
      101 |
    > 102 |       expect(result.current.menuError).toBeTruthy();
          |                                        ^
      103 |       expect(result.current.menuItems).toEqual([]);
      104 |     });
      105 |

      at Object.toBeTruthy (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:102:40)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useRoleNavigation Hook › generateMenuItems › should enable caching when specified

    expect(received).toEqual(expected) // deep equality

    - Expected  - 8
    + Received  + 1

    - Array [
    -   Object {
    -     "component": "HomeScreen",
    -     "icon": "home",
    -     "name": "Home",
    -     "permissions": Array [],
    -   },
    - ]
    + Array []

      115 |       });
      116 |
    > 117 |       await waitFor(() => {
          |                    ^
      118 |         expect(result.current.menuItems).toEqual(mockMenuItems);
      119 |       });
      120 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:117:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleNavigation Hook › navigation permissions › should check navigation permissions

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      136 |
      137 |       const canNavigate = await result.current.checkPermission('ProductsScreen');
    > 138 |       expect(canNavigate).toBe(true);
          |                           ^
      139 |       expect(mockRoleNavigationService.canNavigateTo).toHaveBeenCalledWith('customer', 'ProductsScreen');
      140 |     });
      141 |

      at Object.toBe (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:138:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useRoleNavigation Hook › navigation permissions › should get default screen for role

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "customer"

    Number of calls: 0

      153 |       const defaultScreen = await result.current.getDefaultScreen();
      154 |       expect(defaultScreen).toBe('HomeScreen');
    > 155 |       expect(mockRoleNavigationService.getDefaultScreen).toHaveBeenCalledWith('customer');
          |                                                          ^
      156 |     });
      157 |   });
      158 |

      at Object.toHaveBeenCalledWith (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:155:58)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useRoleNavigation Hook › deep link validation › should validate deep links

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 2

      Object {
    -   "isValid": true,
    -   "params": Object {
    -     "productId": "123",
    -   },
    -   "targetScreen": "ProductsScreen",
    +   "error": "User role not available",
    +   "isValid": false,
      }

      176 |
      177 |       const validation = await result.current.validateDeepLink('myfarmstand://products/123');
    > 178 |       expect(validation).toEqual(mockResult);
          |                          ^
      179 |       expect(mockRoleNavigationService.validateDeepLink).toHaveBeenCalledWith(
      180 |         'myfarmstand://products/123',
      181 |         'customer'

      at Object.toEqual (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:178:26)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useRoleNavigation Hook › navigation state management › should track navigation events

    expect(received).toBeDefined()

    Received: undefined

      190 |       });
      191 |
    > 192 |       await waitFor(() => {
          |                    ^
      193 |         expect(result.current.trackNavigation).toBeDefined();
      194 |       });
      195 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:192:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleNavigation Hook › navigation state management › should persist navigation state

    TypeError: result.current.navigateToScreen is not a function

      214 |
      215 |       // Simulate current state
    > 216 |       result.current.navigateToScreen('ProductsScreen');
          |                      ^
      217 |       
      218 |       await result.current.persistCurrentState();
      219 |

      at Object.navigateToScreen (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:216:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useRoleNavigation Hook › different user roles › should work with farmer role

    expect(received).toEqual(expected) // deep equality

    - Expected  - 8
    + Received  + 1

    - Array [
    -   Object {
    -     "component": "FarmerDashboard",
    -     "icon": "dashboard",
    -     "name": "Dashboard",
    -     "permissions": Array [],
    -   },
    - ]
    + Array []

      247 |       });
      248 |
    > 249 |       await waitFor(() => {
          |                    ^
      250 |         expect(result.current.menuItems).toEqual(mockFarmerMenuItems);
      251 |       });
      252 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:249:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleNavigation Hook › different user roles › should work with admin role

    expect(received).toEqual(expected) // deep equality

    - Expected  - 14
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "AdminDashboard",
    -     "icon": "admin-panel",
    -     "name": "Admin Dashboard",
    -     "permissions": Array [],
    -   },
    -   Object {
    -     "component": "UserManagementScreen",
    -     "icon": "people",
    -     "name": "Users",
    -     "permissions": Array [],
    -   },
    - ]
    + Array []

      274 |       });
      275 |
    > 276 |       await waitFor(() => {
          |                    ^
      277 |         expect(result.current.menuItems).toEqual(mockAdminMenuItems);
      278 |       });
      279 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:276:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleNavigation Hook › query key usage › should use centralized query key factory

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      331 |       // Verify that the hook is using navigationKeys from queryKeyFactory
      332 |       // This is implicit through the fact that the query works correctly
    > 333 |       expect(mockRoleNavigationService.generateMenuItems).toHaveBeenCalled();
          |                                                           ^
      334 |     });
      335 |   });
      336 | });

      at Object.toHaveBeenCalled (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:333:59)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/executive/__tests__/useStrategicReporting.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in undefined.undefined {
        timestamp: '2025-08-24T20:13:23.569Z',
        type: 'PATTERN_SUCCESS',
        details: {
          pattern: 'report_generation_single',
          context: 'useReportGeneration.generateReportMutation',
          description: 'Successfully generated operational_efficiency report',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.error
      [VALIDATION_MONITOR] Validation error in useReportGeneration.updateConfigurationMutation {
        timestamp: '2025-08-24T20:13:23.786Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'useReportGeneration.updateConfigurationMutation',
          errorCode: 'REPORT_CONFIGURATION_UPDATE_FAILED',
          validationPattern: 'report_generation_mutation',
          errorMessage: 'Invalid report configuration schema',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Object.recordValidationError [as onError] (src/hooks/executive/useReportGeneration.ts:120:25)
      at Mutation.execute (node_modules/@tanstack/query-core/src/mutation.ts:248:28)

  ● useStrategicReporting Hook - Phase 4.3 › useStrategicReporting › should generate comprehensive strategic reports with all data sources

    expect(received).toEqual(expected) // deep equality

    Expected: {"generatedAt": "2024-01-15T10:00:00Z", "performanceMetrics": {"generationTime": 1200}, "reportData": {"crossRoleAnalysis": {"correlationMatrix": {"inventory-marketing": 0.75, "marketing-sales": 0.82}}, "performanceTrends": {"keyMetrics": {"revenue_growth": 15.2}, "overallPerformance": "above_target"}, "predictiveInsights": {"demandForecast": {"confidence": 0.87, "nextMonth": 1250}}}, "reportMetadata": {"dataSourcesUsed": ["business_metrics", "predictive_forecasts"], "generatedAt": "2024-01-15T10:00:00Z", "reportId": "report-1", "reportType": "executive_summary"}}
    Received: undefined

      153 |       });
      154 |
    > 155 |       expect(result.current.reportData).toEqual(mockReport);
          |                                         ^
      156 |       expect(result.current.reportData?.reportMetadata.dataSourcesUsed).toContain('business_metrics');
      157 |       expect(result.current.reportData?.performanceMetrics.generationTime).toBeLessThan(5000);
      158 |     });

      at Object.toEqual (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:155:41)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useStrategicReporting Hook - Phase 4.3 › useStrategicReporting › should support scheduled report automation

    TypeError: result.current.scheduleReport is not a function

      183 |
      184 |       await act(async () => {
    > 185 |         await result.current.scheduleReport({
          |                              ^
      186 |           frequency: 'weekly',
      187 |           delivery_method: 'email',
      188 |           recipients: ['executive@example.com']

      at scheduleReport (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:185:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at callback (node_modules/@testing-library/react-native/src/act.ts:31:24)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1081:22)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at Object.<anonymous> (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:184:16)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useStrategicReporting Hook - Phase 4.3 › useStrategicReporting › should handle report export in multiple formats

    TypeError: result.current.exportReport is not a function

      220 |
      221 |       await act(async () => {
    > 222 |         await result.current.exportReport({
          |                              ^
      223 |           format: 'pdf',
      224 |           include_charts: true,
      225 |           optimize_for_size: true

      at exportReport (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:222:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at callback (node_modules/@testing-library/react-native/src/act.ts:31:24)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1081:22)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at Object.<anonymous> (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:221:16)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useStrategicReporting Hook - Phase 4.3 › useStrategicReporting › should apply role-based filtering to report data

    expect(received).toEqual(expected) // deep equality

    Expected: {"accessLevel": "inventory_staff", "availableMetrics": ["inventory_only", "inventory_turnover"], "formattedData": {"inventory_metrics": []}, "reportData": {"inventory_only": true}}
    Received: undefined

      258 |       );
      259 |
    > 260 |       await waitFor(() => {
          |                    ^
      261 |         expect(result.current.filteredData).toEqual(mockFilteredReport);
      262 |       });
      263 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:260:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useStrategicReporting Hook - Phase 4.3 › useReportGeneration › should generate dynamic reports with real-time data aggregation

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

    @@ -3,12 +3,12 @@
          "aggregationMethod": "time_series",
          "samplingRate": 0.95,
          "totalDataPoints": 5000,
        },
        "generationMetrics": Object {
    -     "endTime": "2024-01-15T10:00:00Z",
    +     "endTime": "2025-08-24T20:13:23.569Z",
          "processingTime": 60000,
    -     "startTime": "2024-01-15T09:59:00Z",
    +     "startTime": "2025-08-24T20:12:23.569Z",
        },
        "reportId": "gen-1",
        "reportType": "operational_efficiency",
      }

      313 |       });
      314 |
    > 315 |       expect(result.current.generatedReport).toEqual(mockGeneratedReport);
          |                                              ^
      316 |       expect(result.current.generatedReport?.dataAggregation.totalDataPoints).toBeGreaterThan(1000);
      317 |     });
      318 |

      at Object.toEqual (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:315:46)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useStrategicReporting Hook - Phase 4.3 › useReportScheduling › should schedule automated report delivery

    TypeError: allSchedules.filter is not a function

      124 |   // Calculate schedule summary
      125 |   const scheduleSummary = allSchedules ? {
    > 126 |     daily: allSchedules.filter((s: Schedule) => s.frequency === 'daily').length,
          |                         ^
      127 |     weekly: allSchedules.filter((s: Schedule) => s.frequency === 'weekly').length,
      128 |     monthly: allSchedules.filter((s: Schedule) => s.frequency === 'monthly').length
      129 |   } : undefined;

      at filter (src/hooks/executive/useReportScheduling.ts:126:25)
      at useReportScheduling (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:375:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:374:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useStrategicReporting Hook - Phase 4.3 › useReportScheduling › should manage multiple report schedules

    TypeError: allSchedules.filter is not a function

      124 |   // Calculate schedule summary
      125 |   const scheduleSummary = allSchedules ? {
    > 126 |     daily: allSchedules.filter((s: Schedule) => s.frequency === 'daily').length,
          |                         ^
      127 |     weekly: allSchedules.filter((s: Schedule) => s.frequency === 'weekly').length,
      128 |     monthly: allSchedules.filter((s: Schedule) => s.frequency === 'monthly').length
      129 |   } : undefined;

      at filter (src/hooks/executive/useReportScheduling.ts:126:25)
      at useReportScheduling (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:401:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:400:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useStrategicReporting Hook - Phase 4.3 › useReportScheduling › should handle schedule modifications with versioning

    TypeError: allSchedules.filter is not a function

      124 |   // Calculate schedule summary
      125 |   const scheduleSummary = allSchedules ? {
    > 126 |     daily: allSchedules.filter((s: Schedule) => s.frequency === 'daily').length,
          |                         ^
      127 |     weekly: allSchedules.filter((s: Schedule) => s.frequency === 'weekly').length,
      128 |     monthly: allSchedules.filter((s: Schedule) => s.frequency === 'monthly').length
      129 |   } : undefined;

      at filter (src/hooks/executive/useReportScheduling.ts:126:25)
      at useReportScheduling (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:429:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:428:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useStrategicReporting Hook - Phase 4.3 › Report Optimization and Performance › should optimize large report generation with compression

    TypeError: result.current.exportReport is not a function

      463 |
      464 |       await act(async () => {
    > 465 |         await result.current.exportReport({
          |                              ^
      466 |           format: 'pdf',
      467 |           compression: 'high',
      468 |           optimize_for_size: true

      at exportReport (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:465:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at callback (node_modules/@testing-library/react-native/src/act.ts:31:24)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1081:22)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at Object.<anonymous> (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:464:16)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useStrategicReporting Hook - Phase 4.3 › Report Optimization and Performance › should implement progressive report loading for better UX

    expect(received).toBe(expected) // Object.is equality

    Expected: "summary"
    Received: undefined

      497 |       );
      498 |
    > 499 |       await waitFor(() => {
          |                    ^
      500 |         expect(result.current.loadingPhase).toBe('summary');
      501 |       });
      502 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:499:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useStrategicReporting Hook - Phase 4.3 › Query Key Factory Integration › should use centralized query key factory for reports

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 0

      Array [
        "executive",
        "strategicReporting",
    -   "report-1",
      ]

      530 |       );
      531 |
    > 532 |       await waitFor(() => {
          |                    ^
      533 |         expect(result.current.queryKey).toEqual(['executive', 'strategicReporting', 'report-1']);
      534 |       });
      535 |     });

      at Object.<anonymous> (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:532:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/hooks/role-based/__tests__/useRoleMenu.test.tsx (18.16 s)
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● useRoleMenu Hook › basic menu functionality › should load menu items for current role

    expect(received).toEqual(expected) // deep equality

    - Expected  - 29
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "HomeScreen",
    -     "icon": "home",
    -     "name": "Home",
    -     "permissions": Array [
    -       "view:home",
    -     ],
    -     "priority": 1,
    -   },
    -   Object {
    -     "component": "ProductsScreen",
    -     "icon": "shopping-bag",
    -     "name": "Products",
    -     "permissions": Array [
    -       "view:products",
    -     ],
    -     "priority": 2,
    -   },
    -   Object {
    -     "component": "CartScreen",
    -     "icon": "shopping-cart",
    -     "name": "Cart",
    -     "permissions": Array [
    -       "manage:cart",
    -     ],
    -     "priority": 3,
    -   },
    - ]
    + Array []

      107 |       );
      108 |
    > 109 |       await waitFor(() => {
          |                    ^
      110 |         expect(result.current.menuItems).toEqual(mockMenuItems);
      111 |       });
      112 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:109:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › basic menu functionality › should handle menu loading states

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      124 |       );
      125 |
    > 126 |       expect(result.current.isLoading).toBe(true);
          |                                        ^
      127 |       expect(result.current.menuItems).toEqual([]);
      128 |     });
      129 |

      at Object.toBe (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:126:40)

  ● useRoleMenu Hook › basic menu functionality › should handle menu loading errors

    expect(received).toBeTruthy()

    Received: undefined

      140 |       });
      141 |
    > 142 |       expect(result.current.error).toBeTruthy();
          |                                    ^
      143 |       expect(result.current.menuItems).toEqual([]);
      144 |     });
      145 |   });

      at Object.toBeTruthy (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:142:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useRoleMenu Hook › permission filtering › should filter menu items by permissions when enabled

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 0
    Received array:  []

      159 |       );
      160 |
    > 161 |       await waitFor(() => {
          |                    ^
      162 |         expect(result.current.menuItems).toHaveLength(2);
      163 |       });
      164 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:161:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › permission filtering › should not filter when filterByPermissions is false

    expect(received).toHaveLength(expected)

    Expected length: 3
    Received length: 0
    Received array:  []

      182 |       );
      183 |
    > 184 |       await waitFor(() => {
          |                    ^
      185 |         expect(result.current.menuItems).toHaveLength(3);
      186 |       });
      187 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:184:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › menu customization › should save menu customization

    expect(received).toEqual(expected) // deep equality

    - Expected  - 29
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "HomeScreen",
    -     "icon": "home",
    -     "name": "Home",
    -     "permissions": Array [
    -       "view:home",
    -     ],
    -     "priority": 1,
    -   },
    -   Object {
    -     "component": "ProductsScreen",
    -     "icon": "shopping-bag",
    -     "name": "Products",
    -     "permissions": Array [
    -       "view:products",
    -     ],
    -     "priority": 2,
    -   },
    -   Object {
    -     "component": "CartScreen",
    -     "icon": "shopping-cart",
    -     "name": "Cart",
    -     "permissions": Array [
    -       "manage:cart",
    -     ],
    -     "priority": 3,
    -   },
    - ]
    + Array []

      197 |       );
      198 |
    > 199 |       await waitFor(() => {
          |                    ^
      200 |         expect(result.current.menuItems).toEqual(mockMenuItems);
      201 |       });
      202 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:199:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › menu customization › should handle customization save errors

    expect(received).toEqual(expected) // deep equality

    - Expected  - 29
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "HomeScreen",
    -     "icon": "home",
    -     "name": "Home",
    -     "permissions": Array [
    -       "view:home",
    -     ],
    -     "priority": 1,
    -   },
    -   Object {
    -     "component": "ProductsScreen",
    -     "icon": "shopping-bag",
    -     "name": "Products",
    -     "permissions": Array [
    -       "view:products",
    -     ],
    -     "priority": 2,
    -   },
    -   Object {
    -     "component": "CartScreen",
    -     "icon": "shopping-cart",
    -     "name": "Cart",
    -     "permissions": Array [
    -       "manage:cart",
    -     ],
    -     "priority": 3,
    -   },
    - ]
    + Array []

      220 |       );
      221 |
    > 222 |       await waitFor(() => {
          |                    ^
      223 |         expect(result.current.menuItems).toEqual(mockMenuItems);
      224 |       });
      225 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:222:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › menu refresh functionality › should refresh menu items

    expect(received).toEqual(expected) // deep equality

    - Expected  - 29
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "HomeScreen",
    -     "icon": "home",
    -     "name": "Home",
    -     "permissions": Array [
    -       "view:home",
    -     ],
    -     "priority": 1,
    -   },
    -   Object {
    -     "component": "ProductsScreen",
    -     "icon": "shopping-bag",
    -     "name": "Products",
    -     "permissions": Array [
    -       "view:products",
    -     ],
    -     "priority": 2,
    -   },
    -   Object {
    -     "component": "CartScreen",
    -     "icon": "shopping-cart",
    -     "name": "Cart",
    -     "permissions": Array [
    -       "manage:cart",
    -     ],
    -     "priority": 3,
    -   },
    - ]
    + Array []

      246 |       );
      247 |
    > 248 |       await waitFor(() => {
          |                    ^
      249 |         expect(result.current.menuItems).toEqual(mockMenuItems);
      250 |       });
      251 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:248:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › menu refresh functionality › should increment refresh trigger on refresh

    expect(received).toEqual(expected) // deep equality

    - Expected  - 29
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "HomeScreen",
    -     "icon": "home",
    -     "name": "Home",
    -     "permissions": Array [
    -       "view:home",
    -     ],
    -     "priority": 1,
    -   },
    -   Object {
    -     "component": "ProductsScreen",
    -     "icon": "shopping-bag",
    -     "name": "Products",
    -     "permissions": Array [
    -       "view:products",
    -     ],
    -     "priority": 2,
    -   },
    -   Object {
    -     "component": "CartScreen",
    -     "icon": "shopping-cart",
    -     "name": "Cart",
    -     "permissions": Array [
    -       "manage:cart",
    -     ],
    -     "priority": 3,
    -   },
    - ]
    + Array []

      268 |       );
      269 |
    > 270 |       await waitFor(() => {
          |                    ^
      271 |         expect(result.current.menuItems).toEqual(mockMenuItems);
      272 |       });
      273 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:270:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › different user roles › should work with farmer role

    expect(received).toEqual(expected) // deep equality

    - Expected  - 14
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "FarmerDashboard",
    -     "icon": "dashboard",
    -     "name": "Dashboard",
    -     "permissions": Array [],
    -   },
    -   Object {
    -     "component": "ProductManagementScreen",
    -     "icon": "inventory",
    -     "name": "Products",
    -     "permissions": Array [],
    -   },
    - ]
    + Array []

      308 |       );
      309 |
    > 310 |       await waitFor(() => {
          |                    ^
      311 |         expect(result.current.menuItems).toEqual(farmerMenuItems);
      312 |       });
      313 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:310:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › different user roles › should work with admin role

    expect(received).toEqual(expected) // deep equality

    - Expected  - 20
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "AdminDashboard",
    -     "icon": "admin-panel",
    -     "name": "Admin Dashboard",
    -     "permissions": Array [],
    -   },
    -   Object {
    -     "component": "UserManagementScreen",
    -     "icon": "people",
    -     "name": "Users",
    -     "permissions": Array [],
    -   },
    -   Object {
    -     "component": "SystemSettingsScreen",
    -     "icon": "settings",
    -     "name": "Settings",
    -     "permissions": Array [],
    -   },
    - ]
    + Array []

      342 |       );
      343 |
    > 344 |       await waitFor(() => {
          |                    ^
      345 |         expect(result.current.menuItems).toEqual(adminMenuItems);
      346 |       });
      347 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:344:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › caching behavior › should use caching when specified

    expect(received).toEqual(expected) // deep equality

    - Expected  - 29
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "HomeScreen",
    -     "icon": "home",
    -     "name": "Home",
    -     "permissions": Array [
    -       "view:home",
    -     ],
    -     "priority": 1,
    -   },
    -   Object {
    -     "component": "ProductsScreen",
    -     "icon": "shopping-bag",
    -     "name": "Products",
    -     "permissions": Array [
    -       "view:products",
    -     ],
    -     "priority": 2,
    -   },
    -   Object {
    -     "component": "CartScreen",
    -     "icon": "shopping-cart",
    -     "name": "Cart",
    -     "permissions": Array [
    -       "manage:cart",
    -     ],
    -     "priority": 3,
    -   },
    - ]
    + Array []

      357 |       );
      358 |
    > 359 |       await waitFor(() => {
          |                    ^
      360 |         expect(result.current.menuItems).toEqual(mockMenuItems);
      361 |       });
      362 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:359:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › caching behavior › should disable caching when timeout is 0

    expect(received).toEqual(expected) // deep equality

    - Expected  - 29
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "HomeScreen",
    -     "icon": "home",
    -     "name": "Home",
    -     "permissions": Array [
    -       "view:home",
    -     ],
    -     "priority": 1,
    -   },
    -   Object {
    -     "component": "ProductsScreen",
    -     "icon": "shopping-bag",
    -     "name": "Products",
    -     "permissions": Array [
    -       "view:products",
    -     ],
    -     "priority": 2,
    -   },
    -   Object {
    -     "component": "CartScreen",
    -     "icon": "shopping-cart",
    -     "name": "Cart",
    -     "permissions": Array [
    -       "manage:cart",
    -     ],
    -     "priority": 3,
    -   },
    - ]
    + Array []

      370 |       );
      371 |
    > 372 |       await waitFor(() => {
          |                    ^
      373 |         expect(result.current.menuItems).toEqual(mockMenuItems);
      374 |       });
      375 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:372:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › query key usage › should use centralized query key factory

    expect(received).toEqual(expected) // deep equality

    - Expected  - 29
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "HomeScreen",
    -     "icon": "home",
    -     "name": "Home",
    -     "permissions": Array [
    -       "view:home",
    -     ],
    -     "priority": 1,
    -   },
    -   Object {
    -     "component": "ProductsScreen",
    -     "icon": "shopping-bag",
    -     "name": "Products",
    -     "permissions": Array [
    -       "view:products",
    -     ],
    -     "priority": 2,
    -   },
    -   Object {
    -     "component": "CartScreen",
    -     "icon": "shopping-cart",
    -     "name": "Cart",
    -     "permissions": Array [
    -       "manage:cart",
    -     ],
    -     "priority": 3,
    -   },
    - ]
    + Array []

      425 |       );
      426 |
    > 427 |       await waitFor(() => {
          |                    ^
      428 |         expect(result.current.menuItems).toEqual(mockMenuItems);
      429 |       });
      430 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:427:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/hooks/inventory/__tests__/useInventoryOperations.test.tsx (8.025 s)
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● useInventoryOperations Hook Tests (RED Phase) › useUpdateStock › should update stock with optimistic updates

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "123", {"currentStock": 75, "performedBy": "user-123", "reason": "Manual adjustment"}

    Number of calls: 0

      130 |       });
      131 |
    > 132 |       expect(mockInventoryService.updateStock).toHaveBeenCalledWith('123', stockUpdate);
          |                                                ^
      133 |     });
      134 |
      135 |     it('should handle stock update with atomic operation and audit trail', async () => {

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:132:48)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › useUpdateStock › should rollback optimistic updates on error

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      208 |       });
      209 |
    > 210 |       await waitFor(() => {
          |                    ^
      211 |         expect(result.current.isError).toBe(true);
      212 |       });
      213 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:210:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › useUpdateVisibility › should update product visibility with role-based access control

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "123", {"isActive": true, "isVisibleToCustomers": false}

    Number of calls: 0

      291 |       });
      292 |
    > 293 |       expect(mockInventoryService.toggleProductVisibility).toHaveBeenCalledWith('123', visibilityUpdate);
          |                                                            ^
      294 |       expect(result.current.data).toEqual(mockUpdatedItem);
      295 |     });
      296 |

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:293:60)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › useUpdateVisibility › should handle visibility update optimistic updates

    expect(received).toEqual(expected) // deep equality

    - Expected  - 3
    + Received  + 3

    @@ -1,13 +1,13 @@
      Object {
        "availableStock": 90,
        "createdAt": "2024-01-01T00:00:00Z",
        "currentStock": 100,
        "id": "123",
    -   "isActive": false,
    -   "isVisibleToCustomers": false,
    -   "lastStockUpdate": "2024-01-01T00:00:00Z",
    +   "isActive": true,
    +   "isVisibleToCustomers": true,
    +   "lastStockUpdate": "2024-01-01T12:00:00Z",
        "maximumThreshold": 500,
        "minimumThreshold": 15,
        "productId": "product-1",
        "reservedStock": 10,
        "updatedAt": "2024-01-01T12:00:00Z",

      329 |       });
      330 |
    > 331 |       expect(result.current.data).toEqual(mockUpdatedItem);
          |                                   ^
      332 |     });
      333 |
      334 |     it('should handle visibility update errors gracefully', async () => {

      at Object.toEqual (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:331:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › useUpdateVisibility › should handle visibility update errors gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      348 |       });
      349 |
    > 350 |       await waitFor(() => {
          |                    ^
      351 |         expect(result.current.isError).toBe(true);
      352 |       });
      353 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:350:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › useBatchUpdateStock › should handle batch stock updates with resilient processing

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: [{"currentStock": 150, "inventoryItemId": "123", "reason": "Bulk restock"}]

    Number of calls: 0

      402 |       });
      403 |
    > 404 |       expect(mockInventoryService.batchUpdateStock).toHaveBeenCalledWith(batchUpdates);
          |                                                     ^
      405 |       expect(result.current.data).toEqual(mockBatchResult);
      406 |     });
      407 |

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:404:53)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › useBatchUpdateStock › should handle partial failures in batch processing

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: undefined

      450 |       });
      451 |
    > 452 |       expect(result.current.data?.success).toHaveLength(1);
          |                                            ^
      453 |       expect(result.current.data?.errors).toHaveLength(1);
      454 |       expect(result.current.data?.totalProcessed).toBe(1);
      455 |     });

      at Object.toHaveLength (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:452:44)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › useBatchUpdateStock › should handle complete batch failure gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      470 |       });
      471 |
    > 472 |       await waitFor(() => {
          |                    ^
      473 |         expect(result.current.isError).toBe(true);
      474 |       });
      475 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:472:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › useBatchUpdateStock › should provide progress tracking for batch operations

    expect(received).toHaveProperty(path)

    Expected path: "isPending"
    Received path: []

    Received value: {"data": {"availableStock": 90, "createdAt": "2024-01-01T00:00:00Z", "currentStock": 100, "id": "123", "isActive": true, "isVisibleToCustomers": true, "lastStockUpdate": "2024-01-01T12:00:00Z", "maximumThreshold": 500, "minimumThreshold": 15, "productId": "product-1", "reservedStock": 10, "updatedAt": "2024-01-01T12:00:00Z"}, "error": null, "isError": false, "isIdle": false, "isLoading": false, "isSuccess": true, "mutate": [Function mockConstructor], "mutateAsync": [Function mockConstructor]}

      484 |
      485 |       // Should provide loading states for progress tracking
    > 486 |       expect(result.current).toHaveProperty('isPending');
          |                              ^
      487 |       expect(result.current).toHaveProperty('isSuccess');
      488 |       expect(result.current).toHaveProperty('isError');
      489 |     });

      at Object.toHaveProperty (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:486:30)

  ● useInventoryOperations Hook Tests (RED Phase) › useCreateInventoryItem › should create inventory item with input validation

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"currentStock": 100, "isActive": true, "isVisibleToCustomers": true, "maximumThreshold": 500, "minimumThreshold": 10, "productId": "new-product", "reservedStock": 0}

    Number of calls: 0

      532 |       });
      533 |
    > 534 |       expect(mockInventoryService.createInventoryItem).toHaveBeenCalledWith(createInput);
          |                                                        ^
      535 |       expect(result.current.data).toEqual(mockCreatedItem);
      536 |     });
      537 |

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:534:56)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › useCreateInventoryItem › should handle creation errors with validation failures

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      555 |       });
      556 |
    > 557 |       await waitFor(() => {
          |                    ^
      558 |         expect(result.current.isError).toBe(true);
      559 |       });
      560 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:557:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › useCreateInventoryItem › should update cache after successful creation

    expect(received).toEqual(expected) // deep equality

    - Expected  - 8
    + Received  + 8

      Object {
    -   "availableStock": 45,
    -   "createdAt": "2024-01-01T12:00:00Z",
    -   "currentStock": 50,
    -   "id": "789",
    +   "availableStock": 90,
    +   "createdAt": "2024-01-01T00:00:00Z",
    +   "currentStock": 100,
    +   "id": "123",
        "isActive": true,
        "isVisibleToCustomers": true,
        "lastStockUpdate": "2024-01-01T12:00:00Z",
    -   "maximumThreshold": 200,
    -   "minimumThreshold": 10,
    -   "productId": "new-product",
    -   "reservedStock": 5,
    +   "maximumThreshold": 500,
    +   "minimumThreshold": 15,
    +   "productId": "product-1",
    +   "reservedStock": 10,
        "updatedAt": "2024-01-01T12:00:00Z",
      }

      599 |       });
      600 |
    > 601 |       expect(result.current.data).toEqual(mockCreatedItem);
          |                                   ^
      602 |     });
      603 |   });
      604 |

      at Object.toEqual (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:601:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › Error Handling and Recovery › should provide comprehensive error states

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      620 |       });
      621 |
    > 622 |       await waitFor(() => {
          |                    ^
      623 |         expect(result.current.isError).toBe(true);
      624 |       });
      625 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:622:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › Error Handling and Recovery › should allow retry after errors

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      660 |       });
      661 |
    > 662 |       await waitFor(() => {
          |                    ^
      663 |         expect(result.current.isError).toBe(true);
      664 |       });
      665 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:662:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useMarketingCampaigns - Campaign Listing with Role-based Filtering › should fetch campaigns with role-based access control

    TypeError: Cannot read properties of undefined (reading 'byStatusPaginated')

      88 |
      89 |   return useQuery({
    > 90 |     queryKey: campaignKeys.byStatusPaginated(status, pagination),
         |                            ^
      91 |     queryFn: async (): Promise<PaginatedResponse<MarketingCampaignTransform>> => {
      92 |       if (!effectiveUserId) {
      93 |         throw new Error('Authentication required for campaign access');

      at byStatusPaginated (src/hooks/marketing/useMarketingCampaigns.ts:90:28)
      at useMarketingCampaigns (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:189:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:188:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useMarketingCampaigns - Campaign Listing with Role-based Filtering › should handle unauthorized access to campaign data

    TypeError: Cannot read properties of undefined (reading 'byStatusPaginated')

      88 |
      89 |   return useQuery({
    > 90 |     queryKey: campaignKeys.byStatusPaginated(status, pagination),
         |                            ^
      91 |     queryFn: async (): Promise<PaginatedResponse<MarketingCampaignTransform>> => {
      92 |       if (!effectiveUserId) {
      93 |         throw new Error('Authentication required for campaign access');

      at byStatusPaginated (src/hooks/marketing/useMarketingCampaigns.ts:90:28)
      at useMarketingCampaigns (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:219:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:218:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useMarketingCampaigns - Campaign Listing with Role-based Filtering › should support campaign status filtering

    TypeError: Cannot read properties of undefined (reading 'byStatusPaginated')

      88 |
      89 |   return useQuery({
    > 90 |     queryKey: campaignKeys.byStatusPaginated(status, pagination),
         |                            ^
      91 |     queryFn: async (): Promise<PaginatedResponse<MarketingCampaignTransform>> => {
      92 |       if (!effectiveUserId) {
      93 |         throw new Error('Authentication required for campaign access');

      at byStatusPaginated (src/hooks/marketing/useMarketingCampaigns.ts:90:28)
      at useMarketingCampaigns (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:261:17)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at _loop (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:260:38)
          at _loop.next (<anonymous>)
      at Object._loop (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:236:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useMarketingCampaigns - Campaign Listing with Role-based Filtering › should handle pagination for large campaign datasets

    TypeError: Cannot read properties of undefined (reading 'byStatusPaginated')

      88 |
      89 |   return useQuery({
    > 90 |     queryKey: campaignKeys.byStatusPaginated(status, pagination),
         |                            ^
      91 |     queryFn: async (): Promise<PaginatedResponse<MarketingCampaignTransform>> => {
      92 |       if (!effectiveUserId) {
      93 |         throw new Error('Authentication required for campaign access');

      at byStatusPaginated (src/hooks/marketing/useMarketingCampaigns.ts:90:28)
      at useMarketingCampaigns (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:302:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:301:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useMarketingCampaigns - Campaign Listing with Role-based Filtering › should use centralized query key factory for campaigns

    TypeError: Cannot read properties of undefined (reading 'byStatusPaginated')

      88 |
      89 |   return useQuery({
    > 90 |     queryKey: campaignKeys.byStatusPaginated(status, pagination),
         |                            ^
      91 |     queryFn: async (): Promise<PaginatedResponse<MarketingCampaignTransform>> => {
      92 |       if (!effectiveUserId) {
      93 |         throw new Error('Authentication required for campaign access');

      at byStatusPaginated (src/hooks/marketing/useMarketingCampaigns.ts:90:28)
      at useMarketingCampaigns (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:334:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:333:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useCampaignPerformance - Analytics and Metrics Aggregation › should fetch campaign performance metrics with aggregation

    TypeError: Cannot read properties of undefined (reading 'performance')

      142 | export function useCampaignPerformance(campaignId: string) {
      143 |   return useQuery({
    > 144 |     queryKey: campaignKeys.performance(campaignId),
          |                            ^
      145 |     queryFn: async (): Promise<CampaignPerformanceResponse> => {
      146 |       const result = await MarketingCampaignService.getCampaignPerformance(campaignId);
      147 |       

      at performance (src/hooks/marketing/useMarketingCampaigns.ts:144:28)
      at useCampaignPerformance (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:382:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:381:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useCampaignPerformance - Analytics and Metrics Aggregation › should handle campaigns with no performance data

    TypeError: Cannot read properties of undefined (reading 'performance')

      142 | export function useCampaignPerformance(campaignId: string) {
      143 |   return useQuery({
    > 144 |     queryKey: campaignKeys.performance(campaignId),
          |                            ^
      145 |     queryFn: async (): Promise<CampaignPerformanceResponse> => {
      146 |       const result = await MarketingCampaignService.getCampaignPerformance(campaignId);
      147 |       

      at performance (src/hooks/marketing/useMarketingCampaigns.ts:144:28)
      at useCampaignPerformance (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:431:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:430:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useCampaignPerformance - Analytics and Metrics Aggregation › should support real-time performance updates

    TypeError: Cannot read properties of undefined (reading 'performance')

      142 | export function useCampaignPerformance(campaignId: string) {
      143 |   return useQuery({
    > 144 |     queryKey: campaignKeys.performance(campaignId),
          |                            ^
      145 |     queryFn: async (): Promise<CampaignPerformanceResponse> => {
      146 |       const result = await MarketingCampaignService.getCampaignPerformance(campaignId);
      147 |       

      at performance (src/hooks/marketing/useMarketingCampaigns.ts:144:28)
      at useCampaignPerformance (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:461:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:460:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useCampaignPerformance - Analytics and Metrics Aggregation › should cache performance data with appropriate refresh intervals

    TypeError: Cannot read properties of undefined (reading 'performance')

      142 | export function useCampaignPerformance(campaignId: string) {
      143 |   return useQuery({
    > 144 |     queryKey: campaignKeys.performance(campaignId),
          |                            ^
      145 |     queryFn: async (): Promise<CampaignPerformanceResponse> => {
      146 |       const result = await MarketingCampaignService.getCampaignPerformance(campaignId);
      147 |       

      at performance (src/hooks/marketing/useMarketingCampaigns.ts:144:28)
      at useCampaignPerformance (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:495:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:494:45)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useCreateCampaign - Campaign Creation with Validation › should create campaign with business rule validation

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"campaignName": "Summer BBQ Special", "campaignStatus": "planned", "campaignType": "promotional", "description": "Summer BBQ essentials at special prices", "discountPercentage": 20, "endDate": "2024-06-30T23:59:59Z", "startDate": "2024-06-01T00:00:00Z", "targetAudience": "BBQ enthusiasts"}, "user-1"

    Number of calls: 0

      562 |       });
      563 |
    > 564 |       expect(mockMarketingCampaignService.createCampaign).toHaveBeenCalledWith(
          |                                                           ^
      565 |         campaignData,
      566 |         'user-1'
      567 |       );

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:564:59)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useCampaignScheduling - Date Management and Automation › should schedule campaign with date validation

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "campaign-1", {"autoActivate": true, "endDate": "2024-07-31T23:59:59Z", "startDate": "2024-07-01T00:00:00Z"}, "user-1"

    Number of calls: 0

      734 |       });
      735 |
    > 736 |       expect(mockMarketingCampaignService.scheduleCampaign).toHaveBeenCalledWith(
          |                                                             ^
      737 |         'campaign-1',
      738 |         scheduleData,
      739 |         'user-1'

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:736:61)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useCampaignMetrics - Real-time Analytics Collection › should record campaign metrics for analytics

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "campaign-1", "views", 100, "user-1"

    Number of calls: 0

      866 |       });
      867 |
    > 868 |       expect(mockMarketingCampaignService.recordCampaignMetric).toHaveBeenCalledWith(
          |                                                                 ^
      869 |         'campaign-1',
      870 |         'views',
      871 |         100,

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:868:65)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useUpdateCampaignStatus - Campaign Lifecycle Management › should update campaign status with lifecycle validation

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "campaign-1", "active", "user-1"

    Number of calls: 0

      1015 |       });
      1016 |
    > 1017 |       expect(mockMarketingCampaignService.updateCampaignStatus).toHaveBeenCalledWith(
           |                                                                 ^
      1018 |         'campaign-1',
      1019 |         'active',
      1020 |         'user-1'

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:1017:65)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › Integration with Content and Bundle Systems › should support campaign association with bundles

    TypeError: Cannot read properties of undefined (reading 'byStatusPaginated')

      88 |
      89 |   return useQuery({
    > 90 |     queryKey: campaignKeys.byStatusPaginated(status, pagination),
         |                            ^
      91 |     queryFn: async (): Promise<PaginatedResponse<MarketingCampaignTransform>> => {
      92 |       if (!effectiveUserId) {
      93 |         throw new Error('Authentication required for campaign access');

      at byStatusPaginated (src/hooks/marketing/useMarketingCampaigns.ts:90:28)
      at useMarketingCampaigns (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:1118:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:1117:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › Performance and Error Handling › should handle service failures gracefully

    TypeError: Cannot read properties of undefined (reading 'byStatusPaginated')

      88 |
      89 |   return useQuery({
    > 90 |     queryKey: campaignKeys.byStatusPaginated(status, pagination),
         |                            ^
      91 |     queryFn: async (): Promise<PaginatedResponse<MarketingCampaignTransform>> => {
      92 |       if (!effectiveUserId) {
      93 |         throw new Error('Authentication required for campaign access');

      at byStatusPaginated (src/hooks/marketing/useMarketingCampaigns.ts:90:28)
      at useMarketingCampaigns (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:1144:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:1143:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › Performance and Error Handling › should maintain performance targets for campaign operations

    TypeError: Cannot read properties of undefined (reading 'byStatusPaginated')

      88 |
      89 |   return useQuery({
    > 90 |     queryKey: campaignKeys.byStatusPaginated(status, pagination),
         |                            ^
      91 |     queryFn: async (): Promise<PaginatedResponse<MarketingCampaignTransform>> => {
      92 |       if (!effectiveUserId) {
      93 |         throw new Error('Authentication required for campaign access');

      at byStatusPaginated (src/hooks/marketing/useMarketingCampaigns.ts:90:28)
      at useMarketingCampaigns (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:1175:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:1174:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/__tests__/security/securityAudit.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Security Audit Tests › RLS Policy Validation › should validate RLS is enabled on critical tables

    expect(received).toBeNull()

    Received: {"message": "No rows returned"}

      60 |           .single();
      61 |
    > 62 |         expect(error).toBeNull();
         |                       ^
      63 |         
      64 |         // In a real test, you would check the actual RLS status
      65 |         // This is a simplified version

      at Object.toBeNull (src/__tests__/security/securityAudit.test.ts:62:23)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Security Audit Tests › Permission Boundary Testing › should test customer role permissions

    TypeError: _this.checkRolePermission is not a function

      171 |       for (const permission of customerPermissions) {
      172 |         // Test permission check
    > 173 |         const hasPermission = await this.checkRolePermission(
          |                                          ^
      174 |           'customer', 
      175 |           permission.resource, 
      176 |           permission.action

      at Object.checkRolePermission (src/__tests__/security/securityAudit.test.ts:173:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Audit Tests › Permission Boundary Testing › should test inventory_staff role permissions

    TypeError: _this.checkRolePermission is not a function

      198 |
      199 |       for (const permission of inventoryStaffPermissions) {
    > 200 |         const hasPermission = await this.checkRolePermission(
          |                                          ^
      201 |           'inventory_staff', 
      202 |           permission.resource, 
      203 |           permission.action

      at Object.checkRolePermission (src/__tests__/security/securityAudit.test.ts:200:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Audit Tests › Permission Boundary Testing › should test marketing_staff role permissions

    TypeError: _this.checkRolePermission is not a function

      225 |
      226 |       for (const permission of marketingStaffPermissions) {
    > 227 |         const hasPermission = await this.checkRolePermission(
          |                                          ^
      228 |           'marketing_staff', 
      229 |           permission.resource, 
      230 |           permission.action

      at Object.checkRolePermission (src/__tests__/security/securityAudit.test.ts:227:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Audit Tests › Permission Boundary Testing › should test executive role permissions

    TypeError: _this.checkRolePermission is not a function

      252 |
      253 |       for (const permission of executivePermissions) {
    > 254 |         const hasPermission = await this.checkRolePermission(
          |                                          ^
      255 |           'executive', 
      256 |           permission.resource, 
      257 |           permission.action

      at Object.checkRolePermission (src/__tests__/security/securityAudit.test.ts:254:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Audit Tests › Permission Boundary Testing › should test admin role permissions

    TypeError: _this.checkRolePermission is not a function

      285 |
      286 |       for (const permission of adminPermissions) {
    > 287 |         const hasPermission = await this.checkRolePermission(
          |                                          ^
      288 |           'admin', 
      289 |           permission.resource, 
      290 |           permission.action

      at Object.checkRolePermission (src/__tests__/security/securityAudit.test.ts:287:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Audit Tests › Permission Boundary Testing › should prevent privilege escalation attempts

    TypeError: _this.testPrivilegeEscalation is not a function

      307 |       for (const attempt of escalationAttempts) {
      308 |         // Attempt to change role should fail
    > 309 |         const canEscalate = await this.testPrivilegeEscalation(attempt.from, attempt.to);
          |                                        ^
      310 |         expect(canEscalate).toBe(false);
      311 |       }
      312 |     });

      at Object.testPrivilegeEscalation (src/__tests__/security/securityAudit.test.ts:309:40)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Audit Tests › Permission Boundary Testing › should validate cross-role data isolation

    TypeError: _this.testDataAccess is not a function

      323 |
      324 |       for (const test of isolationTests) {
    > 325 |         const hasAccess = await this.testDataAccess(test.role, test.shouldNotAccess);
          |                                      ^
      326 |         expect(hasAccess).toBe(false);
      327 |       }
      328 |     });

      at Object.testDataAccess (src/__tests__/security/securityAudit.test.ts:325:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Audit Tests › Input Validation and Injection Prevention › should validate input length limits

    expect(received).toBeDefined()

    Received: undefined

      367 |
      368 |       // Should reject overly long inputs
    > 369 |       expect(error).toBeDefined();
          |                     ^
      370 |     });
      371 |
      372 |     it('should sanitize special characters', async () => {

      at Object.toBeDefined (src/__tests__/security/securityAudit.test.ts:369:21)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Security Audit Tests › Input Validation and Injection Prevention › should validate email formats

    TypeError: _this.validateEmail is not a function

      407 |         // This would typically be tested through the auth system
      408 |         // but we'll simulate the validation
    > 409 |         const isValid = this.validateEmail(email);
          |                              ^
      410 |         expect(isValid).toBe(false);
      411 |       }
      412 |     });

      at Object.validateEmail (src/__tests__/security/securityAudit.test.ts:409:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Audit Tests › Input Validation and Injection Prevention › should validate numeric inputs

    TypeError: _this.validateNumber is not a function

      425 |       for (const num of invalidNumbers) {
      426 |         // Test that invalid numbers are rejected
    > 427 |         const isValid = this.validateNumber(num);
          |                              ^
      428 |         expect(isValid).toBe(false);
      429 |       }
      430 |     });

      at Object.validateNumber (src/__tests__/security/securityAudit.test.ts:427:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Audit Tests › Encryption and Data Protection › should validate password requirements

    TypeError: _this.validatePasswordStrength is not a function

      642 |
      643 |       for (const password of weakPasswords) {
    > 644 |         const isValid = this.validatePasswordStrength(password);
          |                              ^
      645 |         expect(isValid).toBe(false);
      646 |       }
      647 |     });

      at Object.validatePasswordStrength (src/__tests__/security/securityAudit.test.ts:644:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/__tests__/compliance/patternComplianceAudit.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● System-Wide Pattern Compliance Audit › Zod Validation Patterns Audit (System-Wide) › should validate database-first validation adherence in production monitoring systems

    expect(received).toBeGreaterThan(expected)

    Expected: > 0.8
    Received:   0.3

      67 |
      68 |       auditResults.forEach(result => {
    > 69 |         expect(result.database_first_usage).toBeGreaterThan(0.8);
         |                                             ^
      70 |         expect(result.validation_pipeline_present).toBe(true);
      71 |       });
      72 |     });

      at toBeGreaterThan (src/__tests__/compliance/patternComplianceAudit.test.ts:69:45)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/__tests__/compliance/patternComplianceAudit.test.ts:68:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● System-Wide Pattern Compliance Audit › Zod Validation Patterns Audit (System-Wide) › should validate resilient item processing with skip-on-error in all production services

    expect(received).toBeGreaterThan(expected)

    Expected: > 0.7
    Received:   0

      85 |       // Services should implement resilient processing
      86 |       const servicesWithResilience = auditResults.filter(r => r.resilient_patterns_found > 0);
    > 87 |       expect(servicesWithResilience.length / auditResults.length).toBeGreaterThan(0.7);
         |                                                                   ^
      88 |     });
      89 |
      90 |     it('should validate transformation schema architecture compliance across entire system', async () => {

      at Object.toBeGreaterThan (src/__tests__/compliance/patternComplianceAudit.test.ts:87:67)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● System-Wide Pattern Compliance Audit › Zod Validation Patterns Audit (System-Wide) › should validate transformation schema architecture compliance across entire system

    expect(received).toBeGreaterThan(expected)

    Expected: > 0.6
    Received:   0

      103 |       const adoptionRate = withTransformations.length / transformationAudit.length;
      104 |       
    > 105 |       expect(adoptionRate).toBeGreaterThan(0.6); // 60% adoption rate minimum
          |                            ^
      106 |     });
      107 |
      108 |     it('should validate database-interface alignment for production monitoring data', async () => {

      at Object.toBeGreaterThan (src/__tests__/compliance/patternComplianceAudit.test.ts:105:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● System-Wide Pattern Compliance Audit › React Query Patterns Audit (System-Wide) › should validate centralized query key factory usage across ALL phases (zero dual systems)

    expect(received).toBeGreaterThan(expected)

    Expected: > 0.8
    Received:   0

      143 |       // Verify centralized usage
      144 |       const centralizedUsage = queryKeyAudit.filter(audit => audit.has_centralized_keys);
    > 145 |       expect(centralizedUsage.length / queryKeyAudit.length).toBeGreaterThan(0.8);
          |                                                              ^
      146 |     });
      147 |
      148 |     it('should validate user-isolated query keys with proper fallback strategies system-wide', async () => {

      at Object.toBeGreaterThan (src/__tests__/compliance/patternComplianceAudit.test.ts:145:62)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● System-Wide Pattern Compliance Audit › React Query Patterns Audit (System-Wide) › should validate user-isolated query keys with proper fallback strategies system-wide

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      151 |       const isolationCompliance = auditUserIsolation(queryKeyFactoryContent);
      152 |       
    > 153 |       expect(isolationCompliance.user_isolation_present).toBe(true);
          |                                                          ^
      154 |       expect(isolationCompliance.fallback_strategies).toBeGreaterThan(3);
      155 |       expect(isolationCompliance.role_based_keys).toBe(true);
      156 |     });

      at Object.toBe (src/__tests__/compliance/patternComplianceAudit.test.ts:153:58)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● System-Wide Pattern Compliance Audit › React Query Patterns Audit (System-Wide) › should validate entity-specific factory methods across all business domains

    expect(received).toContain(expected) // indexOf

    Expected value: "products"
    Received array: []

      167 |
      168 |       expectedEntities.forEach(entity => {
    > 169 |         expect(entityCoverage.covered_entities).toContain(entity);
          |                                                 ^
      170 |       });
      171 |
      172 |       expect(entityCoverage.coverage_percentage).toBeGreaterThan(0.9);

      at toContain (src/__tests__/compliance/patternComplianceAudit.test.ts:169:49)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/__tests__/compliance/patternComplianceAudit.test.ts:168:24)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● System-Wide Pattern Compliance Audit › React Query Patterns Audit (System-Wide) › should validate smart query invalidation across multi-role workflows

    expect(received).toBeGreaterThan(expected)

    Expected: > 0.6
    Received:   NaN

      214 |       );
      215 |
    > 216 |       expect(smartInvalidations.length / invalidationAudit.length).toBeGreaterThan(0.6);
          |                                                                    ^
      217 |     });
      218 |   });
      219 |

      at Object.toBeGreaterThan (src/__tests__/compliance/patternComplianceAudit.test.ts:216:68)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● System-Wide Pattern Compliance Audit › Database Query Patterns Audit (System-Wide) › should validate cross-role data operations following atomic operation patterns

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      258 |
      259 |       atomicityAudit.forEach(audit => {
    > 260 |         expect(audit.atomic_operations_present).toBe(true);
          |                                                 ^
      261 |         expect(audit.transaction_usage).toBeGreaterThan(0.5);
      262 |       });
      263 |     });

      at toBe (src/__tests__/compliance/patternComplianceAudit.test.ts:260:49)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/__tests__/compliance/patternComplianceAudit.test.ts:259:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● System-Wide Pattern Compliance Audit › Database Query Patterns Audit (System-Wide) › should validate performance optimization patterns validated under production load

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      322 |       performanceAudit.forEach(audit => {
      323 |         expect(audit.optimization_patterns_present).toBe(true);
    > 324 |         expect(audit.production_ready).toBe(true);
          |                                        ^
      325 |         expect(audit.monitoring_integrated).toBe(true);
      326 |       });
      327 |     });

      at toBe (src/__tests__/compliance/patternComplianceAudit.test.ts:324:40)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/__tests__/compliance/patternComplianceAudit.test.ts:322:24)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● System-Wide Pattern Compliance Audit › Schema Contract Management Audit (System-Wide) › should validate service field selection validation in production environment

    expect(received).toBeGreaterThan(expected)

    Expected: > 0.7
    Received:   0

      408 |       );
      409 |
    > 410 |       expect(optimizedServices.length / fieldSelectionAudit.length).toBeGreaterThan(0.7);
          |                                                                     ^
      411 |     });
      412 |
      413 |     it('should validate pre-commit contract validation integration in CI/CD pipeline', async () => {

      at Object.toBeGreaterThan (src/__tests__/compliance/patternComplianceAudit.test.ts:410:69)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● System-Wide Pattern Compliance Audit › Schema Contract Management Audit (System-Wide) › should validate transformation completeness across all business domains

    expect(received).toBeGreaterThan(expected)

    Expected: > 0.8
    Received:   0

      450 |       );
      451 |
    > 452 |       expect(completeTransformations.length / transformationAudit.length).toBeGreaterThan(0.8);
          |                                                                           ^
      453 |     });
      454 |   });
      455 |

      at Object.toBeGreaterThan (src/__tests__/compliance/patternComplianceAudit.test.ts:452:75)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/inventory/__tests__/integration/security.test.tsx (20.35 s)
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Security Integration Tests (RED Phase) › Role-based Access Control › should allow admin users full access to all operations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      169 |       );
      170 |
    > 171 |       await waitFor(() => {
          |                    ^
      172 |         expect(readResult.current.isSuccess).toBe(true);
      173 |       });
      174 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:171:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Integration Tests (RED Phase) › Role-based Access Control › should restrict inventory staff to appropriate operations only

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      264 |       );
      265 |
    > 266 |       await waitFor(() => {
          |                    ^
      267 |         expect(readResult.current.isSuccess).toBe(true);
      268 |       });
      269 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:266:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Integration Tests (RED Phase) › Role-based Access Control › should restrict marketing staff to read-only and content updates

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      364 |       );
      365 |
    > 366 |       await waitFor(() => {
          |                    ^
      367 |         expect(readResult.current.isSuccess).toBe(true);
      368 |       });
      369 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:366:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Integration Tests (RED Phase) › Role-based Access Control › should deny all write operations for read-only users

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      443 |       );
      444 |
    > 445 |       await waitFor(() => {
          |                    ^
      446 |         expect(readResult.current.isSuccess).toBe(true);
      447 |       });
      448 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:445:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Integration Tests (RED Phase) › User Data Isolation › should isolate inventory data by user context

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      549 |       );
      550 |
    > 551 |       await waitFor(() => {
          |                    ^
      552 |         expect(userAResult.current.isSuccess).toBe(true);
      553 |       });
      554 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:551:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Integration Tests (RED Phase) › User Data Isolation › should prevent cross-user inventory access

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      569 |       );
      570 |
    > 571 |       await waitFor(() => {
          |                    ^
      572 |         expect(result.current.isError).toBe(true);
      573 |       });
      574 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:571:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Integration Tests (RED Phase) › User Data Isolation › should isolate movement history by user permissions

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      616 |       );
      617 |
    > 618 |       await waitFor(() => {
          |                    ^
      619 |         expect(allowedResult.current.isSuccess).toBe(true);
      620 |       });
      621 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:618:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Integration Tests (RED Phase) › Permission Escalation Prevention › should prevent unauthorized bulk operations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      658 |       });
      659 |
    > 660 |       await waitFor(() => {
          |                    ^
      661 |         expect(result.current.isError).toBe(true);
      662 |       });
      663 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:660:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Security Integration Tests (RED Phase) › Permission Escalation Prevention › should validate permissions for each operation in workflow

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      696 |       );
      697 |
    > 698 |       await waitFor(() => {
          |                    ^
      699 |         expect(readResult.current.isSuccess).toBe(true);
      700 |       });
      701 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:698:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Integration Tests (RED Phase) › Audit Trail Security › should ensure audit trails cannot be tampered with

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      752 |       });
      753 |
    > 754 |       await waitFor(() => {
          |                    ^
      755 |         expect(result.current.isError).toBe(true);
      756 |       });
      757 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:754:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Security Integration Tests (RED Phase) › Audit Trail Security › should protect sensitive analytics data

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      773 |       );
      774 |
    > 775 |       await waitFor(() => {
          |                    ^
      776 |         expect(result.current.isError).toBe(true);
      777 |       });
      778 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:775:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Integration Tests (RED Phase) › Audit Trail Security › should prevent unauthorized access to movement history

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      789 |       );
      790 |
    > 791 |       await waitFor(() => {
          |                    ^
      792 |         expect(result.current.isError).toBe(true);
      793 |       });
      794 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:791:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Integration Tests (RED Phase) › Input Validation and Injection Prevention › should reject malicious input in inventory operations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      821 |       });
      822 |
    > 823 |       await waitFor(() => {
          |                    ^
      824 |         expect(result.current.isError).toBe(true);
      825 |       });
      826 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:823:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Security Integration Tests (RED Phase) › Input Validation and Injection Prevention › should validate movement data for consistency

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      851 |       });
      852 |
    > 853 |       await waitFor(() => {
          |                    ^
      854 |         expect(result.current.isError).toBe(true);
      855 |       });
      856 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:853:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/marketing/__tests__/campaignManagementIntegration.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Campaign Management Hook Integration - Phase 3.4.2 (RED Phase) › Campaign Lifecycle Hook Integration › should invalidate queries during campaign status changes

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"queryKey": ["campaigns", "test-user-123", "detail", "campaign-456"]}

    Number of calls: 0

      398 |
      399 |       // Verify campaign-specific query invalidation
    > 400 |       expect(invalidateQueriesSpy).toHaveBeenCalledWith({
          |                                    ^
      401 |         queryKey: campaignKeys.detail(testCampaignId, testUserId)
      402 |       });
      403 |       

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/campaignManagementIntegration.test.tsx:400:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Campaign Management Hook Integration - Phase 3.4.2 (RED Phase) › Campaign Performance Integration › should handle real-time metrics recording

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 4
    Received number of calls: 0

      543 |
      544 |       // Verify all metric types were recorded
    > 545 |       expect(mockMarketingCampaignService.recordCampaignMetric).toHaveBeenCalledTimes(4);
          |                                                                 ^
      546 |     });
      547 |   });
      548 |

      at Object.toHaveBeenCalledTimes (src/hooks/marketing/__tests__/campaignManagementIntegration.test.tsx:545:65)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Campaign Management Hook Integration - Phase 3.4.2 (RED Phase) › Cross-System Integration Hooks › should invalidate cross-system queries on campaign changes

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"queryKey": ["campaigns", "test-user-123", "detail", "campaign-456"]}

    Number of calls: 0

      724 |
      725 |       // Verify campaign queries were invalidated
    > 726 |       expect(invalidateQueriesSpy).toHaveBeenCalledWith({
          |                                    ^
      727 |         queryKey: campaignKeys.detail(testCampaignId, testUserId)
      728 |       });
      729 |

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/campaignManagementIntegration.test.tsx:726:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Campaign Management Hook Integration - Phase 3.4.2 (RED Phase) › Cross-System Integration Hooks › should handle campaign discount updates affecting bundles

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      798 |       });
      799 |
    > 800 |       expect(result.current.isSuccess).toBe(true);
          |                                        ^
      801 |       expect(result.current.data?.newDiscount).toBe(30);
      802 |       expect(result.current.data?.affectedBundles).toContain(testBundleId);
      803 |

      at Object.toBe (src/hooks/marketing/__tests__/campaignManagementIntegration.test.tsx:800:40)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Campaign Management Hook Integration - Phase 3.4.2 (RED Phase) › Analytics Integration Hooks › should provide executive analytics data through hooks

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      892 |       });
      893 |
    > 894 |       await waitFor(() => {
          |                    ^
      895 |         expect(result.current.isSuccess).toBe(true);
      896 |       });
      897 |

      at Object.<anonymous> (src/hooks/marketing/__tests__/campaignManagementIntegration.test.tsx:894:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Campaign Management Hook Integration - Phase 3.4.2 (RED Phase) › Analytics Integration Hooks › should handle role-based analytics access in hooks

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      960 |           });
      961 |
    > 962 |           await waitFor(() => {
          |                        ^
      963 |             expect(result.current.isSuccess).toBe(true);
      964 |           });
      965 |         } else {

      at _loop2 (src/hooks/marketing/__tests__/campaignManagementIntegration.test.tsx:962:24)
          at _loop2.next (<anonymous>)
      at Object._loop2 (src/hooks/marketing/__tests__/campaignManagementIntegration.test.tsx:913:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/hooks/executive/__tests__/usePredictiveAnalytics.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in undefined.undefined {
        timestamp: '2025-08-24T20:13:28.288Z',
        type: 'PATTERN_SUCCESS',
        details: {
          pattern: 'forecast_generation_scenarios',
          context: 'useForecastGeneration.generateScenariosMutation',
          description: 'Successfully generated revenue scenarios',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.error
      [VALIDATION_MONITOR] Validation error in useForecastGeneration.generateForecastMutation {
        timestamp: '2025-08-24T20:13:28.507Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'useForecastGeneration.generateForecastMutation',
          errorCode: 'FORECAST_GENERATION_FAILED',
          validationPattern: 'forecast_generation_mutation',
          errorMessage: 'Insufficient historical data for forecast',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Object.recordValidationError [as onError] (src/hooks/executive/useForecastGeneration.ts:114:25)
      at Mutation.execute (node_modules/@tanstack/query-core/src/mutation.ts:248:28)

  ● usePredictiveAnalytics Hook - Phase 4.3 › usePredictiveAnalytics › should validate predictive models with historical data

    TypeError: result.current.validateModel is not a function

      189 |
      190 |       await act(async () => {
    > 191 |         await result.current.validateModel({
          |                              ^
      192 |           historicalData: 'last_12_months',
      193 |           validationMethod: 'backtesting'
      194 |         });

      at validateModel (src/hooks/executive/__tests__/usePredictiveAnalytics.test.tsx:191:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at callback (node_modules/@testing-library/react-native/src/act.ts:31:24)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1081:22)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at Object.<anonymous> (src/hooks/executive/__tests__/usePredictiveAnalytics.test.tsx:190:16)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● usePredictiveAnalytics Hook - Phase 4.3 › usePredictiveAnalytics › should support real-time forecast updates

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Object {
        "forecastData": Object {
    -     "revenue": 105000,
    +     "revenue": 100000,
        },
    -   "timestamp": "2024-01-15T10:05:00Z",
    +   "timestamp": "2024-01-15T10:00:00Z",
      }

      240 |       });
      241 |
    > 242 |       await waitFor(() => {
          |                    ^
      243 |         expect(result.current.forecastData).toEqual(mockUpdatedForecast);
      244 |       });
      245 |

      at Object.<anonymous> (src/hooks/executive/__tests__/usePredictiveAnalytics.test.tsx:242:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● usePredictiveAnalytics Hook - Phase 4.3 › usePredictiveAnalytics › should calculate confidence intervals for forecasts

    TypeError: result.current.calculateConfidence is not a function

      275 |
      276 |       await act(async () => {
    > 277 |         await result.current.calculateConfidence({
          |                              ^
      278 |           confidenceLevels: [0.95, 0.90, 0.80]
      279 |         });
      280 |       });

      at calculateConfidence (src/hooks/executive/__tests__/usePredictiveAnalytics.test.tsx:277:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at callback (node_modules/@testing-library/react-native/src/act.ts:31:24)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1081:22)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at Object.<anonymous> (src/hooks/executive/__tests__/usePredictiveAnalytics.test.tsx:276:16)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● usePredictiveAnalytics Hook - Phase 4.3 › Query Key Factory Integration › should use centralized query key factory for analytics

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 2

      Array [
        "executive",
        "predictiveAnalytics",
    -   "demand",
    +   undefined,
    +   undefined,
      ]

      534 |       );
      535 |
    > 536 |       await waitFor(() => {
          |                    ^
      537 |         expect(result.current.queryKey).toEqual(['executive', 'predictiveAnalytics', 'demand']);
      538 |       });
      539 |     });

      at Object.<anonymous> (src/hooks/executive/__tests__/usePredictiveAnalytics.test.tsx:536:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/__tests__/performance/queryPerformance.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Query Performance Tests › Role Permission Query Performance › should query user roles within 200ms

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, Any<Number>, Any<String>, Any<String>, Any<Object>

    Number of calls: 0

      49 |       expect(error).toBeNull();
      50 |       expect(executionTime).toBeLessThan(200);
    > 51 |       expect(performanceMonitoring.logQueryPerformance).toHaveBeenCalledWith(
         |                                                         ^
      52 |         expect.any(String),
      53 |         expect.any(Number),
      54 |         expect.any(String),

      at Object.toHaveBeenCalledWith (src/__tests__/performance/queryPerformance.test.ts:51:57)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Query Performance Tests › Role Permission Query Performance › should perform role-based access checks within 150ms

    TypeError: _supabase.supabase.rpc(...).single is not a function

      80 |         p_resource: 'inventory',
      81 |         p_action: 'read'
    > 82 |       }).single();
         |          ^
      83 |       
      84 |       const executionTime = performance.now() - startTime;
      85 |       

      at Object.single (src/__tests__/performance/queryPerformance.test.ts:82:10)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/__tests__/deployment/migrationValidation.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Database Migration Validation Tests › Migration Script Validation › should validate production monitoring schema migration

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      49 |         expect(error).toBeNull();
      50 |         expect(tableInfo).toBeDefined();
    > 51 |         expect(tableInfo?.length).toBeGreaterThan(0);
         |                                   ^
      52 |       }
      53 |
      54 |       // Verify table columns and constraints

      at Object.toBeGreaterThan (src/__tests__/deployment/migrationValidation.test.ts:51:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Database Migration Validation Tests › Migration Script Validation › should validate RLS policies are properly migrated

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      101 |         expect(policyError).toBeNull();
      102 |         expect(policies).toBeDefined();
    > 103 |         expect(policies?.length).toBeGreaterThan(0);
          |                                  ^
      104 |       }
      105 |     });
      106 |

      at Object.toBeGreaterThan (src/__tests__/deployment/migrationValidation.test.ts:103:34)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Database Migration Validation Tests › Migration Script Validation › should validate indexes are properly created

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      125 |         expect(error).toBeNull();
      126 |         expect(indexInfo).toBeDefined();
    > 127 |         expect(indexInfo?.length).toBeGreaterThan(0);
          |                                   ^
      128 |       }
      129 |     });
      130 |

      at Object.toBeGreaterThan (src/__tests__/deployment/migrationValidation.test.ts:127:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Database Migration Validation Tests › Migration Script Validation › should validate stored procedures are properly migrated

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      147 |         expect(error).toBeNull();
      148 |         expect(procInfo).toBeDefined();
    > 149 |         expect(procInfo?.length).toBeGreaterThan(0);
          |                                  ^
      150 |       }
      151 |     });
      152 |

      at Object.toBeGreaterThan (src/__tests__/deployment/migrationValidation.test.ts:149:34)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Database Migration Validation Tests › Migration Script Validation › should validate views are properly created

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      168 |         expect(error).toBeNull();
      169 |         expect(viewInfo).toBeDefined();
    > 170 |         expect(viewInfo?.length).toBeGreaterThan(0);
          |                                  ^
      171 |       }
      172 |     });
      173 |   });

      at Object.toBeGreaterThan (src/__tests__/deployment/migrationValidation.test.ts:170:34)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Database Migration Validation Tests › Data Integrity Validation › should validate data consistency during migration

    TypeError: _this.validateForeignKeyConstraints is not a function

      177 |       // Test data integrity checks
      178 |       const integrityChecks = [
    > 179 |         this.validateForeignKeyConstraints(),
          |              ^
      180 |         this.validateUniqueConstraints(),
      181 |         this.validateCheckConstraints(),
      182 |         this.validateNullConstraints(),

      at Object.validateForeignKeyConstraints (src/__tests__/deployment/migrationValidation.test.ts:179:14)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Data Integrity Validation › should validate existing data compatibility

    TypeError: _this.testExistingUserData is not a function

      196 |       // Test that existing data works with new schema
      197 |       const compatibilityTests = [
    > 198 |         this.testExistingUserData(),
          |              ^
      199 |         this.testExistingOrderData(),
      200 |         this.testExistingProductData(),
      201 |         this.testExistingInventoryData(),

      at Object.testExistingUserData (src/__tests__/deployment/migrationValidation.test.ts:198:14)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Data Integrity Validation › should validate data migration accuracy

    TypeError: _this.validateMigrationAccuracy is not a function

      211 |     it('should validate data migration accuracy', async () => {
      212 |       // Test that data migration preserves all information
    > 213 |       const migrationAccuracy = await this.validateMigrationAccuracy();
          |                                            ^
      214 |       
      215 |       expect(migrationAccuracy.records_migrated).toBeGreaterThan(0);
      216 |       expect(migrationAccuracy.data_loss_percentage).toBe(0);

      at Object.validateMigrationAccuracy (src/__tests__/deployment/migrationValidation.test.ts:213:44)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Data Integrity Validation › should validate production data volume handling

    TypeError: _this.testProductionVolumeHandling is not a function

      220 |     it('should validate production data volume handling', async () => {
      221 |       // Test migration performance with production-scale data
    > 222 |       const volumeTest = await this.testProductionVolumeHandling({
          |                                     ^
      223 |         orders: 100000,
      224 |         users: 10000,
      225 |         products: 1000,

      at Object.testProductionVolumeHandling (src/__tests__/deployment/migrationValidation.test.ts:222:37)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Migration Performance Testing › should validate migration execution time

    TypeError: _this.executeMigrationStep is not a function

      247 |         
      248 |         // Simulate migration step execution
    > 249 |         await this.executeMigrationStep(step.name);
          |                    ^
      250 |         
      251 |         const stepTime = performance.now() - stepStart;
      252 |         expect(stepTime).toBeLessThan(step.estimated_time * 1000);

      at Object.executeMigrationStep (src/__tests__/deployment/migrationValidation.test.ts:249:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Migration Performance Testing › should validate concurrent migration handling

    TypeError: _this.simulateReadOperations is not a function

      257 |       // Test that migration can handle concurrent database operations
      258 |       const concurrentOperations = [
    > 259 |         this.simulateReadOperations(),
          |              ^
      260 |         this.simulateWriteOperations(),
      261 |         this.simulateAnalyticsQueries(),
      262 |       ];

      at Object.simulateReadOperations (src/__tests__/deployment/migrationValidation.test.ts:259:14)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Migration Performance Testing › should validate migration resource usage

    TypeError: _this.startResourceMonitoring is not a function

      278 |
      279 |     it('should validate migration resource usage', async () => {
    > 280 |       const resourceMonitor = this.startResourceMonitoring();
          |                                    ^
      281 |       
      282 |       await this.simulateMigrationExecution();
      283 |       

      at Object.startResourceMonitoring (src/__tests__/deployment/migrationValidation.test.ts:280:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Rollback Procedure Validation › should validate rollback script completeness

    TypeError: _this.getRollbackScript is not a function

      302 |
      303 |       for (const step of rollbackSteps) {
    > 304 |         const rollbackScript = await this.getRollbackScript(step);
          |                                           ^
      305 |         
      306 |         expect(rollbackScript).toBeDefined();
      307 |         expect(rollbackScript.length).toBeGreaterThan(0);

      at Object.getRollbackScript (src/__tests__/deployment/migrationValidation.test.ts:304:43)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Rollback Procedure Validation › should validate rollback execution

    TypeError: _this.createTestMigrationState is not a function

      315 |       
      316 |       // Create test migration state
    > 317 |       await this.createTestMigrationState();
          |                  ^
      318 |       
      319 |       // Execute rollback
      320 |       const rollbackResult = await this.executeRollback();

      at Object.createTestMigrationState (src/__tests__/deployment/migrationValidation.test.ts:317:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Rollback Procedure Validation › should validate data preservation during rollback

    TypeError: _this.captureDataSnapshot is not a function

      332 |     it('should validate data preservation during rollback', async () => {
      333 |       // Test that rollback preserves existing data
    > 334 |       const preRollbackData = await this.captureDataSnapshot();
          |                                          ^
      335 |       
      336 |       await this.executeRollback();
      337 |       

      at Object.captureDataSnapshot (src/__tests__/deployment/migrationValidation.test.ts:334:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Rollback Procedure Validation › should validate partial rollback scenarios

    TypeError: _this.testPartialRollback is not a function

      354 |
      355 |       for (const failurePoint of failurePoints) {
    > 356 |         const rollbackResult = await this.testPartialRollback(failurePoint);
          |                                           ^
      357 |         
      358 |         expect(rollbackResult.success).toBe(true);
      359 |         expect(rollbackResult.database_consistent).toBe(true);

      at Object.testPartialRollback (src/__tests__/deployment/migrationValidation.test.ts:356:43)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Environment-Specific Migration Testing › should validate development environment migration

    TypeError: _this.testEnvironmentMigration is not a function

      364 |   describe('Environment-Specific Migration Testing', () => {
      365 |     it('should validate development environment migration', async () => {
    > 366 |       const devMigration = await this.testEnvironmentMigration('development');
          |                                       ^
      367 |       
      368 |       expect(devMigration.success).toBe(true);
      369 |       expect(devMigration.test_data_preserved).toBe(true);

      at Object.testEnvironmentMigration (src/__tests__/deployment/migrationValidation.test.ts:366:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Environment-Specific Migration Testing › should validate staging environment migration

    TypeError: _this.testEnvironmentMigration is not a function

      372 |
      373 |     it('should validate staging environment migration', async () => {
    > 374 |       const stagingMigration = await this.testEnvironmentMigration('staging');
          |                                           ^
      375 |       
      376 |       expect(stagingMigration.success).toBe(true);
      377 |       expect(stagingMigration.production_like_data).toBe(true);

      at Object.testEnvironmentMigration (src/__tests__/deployment/migrationValidation.test.ts:374:43)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Environment-Specific Migration Testing › should validate production environment migration

    TypeError: _this.testEnvironmentMigration is not a function

      380 |
      381 |     it('should validate production environment migration', async () => {
    > 382 |       const prodMigration = await this.testEnvironmentMigration('production');
          |                                        ^
      383 |       
      384 |       expect(prodMigration.success).toBe(true);
      385 |       expect(prodMigration.zero_downtime).toBe(true);

      at Object.testEnvironmentMigration (src/__tests__/deployment/migrationValidation.test.ts:382:40)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Environment-Specific Migration Testing › should validate cross-environment compatibility

    TypeError: _this.testEnvironmentMigration is not a function

      394 |
      395 |       for (const env of environments) {
    > 396 |         const result = await this.testEnvironmentMigration(env);
          |                                   ^
      397 |         migrationResults.push(result);
      398 |       }
      399 |

      at Object.testEnvironmentMigration (src/__tests__/deployment/migrationValidation.test.ts:396:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/hooks/marketing/__tests__/contentWorkflowIntegration.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Content Workflow Hook Integration - Phase 3.4.1 (RED Phase) › Complete Content Lifecycle Hook Integration › should manage complete workflow through hooks

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "content-456", {"contentStatus": "review"}, "test-user-123"

    Number of calls: 0

      200 |
      201 |       expect(workflowResult.current.isSuccess).toBe(true);
    > 202 |       expect(mockProductContentService.updateProductContent).toHaveBeenCalledWith(
          |                                                              ^
      203 |         testContentId,
      204 |         { contentStatus: 'review' },
      205 |         testUserId

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/contentWorkflowIntegration.test.tsx:202:62)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow Hook Integration - Phase 3.4.1 (RED Phase) › Complete Content Lifecycle Hook Integration › should invalidate queries during workflow transitions

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"queryKey": ["content", "test-user-123", "detail", "content-456"]}

    Number of calls: 0

      281 |
      282 |       // Verify proper query invalidation using centralized keys
    > 283 |       expect(invalidateQueriesSpy).toHaveBeenCalledWith({
          |                                    ^
      284 |         queryKey: contentKeys.detail(testContentId, testUserId)
      285 |       });
      286 |       expect(invalidateQueriesSpy).toHaveBeenCalledWith({

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/contentWorkflowIntegration.test.tsx:283:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow Hook Integration - Phase 3.4.1 (RED Phase) › Cross-Layer Cache Integration › should coordinate cache invalidation across content layers

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      408 |       });
      409 |
    > 410 |       expect(updateResult.current.isSuccess).toBe(true);
          |                                              ^
      411 |       
      412 |       // Mock updated query for content fetch after update
      413 |       mockUseQuery.mockReturnValue({

      at Object.toBe (src/hooks/marketing/__tests__/contentWorkflowIntegration.test.tsx:410:46)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow Hook Integration - Phase 3.4.1 (RED Phase) › Real-Time Collaboration Integration › should handle real-time content updates

    expect(received).toBe(expected) // Object.is equality

    Expected: "Updated by Another User"
    Received: "Original Title"

      585 |       });
      586 |
    > 587 |       await waitFor(() => {
          |                    ^
      588 |         expect(result.current.data?.title).toBe('Updated by Another User');
      589 |       });
      590 |     });

      at Object.<anonymous> (src/hooks/marketing/__tests__/contentWorkflowIntegration.test.tsx:587:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow Hook Integration - Phase 3.4.1 (RED Phase) › Real-Time Collaboration Integration › should handle concurrent edit conflicts

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      633 |       });
      634 |
    > 635 |       expect(result.current.isError).toBe(true);
          |                                      ^
      636 |       expect(result.current.error?.message).toContain('modified by another user');
      637 |     });
      638 |   });

      at Object.toBe (src/hooks/marketing/__tests__/contentWorkflowIntegration.test.tsx:635:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow Hook Integration - Phase 3.4.1 (RED Phase) › Performance Integration Validation › should optimize query key usage for cache efficiency

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "content-1", "test-user-123"

    Number of calls: 0

      757 |       // Verify each query uses distinct cache keys
      758 |       contentIds.forEach(id => {
    > 759 |         expect(mockProductContentService.getProductContent).toHaveBeenCalledWith(
          |                                                             ^
      760 |           id, 
      761 |           testUserId
      762 |         );

      at toHaveBeenCalledWith (src/hooks/marketing/__tests__/contentWorkflowIntegration.test.tsx:759:61)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/hooks/marketing/__tests__/contentWorkflowIntegration.test.tsx:758:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow Hook Integration - Phase 3.4.1 (RED Phase) › Performance Integration Validation › should handle large dataset queries efficiently

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      800 |       );
      801 |
    > 802 |       await waitFor(() => {
          |                    ^
      803 |         expect(result.current.isSuccess).toBe(true);
      804 |       });
      805 |

      at Object.<anonymous> (src/hooks/marketing/__tests__/contentWorkflowIntegration.test.tsx:802:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/services/executive/__tests__/phase4ComplianceAudit.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Phase 4.5: Pattern Compliance Audit › Zod Validation Patterns Compliance › Single Validation Pass Principle › should validate BusinessMetrics schemas follow single-pass validation

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      37 |         // Single validation pass from DB
      38 |         const dbValidation = BusinessMetricsDatabaseSchema.safeParse(mockDbData);
    > 39 |         expect(dbValidation.success).toBe(true);
         |                                      ^
      40 |
      41 |         // Transform validation (DB → App)
      42 |         const transformValidation = BusinessMetricsTransformSchema.safeParse(mockDbData);

      at Object.toBe (src/services/executive/__tests__/phase4ComplianceAudit.test.ts:39:38)

  ● Phase 4.5: Pattern Compliance Audit › Zod Validation Patterns Compliance › Single Validation Pass Principle › should validate BusinessIntelligence schemas follow single-pass validation

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      59 |
      60 |         const dbValidation = BusinessIntelligenceDatabaseSchema.safeParse(mockInsightData);
    > 61 |         expect(dbValidation.success).toBe(true);
         |                                      ^
      62 |
      63 |         const transformValidation = BusinessIntelligenceTransformSchema.safeParse(mockInsightData);
      64 |         expect(transformValidation.success).toBe(true);

      at Object.toBe (src/services/executive/__tests__/phase4ComplianceAudit.test.ts:61:38)

  ● Phase 4.5: Pattern Compliance Audit › Zod Validation Patterns Compliance › Single Validation Pass Principle › should validate StrategicReporting schemas follow single-pass validation

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      76 |
      77 |         const dbValidation = StrategicReportingDatabaseSchema.safeParse(mockReportData);
    > 78 |         expect(dbValidation.success).toBe(true);
         |                                      ^
      79 |
      80 |         const transformValidation = StrategicReportingTransformSchema.safeParse(mockReportData);
      81 |         expect(transformValidation.success).toBe(true);

      at Object.toBe (src/services/executive/__tests__/phase4ComplianceAudit.test.ts:78:38)

  ● Phase 4.5: Pattern Compliance Audit › Zod Validation Patterns Compliance › Single Validation Pass Principle › should validate PredictiveAnalytics schemas follow single-pass validation

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      93 |
      94 |         const dbValidation = PredictiveAnalyticsDatabaseSchema.safeParse(mockForecastData);
    > 95 |         expect(dbValidation.success).toBe(true);
         |                                      ^
      96 |
      97 |         const transformValidation = PredictiveAnalyticsTransformSchema.safeParse(mockForecastData);
      98 |         expect(transformValidation.success).toBe(true);

      at Object.toBe (src/services/executive/__tests__/phase4ComplianceAudit.test.ts:95:38)

  ● Phase 4.5: Pattern Compliance Audit › React Query Patterns Compliance › Centralized Query Key Factory Usage › should verify no dual query key systems in executive hooks

    TypeError: Cannot read properties of undefined (reading 'createQueryKeyFactory')

      186 |       it('should verify no dual query key systems in executive hooks', () => {
      187 |         // Check that executive keys are properly defined
    > 188 |         const executiveKeys = queryKeyFactory.createQueryKeyFactory({ 
          |                                               ^
      189 |           entity: 'businessMetrics' as any, 
      190 |           isolation: 'user-specific' 
      191 |         });

      at Object.createQueryKeyFactory (src/services/executive/__tests__/phase4ComplianceAudit.test.ts:188:47)

  ● Phase 4.5: Pattern Compliance Audit › React Query Patterns Compliance › Centralized Query Key Factory Usage › should validate user-isolated query keys for analytics

    TypeError: Cannot read properties of undefined (reading 'createQueryKeyFactory')

      199 |       it('should validate user-isolated query keys for analytics', () => {
      200 |         const userId = 'user-123';
    > 201 |         const metricsKeys = queryKeyFactory.createQueryKeyFactory({ 
          |                                             ^
      202 |           entity: 'businessMetrics' as any, 
      203 |           isolation: 'user-specific' 
      204 |         });

      at Object.createQueryKeyFactory (src/services/executive/__tests__/phase4ComplianceAudit.test.ts:201:45)

  ● Phase 4.5: Pattern Compliance Audit › React Query Patterns Compliance › Centralized Query Key Factory Usage › should implement proper fallback strategies

    TypeError: Cannot read properties of undefined (reading 'createQueryKeyFactory')

      210 |
      211 |       it('should implement proper fallback strategies', () => {
    > 212 |         const metricsKeys = queryKeyFactory.createQueryKeyFactory({ 
          |                                             ^
      213 |           entity: 'businessMetrics' as any, 
      214 |           isolation: 'user-specific' 
      215 |         });

      at Object.createQueryKeyFactory (src/services/executive/__tests__/phase4ComplianceAudit.test.ts:212:45)

  ● Phase 4.5: Pattern Compliance Audit › React Query Patterns Compliance › Centralized Query Key Factory Usage › should provide entity-specific factory methods

    TypeError: Cannot read properties of undefined (reading 'createQueryKeyFactory')

      222 |
      223 |       it('should provide entity-specific factory methods', () => {
    > 224 |         const intelligenceKeys = queryKeyFactory.createQueryKeyFactory({ 
          |                                                  ^
      225 |           entity: 'businessIntelligence' as any, 
      226 |           isolation: 'user-specific' 
      227 |         });

      at Object.createQueryKeyFactory (src/services/executive/__tests__/phase4ComplianceAudit.test.ts:224:50)

FAIL src/__tests__/integration/crossRoleWorkflows.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Cross-Role Workflow Integration Tests › Complete Inventory Management Workflow › should handle complete inventory workflow across all roles

    TypeError: _supabase.supabase.raw is not a function

      73 |           .from('inventory_items')
      74 |           .update({ 
    > 75 |             quantity: supabase.raw(`quantity + ${update.quantity_delta}`),
         |                                ^
      76 |             updated_at: new Date().toISOString(),
      77 |           })
      78 |           .eq('product_id', update.product_id);

      at Object.raw (src/__tests__/integration/crossRoleWorkflows.test.ts:75:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cross-Role Workflow Integration Tests › Complete Inventory Management Workflow › should handle inventory stock-out scenarios

    expect(received).toBeDefined()

    Received: undefined

      142 |       } else {
      143 |         // If order goes through, should be marked appropriately
    > 144 |         expect(order).toBeDefined();
          |                       ^
      145 |       }
      146 |     });
      147 |

      at Object.toBeDefined (src/__tests__/integration/crossRoleWorkflows.test.ts:144:23)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cross-Role Workflow Integration Tests › Complete Inventory Management Workflow › should handle concurrent inventory operations

    TypeError: _supabase.supabase.raw is not a function

      154 |           .from('inventory_items')
      155 |           .update({ 
    > 156 |             quantity: supabase.raw('quantity - 1'),
          |                                ^
      157 |             updated_at: new Date().toISOString(),
      158 |           })
      159 |           .eq('product_id', productId)

      at raw (src/__tests__/integration/crossRoleWorkflows.test.ts:156:32)
          at Function.from (<anonymous>)
      at Object.from (src/__tests__/integration/crossRoleWorkflows.test.ts:152:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Workflow Integration Tests › Marketing Campaign Creation to Execution Workflow › should handle complete marketing campaign workflow

    expect(received).toBeNull()

    Received: undefined

      229 |         .insert(promotionData);
      230 |
    > 231 |       expect(promotionError).toBeNull();
          |                              ^
      232 |
      233 |       // Step 3: Executive approves campaign
      234 |       const { error: approvalError } = await supabase

      at Object.toBeNull (src/__tests__/integration/crossRoleWorkflows.test.ts:231:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cross-Role Workflow Integration Tests › Marketing Campaign Creation to Execution Workflow › should track campaign performance across customer interactions

    expect(received).toBeNull()

    Received: undefined

      284 |           });
      285 |
    > 286 |         expect(error).toBeNull();
          |                       ^
      287 |       }
      288 |
      289 |       // Verify tracking data

      at Object.toBeNull (src/__tests__/integration/crossRoleWorkflows.test.ts:286:23)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cross-Role Workflow Integration Tests › Marketing Campaign Creation to Execution Workflow › should handle campaign budget limits and spending

    expect(received).toBeNull()

    Received: undefined

      321 |         .insert(spendingData);
      322 |
    > 323 |       expect(spendError).toBeNull();
          |                          ^
      324 |
      325 |       // Verify budget tracking
      326 |       const { data: totalSpend } = await supabase

      at Object.toBeNull (src/__tests__/integration/crossRoleWorkflows.test.ts:323:26)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cross-Role Workflow Integration Tests › Executive Analytics Pipeline Workflow › should validate complete analytics data flow

    TypeError: _this.collectSalesData is not a function

      342 |       // Step 1: Operational data collection (from various roles)
      343 |       const operationalData = {
    > 344 |         sales: await this.collectSalesData(),
          |                           ^
      345 |         inventory: await this.collectInventoryData(),
      346 |         marketing: await this.collectMarketingData(),
      347 |         customer: await this.collectCustomerData(),

      at Object.collectSalesData (src/__tests__/integration/crossRoleWorkflows.test.ts:344:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Workflow Integration Tests › Executive Analytics Pipeline Workflow › should generate business intelligence insights

    TypeError: _this.generateBusinessInsights is not a function

      405 |     it('should generate business intelligence insights', async () => {
      406 |       // Test BI insight generation workflow
    > 407 |       const insights = await this.generateBusinessInsights();
          |                                   ^
      408 |       
      409 |       expect(insights).toBeDefined();
      410 |       expect(insights.revenue_trends).toBeDefined();

      at Object.generateBusinessInsights (src/__tests__/integration/crossRoleWorkflows.test.ts:407:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Workflow Integration Tests › Error Handling and Recovery Workflows › should handle system failures gracefully across all roles

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      441 |           
      442 |           // Error should be logged for monitoring
    > 443 |           expect(securityAuditing.logAuditEvent).toHaveBeenCalled();
          |                                                  ^
      444 |         }
      445 |       }
      446 |     });

      at Object.toHaveBeenCalled (src/__tests__/integration/crossRoleWorkflows.test.ts:443:50)
          at Generator.throw (<anonymous>)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)

  ● Cross-Role Workflow Integration Tests › Error Handling and Recovery Workflows › should recover from network interruptions

    TypeError: _this.syncOfflineOperation is not a function

      498 |         // Simulate coming back online and syncing
      499 |         const syncResults = await Promise.allSettled(
    > 500 |           offlineOperations.map(op => this.syncOfflineOperation(op))
          |                                            ^
      501 |         );
      502 |
      503 |         const successfulSyncs = syncResults.filter(r => r.status === 'fulfilled').length;

      at syncOfflineOperation (src/__tests__/integration/crossRoleWorkflows.test.ts:500:44)
          at Array.map (<anonymous>)
      at map (src/__tests__/integration/crossRoleWorkflows.test.ts:500:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/__tests__/integration/crossRoleWorkflows.test.ts:485:32)
      at Object.networkRecoveryTest (src/__tests__/integration/crossRoleWorkflows.test.ts:507:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Workflow Integration Tests › Multi-User Concurrent Scenarios › should handle concurrent user operations

    TypeError: _this.simulateUserSession is not a function

      514 |       const concurrentUsers = 10;
      515 |       const concurrentOperations = Array.from({ length: concurrentUsers }, (_, i) => 
    > 516 |         this.simulateUserSession(`user-${i}`)
          |              ^
      517 |       );
      518 |
      519 |       const results = await Promise.allSettled(concurrentOperations);

      at simulateUserSession (src/__tests__/integration/crossRoleWorkflows.test.ts:516:14)
          at Function.from (<anonymous>)
      at Object.from (src/__tests__/integration/crossRoleWorkflows.test.ts:515:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Workflow Integration Tests › Multi-User Concurrent Scenarios › should maintain system performance under load

    TypeError: _this.simulateCustomerActivity is not a function

      529 |       // Simulate high load across all role types
      530 |       const loadOperations = [
    > 531 |         ...Array.from({ length: 20 }, () => this.simulateCustomerActivity()),
          |                                                  ^
      532 |         ...Array.from({ length: 5 }, () => this.simulateStaffActivity()),
      533 |         ...Array.from({ length: 2 }, () => this.simulateAdminActivity()),
      534 |       ];

      at simulateCustomerActivity (src/__tests__/integration/crossRoleWorkflows.test.ts:531:50)
          at Function.from (<anonymous>)
      at Object.from (src/__tests__/integration/crossRoleWorkflows.test.ts:531:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/__tests__/deployment/environmentConfig.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Environment Configuration Tests › Environment Variable Validation › should validate Supabase configuration

    expect(received).toMatch(expected)

    Expected pattern: /^eyJ[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/
    Received string:  "sb_publishable_zYP0EsARS8pNo5YloCC9sw_TzgFAmHB"

      90 |       
      91 |       // Validate anon key format (JWT-like structure)
    > 92 |       expect(supabaseAnonKey).toMatch(/^eyJ[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/);
         |                               ^
      93 |
      94 |       // Test connection
      95 |       const { data, error } = await supabase

      at Object.toMatch (src/__tests__/deployment/environmentConfig.test.ts:92:31)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Environment Configuration Tests › Security Configuration Validation › should validate authentication configuration

    expect(received).toBeGreaterThanOrEqual(expected)

    Expected: >= 32
    Received:    0

      339 |       };
      340 |
    > 341 |       expect(authConfig.jwt_secret_length).toBeGreaterThanOrEqual(32);
          |                                            ^
      342 |       expect(authConfig.session_timeout).toBeGreaterThan(0);
      343 |       expect(authConfig.max_login_attempts).toBeGreaterThan(0);
      344 |       expect(authConfig.lockout_duration).toBeGreaterThan(0);

      at Object.toBeGreaterThanOrEqual (src/__tests__/deployment/environmentConfig.test.ts:341:44)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx (22.646 s)
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● End-to-End Inventory Workflow Integration Tests (RED Phase) › Complete Stock Update Workflow › should execute stock update → audit trail → cache invalidation flow

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      129 |       );
      130 |
    > 131 |       await waitFor(() => {
          |                    ^
      132 |         expect(inventoryResult.current.isSuccess).toBe(true);
      133 |       });
      134 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx:131:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● End-to-End Inventory Workflow Integration Tests (RED Phase) › Complete Stock Update Workflow › should handle partial failures gracefully in bulk operations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      250 |       });
      251 |
    > 252 |       await waitFor(() => {
          |                    ^
      253 |         expect(result.current.isSuccess).toBe(true);
      254 |       });
      255 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx:252:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● End-to-End Inventory Workflow Integration Tests (RED Phase) › Role Permission Enforcement › should enforce role permissions across schema → service → hook layers

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      285 |       });
      286 |
    > 287 |       await waitFor(() => {
          |                    ^
      288 |         expect(result.current.isError).toBe(true);
      289 |       });
      290 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx:287:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● End-to-End Inventory Workflow Integration Tests (RED Phase) › Role Permission Enforcement › should handle read-only access for restricted users

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      331 |       );
      332 |
    > 333 |       await waitFor(() => {
          |                    ^
      334 |         expect(readResult.current.isSuccess).toBe(true);
      335 |       });
      336 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx:333:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● End-to-End Inventory Workflow Integration Tests (RED Phase) › Real-time Update Propagation › should propagate inventory changes to low stock alerts

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      403 |       );
      404 |
    > 405 |       await waitFor(() => {
          |                    ^
      406 |         expect(lowStockResult.current.isSuccess).toBe(true);
      407 |       });
      408 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx:405:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● End-to-End Inventory Workflow Integration Tests (RED Phase) › Error Recovery Workflows › should recover from network errors with retry mechanism

    thrown: "Exceeded timeout of 10000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      442 |   // Integration Test 4: Error Recovery Workflows
      443 |   describe('Error Recovery Workflows', () => {
    > 444 |     it('should recover from network errors with retry mechanism', async () => {
          |     ^
      445 |       const inventoryItem = {
      446 |         id: 'inv-123',
      447 |         productId: 'product-1',

      at it (src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx:444:5)
      at describe (src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx:443:3)
      at Object.describe (src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx:67:1)

  ● End-to-End Inventory Workflow Integration Tests (RED Phase) › Error Recovery Workflows › should handle optimistic update rollback on failure

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      507 |       );
      508 |
    > 509 |       await waitFor(() => {
          |                    ^
      510 |         expect(inventoryResult.current.isSuccess).toBe(true);
      511 |       });
      512 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx:509:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● End-to-End Inventory Workflow Integration Tests (RED Phase) › Cross-layer Data Consistency › should maintain data consistency across inventory items and movements

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      594 |       );
      595 |
    > 596 |       await waitFor(() => {
          |                    ^
      597 |         expect(inventoryResult.current.isSuccess).toBe(true);
      598 |         expect(movementResult.current.isSuccess).toBe(true);
      599 |       });

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx:596:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/components/role-based/__tests__/PermissionGate.test.tsx (22.709 s)
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● PermissionGate Component › Loading States › should show loading state when user role is loading

    TypeError: _reactNative.StyleSheet.flatten is not a function

      84 |       );
      85 |
    > 86 |       expect(getByTestId('permission-gate-loading')).toBeTruthy();
         |              ^
      87 |       expect(getByText('Checking permissions...')).toBeTruthy();
      88 |     });
      89 |

      at flatten (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:79:32)
      at isSubtreeInaccessible (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:38:38)
      at node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:64
          at Array.filter (<anonymous>)
      at filter (node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:18)
      at queryAllByTestIdFn (node_modules/@testing-library/react-native/src/queries/test-id.ts:32:19)
      at getFn (node_modules/@testing-library/react-native/src/queries/make-queries.ts:154:48)
      at Object.getByTestId (src/components/role-based/__tests__/PermissionGate.test.tsx:86:14)

  ● PermissionGate Component › Loading States › should show loading state when screen permissions are being checked

    TypeError: _reactNative.StyleSheet.flatten is not a function

      104 |       );
      105 |
    > 106 |       expect(getByTestId('permission-gate-loading')).toBeTruthy();
          |              ^
      107 |     });
      108 |
      109 |     it('should use custom loading component when provided', () => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:79:32)
      at isSubtreeInaccessible (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:38:38)
      at node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:64
          at Array.filter (<anonymous>)
      at filter (node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:18)
      at queryAllByTestIdFn (node_modules/@testing-library/react-native/src/queries/test-id.ts:32:19)
      at getFn (node_modules/@testing-library/react-native/src/queries/make-queries.ts:154:48)
      at Object.getByTestId (src/components/role-based/__tests__/PermissionGate.test.tsx:106:14)

  ● PermissionGate Component › Loading States › should use custom loading component when provided

    TypeError: _reactNative.StyleSheet.flatten is not a function

      124 |       );
      125 |
    > 126 |       expect(getByText('Custom Loading...')).toBeTruthy();
          |              ^
      127 |     });
      128 |
      129 |     it('should not show loading when showLoading is false', () => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:79:32)
      at isSubtreeInaccessible (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:38:38)
      at node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:64
          at Array.filter (<anonymous>)
      at filter (node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:18)
      at queryAllByTextFn (node_modules/@testing-library/react-native/src/queries/text.ts:22:19)
      at getFn (node_modules/@testing-library/react-native/src/queries/make-queries.ts:154:48)
      at Object.getByText (src/components/role-based/__tests__/PermissionGate.test.tsx:126:14)

  ● PermissionGate Component › Loading States › should not show loading when showLoading is false

    TypeError: _reactNative.StyleSheet.flatten is not a function

      143 |
      144 |       expect(queryByTestId('permission-gate-loading')).toBeFalsy();
    > 145 |       expect(queryByTestId('permission-gate-denied')).toBeTruthy();
          |              ^
      146 |     });
      147 |   });
      148 |

      at flatten (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:79:32)
      at isSubtreeInaccessible (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:38:38)
      at node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:64
          at Array.filter (<anonymous>)
      at filter (node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:18)
      at queryAllByTestIdFn (node_modules/@testing-library/react-native/src/queries/test-id.ts:32:19)
      at singleQueryFn (node_modules/@testing-library/react-native/src/queries/make-queries.ts:135:48)
      at Object.queryByTestId (src/components/role-based/__tests__/PermissionGate.test.tsx:145:14)

  ● PermissionGate Component › Permission Checks › should grant access when user has required role

    _reactNative.StyleSheet.flatten is not a function

      166 |       );
      167 |
    > 168 |       await waitFor(() => {
          |                    ^
      169 |         expect(getByTestId('permission-gate-granted')).toBeTruthy();
      170 |         expect(getByText('Protected Content')).toBeTruthy();
      171 |         expect(mockValidationMonitor.recordPatternSuccess).toHaveBeenCalledWith({

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:168:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Permission Checks › should deny access when user lacks required role

    _reactNative.StyleSheet.flatten is not a function

      185 |       );
      186 |
    > 187 |       await waitFor(() => {
          |                    ^
      188 |         expect(getByTestId('permission-gate-denied')).toBeTruthy();
      189 |         expect(getByText('Access Denied')).toBeTruthy();
      190 |         expect(getByText('Required role: admin or staff')).toBeTruthy();

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:187:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Permission Checks › should grant access when user has required permissions

    _reactNative.StyleSheet.flatten is not a function

      205 |       );
      206 |
    > 207 |       await waitFor(() => {
          |                    ^
      208 |         expect(getByTestId('permission-gate-granted')).toBeTruthy();
      209 |         expect(getByText('Protected Content')).toBeTruthy();
      210 |       });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:207:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Permission Checks › should deny access when user lacks required permissions

    _reactNative.StyleSheet.flatten is not a function

      219 |       );
      220 |
    > 221 |       await waitFor(() => {
          |                    ^
      222 |         expect(getByTestId('permission-gate-denied')).toBeTruthy();
      223 |         expect(getByText('Missing permission: admin:delete')).toBeTruthy();
      224 |       });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:221:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Permission Checks › should check screen access permissions

    _reactNative.StyleSheet.flatten is not a function

      241 |       );
      242 |
    > 243 |       await waitFor(() => {
          |                    ^
      244 |         expect(getByTestId('permission-gate-granted')).toBeTruthy();
      245 |         expect(getByText('Protected Content')).toBeTruthy();
      246 |       });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:243:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Permission Checks › should deny access when screen permission denied

    _reactNative.StyleSheet.flatten is not a function

      263 |       );
      264 |
    > 265 |       await waitFor(() => {
          |                    ^
      266 |         expect(getByTestId('permission-gate-denied')).toBeTruthy();
      267 |         expect(getByText('No access to AdminScreen')).toBeTruthy();
      268 |       });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:265:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Permission Checks › should handle screen permission errors

    _reactNative.StyleSheet.flatten is not a function

      285 |       );
      286 |
    > 287 |       await waitFor(() => {
          |                    ^
      288 |         expect(getByTestId('permission-gate-denied')).toBeTruthy();
      289 |         expect(getByText('Permission service unavailable')).toBeTruthy();
      290 |       });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:287:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Unauthenticated Users › should deny access for unauthenticated users

    _reactNative.StyleSheet.flatten is not a function

      308 |       );
      309 |
    > 310 |       await waitFor(() => {
          |                    ^
      311 |         expect(getByTestId('permission-gate-denied')).toBeTruthy();
      312 |         expect(getByText('User not authenticated')).toBeTruthy();
      313 |       });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:310:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Inversion Logic › should invert permission check when invert=true

    _reactNative.StyleSheet.flatten is not a function

      324 |       );
      325 |
    > 326 |       await waitFor(() => {
          |                    ^
      327 |         expect(getByTestId('permission-gate-granted')).toBeTruthy();
      328 |         expect(getByText('Protected Content')).toBeTruthy();
      329 |       });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:326:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Inversion Logic › should deny access when invert=true and user has role

    _reactNative.StyleSheet.flatten is not a function

      348 |       );
      349 |
    > 350 |       await waitFor(() => {
          |                    ^
      351 |         expect(getByTestId('permission-gate-denied')).toBeTruthy();
      352 |       });
      353 |     });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:350:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Fallback Handling › should render custom fallback component

    _reactNative.StyleSheet.flatten is not a function

      365 |       );
      366 |
    > 367 |       await waitFor(() => {
          |                    ^
      368 |         expect(getByText('Custom Fallback Content')).toBeTruthy();
      369 |       });
      370 |     });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:367:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Fallback Handling › should render fallback function component with reason

    _reactNative.StyleSheet.flatten is not a function

      382 |       );
      383 |
    > 384 |       await waitFor(() => {
          |                    ^
      385 |         expect(getByText('Access Denied: Required role: admin')).toBeTruthy();
      386 |       });
      387 |     });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:384:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Fallback Handling › should render nothing when fallback is null

    'container' property has been renamed to 'UNSAFE_root'.

    Consider using 'root' property which returns root host element.

      388 |
      389 |     it('should render nothing when fallback is null', async () => {
    > 390 |       const { container } = render(
          |               ^
      391 |         <PermissionGate roles={['admin']} fallback={null}>
      392 |           <TestContent />
      393 |         </PermissionGate>,

      at Object.get (node_modules/@testing-library/react-native/src/render.tsx:130:13)
      at Object.container (src/components/role-based/__tests__/PermissionGate.test.tsx:390:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Combined Permission Checks › should require both role and permission when both specified

    _reactNative.StyleSheet.flatten is not a function

      420 |       );
      421 |
    > 422 |       await waitFor(() => {
          |                    ^
      423 |         expect(getByTestId('permission-gate-granted')).toBeTruthy();
      424 |         expect(getByText('Protected Content')).toBeTruthy();
      425 |       });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:422:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Combined Permission Checks › should deny when role matches but permission missing

    _reactNative.StyleSheet.flatten is not a function

      444 |       );
      445 |
    > 446 |       await waitFor(() => {
          |                    ^
      447 |         expect(getByTestId('permission-gate-denied')).toBeTruthy();
      448 |         expect(getByText('Missing permission: admin:delete')).toBeTruthy();
      449 |       });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:446:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Admin Override › should grant admin users access to all permissions

    _reactNative.StyleSheet.flatten is not a function

      470 |       );
      471 |
    > 472 |       await waitFor(() => {
          |                    ^
      473 |         expect(getByTestId('permission-gate-granted')).toBeTruthy();
      474 |         expect(getByText('Protected Content')).toBeTruthy();
      475 |       });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:472:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Accessibility and Testing › should provide proper test IDs

    _reactNative.StyleSheet.flatten is not a function

      486 |       );
      487 |
    > 488 |       await waitFor(() => {
          |                    ^
      489 |         expect(getByTestId('custom-gate-granted')).toBeTruthy();
      490 |       });
      491 |     });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:488:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/tests/services.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.log
      🛡️ Starting atomic error recovery for payment_failed in operation: payment_processing

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: true,
        action: undefined,
        attempts: undefined,
        recovered: undefined,
        compensationApplied: false,
        message: undefined,
        error: undefined
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

    console.log
      🛡️ Starting atomic error recovery for stock_update_failed in operation: stock_decrement

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: true,
        action: undefined,
        attempts: undefined,
        recovered: undefined,
        compensationApplied: true,
        message: undefined,
        error: undefined
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

    console.log
      🛡️ Starting atomic error recovery for system_error in operation: critical_operation

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: true,
        action: undefined,
        attempts: undefined,
        recovered: undefined,
        compensationApplied: false,
        message: undefined,
        error: undefined
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

    console.log
      🛡️ Starting atomic error recovery for payment_failed in operation: test_operation

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.error
      ❌ Atomic error recovery failed: { message: 'Order not found', code: '23503' }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error (src/services/errorRecoveryService.ts:95:17)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.log
      🛡️ Starting atomic error recovery for payment_failed in operation: test_operation

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.error
      ❌ Atomic error recovery failed: { message: 'Order not found', code: '23503' }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error (src/services/errorRecoveryService.ts:95:17)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.log
      📅 Processing pickup reschedule request for order: test-order-123

      at Function.log (src/services/pickupReschedulingService.ts:56:15)

    console.log
      📅 Processing pickup reschedule request for order: test-order-123

      at Function.log (src/services/pickupReschedulingService.ts:56:15)

    console.log
      📅 Processing pickup reschedule request for order: test-order-123

      at Function.log (src/services/pickupReschedulingService.ts:56:15)

    console.log
      📅 Processing pickup reschedule request for order: invalid-order-id

      at Function.log (src/services/pickupReschedulingService.ts:56:15)

    console.log
      📅 Processing pickup reschedule request for order: test-order-123

      at Function.log (src/services/pickupReschedulingService.ts:56:15)

    console.log
      🛡️ Starting atomic error recovery for payment_failed in operation: payment_processing

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: true,
        action: undefined,
        attempts: undefined,
        recovered: undefined,
        compensationApplied: true,
        message: undefined,
        error: undefined
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

    console.log
      📅 Processing pickup reschedule request for order: test-order-123

      at Function.log (src/services/pickupReschedulingService.ts:56:15)

    console.log
      🛡️ Starting atomic error recovery for payment_failed in operation: performance_test

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: true,
        action: undefined,
        attempts: undefined,
        recovered: undefined,
        compensationApplied: undefined,
        message: undefined,
        error: undefined
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

  ● Services Test Suite › ErrorRecoveryService › should recover from payment failure with retry strategy

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      "recover_from_error_atomic",
      Object {
    -   "p_error_type": "payment_failed",
    -   "p_metadata": Object {
    +   "input_error_type": "payment_failed",
    +   "input_metadata": Object {
          "amount": 21.6,
          "paymentMethod": "credit_card",
        },
    -   "p_operation": "payment_processing",
    -   "p_order_id": "test-order-123",
    -   "p_original_error": "Payment gateway timeout",
    -   "p_recovery_strategy": "retry",
    -   "p_user_id": "test-user-123",
    +   "input_operation": "payment_processing",
    +   "input_order_id": "test-order-123",
    +   "input_original_error": undefined,
    +   "input_retry_count": undefined,
    +   "input_user_id": "test-user-123",
      },

    Number of calls: 1

      110 |       });
      111 |
    > 112 |       expect(supabase.rpc).toHaveBeenCalledWith('recover_from_error_atomic', {
          |                            ^
      113 |         p_error_type: 'payment_failed',
      114 |         p_order_id: mockOrder.id,
      115 |         p_user_id: mockUser.id,

      at Object.toHaveBeenCalledWith (src/tests/services.test.ts:112:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Services Test Suite › ErrorRecoveryService › should handle stock update failure with compensation

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

      154 |
      155 |       expect(result.compensationApplied).toBe(true);
    > 156 |       expect(result.actionsTaken).toContain('stock_restored');
          |                                   ^
      157 |     });
      158 |
      159 |     it('should escalate critical errors to manual intervention', async () => {

      at Object.toContain (src/tests/services.test.ts:156:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Services Test Suite › ErrorRecoveryService › should escalate critical errors to manual intervention

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      181 |       });
      182 |
    > 183 |       expect(result.manualReviewRequired).toBe(true);
          |                                           ^
      184 |       expect(result.actionsTaken).toContain('admin_notified');
      185 |     });
      186 |

      at Object.toBe (src/tests/services.test.ts:183:43)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Services Test Suite › ErrorRecoveryService › should handle RPC function errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"action": "manual_intervention", "attempts": NaN, "compensationApplied": false, "error": "Order not found", "message": "Recovery RPC failed: Order not found", "recovered": false, "success": false}

      193 |       (supabase.rpc as jest.Mock).mockResolvedValue(mockRpcResponse);
      194 |
    > 195 |       await expect(ErrorRecoveryService.recoverFromError({
          |             ^
      196 |         errorType: 'payment_failed',
      197 |         orderId: 'invalid-order-id',
      198 |         userId: mockUser.id,

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (src/tests/services.test.ts:195:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › ErrorRecoveryService › should validate required parameters

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"action": "manual_intervention", "attempts": NaN, "compensationApplied": false, "error": "Order not found", "message": "Recovery RPC failed: Order not found", "recovered": false, "success": false}

      205 |
      206 |     it('should validate required parameters', async () => {
    > 207 |       await expect(ErrorRecoveryService.recoverFromError({
          |             ^
      208 |         errorType: 'payment_failed',
      209 |         orderId: '',
      210 |         userId: mockUser.id,

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (src/tests/services.test.ts:207:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › NotificationService › should send order confirmation notification successfully

    TypeError: Cannot read properties of undefined (reading 'id')

      302 |           type,
      303 |           title: 'Farm Stand Notification',
    > 304 |           body: `Update for your order #${order.id.slice(-6)}`,
          |                                                 ^
      305 |           data: { orderId: order.id }
      306 |         };
      307 |     }

      at Function.id [as getNotificationTemplate] (src/services/notificationService.ts:304:49)
      at Function.getNotificationTemplate (src/services/notificationService.ts:108:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Function.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Function.apply [as sendNotification] (src/services/notificationService.ts:103:39)
      at Object.sendNotification (src/tests/services.test.ts:235:48)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › NotificationService › should handle pickup ready notification with SMS

    TypeError: Cannot read properties of undefined (reading 'id')

      302 |           type,
      303 |           title: 'Farm Stand Notification',
    > 304 |           body: `Update for your order #${order.id.slice(-6)}`,
          |                                                 ^
      305 |           data: { orderId: order.id }
      306 |         };
      307 |     }

      at Function.id [as getNotificationTemplate] (src/services/notificationService.ts:304:49)
      at Function.getNotificationTemplate (src/services/notificationService.ts:108:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Function.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Function.apply [as sendNotification] (src/services/notificationService.ts:103:39)
      at Object.sendNotification (src/tests/services.test.ts:282:48)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › NotificationService › should handle notification delivery failures

    TypeError: Cannot read properties of undefined (reading 'id')

      302 |           type,
      303 |           title: 'Farm Stand Notification',
    > 304 |           body: `Update for your order #${order.id.slice(-6)}`,
          |                                                 ^
      305 |           data: { orderId: order.id }
      306 |         };
      307 |     }

      at Function.id [as getNotificationTemplate] (src/services/notificationService.ts:304:49)
      at Function.getNotificationTemplate (src/services/notificationService.ts:108:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Function.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Function.apply [as sendNotification] (src/services/notificationService.ts:103:39)
      at Object.sendNotification (src/tests/services.test.ts:310:48)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › NotificationService › should validate notification parameters

    expect(received).rejects.toThrow(expected)

    Expected substring: "User ID is required"
    Received message:   "Cannot read properties of undefined (reading 'id')"

          302 |           type,
          303 |           title: 'Farm Stand Notification',
        > 304 |           body: `Update for your order #${order.id.slice(-6)}`,
              |                                                 ^
          305 |           data: { orderId: order.id }
          306 |         };
          307 |     }

      at Function.id [as getNotificationTemplate] (src/services/notificationService.ts:304:49)
      at Function.getNotificationTemplate (src/services/notificationService.ts:108:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Function.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Function.apply [as sendNotification] (src/services/notificationService.ts:103:39)
      at Object.sendNotification (src/tests/services.test.ts:327:40)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (src/tests/services.test.ts:337:19)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › PickupReschedulingService › should reschedule pickup successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "reschedule_pickup_atomic", {"p_new_pickup_date": "2025-08-16", "p_new_pickup_time": "16:00", "p_order_id": "test-order-123", "p_original_pickup_date": undefined, "p_original_pickup_time": undefined, "p_reason": "Schedule conflict", "p_requested_by": "customer", "p_user_id": "test-user-123"}

    Number of calls: 0

      364 |       });
      365 |
    > 366 |       expect(supabase.rpc).toHaveBeenCalledWith('reschedule_pickup_atomic', {
          |                            ^
      367 |         p_order_id: mockOrder.id,
      368 |         p_user_id: mockUser.id,
      369 |         p_original_pickup_date: undefined, // Will be fetched from order

      at Object.toHaveBeenCalledWith (src/tests/services.test.ts:366:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Services Test Suite › PickupReschedulingService › should handle staff-initiated reschedule with approval

    expect(received).toBe(expected) // Object.is equality

    Expected: "approved"
    Received: undefined

      408 |       });
      409 |
    > 410 |       expect(result.status).toBe('approved');
          |                             ^
      411 |       expect(result.customerNotified).toBe(true);
      412 |     });
      413 |

      at Object.toBe (src/tests/services.test.ts:410:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Services Test Suite › PickupReschedulingService › should validate pickup time constraints

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"error": "New pickup time must be in the future", "message": "Reschedule validation failed: New pickup time must be in the future", "success": false}

      423 |       (supabase.rpc as jest.Mock).mockResolvedValue(mockRpcResponse);
      424 |
    > 425 |       await expect(PickupReschedulingService.reschedulePickup({
          |             ^
      426 |         orderId: mockOrder.id,
      427 |         userId: mockUser.id,
      428 |         newPickupDate: '2025-08-01', // Past date

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (src/tests/services.test.ts:425:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › PickupReschedulingService › should handle order not found error

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"error": "New pickup time must be in the future", "message": "Reschedule validation failed: New pickup time must be in the future", "success": false}

      441 |       (supabase.rpc as jest.Mock).mockResolvedValue(mockRpcResponse);
      442 |
    > 443 |       await expect(PickupReschedulingService.reschedulePickup({
          |             ^
      444 |         orderId: 'invalid-order-id',
      445 |         userId: mockUser.id,
      446 |         newPickupDate: '2025-08-16',

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (src/tests/services.test.ts:443:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › PickupReschedulingService › should broadcast reschedule events

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "pickup-rescheduled", {"action": "pickup_rescheduled", "newPickupDate": "2025-08-16", "newPickupTime": "16:00", "orderId": "test-order-123", "timestamp": Any<String>, "userId": "test-user-123"}

    Number of calls: 0

      476 |       });
      477 |
    > 478 |       expect(sendOrderBroadcast).toHaveBeenCalledWith('pickup-rescheduled', {
          |                                  ^
      479 |         userId: mockUser.id,
      480 |         orderId: mockOrder.id,
      481 |         newPickupDate: '2025-08-16',

      at Object.toHaveBeenCalledWith (src/tests/services.test.ts:478:34)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Services Test Suite › NoShowHandlingService › should process no-show with stock restoration

    TypeError: _noShowHandlingService.NoShowHandlingService.processNoShow is not a function

      507 |       (supabase.rpc as jest.Mock).mockResolvedValue(mockRpcResponse);
      508 |
    > 509 |       const result = await NoShowHandlingService.processNoShow({
          |                                                  ^
      510 |         orderId: mockOrder.id,
      511 |         userId: mockUser.id,
      512 |         originalPickupDate: mockOrder.pickupDate,

      at Object.processNoShow (src/tests/services.test.ts:509:50)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › NoShowHandlingService › should skip no-show processing for recent reschedule

    TypeError: _noShowHandlingService.NoShowHandlingService.processNoShow is not a function

      549 |       (supabase.rpc as jest.Mock).mockResolvedValue(mockRpcResponse);
      550 |
    > 551 |       const result = await NoShowHandlingService.processNoShow({
          |                                                  ^
      552 |         orderId: mockOrder.id,
      553 |         userId: mockUser.id,
      554 |         originalPickupDate: mockOrder.pickupDate,

      at Object.processNoShow (src/tests/services.test.ts:551:50)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › NoShowHandlingService › should handle partial stock restoration failures

    TypeError: _noShowHandlingService.NoShowHandlingService.processNoShow is not a function

      582 |       (supabase.rpc as jest.Mock).mockResolvedValue(mockRpcResponse);
      583 |
    > 584 |       const result = await NoShowHandlingService.processNoShow({
          |                                                  ^
      585 |         orderId: mockOrder.id,
      586 |         userId: mockUser.id,
      587 |         originalPickupDate: mockOrder.pickupDate,

      at Object.processNoShow (src/tests/services.test.ts:584:50)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › NoShowHandlingService › should validate no-show parameters

    TypeError: _noShowHandlingService.NoShowHandlingService.processNoShow is not a function

      595 |
      596 |     it('should validate no-show parameters', async () => {
    > 597 |       await expect(NoShowHandlingService.processNoShow({
          |                                          ^
      598 |         orderId: '',
      599 |         userId: mockUser.id,
      600 |         originalPickupDate: mockOrder.pickupDate,

      at Object.processNoShow (src/tests/services.test.ts:597:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › NoShowHandlingService › should handle grace period validation

    TypeError: _noShowHandlingService.NoShowHandlingService.processNoShow is not a function

      605 |
      606 |     it('should handle grace period validation', async () => {
    > 607 |       await expect(NoShowHandlingService.processNoShow({
          |                                          ^
      608 |         orderId: mockOrder.id,
      609 |         userId: mockUser.id,
      610 |         originalPickupDate: mockOrder.pickupDate,

      at Object.processNoShow (src/tests/services.test.ts:607:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › Service Integration › should handle service-to-service communication

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

      652 |       });
      653 |
    > 654 |       expect(recoveryResult.actionsTaken).toContain('customer_notification_scheduled');
          |                                           ^
      655 |
      656 |       // Notification should be sent as part of recovery
      657 |       if (recoveryResult.actionsTaken?.includes('customer_notification_scheduled')) {

      at Object.toContain (src/tests/services.test.ts:654:43)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Services Test Suite › Service Integration › should handle atomic operations across services

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      694 |       });
      695 |
    > 696 |       expect(rescheduleResult.success).toBe(true);
          |                                        ^
      697 |
      698 |       // No-show processing should now skip due to recent reschedule
      699 |       const mockNoShowResponse = {

      at Object.toBe (src/tests/services.test.ts:696:40)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Services Test Suite › Service Performance › should handle concurrent service calls

    TypeError: Cannot read properties of undefined (reading 'id')

      302 |           type,
      303 |           title: 'Farm Stand Notification',
    > 304 |           body: `Update for your order #${order.id.slice(-6)}`,
          |                                                 ^
      305 |           data: { orderId: order.id }
      306 |         };
      307 |     }

      at Function.id [as getNotificationTemplate] (src/services/notificationService.ts:304:49)
      at Function.getNotificationTemplate (src/services/notificationService.ts:108:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Function.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Function.apply [as sendNotification] (src/services/notificationService.ts:103:39)
      at sendNotification (src/tests/services.test.ts:755:29)
          at Function.from (<anonymous>)
      at Object.from (src/tests/services.test.ts:754:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/__tests__/performance/frontendPerformance.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Frontend Performance Tests › React Query Cache Efficiency › should efficiently manage cache size

    TypeError: queryClient.getQueryCache is not a function

      161 |
      162 |     it('should efficiently manage cache size', () => {
    > 163 |       const cacheEntries = queryClient.getQueryCache().getAll();
          |                                        ^
      164 |       
      165 |       // Initially should be empty
      166 |       expect(cacheEntries.length).toBe(0);

      at Object.getQueryCache (src/__tests__/performance/frontendPerformance.test.tsx:163:40)

  ● Frontend Performance Tests › React Query Cache Efficiency › should invalidate queries efficiently

    TypeError: queryClient.getQueryCache is not a function

      203 |       
      204 |       // Verify invalidation worked
    > 205 |       const queries = queryClient.getQueryCache().getAll();
          |                                   ^
      206 |       const productQueries = queries.filter(q => 
      207 |         q.queryKey[0] === 'products'
      208 |       );

      at Object.getQueryCache (src/__tests__/performance/frontendPerformance.test.tsx:205:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Frontend Performance Tests › Component Render Performance › should optimize memo usage

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: 2

      275 |       rerender(<MemoizedComponent data={sameData} />);
      276 |       
    > 277 |       expect(renderCount).toBe(1); // Should only render once
          |                           ^
      278 |     });
      279 |   });
      280 |

      at Object.toBe (src/__tests__/performance/frontendPerformance.test.tsx:277:27)

FAIL src/hooks/inventory/__tests__/useBulkOperations.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.log
      Mock calls: []

      at Object.log (src/hooks/inventory/__tests__/useBulkOperations.test.tsx:148:15)

    console.log
      Result data: {
        success: [
          {
            id: 'inv-1',
            productId: 'prod-1',
            currentStock: 50,
            productName: 'Product 1'
          },
          {
            id: 'inv-2',
            productId: 'prod-2',
            currentStock: 25,
            productName: 'Product 2'
          }
        ],
        failures: []
      }

      at Object.log (src/hooks/inventory/__tests__/useBulkOperations.test.tsx:149:15)

  ● Bulk Operations Hooks › useBulkStockUpdate › should execute bulk stock update successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: [{"currentStock": 50, "inventoryItemId": "inv-1", "performedBy": "test-user-1", "reason": "Bulk restock"}, {"currentStock": 25, "inventoryItemId": "inv-2", "performedBy": "test-user-1", "reason": "Bulk adjustment"}]

    Number of calls: 0

      149 |       console.log('Result data:', result.current.data);
      150 |       
    > 151 |       expect(mockInventoryService.batchUpdateStock).toHaveBeenCalledWith(mockBulkUpdates);
          |                                                     ^
      152 |       expect(result.current.data).toEqual(mockBulkResult);
      153 |     });
      154 |

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useBulkOperations.test.tsx:151:53)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Bulk Operations Hooks › useBulkStockUpdate › should invalidate affected queries on success

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

      175 |
      176 |       // Should set updated items in cache
    > 177 |       expect(setQueryDataSpy).toHaveBeenCalledTimes(2); // One for each success item
          |                               ^
      178 |
      179 |       // Should invalidate dashboard, alerts, and low stock queries
      180 |       expect(invalidateQueriesSpy).toHaveBeenCalled();

      at Object.toHaveBeenCalledTimes (src/hooks/inventory/__tests__/useBulkOperations.test.tsx:177:31)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Bulk Operations Hooks › useBulkStockUpdate › should invalidate all queries on complete failure

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      242 |
      243 |       // Should invalidate all inventory queries for consistency
    > 244 |       expect(invalidateQueriesSpy).toHaveBeenCalled();
          |                                    ^
      245 |     });
      246 |   });
      247 |

      at Object.toHaveBeenCalled (src/hooks/inventory/__tests__/useBulkOperations.test.tsx:244:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Bulk Operations Hooks › Error Handling and Edge Cases › should handle empty bulk update arrays

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: []

    Number of calls: 0

      891 |       });
      892 |
    > 893 |       expect(mockInventoryService.batchUpdateStock).toHaveBeenCalledWith([]);
          |                                                     ^
      894 |     });
      895 |   });
      896 | });

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useBulkOperations.test.tsx:893:53)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/components/role-based/__tests__/RoleBasedButton.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● RoleBasedButton Component › Basic Functionality › should render button with correct title

    TypeError: _reactNative.StyleSheet.flatten is not a function

      78 |       );
      79 |
    > 80 |       expect(getByText('Test Button')).toBeTruthy();
         |              ^
      81 |     });
      82 |
      83 |     it('should call onPress when user has permission', async () => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:79:32)
      at isSubtreeInaccessible (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:38:38)
      at node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:64
          at Array.filter (<anonymous>)
      at filter (node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:18)
      at queryAllByTextFn (node_modules/@testing-library/react-native/src/queries/text.ts:22:19)
      at getFn (node_modules/@testing-library/react-native/src/queries/make-queries.ts:154:48)
      at Object.getByText (src/components/role-based/__tests__/RoleBasedButton.test.tsx:80:14)

  ● RoleBasedButton Component › Basic Functionality › should call onPress when user has permission

    TypeError: _reactNative.StyleSheet.flatten is not a function

      91 |       );
      92 |
    > 93 |       const button = getByTestId('test-button');
         |                      ^
      94 |       fireEvent.press(button);
      95 |
      96 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:93:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Basic Functionality › should handle disabled prop independently of permissions

    TypeError: _reactNative.StyleSheet.flatten is not a function

      115 |       );
      116 |
    > 117 |       const button = getByTestId('test-button');
          |                      ^
      118 |       fireEvent.press(button);
      119 |
      120 |       expect(mockOnPress).not.toHaveBeenCalled();

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:117:22)

  ● RoleBasedButton Component › Basic Functionality › should show loading state

    TypeError: _reactNative.StyleSheet.flatten is not a function

      131 |       );
      132 |
    > 133 |       expect(getByText('Test Button...')).toBeTruthy();
          |              ^
      134 |     });
      135 |   });
      136 |

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByText (src/components/role-based/__tests__/RoleBasedButton.test.tsx:133:14)

  ● RoleBasedButton Component › Role-Based Access Control › should allow access when user has required role

    TypeError: _reactNative.StyleSheet.flatten is not a function

      157 |       );
      158 |
    > 159 |       const button = getByTestId('admin-button');
          |                      ^
      160 |       fireEvent.press(button);
      161 |
      162 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:159:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Role-Based Access Control › should deny access and show message when user lacks required role

    TypeError: _reactNative.StyleSheet.flatten is not a function

      176 |       );
      177 |
    > 178 |       const button = getByTestId('admin-button');
          |                      ^
      179 |       fireEvent.press(button);
      180 |
      181 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:178:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Role-Based Access Control › should handle multiple allowed roles

    TypeError: _reactNative.StyleSheet.flatten is not a function

      215 |       );
      216 |
    > 217 |       const button = getByTestId('staff-button');
          |                      ^
      218 |       fireEvent.press(button);
      219 |
      220 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:217:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Permission-Based Access Control › should allow access when user has required permission

    TypeError: _reactNative.StyleSheet.flatten is not a function

      236 |       );
      237 |
    > 238 |       const button = getByTestId('products-button');
          |                      ^
      239 |       fireEvent.press(button);
      240 |
      241 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:238:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Permission-Based Access Control › should deny access when user lacks required permission

    TypeError: _reactNative.StyleSheet.flatten is not a function

      255 |       );
      256 |
    > 257 |       const button = getByTestId('delete-button');
          |                      ^
      258 |       fireEvent.press(button);
      259 |
      260 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:257:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Permission-Based Access Control › should allow admin users to access all permissions

    TypeError: _reactNative.StyleSheet.flatten is not a function

      289 |       );
      290 |
    > 291 |       const button = getByTestId('any-button');
          |                      ^
      292 |       fireEvent.press(button);
      293 |
      294 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:291:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Screen-Based Access Control › should allow access when user can navigate to screen

    TypeError: _reactNative.StyleSheet.flatten is not a function

      318 |       );
      319 |
    > 320 |       const button = getByTestId('admin-nav-button');
          |                      ^
      321 |       fireEvent.press(button);
      322 |
      323 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:320:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Screen-Based Access Control › should deny access when user cannot navigate to screen

    TypeError: _reactNative.StyleSheet.flatten is not a function

      345 |       );
      346 |
    > 347 |       const button = getByTestId('admin-nav-button');
          |                      ^
      348 |       fireEvent.press(button);
      349 |
      350 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:347:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Screen-Based Access Control › should handle navigation permission errors

    TypeError: _reactNative.StyleSheet.flatten is not a function

      377 |       );
      378 |
    > 379 |       const button = getByTestId('admin-nav-button');
          |                      ^
      380 |       fireEvent.press(button);
      381 |
      382 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:379:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Loading States › should show checking state when user role is loading

    TypeError: _reactNative.StyleSheet.flatten is not a function

      404 |       );
      405 |
    > 406 |       expect(getByText('Checking...')).toBeTruthy();
          |              ^
      407 |     });
      408 |
      409 |     it('should show checking state when screen permissions are loading', () => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByText (src/components/role-based/__tests__/RoleBasedButton.test.tsx:406:14)

  ● RoleBasedButton Component › Loading States › should show checking state when screen permissions are loading

    TypeError: _reactNative.StyleSheet.flatten is not a function

      425 |       );
      426 |
    > 427 |       expect(getByText('Checking...')).toBeTruthy();
          |              ^
      428 |     });
      429 |   });
      430 |

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByText (src/components/role-based/__tests__/RoleBasedButton.test.tsx:427:14)

  ● RoleBasedButton Component › Unauthenticated Users › should deny access for unauthenticated users

    TypeError: _reactNative.StyleSheet.flatten is not a function

      447 |       );
      448 |
    > 449 |       const button = getByTestId('test-button');
          |                      ^
      450 |       fireEvent.press(button);
      451 |
      452 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:449:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Custom Messages and Styling › should use custom permission message

    TypeError: _reactNative.StyleSheet.flatten is not a function

      474 |       );
      475 |
    > 476 |       const button = getByTestId('test-button');
          |                      ^
      477 |       fireEvent.press(button);
      478 |
      479 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:476:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Custom Messages and Styling › should not show permission message when showPermissionMessage is false

    TypeError: _reactNative.StyleSheet.flatten is not a function

      498 |       );
      499 |
    > 500 |       const button = getByTestId('test-button');
          |                      ^
      501 |       fireEvent.press(button);
      502 |
      503 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:500:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Custom Messages and Styling › should apply custom disabled style

    TypeError: _reactNative.StyleSheet.flatten is not a function

      520 |       );
      521 |
    > 522 |       const button = getByTestId('test-button');
          |                      ^
      523 |       // Would need to check style application in a real test environment
      524 |       expect(button).toBeTruthy();
      525 |     });

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:522:22)

  ● RoleBasedButton Component › Hide When Denied › should hide button when hideWhenDenied is true and permission denied

    'container' property has been renamed to 'UNSAFE_root'.

    Consider using 'root' property which returns root host element.

      528 |   describe('Hide When Denied', () => {
      529 |     it('should hide button when hideWhenDenied is true and permission denied', async () => {
    > 530 |       const { container } = render(
          |               ^
      531 |         <RoleBasedButton 
      532 |           title="Admin Button" 
      533 |           onPress={mockOnPress}

      at Object.get (node_modules/@testing-library/react-native/src/render.tsx:130:13)
      at Object.container (src/components/role-based/__tests__/RoleBasedButton.test.tsx:530:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Hide When Denied › should show button when hideWhenDenied is true but user has permission

    TypeError: _reactNative.StyleSheet.flatten is not a function

      564 |       );
      565 |
    > 566 |       expect(getByText('Admin Button')).toBeTruthy();
          |              ^
      567 |     });
      568 |
      569 |     it('should show button in loading state even when hideWhenDenied is true', () => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:79:32)
      at isSubtreeInaccessible (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:38:38)
      at node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:64
          at Array.filter (<anonymous>)
      at filter (node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:18)
      at queryAllByTextFn (node_modules/@testing-library/react-native/src/queries/text.ts:22:19)
      at getFn (node_modules/@testing-library/react-native/src/queries/make-queries.ts:154:48)
      at Object.getByText (src/components/role-based/__tests__/RoleBasedButton.test.tsx:566:14)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Hide When Denied › should show button in loading state even when hideWhenDenied is true

    TypeError: _reactNative.StyleSheet.flatten is not a function

      585 |       );
      586 |
    > 587 |       expect(getByText('Checking...')).toBeTruthy();
          |              ^
      588 |     });
      589 |   });
      590 |

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByText (src/components/role-based/__tests__/RoleBasedButton.test.tsx:587:14)

  ● RoleBasedButton Component › Complex Permission Scenarios › should handle multiple permission types

    TypeError: _reactNative.StyleSheet.flatten is not a function

      621 |       );
      622 |
    > 623 |       const button = getByTestId('complex-button');
          |                      ^
      624 |       fireEvent.press(button);
      625 |
      626 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:623:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Complex Permission Scenarios › should deny when any permission check fails

    TypeError: _reactNative.StyleSheet.flatten is not a function

      660 |       );
      661 |
    > 662 |       const button = getByTestId('complex-button');
          |                      ^
      663 |       fireEvent.press(button);
      664 |
      665 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:662:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/__tests__/integration/contentWorkflowEndToEnd.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:31.370Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:31.481Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.warn
      ⚠️ content falling back to global query key (userId unavailable)

      418 |       return;
      419 |     }
    > 420 |     originalWarn(...args);
          |                 ^
      421 |   };
      422 |   
      423 |   console.error = (...args: any[]) => {

      at console.apply [as warn] (src/test/base-setup.ts:420:17)
      at Object.warn [as all] (src/utils/queryKeyFactory.ts:30:17)
      at Object.all [as getAllPossibleKeys] (src/utils/queryKeyFactory.ts:75:53)
      at Object.getAllPossibleKeys [as getInvalidationKeys] (src/utils/queryKeyFactory.ts:86:46)
      at Object.getInvalidationKeys (src/utils/queryKeyFactory.ts:677:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Object.apply [as invalidateEntity] (src/utils/queryKeyFactory.ts:668:21)
      at Object.invalidateEntity (src/__tests__/integration/contentWorkflowEndToEnd.test.ts:276:47)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.error
      ❌ Failed to invalidate content query key: [ 'content', 'integration-test-user' ] Error: Cache invalidation failed
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/__tests__/integration/contentWorkflowEndToEnd.test.ts:273:32)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.then.completed (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/testWorker.js:106:12)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Object.error (src/utils/queryKeyFactory.ts:687:19)
          at Generator.throw (<anonymous>)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)

    console.log
      ✅ Retry successful for content query key: [ 'content', 'integration-test-user' ]

      at Object.log (src/utils/queryKeyFactory.ts:695:23)

    console.log
      ✅ Invalidated content query key: [ 'content', 'global-fallback' ]

      at Object.log (src/utils/queryKeyFactory.ts:684:19)

    console.log
      ✅ Invalidated content query key: [ 'content', 'global-fallback' ]

      at Object.log (src/utils/queryKeyFactory.ts:684:19)

    console.log
      ✅ Invalidated content query key: [ 'content' ]

      at Object.log (src/utils/queryKeyFactory.ts:684:19)

    console.log
      📊 content invalidation summary: 4/4 successful

      at Object.log (src/utils/queryKeyFactory.ts:706:15)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:32.701Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:32.804Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:32.906Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:32.906Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:32.907Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:32.907Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:32.907Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:32.907Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:32.907Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:32.908Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:32.908Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:32.908Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.010Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.114Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.114Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.114Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.115Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.115Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.115Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.115Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.116Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.116Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.116Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.116Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.117Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.117Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.117Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.117Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.117Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.118Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.118Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.118Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [VALIDATION_MONITOR] Validation error in ProductContentService.createProductContent {
        timestamp: '2025-08-24T20:13:33.118Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ProductContentService.createProductContent',
          errorCode: 'INSUFFICIENT_PERMISSIONS',
          validationPattern: 'content_transformation_schema',
          errorMessage: 'Insufficient permissions for content creation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/services/marketing/productContentService.ts:90:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow End-to-End Integration - Phase 3.4.1 (RED Phase) › Complete Workflow Integration (Schema → Service → Hook) › should execute complete content creation and workflow progression

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      63 |         'content_management'
      64 |       );
    > 65 |       expect(hasCreatePermission).toBe(true);
         |                                   ^
      66 |
      67 |       // Step 2: Create content through service layer
      68 |       const createInput: CreateProductContentInput = {

      at Object.toBe (src/__tests__/integration/contentWorkflowEndToEnd.test.ts:65:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow End-to-End Integration - Phase 3.4.1 (RED Phase) › Complete Workflow Integration (Schema → Service → Hook) › should handle workflow validation errors across the stack

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      171 |         testUserId
      172 |       );
    > 173 |       expect(createResult.success).toBe(true);
          |                                    ^
      174 |
      175 |       const contentId = createResult.data!.id;
      176 |

      at Object.toBe (src/__tests__/integration/contentWorkflowEndToEnd.test.ts:173:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow End-to-End Integration - Phase 3.4.1 (RED Phase) › Cross-Layer Cache Coordination › should coordinate cache invalidation across all layers

    TypeError: Cannot read properties of undefined (reading 'id')

      218 |         testUserId
      219 |       );
    > 220 |       const contentId = createResult.data!.id;
          |                                            ^
      221 |
      222 |       // Cache content at multiple query key levels
      223 |       queryClient.setQueryData(

      at Object.id (src/__tests__/integration/contentWorkflowEndToEnd.test.ts:220:44)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow End-to-End Integration - Phase 3.4.1 (RED Phase) › Cross-Layer Cache Coordination › should handle cache invalidation failures gracefully

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 5

      282 |       expect(result.success).toBe(true); // Should succeed on retry
      283 |       expect(result.summary.successCount).toBeGreaterThan(0);
    > 284 |       expect(invalidateQueriesSpy).toHaveBeenCalledTimes(2); // Initial failure + retry
          |                                    ^
      285 |     });
      286 |   });
      287 |

      at Object.toHaveBeenCalledTimes (src/__tests__/integration/contentWorkflowEndToEnd.test.ts:284:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow End-to-End Integration - Phase 3.4.1 (RED Phase) › File Upload Integration with Workflow › should integrate file upload with content workflow

    TypeError: Cannot read properties of undefined (reading 'id')

      300 |         testUserId
      301 |       );
    > 302 |       const contentId = createResult.data!.id;
          |                                            ^
      303 |
      304 |       // Test file upload
      305 |       const mockFileData = {

      at Object.id (src/__tests__/integration/contentWorkflowEndToEnd.test.ts:302:44)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow End-to-End Integration - Phase 3.4.1 (RED Phase) › File Upload Integration with Workflow › should handle file upload errors without affecting content state

    TypeError: Cannot read properties of undefined (reading 'id')

      347 |         testUserId
      348 |       );
    > 349 |       const contentId = createResult.data!.id;
          |                                            ^
      350 |
      351 |       // Test invalid file upload
      352 |       const invalidFileData = {

      at Object.id (src/__tests__/integration/contentWorkflowEndToEnd.test.ts:349:44)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow End-to-End Integration - Phase 3.4.1 (RED Phase) › Performance and Reliability Integration › should maintain performance under load

    expect(received).toBe(expected) // Object.is equality

    Expected: 10
    Received: 0

      397 |       const successCount = results.filter(r => r.success).length;
      398 |
    > 399 |       expect(successCount).toBe(10);
          |                            ^
      400 |       expect(duration).toBeLessThan(5000); // Under 5 seconds for 10 operations
      401 |
      402 |       // Test workflow operations on all created content

      at Object.toBe (src/__tests__/integration/contentWorkflowEndToEnd.test.ts:399:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow End-to-End Integration - Phase 3.4.1 (RED Phase) › Performance and Reliability Integration › should handle database connection issues gracefully

    expect(received).toHaveBeenCalledWith(...expected)

    Matcher error: received value must be a mock or spy function

    Received has type:  function
    Received has value: [Function recordValidationError]

      434 |
      435 |       // Verify ValidationMonitor captured the database error
    > 436 |       expect(ValidationMonitor.recordValidationError).toHaveBeenCalledWith({
          |                                                       ^
      437 |         context: expect.stringContaining('ProductContentService'),
      438 |         errorCode: expect.stringContaining('DATABASE'),
      439 |         validationPattern: 'transformation_schema',

      at Object.toHaveBeenCalledWith (src/__tests__/integration/contentWorkflowEndToEnd.test.ts:436:55)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/services/__tests__/noShowHandlingService.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.log
      🕐 Starting no-show order processing...

      at Function.log (src/services/noShowHandlingService.ts:68:15)

    console.log
      🕐 Starting no-show order processing...

      at Function.log (src/services/noShowHandlingService.ts:68:15)

    console.log
      🕐 Starting no-show order processing...

      at Function.log (src/services/noShowHandlingService.ts:68:15)

    console.log
      🕐 Starting no-show order processing...

      at Function.log (src/services/noShowHandlingService.ts:68:15)

    console.log
      🕐 Starting no-show order processing...

      at Function.log (src/services/noShowHandlingService.ts:68:15)

    console.log
      🕐 Starting no-show order processing...

      at Function.log (src/services/noShowHandlingService.ts:68:15)

    console.log
      🕐 Starting no-show order processing...

      at Function.log (src/services/noShowHandlingService.ts:68:15)

    console.log
      🕐 Starting no-show order processing...

      at Function.log (src/services/noShowHandlingService.ts:68:15)

    console.log
      🕐 Starting no-show monitoring (checking every 15 minutes)

      at Function.log [as startNoShowMonitoring] (src/services/noShowHandlingService.ts:410:13)

    console.log
      🛑 No-show monitoring stopped

      at Function.log [as stopNoShowMonitoring] (src/services/noShowHandlingService.ts:426:13)

    console.log
      🕐 Starting no-show monitoring (checking every 15 minutes)

      at Function.log [as startNoShowMonitoring] (src/services/noShowHandlingService.ts:410:13)

    console.log
      🛑 No-show monitoring stopped

      at Function.log [as stopNoShowMonitoring] (src/services/noShowHandlingService.ts:426:13)

    console.log
      🕐 Starting no-show order processing...

      at Function.log (src/services/noShowHandlingService.ts:68:15)

    console.log
      🕐 Starting no-show order processing...

      at Function.log (src/services/noShowHandlingService.ts:68:15)

    console.log
      🕐 Starting no-show order processing...

      at Function.log (src/services/noShowHandlingService.ts:68:15)

  ● NoShowHandlingService › processNoShowOrders › should successfully process no-show orders

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      157 |       expect(result).toBeDefined();
      158 |       expect(result.success).toBe(true);
    > 159 |       expect(result.processedOrders).toHaveLength(1);
          |                                      ^
      160 |       expect(result.processedOrders[0].orderId).toBe('order-123');
      161 |       expect(result.processedOrders[0].action).toBe('cancelled');
      162 |       expect(result.processedOrders[0].stockRestored).toBe(true);

      at Object.toHaveLength (src/services/__tests__/noShowHandlingService.test.ts:159:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NoShowHandlingService › processNoShowOrders › should handle config with auto-cancel disabled

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      243 |
      244 |       expect(result.success).toBe(true);
    > 245 |       expect(result.processedOrders).toHaveLength(1);
          |                                      ^
      246 |       expect(result.processedOrders[0].action).toBe('notified');
      247 |       expect(result.processedOrders[0].stockRestored).toBe(false);
      248 |       expect(mockUpdateOrderStatus).not.toHaveBeenCalled();

      at Object.toHaveLength (src/services/__tests__/noShowHandlingService.test.ts:245:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NoShowHandlingService › processNoShowOrders › should handle config with notifications disabled

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      270 |
      271 |       expect(result.success).toBe(true);
    > 272 |       expect(result.processedOrders).toHaveLength(1);
          |                                      ^
      273 |       expect(result.processedOrders[0].action).toBe('cancelled');
      274 |       expect(result.processedOrders[0].notificationSent).toBe(false);
      275 |       expect(mockUpdateOrderStatus).toHaveBeenCalled();

      at Object.toHaveLength (src/services/__tests__/noShowHandlingService.test.ts:272:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NoShowHandlingService › processNoShowOrders › should handle order processing errors

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      314 |
      315 |       expect(result.success).toBe(true);
    > 316 |       expect(result.processedOrders).toHaveLength(1);
          |                                      ^
      317 |       expect(result.processedOrders[0].action).toBe('notified'); // fallback action
      318 |       expect(result.processedOrders[0].stockRestored).toBe(false);
      319 |     });

      at Object.toHaveLength (src/services/__tests__/noShowHandlingService.test.ts:316:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NoShowHandlingService › processNoShowOrders › should handle notification failures gracefully

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      337 |
      338 |       expect(result.success).toBe(true);
    > 339 |       expect(result.processedOrders).toHaveLength(1);
          |                                      ^
      340 |       expect(result.processedOrders[0].action).toBe('cancelled');
      341 |       expect(result.processedOrders[0].notificationSent).toBe(false);
      342 |     });

      at Object.toHaveLength (src/services/__tests__/noShowHandlingService.test.ts:339:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NoShowHandlingService › edge cases › should handle orders with missing customer information

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      496 |
      497 |       expect(result.success).toBe(true);
    > 498 |       expect(result.processedOrders).toHaveLength(1);
          |                                      ^
      499 |     });
      500 |
      501 |     it('should handle orders with different payment methods', async () => {

      at Object.toHaveLength (src/services/__tests__/noShowHandlingService.test.ts:498:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NoShowHandlingService › edge cases › should handle orders with different payment methods

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      518 |
      519 |       expect(result.success).toBe(true);
    > 520 |       expect(result.processedOrders).toHaveLength(1);
          |                                      ^
      521 |       expect(mockSendNotification).toHaveBeenCalledWith(
      522 |         expect.objectContaining({
      523 |           customMessage: expect.not.stringContaining('refunded')

      at Object.toHaveLength (src/services/__tests__/noShowHandlingService.test.ts:520:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/role-based/__tests__/rolePermission.integration.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Role Permission Integration Tests - Phase 1 › should handle complete end-to-end role fetching flow

    expect(received).toBe(expected) // Object.is equality

    Expected: "integration-role-123"
    Received: undefined

       98 |     
       99 |     // Verify schema transformation (snake_case → camelCase)
    > 100 |     expect(transformedResult?.id).toBe('integration-role-123');
          |                                   ^
      101 |     expect(transformedResult?.userId).toBe('integration-user-456');  // user_id → userId
      102 |     expect(transformedResult?.roleType).toBe('inventory_staff');      // role_type → roleType
      103 |     expect(transformedResult?.permissions).toEqual(['view_inventory', 'update_stock']);

      at Object.toBe (src/hooks/role-based/__tests__/rolePermission.integration.test.tsx:100:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Role Permission Integration Tests - Phase 1 › should integrate role-based permission checking end-to-end

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      140 |     // Step 2: Test role-based permission (should have view_inventory from ROLE_PERMISSIONS)
      141 |     const hasRolePermission = await RolePermissionService.hasPermission('perm-user-456', 'view_inventory');
    > 142 |     expect(hasRolePermission).toBe(true);
          |                               ^
      143 |
      144 |     // Step 3: Test custom permission
      145 |     const hasCustomPermission = await RolePermissionService.hasPermission('perm-user-456', 'custom_permission');

      at Object.toBe (src/hooks/role-based/__tests__/rolePermission.integration.test.tsx:142:31)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Role Permission Integration Tests - Phase 1 › should handle errors gracefully across schema, service, and hook layers

    expect(received).toBeNull()

    Received: undefined

      172 |     });
      173 |
    > 174 |     await waitFor(() => {
          |                  ^
      175 |       // Hook should handle service errors gracefully
      176 |       expect(result.current.data).toBeNull();
      177 |     });

      at Object.<anonymous> (src/hooks/role-based/__tests__/rolePermission.integration.test.tsx:174:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Role Permission Integration Tests - Phase 1 › should handle role creation with input validation end-to-end

    expect(received).toBe(expected) // Object.is equality

    Expected: "create-user-789"
    Received: undefined

      241 |
      242 |     // Step 4: Verify complete transformation
    > 243 |     expect(result?.userId).toBe('create-user-789');
          |                            ^
      244 |     expect(result?.roleType).toBe('marketing_staff');
      245 |     expect(result?.permissions).toEqual(['view_products', 'update_product_content']);
      246 |

      at Object.toBe (src/hooks/role-based/__tests__/rolePermission.integration.test.tsx:243:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Role Permission Integration Tests - Phase 1 › should handle resilient processing with partial failures

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 0
    Received array:  []

      291 |
      292 |     // Step 3: Verify resilient processing worked
    > 293 |     expect(result.success).toHaveLength(2);  // 2 valid items processed
          |                            ^
      294 |     expect(result.errors).toHaveLength(1);   // 1 invalid item skipped
      295 |     expect(result.totalProcessed).toBe(2);   // Only valid items counted
      296 |

      at Object.toHaveLength (src/hooks/role-based/__tests__/rolePermission.integration.test.tsx:293:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Role Permission Integration Tests - Phase 1 › should integrate with React Query cache management correctly

    expect(received).toBeDefined()

    Received: undefined

      331 |     // Step 3: Verify data is cached
      332 |     const cachedData = queryClient.getQueryData(['roles', 'user', 'cache-user-456']);
    > 333 |     expect(cachedData).toBeDefined();
          |                        ^
      334 |
      335 |     // Step 4: Verify query key structure for proper cache management
      336 |     expect(result.current.queryKey).toEqual(['roles', 'user', 'cache-user-456']);

      at Object.toBeDefined (src/hooks/role-based/__tests__/rolePermission.integration.test.tsx:333:24)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Role Permission Integration Tests - Phase 1 › should integrate current user detection with role fetching

    expect(received).toBe(expected) // Object.is equality

    Expected: "integration-user-123"
    Received: undefined

      420 |
      421 |     // Should fetch current user's role
    > 422 |     expect(result.current.data?.userId).toBe('integration-user-123');
          |                                         ^
      423 |     expect(result.current.queryKey).toEqual(['roles', 'user', 'integration-user-123']);
      424 |   });
      425 | });

      at Object.toBe (src/hooks/role-based/__tests__/rolePermission.integration.test.tsx:422:41)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/schemas/__tests__/kiosk.schema.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Kiosk Schemas › DbKioskSessionTransformSchema › should validate complete session data

    ReferenceError: KioskSessionSchema is not defined

      31 |
      32 |     it('should validate complete session data', () => {
    > 33 |       const result = KioskSessionSchema.parse(validSessionData);
         |                      ^
      34 |       expect(result).toMatchObject(validSessionData);
      35 |     });
      36 |

      at Object.KioskSessionSchema (src/schemas/__tests__/kiosk.schema.test.ts:33:22)

  ● Kiosk Schemas › DbKioskSessionTransformSchema › should apply default values correctly

    ReferenceError: KioskSessionSchema is not defined

      43 |       };
      44 |
    > 45 |       const result = KioskSessionSchema.parse(minimalData);
         |                      ^
      46 |       expect(result.totalSales).toBe(0);
      47 |       expect(result.transactionCount).toBe(0);
      48 |       expect(result.isActive).toBe(true);

      at Object.KioskSessionSchema (src/schemas/__tests__/kiosk.schema.test.ts:45:22)

  ● Kiosk Schemas › DbKioskSessionTransformSchema › should validate nullable optional fields properly

    ReferenceError: KioskSessionSchema is not defined

      60 |       };
      61 |
    > 62 |       const result = KioskSessionSchema.parse(dataWithNulls);
         |                      ^
      63 |       expect(result.sessionEnd).toBeNull();
      64 |       expect(result.deviceId).toBeNull();
      65 |       expect(result.currentCustomer).toBeNull();

      at Object.KioskSessionSchema (src/schemas/__tests__/kiosk.schema.test.ts:62:22)

  ● Kiosk Schemas › DbKioskSessionSchema › should validate database format

    ReferenceError: DbKioskSessionSchema is not defined

       99 |
      100 |     it('should validate database format', () => {
    > 101 |       const result = DbKioskSessionSchema.parse(validDbData);
          |                      ^
      102 |       expect(result).toMatchObject(validDbData);
      103 |     });
      104 |

      at Object.DbKioskSessionSchema (src/schemas/__tests__/kiosk.schema.test.ts:101:22)

  ● Kiosk Schemas › KioskTransactionSchema › should apply default values

    ZodError: [
      {
        "expected": "'pending' | 'completed' | 'failed'",
        "received": "undefined",
        "code": "invalid_type",
        "path": [
          "payment_status"
        ],
        "message": "Required"
      }
    ]

      311 |       };
      312 |
    > 313 |       const result = DbKioskTransactionTransformSchema.parse(minimalTransaction);
          |                                                        ^
      314 |       expect(result.taxAmount).toBe(0);
      315 |       expect(result.paymentStatus).toBe('pending');
      316 |     });

      at Object.get error [as error] (node_modules/zod/v3/types.cjs:45:31)
      at ZodEffects.parse (node_modules/zod/v3/types.cjs:120:22)
      at Object.parse (src/schemas/__tests__/kiosk.schema.test.ts:313:56)

  ● Kiosk Schemas › Response Schemas › KioskSessionResponseSchema › should validate session response with session data

    ZodError: [
      {
        "code": "invalid_type",
        "expected": "string",
        "received": "undefined",
        "path": [
          "session",
          "staff_id"
        ],
        "message": "Required"
      }
    ]

      366 |         };
      367 |
    > 368 |         const result = KioskSessionResponseSchema.parse(sessionResponse);
          |                                                   ^
      369 |         expect(result.success).toBe(true);
      370 |         expect(result.session).toMatchObject(sessionResponse.session);
      371 |       });

      at Object.get error [as error] (node_modules/zod/v3/types.cjs:45:31)
      at ZodObject.parse (node_modules/zod/v3/types.cjs:120:22)
      at Object.parse (src/schemas/__tests__/kiosk.schema.test.ts:368:51)

FAIL src/hooks/inventory/__tests__/integration/cacheIntegration.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in CachePerformanceMonitor.test-operation {
        timestamp: '2025-08-24T20:13:33.779Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'CachePerformanceMonitor',
          pattern: 'direct_supabase_query',
          operation: 'test-operation',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in CachePerformanceMonitor.cache_miss_test-operation {
        timestamp: '2025-08-24T20:13:33.787Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'CachePerformanceMonitor',
          pattern: 'direct_supabase_query',
          operation: 'cache_miss_test-operation',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in CachePerformanceMonitor.cache_invalidation_test-invalidation {
        timestamp: '2025-08-24T20:13:33.788Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'CachePerformanceMonitor',
          pattern: 'direct_supabase_query',
          operation: 'cache_invalidation_test-invalidation',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in CachePerformanceMonitor.optimistic_update_test-optimistic {
        timestamp: '2025-08-24T20:13:33.788Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'CachePerformanceMonitor',
          pattern: 'direct_supabase_query',
          operation: 'optimistic_update_test-optimistic',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in CachePerformanceMonitor.fast-operation {
        timestamp: '2025-08-24T20:13:33.891Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'CachePerformanceMonitor',
          pattern: 'direct_supabase_query',
          operation: 'fast-operation',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in CachePerformanceMonitor.fast-operation {
        timestamp: '2025-08-24T20:13:33.892Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'CachePerformanceMonitor',
          pattern: 'direct_supabase_query',
          operation: 'fast-operation',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in CachePerformanceMonitor.fast-operation {
        timestamp: '2025-08-24T20:13:33.892Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'CachePerformanceMonitor',
          pattern: 'direct_supabase_query',
          operation: 'fast-operation',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in CachePerformanceMonitor.fast-operation {
        timestamp: '2025-08-24T20:13:33.892Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'CachePerformanceMonitor',
          pattern: 'direct_supabase_query',
          operation: 'fast-operation',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in CachePerformanceMonitor.fast-operation {
        timestamp: '2025-08-24T20:13:33.893Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'CachePerformanceMonitor',
          pattern: 'direct_supabase_query',
          operation: 'fast-operation',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in CachePerformanceMonitor.fast-operation {
        timestamp: '2025-08-24T20:13:33.893Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'CachePerformanceMonitor',
          pattern: 'direct_supabase_query',
          operation: 'fast-operation',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in CachePerformanceMonitor.fast-operation {
        timestamp: '2025-08-24T20:13:33.894Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'CachePerformanceMonitor',
          pattern: 'direct_supabase_query',
          operation: 'fast-operation',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in CachePerformanceMonitor.fast-operation {
        timestamp: '2025-08-24T20:13:33.894Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'CachePerformanceMonitor',
          pattern: 'direct_supabase_query',
          operation: 'fast-operation',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in CachePerformanceMonitor.cache_miss_slow-operation {
        timestamp: '2025-08-24T20:13:33.894Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'CachePerformanceMonitor',
          pattern: 'direct_supabase_query',
          operation: 'cache_miss_slow-operation',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in CachePerformanceMonitor.cache_miss_slow-operation {
        timestamp: '2025-08-24T20:13:33.894Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'CachePerformanceMonitor',
          pattern: 'direct_supabase_query',
          operation: 'cache_miss_slow-operation',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

  ● Cache Strategy Integration Tests › Smart Invalidation Strategy › should invalidate related caches when stock is updated

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      134 |
      135 |       // Verify all related caches were invalidated
    > 136 |       expect(queryClient.getQueryState(['inventory', 'user-specific', undefined, 'details', undefined, 'item', 'inv-123'])?.isInvalidated).toBe(true);
          |                                                                                                                                            ^
      137 |       expect(queryClient.getQueryState(['inventory', 'user-specific', undefined, 'list', 'items'])?.isInvalidated).toBe(true);
      138 |       expect(queryClient.getQueryState(['inventory', 'user-specific', undefined, 'list', 'low-stock', undefined])?.isInvalidated).toBe(true);
      139 |     });

      at Object.toBe (src/hooks/inventory/__tests__/integration/cacheIntegration.test.tsx:136:140)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cache Strategy Integration Tests › Smart Invalidation Strategy › should coordinate cross-entity cache invalidation

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      162 |
      163 |       // Verify cross-entity caches were affected
    > 164 |       expect(queryClient.getQueryState(['inventory', 'user-specific', undefined, 'details', undefined, 'item', 'inv-123'])?.isInvalidated).toBe(true);
          |                                                                                                                                            ^
      165 |       // Note: Cross-entity invalidation would be tested with actual cache patterns
      166 |     });
      167 |   });

      at Object.toBe (src/hooks/inventory/__tests__/integration/cacheIntegration.test.tsx:164:140)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cache Strategy Integration Tests › Optimistic Update Strategy › should perform optimistic stock updates with intelligent rollback

    expect(received).toMatchObject(expected)

    - Expected  - 2
    + Received  + 2

      Object {
    -   "availableStock": 65,
    -   "currentStock": 75,
    +   "availableStock": 90,
    +   "currentStock": 100,
        "id": "inv-123",
      }

      198 |       // Verify optimistic update was applied
      199 |       const optimisticData = queryClient.getQueryData(['inventory', 'user-specific', undefined, 'details', undefined, 'item', 'inv-123']);
    > 200 |       expect(optimisticData).toMatchObject({
          |                              ^
      201 |         id: 'inv-123',
      202 |         currentStock: 75,
      203 |         availableStock: 65, // 75 - 10 reserved

      at Object.toMatchObject (src/hooks/inventory/__tests__/integration/cacheIntegration.test.tsx:200:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cache Strategy Integration Tests › Optimistic Update Strategy › should update related list caches optimistically

    expect(received).toMatchObject(expected)

    - Expected  - 2
    + Received  + 2

      Object {
    -   "availableStock": 0,
    -   "currentStock": 10,
    +   "availableStock": 90,
    +   "currentStock": 100,
        "id": "inv-123",
      }

      235 |       // Verify list cache was updated optimistically
      236 |       const listData = queryClient.getQueryData(['inventory', 'user-specific', undefined, 'list', 'items']) as any[];
    > 237 |       expect(listData?.[0]).toMatchObject({
          |                             ^
      238 |         id: 'inv-123',
      239 |         currentStock: 10,
      240 |         availableStock: 0, // 10 - 10 reserved

      at Object.toMatchObject (src/hooks/inventory/__tests__/integration/cacheIntegration.test.tsx:237:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cache Strategy Integration Tests › Real-time Update Coordination › should handle real-time stock changes with smart cache updates

    expect(received).toEqual(expected) // deep equality

    Expected: {"availableStock": 75, "createdAt": "2024-01-01T00:00:00Z", "currentStock": 85, "id": "inv-123", "isActive": true, "isVisibleToCustomers": true, "lastStockUpdate": "2024-01-01T11:30:00Z", "maximumThreshold": 500, "minimumThreshold": 15, "productId": "product-1", "reservedStock": 10, "updatedAt": "2024-01-01T11:30:00Z"}
    Received: undefined

      280 |       // Verify primary cache was updated
      281 |       const itemData = queryClient.getQueryData(['inventory', 'user-specific', undefined, 'details', undefined, 'item', 'inv-123']);
    > 282 |       expect(itemData).toEqual(newData);
          |                        ^
      283 |     });
      284 |
      285 |     it('should add movements to audit trail cache during real-time updates', async () => {

      at Object.toEqual (src/hooks/inventory/__tests__/integration/cacheIntegration.test.tsx:282:24)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cache Strategy Integration Tests › Real-time Update Coordination › should add movements to audit trail cache during real-time updates

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      326 |       // Verify movement was added to history cache
      327 |       const historyData = queryClient.getQueryData(['inventory', 'user-specific', undefined, 'details', undefined, 'item', 'inv-123', 'movements', undefined]) as any;
    > 328 |       expect(historyData?.success).toHaveLength(1);
          |                                    ^
      329 |       expect(historyData?.success[0]).toEqual(movement);
      330 |       expect(historyData?.totalProcessed).toBe(1);
      331 |     });

      at Object.toHaveLength (src/hooks/inventory/__tests__/integration/cacheIntegration.test.tsx:328:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cache Strategy Integration Tests › Performance Optimization › should perform batch invalidation for bulk operations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      365 |       operations.forEach(op => {
      366 |         const state = queryClient.getQueryState(['inventory', 'user-specific', undefined, 'details', undefined, 'item', op.inventoryItemId]);
    > 367 |         expect(state?.isInvalidated).toBe(true);
          |                                      ^
      368 |       });
      369 |     });
      370 |

      at toBe (src/hooks/inventory/__tests__/integration/cacheIntegration.test.tsx:367:38)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/hooks/inventory/__tests__/integration/cacheIntegration.test.tsx:365:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cache Strategy Integration Tests › Performance Monitoring Integration › should provide performance analysis and recommendations

    expect(received).toContain(expected) // indexOf

    Expected value: StringContaining "Excellent cache hit rate"
    Received array: ["Excellent cache hit rate: 80.0%", "Fast average response time: 44.0ms", "Efficient cross-entity cache coordination"]

    Looks like you wanted to test for object/array equality with the stricter `toContain` matcher. You probably need to use `toContainEqual` instead.

      432 |       
      433 |       expect(analysis.status).toBe('excellent'); // 80% hit rate, fast response
    > 434 |       expect(analysis.highlights).toContain(expect.stringContaining('Excellent cache hit rate'));
          |                                   ^
      435 |       expect(analysis.highlights).toContain(expect.stringContaining('Fast average response time'));
      436 |     });
      437 |   });

      at Object.toContain (src/hooks/inventory/__tests__/integration/cacheIntegration.test.tsx:434:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/tests/simpleServices.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.log
      🔐 Starting login process for: invalid-email

      at Function.log (src/services/authService.ts:199:15)

    console.error
      [VALIDATION_MONITOR] Validation error in ValidationPipeline.AuthService.login {
        timestamp: '2025-08-24T20:13:32.244Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'ValidationPipeline.AuthService.login',
          errorMessage: 'email must be a valid email address',
          errorCode: 'INPUT_VALIDATION_FAILED',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Function.recordValidationError (src/utils/validationPipeline.ts:98:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      Login error: Error: email must be a valid email address
          at Function.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/utils/validationPipeline.ts:435:13)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error (src/services/authService.ts:315:15)
          at Generator.throw (<anonymous>)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)

    console.error
      Registration error: Error: Email, password, and name are required
          at validateRegisterInput (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/authService.ts:113:11)
          at Function.validateRegisterInput (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/authService.ts:332:30)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Function.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Function.apply [as register] (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/authService.ts:323:24)
          at Object.register (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/tests/simpleServices.test.ts:133:32)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.then.completed (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/testWorker.js:106:12)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error (src/services/authService.ts:407:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Function.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Function.apply [as register] (src/services/authService.ts:323:24)
      at Object.register (src/tests/simpleServices.test.ts:133:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.error
      Registration error: Error: Password must be at least 6 characters long
          at validateRegisterInput (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/authService.ts:121:11)
          at Function.validateRegisterInput (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/authService.ts:332:30)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Function.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Function.apply [as register] (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/authService.ts:323:24)
          at Object.register (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/tests/simpleServices.test.ts:137:32)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error (src/services/authService.ts:407:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Function.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Function.apply [as register] (src/services/authService.ts:323:24)
      at Object.register (src/tests/simpleServices.test.ts:137:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.log
      🔐 Starting login process for: test@example.com

      at Function.log (src/services/authService.ts:199:15)

    console.log
      🧹 Clearing any existing session...

      at Function.log (src/services/authService.ts:218:15)

    console.log
      ✅ No existing session found

      at Function.log (src/services/authService.ts:228:17)

    console.log
      🔑 Attempting Supabase authentication...

      at Function.log (src/services/authService.ts:235:15)

    console.log
      🔍 Supabase auth response user data: {
        "id": "user-123",
        "email": "test@example.com"
      }

      at Function.log (src/services/authService.ts:250:15)

    console.log
      🔍 Supabase auth response session data: {
        "access_token": "token",
        "refresh_token": "refresh"
      }

      at Function.log (src/services/authService.ts:251:15)

    console.warn
      Invalid Supabase session data: {
        error: '[\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "number",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "expires_in"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "token_type"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "object",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "user"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  }\n' +
          ']',
        invalidData: { access_token: 'token', refresh_token: 'refresh' }
      }

      418 |       return;
      419 |     }
    > 420 |     originalWarn(...args);
          |                 ^
      421 |   };
      422 |   
      423 |   console.error = (...args: any[]) => {

      at console.apply [as warn] (src/test/base-setup.ts:420:17)
      at warn (src/services/authService.ts:74:13)
      at Function.validateSupabaseSession (src/services/authService.ts:255:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      Login error: Error: Invalid session data received
          at validateSupabaseSession (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/authService.ts:78:11)
          at Function.validateSupabaseSession (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/authService.ts:255:32)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error (src/services/authService.ts:315:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.log
      🧹 Starting simple token cleanup...

      at Function.log (src/services/tokenService.ts:104:15)

    console.log
      ✅ AsyncStorage cleanup completed

      at Function.log (src/services/tokenService.ts:119:17)

    console.log
      🛒 getCart() called - fetching from Supabase...

      at Object.log (src/services/cartService.ts:77:13)

    console.log
      👤 User auth status: not authenticated

      at Object.log (src/services/cartService.ts:81:15)

    console.log
      🚫 User not authenticated, returning empty cart

      at Object.log (src/services/cartService.ts:84:17)

    console.error
      🚨 User not authenticated for cart operation

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Object.error (src/services/cartService.ts:304:17)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.log
      🚀 Setting up SECURE order updates broadcast subscriptions...

      at Function.log (src/services/realtimeService.ts:33:13)

    console.log
      🔐 Setting up encrypted user-specific order channel subscription...

      at Function.log (src/services/realtimeService.ts:58:15)

    console.log
      🚀 Setting up SECURE product updates broadcast subscription...

      at Function.log (src/services/realtimeService.ts:180:15)

    console.log
      🚀 Setting up SECURE user-specific cart updates broadcast subscription for user: user-123

      at Function.log (src/services/realtimeService.ts:247:15)

    console.log
      🔄 Starting stock restoration for order order-123, reason: order_cancelled

      at Function.log (src/services/stockRestorationService.ts:51:15)

    console.log
      Stock restoration event: {
        order_id: 'order-123',
        customer_email: undefined,
        restoration_reason: 'order_cancelled',
        items_restored: 1,
        items_failed: 0,
        restored_items_data: [
          {
            productId: 'product-123',
            productName: 'Test Product',
            quantityRestored: 2,
            newStockLevel: 10
          }
        ],
        failed_items_data: [],
        total_quantity_restored: 2,
        created_at: '2025-08-24T20:13:33.234Z'
      }

      at Function.log (src/services/stockRestorationService.ts:267:15)

    console.log
      ✅ Stock restoration completed: Stock restored for 1 items from order order-123

      at Function.log (src/services/stockRestorationService.ts:106:15)

    console.error
      Unexpected error in submitOrder: Error: Customer information is required
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/orderService.ts:325:13
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
          at apply (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/orderService.ts:318:25)
          at Object.submitOrder (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/tests/simpleServices.test.ts:314:28)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.then.completed (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/testWorker.js:106:12)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at error (src/services/orderService.ts:605:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/services/orderService.ts:318:25)
      at Object.submitOrder (src/tests/simpleServices.test.ts:314:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.error
      Unexpected error in submitOrder: Error: Order must contain at least one item
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/orderService.ts:329:13
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
          at apply (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/orderService.ts:318:25)
          at Object.submitOrder (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/tests/simpleServices.test.ts:334:28)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.then.completed (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/testWorker.js:106:12)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at error (src/services/orderService.ts:605:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/services/orderService.ts:318:25)
      at Object.submitOrder (src/tests/simpleServices.test.ts:334:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.error
      Invalid product data, skipping: {
        productId: 'product-1',
        name: 'Test Product',
        error: '[\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "description"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "number",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "stock_quantity"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "category_id"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "boolean",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "is_available"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "created_at"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "updated_at"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  }\n' +
          ']'
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at ProductService.error (src/services/productService.ts:191:19)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Simple Services Tests › AuthService Core Functions › should handle login validation

    expect(received).rejects.toThrow(expected)

    Expected substring: "Please enter a valid email address"
    Received message:   "email must be a valid email address"

          433 |     if (!result.success) {
          434 |       const errorMessage = result.errors?.join('; ') || 'Validation failed';
        > 435 |       throw new Error(errorMessage);
              |             ^
          436 |     }
          437 |
          438 |     return result.data!;

      at Function.<anonymous> (src/utils/validationPipeline.ts:435:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (src/tests/simpleServices.test.ts:122:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Simple Services Tests › AuthService Core Functions › should handle successful login

    Invalid session data received

      76 |       invalidData: session
      77 |     });
    > 78 |     throw new Error('Invalid session data received');
         |           ^
      79 |   }
      80 | };
      81 |

      at validateSupabaseSession (src/services/authService.ts:78:11)
      at Function.validateSupabaseSession (src/services/authService.ts:255:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Simple Services Tests › RealtimeService Core Functions › should handle subscription operations

    TypeError: Cannot read properties of undefined (reading 'state')

      366 |     const status = Array.from(this.subscriptions.entries()).map(([channelName, subscription]) => ({
      367 |       channel: channelName,
    > 368 |       state: subscription.state,
          |                           ^
      369 |       isConnected: subscription.state === 'joined'
      370 |     }));
      371 |     

      at state (src/services/realtimeService.ts:368:27)
          at Array.map (<anonymous>)
      at Function.map [as getSubscriptionStatus] (src/services/realtimeService.ts:366:61)
      at Object.getSubscriptionStatus (src/tests/simpleServices.test.ts:245:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Simple Services Tests › OrderService Core Functions › should validate order submission requirements

    expect(received).toBe(expected) // Object.is equality

    Expected: "Missing required customer information"
    Received: "Unexpected error: Customer information is required"

      315 |       
      316 |       expect(result.success).toBe(false);
    > 317 |       expect(result.error).toBe('Missing required customer information');
          |                            ^
      318 |     });
      319 |
      320 |     it('should validate items requirement', async () => {

      at Object.toBe (src/tests/simpleServices.test.ts:317:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Simple Services Tests › OrderService Core Functions › should validate items requirement

    expect(received).toBe(expected) // Object.is equality

    Expected: "Order must contain at least one item"
    Received: "Unexpected error: Order must contain at least one item"

      335 |       
      336 |       expect(result.success).toBe(false);
    > 337 |       expect(result.error).toBe('Order must contain at least one item');
          |                            ^
      338 |     });
      339 |   });
      340 |

      at Object.toBe (src/tests/simpleServices.test.ts:337:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Simple Services Tests › ProductService Core Functions › should handle product operations

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      363 |       
      364 |       expect(result.success).toBe(true);
    > 365 |       expect(result.products).toHaveLength(1);
          |                               ^
      366 |     });
      367 |
      368 |     it('should handle product search', async () => {

      at Object.toHaveLength (src/tests/simpleServices.test.ts:365:31)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/__tests__/unit/KioskContext.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.log
      ✅ KioskContext unit tests completed

      at Object.log (src/__tests__/unit/KioskContext.test.tsx:211:9)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in KioskContext.startAuthentication {
        timestamp: '2025-08-24T20:13:32.968Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'KioskContext',
          pattern: 'simple_input_validation',
          operation: 'startAuthentication',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in KioskContext.startAuthentication {
        timestamp: '2025-08-24T20:13:33.078Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'KioskContext',
          pattern: 'simple_input_validation',
          operation: 'startAuthentication',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in KioskContext.hideAuthentication {
        timestamp: '2025-08-24T20:13:33.079Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'KioskContext',
          pattern: 'simple_input_validation',
          operation: 'hideAuthentication',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in KioskContext.getSessionInfo {
        timestamp: '2025-08-24T20:13:33.183Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'KioskContext',
          pattern: 'transformation_schema',
          operation: 'getSessionInfo',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in KioskContext.getSessionInfo {
        timestamp: '2025-08-24T20:13:33.286Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'KioskContext',
          pattern: 'transformation_schema',
          operation: 'getSessionInfo',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in KioskContext.startAuthentication {
        timestamp: '2025-08-24T20:13:33.702Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'KioskContext',
          pattern: 'simple_input_validation',
          operation: 'startAuthentication',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

  ● KioskContext › Storage Integration › should attempt to hydrate from storage on mount

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "@kiosk_session"

    Number of calls: 0

      147 |
      148 |       // Should attempt to read from storage
    > 149 |       expect(mockAsyncStorage.getItem).toHaveBeenCalledWith('@kiosk_session');
          |                                        ^
      150 |     });
      151 |
      152 |     it('should handle storage errors gracefully', async () => {

      at Object.toHaveBeenCalledWith (src/__tests__/unit/KioskContext.test.tsx:149:40)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/schemas/__tests__/payment.schema.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.warn
      Failed to parse payment metadata, using empty object: SyntaxError: Unexpected token 'i', "invalid json{" is not valid JSON
          at JSON.parse (<anonymous>)
          at Object.parse [as transform] (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/schemas/payment.schema.ts:95:29)
          at ZodEffects._parse (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/zod/v3/types.cjs:3309:39)
          at ZodEffects._parseSync (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/zod/v3/types.cjs:106:29)
          at ZodEffects.safeParse (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/zod/v3/types.cjs:135:29)
          at ZodEffects.parse (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/zod/v3/types.cjs:117:29)
          at Object.parse (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/schemas/__tests__/payment.schema.test.ts:137:52)
          at Promise.then.completed (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/testWorker.js:106:12)

      418 |       return;
      419 |     }
    > 420 |     originalWarn(...args);
          |                 ^
      421 |   };
      422 |   
      423 |   console.error = (...args: any[]) => {

      at console.apply [as warn] (src/test/base-setup.ts:420:17)
      at Object.warn [as transform] (src/schemas/payment.schema.ts:97:15)
      at ZodEffects._parse (node_modules/zod/v3/types.cjs:3309:39)
      at ZodEffects._parseSync (node_modules/zod/v3/types.cjs:106:29)
      at ZodEffects.safeParse (node_modules/zod/v3/types.cjs:135:29)
      at ZodEffects.parse (node_modules/zod/v3/types.cjs:117:29)
      at Object.parse (src/schemas/__tests__/payment.schema.test.ts:137:52)

  ● Payment Schema Validation - Following Established Patterns › Database-First Validation (Following Pattern) › should handle empty strings as valid nullable fields

    ZodError: [
      {
        "received": "",
        "code": "invalid_enum_value",
        "options": [
          "pending",
          "processing",
          "succeeded",
          "failed",
          "canceled",
          "requires_payment_method",
          "requires_confirmation",
          "requires_action"
        ],
        "path": [
          "status"
        ],
        "message": "Invalid enum value. Expected 'pending' | 'processing' | 'succeeded' | 'failed' | 'canceled' | 'requires_payment_method' | 'requires_confirmation' | 'requires_action', received ''"
      }
    ]

      75 |       };
      76 |
    > 77 |       const result = PaymentTransformSchema.parse(dataWithEmptyStrings);
         |                                             ^
      78 |
      79 |       expect(result.paymentIntentId).toBe('');
      80 |       expect(result.paymentMethodId).toBe('');

      at Object.get error [as error] (node_modules/zod/v3/types.cjs:45:31)
      at ZodEffects.parse (node_modules/zod/v3/types.cjs:120:22)
      at Object.parse (src/schemas/__tests__/payment.schema.test.ts:77:45)

  ● Payment Schema Validation - Following Established Patterns › Calculation Validation (Following Pattern) › should validate payment calculations with tolerance

    expect(received).toEqual(expected) // deep equality

    - Expected  - 0
    + Received  + 1

      Object {
    +   "discount": 0,
        "subtotal": 10,
        "tax": 0.85,
        "tip": 2,
        "total": 12.85,
      }

      255 |
      256 |       const result = PaymentCalculationSchema.parse(validCalculation);
    > 257 |       expect(result).toEqual(validCalculation);
          |                      ^
      258 |     });
      259 |
      260 |     it('should detect calculation mismatches', () => {

      at Object.toEqual (src/schemas/__tests__/payment.schema.test.ts:257:22)

  ● Payment Schema Validation - Following Established Patterns › Request/Response Schema Validation (Following Pattern) › should validate payment operation response

    ZodError: [
      {
        "code": "invalid_type",
        "expected": "string",
        "received": "undefined",
        "path": [
          "payment",
          "user_id"
        ],
        "message": "Required"
      }
    ]

      318 |       };
      319 |
    > 320 |       const result = PaymentOperationResponseSchema.parse(successResponse);
          |                                                     ^
      321 |       expect(result.success).toBe(true);
      322 |       expect(result.payment).toBeDefined();
      323 |       expect(result.error).toBeUndefined();

      at Object.get error [as error] (node_modules/zod/v3/types.cjs:45:31)
      at ZodEffects.parse (node_modules/zod/v3/types.cjs:120:22)
      at Object.parse (src/schemas/__tests__/payment.schema.test.ts:320:53)

FAIL src/__tests__/integration/performanceIntegration.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.warn
      ⚠️ campaigns falling back to global query key (userId unavailable)

      418 |       return;
      419 |     }
    > 420 |     originalWarn(...args);
          |                 ^
      421 |   };
      422 |   
      423 |   console.error = (...args: any[]) => {

      at console.apply [as warn] (src/test/base-setup.ts:420:17)
      at Object.warn [as all] (src/utils/queryKeyFactory.ts:30:17)
      at Object.all [as getAllPossibleKeys] (src/utils/queryKeyFactory.ts:75:53)
      at Object.getAllPossibleKeys [as getInvalidationKeys] (src/utils/queryKeyFactory.ts:86:46)
      at Object.getInvalidationKeys (src/utils/queryKeyFactory.ts:677:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Object.apply [as invalidateEntity] (src/utils/queryKeyFactory.ts:668:21)
      at Object.invalidateEntity (src/__tests__/integration/performanceIntegration.test.ts:454:59)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.log
      ✅ Invalidated campaigns query key: [ 'campaigns', 'perf-test-user-123' ]

      at Object.log (src/utils/queryKeyFactory.ts:684:19)

    console.log
      ✅ Invalidated campaigns query key: [ 'campaigns', 'global-fallback' ]

      at Object.log (src/utils/queryKeyFactory.ts:684:19)

    console.log
      ✅ Invalidated campaigns query key: [ 'campaigns', 'global-fallback' ]

      at Object.log (src/utils/queryKeyFactory.ts:684:19)

    console.log
      ✅ Invalidated campaigns query key: [ 'campaigns' ]

      at Object.log (src/utils/queryKeyFactory.ts:684:19)

    console.log
      📊 campaigns invalidation summary: 4/4 successful

      at Object.log (src/utils/queryKeyFactory.ts:706:15)

    console.log
      Performance Test Summary: {
        totalOperations: 0,
        averageDuration: NaN,
        maxDuration: -Infinity,
        totalMemoryUsage: 0
      }

      at Object.log (src/__tests__/integration/performanceIntegration.test.ts:595:13)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › Large Content Dataset Handling Across All Layers › should handle large content queries efficiently

    TypeError: _productContentService.ProductContentService.getContentWithPerformanceOptimization is not a function

      100 |
      101 |       // Test service layer performance
    > 102 |       const serviceResult = await ProductContentService.getContentWithPerformanceOptimization(
          |                                                         ^
      103 |         {
      104 |           status: 'published',
      105 |           pagination: { page: 1, limit: 100 },

      at Object.getContentWithPerformanceOptimization (src/__tests__/integration/performanceIntegration.test.ts:102:57)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › Large Content Dataset Handling Across All Layers › should optimize content transformation performance

    TypeError: _productContentService.ProductContentService.transformContentBatch is not a function

      152 |       }));
      153 |
    > 154 |       const transformationResult = await ProductContentService.transformContentBatch(
          |                                                                ^
      155 |         rawContentData,
      156 |         { 
      157 |           enableParallelProcessing: true,

      at Object.transformContentBatch (src/__tests__/integration/performanceIntegration.test.ts:154:64)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › Large Content Dataset Handling Across All Layers › should handle concurrent content operations efficiently

    TypeError: _productContentService.ProductContentService.createProductContentWithPerformanceTracking is not a function

      187 |       const concurrentResults = await Promise.all(
      188 |         concurrentOperations.map(op => 
    > 189 |           ProductContentService.createProductContentWithPerformanceTracking(
          |                                 ^
      190 |             op.data,
      191 |             testUserId,
      192 |             { trackMetrics: true }

      at createProductContentWithPerformanceTracking (src/__tests__/integration/performanceIntegration.test.ts:189:33)
          at Array.map (<anonymous>)
      at Object.map (src/__tests__/integration/performanceIntegration.test.ts:188:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › File Upload Performance with Progress Tracking › should optimize large file upload performance

    TypeError: _productContentService.ProductContentService.uploadLargeContentFileWithOptimization is not a function

      229 |       };
      230 |
    > 231 |       const uploadResult = await ProductContentService.uploadLargeContentFileWithOptimization(
          |                                                        ^
      232 |         'content-123',
      233 |         largeFileData,
      234 |         testUserId,

      at Object.uploadLargeContentFileWithOptimization (src/__tests__/integration/performanceIntegration.test.ts:231:56)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › File Upload Performance with Progress Tracking › should handle multiple file uploads concurrently

    TypeError: _productContentService.ProductContentService.uploadContentFileWithThrottling is not a function

      273 |       const uploadResults = await Promise.all(
      274 |         fileUploads.map(upload => 
    > 275 |           ProductContentService.uploadContentFileWithThrottling(
          |                                 ^
      276 |             upload.contentId,
      277 |             upload.fileData,
      278 |             testUserId,

      at uploadContentFileWithThrottling (src/__tests__/integration/performanceIntegration.test.ts:275:33)
          at Array.map (<anonymous>)
      at Object.map (src/__tests__/integration/performanceIntegration.test.ts:274:21)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › File Upload Performance with Progress Tracking › should optimize file upload error recovery

    TypeError: _productContentService.ProductContentService.uploadFileWithRetryStrategy is not a function

      305 |
      306 |       // Mock upload with retries
    > 307 |       const uploadResult = await ProductContentService.uploadFileWithRetryStrategy(
          |                                                        ^
      308 |         'content-error-test',
      309 |         problematicFileData,
      310 |         testUserId,

      at Object.uploadFileWithRetryStrategy (src/__tests__/integration/performanceIntegration.test.ts:307:56)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › Campaign Metric Aggregation Performance › should aggregate campaign metrics efficiently

    TypeError: _marketingCampaignService.MarketingCampaignService.aggregateMetricsWithPerformanceOptimization is not a function

      339 |       }));
      340 |
    > 341 |       const aggregationResult = await MarketingCampaignService.aggregateMetricsWithPerformanceOptimization(
          |                                                                ^
      342 |         {
      343 |           dateRange: {
      344 |             startDate: '2024-01-01',

      at Object.aggregateMetricsWithPerformanceOptimization (src/__tests__/integration/performanceIntegration.test.ts:341:64)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › Campaign Metric Aggregation Performance › should handle real-time metric updates efficiently

    TypeError: _marketingCampaignService.MarketingCampaignService.recordMetricWithBatching is not a function

      378 |       const updateResults = await Promise.all(
      379 |         realtimeUpdates.map(update => 
    > 380 |           MarketingCampaignService.recordMetricWithBatching(
          |                                    ^
      381 |             update.campaignId,
      382 |             update.metricType,
      383 |             update.value,

      at recordMetricWithBatching (src/__tests__/integration/performanceIntegration.test.ts:380:36)
          at Array.map (<anonymous>)
      at Object.map (src/__tests__/integration/performanceIntegration.test.ts:379:25)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › Campaign Metric Aggregation Performance › should optimize cross-campaign performance analysis

    TypeError: _marketingCampaignService.MarketingCampaignService.performCrossCampaignAnalysisWithOptimization is not a function

      402 |       const operation = performanceTracker.start('cross_campaign_analysis');
      403 |
    > 404 |       const analysisResult = await MarketingCampaignService.performCrossCampaignAnalysisWithOptimization(
          |                                                             ^
      405 |         {
      406 |           campaignIds: Array.from({ length: 50 }, (_, i) => `campaign-${i}`),
      407 |           analysisTypes: ['performance', 'correlation', 'trends', 'forecasting'],

      at Object.performCrossCampaignAnalysisWithOptimization (src/__tests__/integration/performanceIntegration.test.ts:404:61)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › Cache Efficiency with Complex Invalidation Patterns › should handle cache memory pressure efficiently

    TypeError: op is not a function

      487 |
      488 |       // Execute cache loading
    > 489 |       cacheLoadOperations.forEach(op => op());
          |                                         ^
      490 |
      491 |       // Test cache cleanup performance
      492 |       const cleanupResult = await MarketingCampaignService.optimizeCacheMemoryUsage(

      at op (src/__tests__/integration/performanceIntegration.test.ts:489:41)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/__tests__/integration/performanceIntegration.test.ts:489:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › Cache Efficiency with Complex Invalidation Patterns › should optimize cross-entity cache coordination

    TypeError: _marketingCampaignService.MarketingCampaignService.coordinateCrossEntityCacheUpdates is not a function

      509 |
      510 |       // Test coordinated cache updates across entities
    > 511 |       const coordinationResult = await MarketingCampaignService.coordinateCrossEntityCacheUpdates(
          |                                                                 ^
      512 |         {
      513 |           campaignUpdate: { campaignId: 'campaign-1', status: 'active' },
      514 |           affectedContent: ['content-1', 'content-2'],

      at Object.coordinateCrossEntityCacheUpdates (src/__tests__/integration/performanceIntegration.test.ts:511:65)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › Memory Usage and Resource Management › should manage memory during intensive operations

    TypeError: _productContentService.ProductContentService.processLargeContentBatch is not a function

      535 |       // Perform memory-intensive operations
      536 |       const intensiveOperations = [
    > 537 |         ProductContentService.processLargeContentBatch(
          |                               ^
      538 |           Array.from({ length: 500 }, (_, i) => ({ id: `content-${i}` })),
      539 |           testUserId
      540 |         ),

      at Object.processLargeContentBatch (src/__tests__/integration/performanceIntegration.test.ts:537:31)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › Memory Usage and Resource Management › should handle resource cleanup efficiently

    TypeError: _productContentService.ProductContentService.createTemporaryProcessingResources is not a function

      571 |       // Create resources that need cleanup
      572 |       const resourceOperations = await Promise.all([
    > 573 |         ProductContentService.createTemporaryProcessingResources(50),
          |                               ^
      574 |         MarketingCampaignService.createAnalyticsWorkspace(testUserId),
      575 |         ProductBundleService.createInventoryCalculationCache(100)
      576 |       ]);

      at Object.createTemporaryProcessingResources (src/__tests__/integration/performanceIntegration.test.ts:573:31)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/__tests__/integration/crossRoleIntegration.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Marketing Actions → Inventory Impact Tracking › should track inventory impact when creating product bundles

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      60 |       });
      61 |
    > 62 |       mockInventoryService.calculateInventoryImpact.mockResolvedValue({
         |                                                     ^
      63 |         success: true,
      64 |         data: {
      65 |           impact: [{

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:62:53)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Marketing Actions → Inventory Impact Tracking › should handle inventory shortages when activating bundles

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      121 |     test('should handle inventory shortages when activating bundles', async () => {
      122 |       // Mock inventory shortage scenario
    > 123 |       mockInventoryService.calculateInventoryImpact.mockResolvedValue({
          |                                                     ^
      124 |         success: true,
      125 |         data: {
      126 |           impact: [{

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:123:53)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Marketing Actions → Inventory Impact Tracking › should reserve inventory when campaign activates bundles

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      172 |       
      173 |       // Mock successful inventory reservation
    > 174 |       mockInventoryService.reserveInventoryForCampaign.mockResolvedValue({
          |                                                        ^
      175 |         success: true,
      176 |         data: {
      177 |           reservationId: 'reservation-123',

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:174:56)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Bundle Creation → Inventory Reservation Validation › should validate inventory availability before bundle creation

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      220 |       ];
      221 |
    > 222 |       mockInventoryService.validateBundleInventoryRequirements.mockResolvedValue({
          |                                                                ^
      223 |         success: true,
      224 |         data: {
      225 |           overallValidation: {

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:222:64)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Bundle Creation → Inventory Reservation Validation › should handle partial inventory availability scenarios

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      273 |       ];
      274 |
    > 275 |       mockInventoryService.validateBundleInventoryRequirements.mockResolvedValue({
          |                                                                ^
      276 |         success: true,
      277 |         data: {
      278 |           overallValidation: {

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:275:64)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Bundle Creation → Inventory Reservation Validation › should integrate with executive analytics for inventory insights

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      320 |       
      321 |       // Mock executive analytics data collection
    > 322 |       mockBusinessMetricsService.recordInventoryImpactMetric.mockResolvedValue({
          |                                                              ^
      323 |         success: true,
      324 |         data: {
      325 |           metricId: 'metric-123',

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:322:62)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Campaign Performance → Executive Analytics Pipeline › should aggregate campaign data for executive dashboards

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      392 |
      393 |       // Mock executive analytics aggregation
    > 394 |       mockBusinessMetricsService.aggregateCampaignDataForExecutive.mockResolvedValue({
          |                                                                    ^
      395 |         success: true,
      396 |         data: {
      397 |           executiveSummary: {

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:394:68)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Campaign Performance → Executive Analytics Pipeline › should provide real-time executive notifications for significant changes

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      443 |     test('should provide real-time executive notifications for significant changes', async () => {
      444 |       // Mock significant performance change detection
    > 445 |       mockBusinessMetricsService.detectSignificantPerformanceChanges.mockResolvedValue({
          |                                                                      ^
      446 |         success: true,
      447 |         data: {
      448 |           significantChanges: [

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:445:70)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Campaign Performance → Executive Analytics Pipeline › should correlate marketing performance with inventory metrics

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      502 |       
      503 |       // Mock correlation analysis
    > 504 |       mockBusinessMetricsService.analyzeCampaignInventoryCorrelation.mockResolvedValue({
          |                                                                      ^
      505 |         success: true,
      506 |         data: {
      507 |           correlationAnalysis: {

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:504:70)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Role Permission Boundaries Across Marketing Operations › should enforce role boundaries for cross-system operations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      584 |
      585 |         if (roleTest.shouldAccess.inventory) {
    > 586 |           expect(inventoryAccess.success).toBe(true);
          |                                           ^
      587 |         } else {
      588 |           expect(inventoryAccess.success).toBe(false);
      589 |           expect(inventoryAccess.error).toContain('inventory access');

      at toBe (src/__tests__/integration/crossRoleIntegration.test.ts:586:43)
          at _loop.next (<anonymous>)
      at Object._loop (src/__tests__/integration/crossRoleIntegration.test.ts:571:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Role Permission Boundaries Across Marketing Operations › should handle permission escalation for cross-department operations

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      607 |     test('should handle permission escalation for cross-department operations', async () => {
      608 |       // Test permission escalation workflow
    > 609 |       mockRolePermissionService.requestPermissionEscalation.mockResolvedValue({
          |                                                             ^
      610 |         success: true,
      611 |         data: {
      612 |           escalationId: 'escalation-123',

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:609:61)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Role Permission Boundaries Across Marketing Operations › should audit cross-role access attempts

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      655 |       
      656 |       // Mock audit trail creation
    > 657 |       mockRolePermissionService.auditCrossRoleAccess.mockResolvedValue({
          |                                                      ^
      658 |         success: true,
      659 |         data: {
      660 |           auditId: 'audit-123',

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:657:54)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/schemas/__tests__/validation-transform-pattern.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Validation Transform Pattern › ProductSchema Transform Pattern › should handle empty product name

    expect(received).toThrow()

    Received function did not throw

      145 |       // Remove categories for this test
      146 |       const { categories, ...productData } = invalidData;
    > 147 |       expect(() => transformProductWithCategory(productData, categories ? [categories] : [])).toThrow();
          |                                                                                               ^
      148 |     });
      149 |
      150 |     it('should handle missing category data', () => {

      at Object.toThrow (src/schemas/__tests__/validation-transform-pattern.test.ts:147:95)

FAIL src/hooks/inventory/__tests__/integration/systemIntegration.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in CachePerformanceMonitor.test-operation {
        timestamp: '2025-08-24T20:13:34.345Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'CachePerformanceMonitor',
          pattern: 'direct_supabase_query',
          operation: 'test-operation',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in CachePerformanceMonitor.cache_miss_test-operation {
        timestamp: '2025-08-24T20:13:34.345Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'CachePerformanceMonitor',
          pattern: 'direct_supabase_query',
          operation: 'cache_miss_test-operation',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

  ● Inventory System Integration Test (REFACTOR Phase) › Complete Workflow Integration › should validate optimized system architecture

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      129 |       );
      130 |
    > 131 |       await waitFor(() => {
          |                    ^
      132 |         expect(result.current.isSuccess).toBe(true);
      133 |         expect(result.current.data).toEqual(testItem);
      134 |       }, { timeout: 1000 });

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/systemIntegration.test.tsx:131:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Inventory System Integration Test (REFACTOR Phase) › Complete Workflow Integration › should handle error scenarios with optimal recovery

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      158 |       );
      159 |
    > 160 |       await waitFor(() => {
          |                    ^
      161 |         expect(result.current.isError).toBe(true);
      162 |         expect(result.current.error).toEqual(notFoundError);
      163 |       }, { timeout: 1000 });

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/systemIntegration.test.tsx:160:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/utils/__tests__/validationPipeline.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● ValidationPipeline › validateInput › should handle validation errors with different strictness levels

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      129 |
      130 |       // In lenient mode, it will still fail for this many critical errors
    > 131 |       expect(lenientResult.success).toBe(false);
          |                                     ^
      132 |       expect(mockValidationMonitor.recordValidationError).toHaveBeenCalled();
      133 |     });
      134 |

      at Object.toBe (src/utils/__tests__/validationPipeline.test.ts:131:37)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● ValidationPipeline › ValidationUtils › should create email schema that normalizes emails

    ZodError: [
      {
        "validation": "email",
        "code": "invalid_string",
        "message": "Must be a valid email address",
        "path": []
      }
    ]

      222 |       const emailSchema = ValidationUtils.createEmailSchema();
      223 |       
    > 224 |       const result = emailSchema.parse('  TEST@EXAMPLE.COM  ');
          |                                  ^
      225 |       expect(result).toBe('test@example.com');
      226 |     });
      227 |

      at Object.get error [as error] (node_modules/zod/v3/types.cjs:45:31)
      at ZodEffects.parse (node_modules/zod/v3/types.cjs:120:22)
      at Object.parse (src/utils/__tests__/validationPipeline.test.ts:224:34)

  ● ValidationPipeline › Security features › should detect and prevent XSS attempts

    expect(received).resolves.toMatchObject(expected)

    - Expected  - 4
    + Received  + 2

      Object {
    -   "errors": ArrayContaining [
    -     StringContaining "dangerous content",
    -   ],
    -   "success": false,
    +   "errors": undefined,
    +   "success": true,
      }

      332 |           }
      333 |         )
    > 334 |       ).resolves.toMatchObject({
          |                  ^
      335 |         success: false,
      336 |         errors: expect.arrayContaining([
      337 |           expect.stringContaining('dangerous content')

      at Object.toMatchObject (node_modules/expect/build/index.js:174:22)
      at Object.toMatchObject (src/utils/__tests__/validationPipeline.test.ts:334:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/__tests__/integration/CustomerTransparency.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.log
      ✅ Customer transparency integration tests completed

      at Object.log (src/__tests__/integration/CustomerTransparency.test.tsx:231:9)

  ● Customer Transparency Integration Tests › UI Transparency › should show identical UI whether kiosk mode is active or not

    ReferenceError: ShopScreen is not defined

      85 |       const { container: normalContainer } = render(
      86 |         <TestWrapper>
    > 87 |           <ShopScreen />
         |            ^
      88 |         </TestWrapper>
      89 |       );
      90 |

      at Object.ShopScreen (src/__tests__/integration/CustomerTransparency.test.tsx:87:12)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Customer Transparency Integration Tests › UI Transparency › should not show kiosk-specific controls to customers in normal mode

    ReferenceError: ShopScreen is not defined

      111 |       render(
      112 |         <TestWrapper>
    > 113 |           <ShopScreen />
          |            ^
      114 |         </TestWrapper>
      115 |       );
      116 |

      at Object.ShopScreen (src/__tests__/integration/CustomerTransparency.test.tsx:113:12)

  ● Customer Transparency Integration Tests › UI Transparency › should preserve all customer functionality when kiosk context is available

    ReferenceError: ShopScreen is not defined

      123 |       render(
      124 |         <TestWrapper>
    > 125 |           <ShopScreen />
          |            ^
      126 |         </TestWrapper>
      127 |       );
      128 |

      at Object.ShopScreen (src/__tests__/integration/CustomerTransparency.test.tsx:125:12)

  ● Customer Transparency Integration Tests › Kiosk Context Integration › should provide kiosk context without affecting customer experience

    expect(received).not.toThrow()

    Error name:    "ReferenceError"
    Error message: "ShopScreen is not defined"

          143 |         return (
          144 |           <TestWrapper>
        > 145 |             <ShopScreen />
              |              ^
          146 |           </TestWrapper>
          147 |         );
          148 |       };

      at ShopScreen (src/__tests__/integration/CustomerTransparency.test.tsx:145:14)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at src/__tests__/integration/CustomerTransparency.test.tsx:151:26
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (src/__tests__/integration/CustomerTransparency.test.tsx:151:51)
      at Object.toThrow (src/__tests__/integration/CustomerTransparency.test.tsx:151:51)

  ● Customer Transparency Integration Tests › Kiosk Context Integration › should handle kiosk hooks gracefully when no session is active

    ReferenceError: ShopScreen is not defined

      156 |       render(
      157 |         <TestWrapper>
    > 158 |           <ShopScreen />
          |            ^
      159 |         </TestWrapper>
      160 |       );
      161 |

      at Object.ShopScreen (src/__tests__/integration/CustomerTransparency.test.tsx:158:12)

  ● Customer Transparency Integration Tests › Hidden Staff Entry Point › should have hidden staff access that does not interfere with customer experience

    ReferenceError: ShopScreen is not defined

      170 |       render(
      171 |         <TestWrapper>
    > 172 |           <ShopScreen />
          |            ^
      173 |         </TestWrapper>
      174 |       );
      175 |

      at Object.ShopScreen (src/__tests__/integration/CustomerTransparency.test.tsx:172:12)

  ● Customer Transparency Integration Tests › Component Isolation › should not leak kiosk functionality into customer-facing components

    ReferenceError: ShopScreen is not defined

      187 |       render(
      188 |         <TestWrapper>
    > 189 |           <ShopScreen />
          |            ^
      190 |         </TestWrapper>
      191 |       );
      192 |

      at Object.ShopScreen (src/__tests__/integration/CustomerTransparency.test.tsx:189:12)

  ● KioskProvider Integration › should provide kiosk context throughout the app without side effects

    expect(received).not.toThrow()

    Error name:    "ReferenceError"
    Error message: "ShopScreen is not defined"

          206 |     const TestApp = () => (
          207 |       <TestWrapper>
        > 208 |         <ShopScreen />
              |          ^
          209 |       </TestWrapper>
          210 |     );
          211 |

      at ShopScreen (src/__tests__/integration/CustomerTransparency.test.tsx:208:10)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at src/__tests__/integration/CustomerTransparency.test.tsx:212:24
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (src/__tests__/integration/CustomerTransparency.test.tsx:212:43)
      at Object.toThrow (src/__tests__/integration/CustomerTransparency.test.tsx:212:43)

  ● KioskProvider Integration › should maintain performance with kiosk context provider

    ReferenceError: ShopScreen is not defined

      219 |     render(
      220 |       <TestWrapper>
    > 221 |         <ShopScreen />
          |          ^
      222 |       </TestWrapper>
      223 |     );
      224 |

      at Object.ShopScreen (src/__tests__/integration/CustomerTransparency.test.tsx:221:10)

FAIL src/schemas/inventory/__contracts__/inventorySchema.contracts.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Inventory Schema Contracts › StockMovementTransformSchema › should populate all required interface fields

    expect(received).toBe(expected) // Object.is equality

    Expected: "inv-1"
    Received: "550e8400-e29b-41d4-a716-446655440001"

      122 |       
      123 |       // Verify correct data transformation
    > 124 |       expect(result.inventoryItemId).toBe('inv-1');
          |                                      ^
      125 |       expect(result.movementType).toBe('adjustment');
      126 |       expect(result.quantityChange).toBe(-5);
      127 |       expect(result.performedBy).toBe('user-1');

      at Object.toBe (src/schemas/inventory/__contracts__/inventorySchema.contracts.test.ts:124:38)

FAIL src/utils/__tests__/broadcast-performance.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● Broadcast Performance Improvements › Parallel Broadcasting › should send multiple target broadcasts in parallel

    TypeError: sendMultiTargetBroadcast is not a function

      45 |       );
      46 |
    > 47 |       const results = await sendMultiTargetBroadcast(
         |                             ^
      48 |         'orders',
      49 |         'order-status-updated',
      50 |         { 

      at Object.sendMultiTargetBroadcast (src/utils/__tests__/broadcast-performance.test.ts:47:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Broadcast Performance Improvements › Parallel Broadcasting › should handle mixed success/failure results in parallel broadcasts

    TypeError: sendMultiTargetBroadcast is not a function

      77 |         .mockRejectedValueOnce(new Error('Network error'));
      78 |
    > 79 |       const results = await sendMultiTargetBroadcast(
         |                             ^
      80 |         'orders',
      81 |         'order-status-updated',
      82 |         { 

      at Object.sendMultiTargetBroadcast (src/utils/__tests__/broadcast-performance.test.ts:79:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Broadcast Performance Improvements › Channel Name Caching › should cache channel names to avoid repeated HMAC calculations

    TypeError: Cannot read properties of undefined (reading 'generateSecureChannelName')

      104 |       // First call should generate the name
      105 |       const startTime1 = performance.now();
    > 106 |       const name1 = SecureChannelNameGenerator.generateSecureChannelName(entity, target, userId);
          |                                                ^
      107 |       const duration1 = performance.now() - startTime1;
      108 |
      109 |       // Second call should be cached (much faster)

      at Object.generateSecureChannelName (src/utils/__tests__/broadcast-performance.test.ts:106:48)

  ● Broadcast Performance Improvements › Channel Name Caching › should cache backup channel names separately

    TypeError: Cannot read properties of undefined (reading 'generateSecureChannelName')

      126 |       const target = 'admin-only';
      127 |
    > 128 |       const primaryName = SecureChannelNameGenerator.generateSecureChannelName(entity, target);
          |                                                      ^
      129 |       const backupName = SecureChannelNameGenerator.generateBackupChannelName(entity, target);
      130 |
      131 |       // Names should be different but both cached

      at Object.generateSecureChannelName (src/utils/__tests__/broadcast-performance.test.ts:128:54)

  ● Broadcast Performance Improvements › Channel Name Caching › should use different cache keys for different entities/targets/users

    TypeError: Cannot read properties of undefined (reading 'generateSecureChannelName')

      140 |
      141 |     it('should use different cache keys for different entities/targets/users', () => {
    > 142 |       const user1Channel = SecureChannelNameGenerator.generateSecureChannelName('orders', 'user-specific', 'user1');
          |                                                       ^
      143 |       const user2Channel = SecureChannelNameGenerator.generateSecureChannelName('orders', 'user-specific', 'user2');
      144 |       const adminChannel = SecureChannelNameGenerator.generateSecureChannelName('orders', 'admin-only');
      145 |       const cartChannel = SecureChannelNameGenerator.generateSecureChannelName('cart', 'user-specific', 'user1');

      at Object.generateSecureChannelName (src/utils/__tests__/broadcast-performance.test.ts:142:55)

  ● Broadcast Performance Improvements › Performance Monitoring › should log performance metrics for multi-target broadcasts

    TypeError: sendMultiTargetBroadcast is not a function

      157 |       mockSend.mockResolvedValue({ status: 'ok' });
      158 |
    > 159 |       await sendMultiTargetBroadcast(
          |             ^
      160 |         'orders',
      161 |         'order-status-updated',
      162 |         { 

      at Object.sendMultiTargetBroadcast (src/utils/__tests__/broadcast-performance.test.ts:159:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Broadcast Performance Improvements › Error Handling › should handle errors gracefully without blocking other broadcasts

    TypeError: sendMultiTargetBroadcast is not a function

      186 |         .mockRejectedValueOnce(new Error('Channel error'));
      187 |
    > 188 |       const results = await sendMultiTargetBroadcast(
          |                             ^
      189 |         'orders',
      190 |         'order-status-updated',
      191 |         { 

      at Object.sendMultiTargetBroadcast (src/utils/__tests__/broadcast-performance.test.ts:188:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/hooks/executive/__tests__/useSimpleBusinessInsights.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● useSimpleBusinessInsights Hook › when user has executive role › should fetch business insights successfully

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      109 |       expect(result.current.metadata).toEqual(mockInsights.metadata);
      110 |       expect(result.current.isSuccess).toBe(true);
    > 111 |       expect(mockService.getInsights).toHaveBeenCalled();
          |                                       ^
      112 |     });
      113 |
      114 |     it('should handle insights with filtering options', async () => {

      at Object.toHaveBeenCalled (src/hooks/executive/__tests__/useSimpleBusinessInsights.test.tsx:111:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useSimpleBusinessInsights Hook › when user has executive role › should handle insights with filtering options

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"impactFilter": ["high"], "insightType": "correlation", "minConfidence": 0.8}

    Number of calls: 0

      152 |       expect(result.current.insights).toHaveLength(1);
      153 |       expect(result.current.insights[0].insightType).toBe('correlation');
    > 154 |       expect(mockService.getInsights).toHaveBeenCalledWith({
          |                                       ^
      155 |         insightType: 'correlation',
      156 |         minConfidence: 0.8,
      157 |         impactFilter: ['high']

      at Object.toHaveBeenCalledWith (src/hooks/executive/__tests__/useSimpleBusinessInsights.test.tsx:154:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/executive/__tests__/useSimplePredictiveAnalytics.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● useSimplePredictiveAnalytics Hook › when user has executive role › should fetch predictive analytics successfully

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      134 |       expect(result.current.forecastData).toEqual(mockForecast);
      135 |       expect(result.current.isSuccess).toBe(true);
    > 136 |       expect(mockService.getForecast).toHaveBeenCalled();
          |                                       ^
      137 |     });
      138 |
      139 |     it('should handle predictive analytics with options', async () => {

      at Object.toHaveBeenCalled (src/hooks/executive/__tests__/useSimplePredictiveAnalytics.test.tsx:136:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useSimplePredictiveAnalytics Hook › when user has executive role › should handle predictive analytics with options

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"forecastType": "demand", "includeConfidenceIntervals": true, "timeHorizon": "quarter"}

    Number of calls: 0

      190 |
      191 |       expect(result.current.forecastData).toEqual(mockForecastWithOptions);
    > 192 |       expect(mockService.getForecast).toHaveBeenCalledWith({
          |                                       ^
      193 |         forecastType: 'demand',
      194 |         timeHorizon: 'quarter',
      195 |         includeConfidenceIntervals: true

      at Object.toHaveBeenCalledWith (src/hooks/executive/__tests__/useSimplePredictiveAnalytics.test.tsx:192:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/executive/__tests__/useSimpleBusinessMetrics.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

  ● useSimpleBusinessMetrics Hook › when user has executive role › should fetch business metrics successfully

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

       98 |       expect(result.current.metrics).toEqual(mockMetrics);
       99 |       expect(result.current.isSuccess).toBe(true);
    > 100 |       expect(mockService.getMetrics).toHaveBeenCalled();
          |                                      ^
      101 |     });
      102 |
      103 |     it('should handle metrics with options', async () => {

      at Object.toHaveBeenCalled (src/hooks/executive/__tests__/useSimpleBusinessMetrics.test.tsx:100:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useSimpleBusinessMetrics Hook › when user has executive role › should handle metrics with options

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"category": "revenue", "dateRange": "2024-01-01,2024-01-31"}

    Number of calls: 0

      132 |
      133 |       expect(result.current.metrics).toEqual(mockMetrics);
    > 134 |       expect(mockService.getMetrics).toHaveBeenCalledWith({
          |                                      ^
      135 |         dateRange: '2024-01-01,2024-01-31',
      136 |         category: 'revenue'
      137 |       });

      at Object.toHaveBeenCalledWith (src/hooks/executive/__tests__/useSimpleBusinessMetrics.test.tsx:134:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

PASS src/services/__tests__/errorRecoveryService.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.log
      🛡️ Starting atomic error recovery for payment_failed in operation: payment_processing

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: true,
        action: 'compensate',
        attempts: 1,
        recovered: true,
        compensationApplied: true,
        message: 'Payment failure compensated successfully',
        error: undefined
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

    console.log
      🛡️ Starting atomic error recovery for payment_failed in operation: payment_processing

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.error
      ❌ Atomic error recovery failed: { message: 'RPC function not found' }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error (src/services/errorRecoveryService.ts:95:17)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.log
      🛡️ Starting atomic error recovery for payment_failed in operation: payment_processing

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.error
      Error in error recovery: Error: Database connection lost
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/__tests__/errorRecoveryService.test.ts:151:41)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.then.completed (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/testWorker.js:106:12)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error (src/services/errorRecoveryService.ts:123:15)
          at Generator.throw (<anonymous>)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)

    console.log
      🛡️ Starting atomic error recovery for payment_failed in operation: payment_processing

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: true,
        action: 'retry',
        attempts: 2,
        recovered: true,
        compensationApplied: false,
        message: 'Operation succeeded on retry',
        error: undefined
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

    console.log
      🛡️ Starting atomic error recovery for stock_update_failed in operation: stock_update

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: true,
        action: 'compensate',
        attempts: 1,
        recovered: true,
        compensationApplied: true,
        message: 'Stock failure compensated',
        error: undefined
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

    console.log
      🛡️ Starting atomic error recovery for order_creation_failed in operation: order_creation

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: true,
        action: 'rollback',
        attempts: 1,
        recovered: true,
        compensationApplied: true,
        message: 'Order creation rolled back',
        error: undefined
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

    console.log
      🛡️ Starting atomic error recovery for notification_failed in operation: notification_send

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: true,
        action: 'retry',
        attempts: 2,
        recovered: true,
        compensationApplied: false,
        message: 'Notification sent on retry',
        error: undefined
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

    console.log
      🛡️ Starting atomic error recovery for database_error in operation: database_query

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: true,
        action: 'retry',
        attempts: 1,
        recovered: true,
        compensationApplied: false,
        message: 'Database operation succeeded on retry',
        error: undefined
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

    console.log
      🛡️ Starting atomic error recovery for network_error in operation: api_call

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: false,
        action: 'manual_intervention',
        attempts: 3,
        recovered: false,
        compensationApplied: false,
        message: 'All retry attempts failed',
        error: 'Network unreachable'
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

    console.log
      🛡️ Starting atomic error recovery for system_error in operation: system_operation

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: false,
        action: 'manual_intervention',
        attempts: 0,
        recovered: false,
        compensationApplied: false,
        message: 'System error requires manual intervention',
        error: 'Critical system failure'
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

    console.log
      🛡️ Starting atomic error recovery for payment_failed in operation: payment_processing

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: true,
        action: 'retry',
        attempts: 1,
        recovered: true,
        compensationApplied: false,
        message: 'Operation recovered without order context',
        error: undefined
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

    console.log
      🛡️ Starting atomic error recovery for payment_failed in operation: payment_processing

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: true,
        action: 'compensate',
        attempts: 1,
        recovered: true,
        compensationApplied: true,
        message: 'Recovery completed without user context',
        error: undefined
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

    console.log
      🛡️ Starting atomic error recovery for payment_failed in operation: payment_processing

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: true,
        action: 'retry',
        attempts: 1,
        recovered: true,
        compensationApplied: false,
        message: 'Recovery completed without metadata',
        error: undefined
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

    console.log
      🛡️ Starting atomic error recovery for payment_failed in operation: payment_processing

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: false,
        action: 'manual_intervention',
        attempts: 6,
        recovered: false,
        compensationApplied: false,
        message: 'Maximum retry attempts exceeded',
        error: 'Too many retry attempts'
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

    console.log
      🛡️ Starting atomic error recovery for payment_failed in operation: payment_processing

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: true,
        action: 'compensate',
        attempts: 1,
        recovered: true,
        compensationApplied: true,
        message: 'Compensation applied successfully',
        error: undefined
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

    console.log
      🛡️ Starting atomic error recovery for payment_failed in operation: payment_processing

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: true,
        action: 'rollback',
        attempts: 1,
        recovered: true,
        compensationApplied: true,
        message: 'Rollback completed successfully',
        error: undefined
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

    console.log
      🛡️ Starting atomic error recovery for payment_failed in operation: payment_processing

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: true,
        action: 'retry',
        attempts: 3,
        recovered: true,
        compensationApplied: false,
        message: 'Operation succeeded on retry attempt 3',
        error: undefined
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

    console.log
      🛡️ Starting atomic error recovery for payment_failed in operation: payment_processing

      at Function.log (src/services/errorRecoveryService.ts:81:15)

    console.log
      ✅ Atomic error recovery completed: {
        success: true,
        action: 'ignore',
        attempts: 0,
        recovered: true,
        compensationApplied: false,
        message: 'Error was safely ignored',
        error: undefined
      }

      at Function.log (src/services/errorRecoveryService.ts:118:15)

PASS src/services/executive/__tests__/predictiveAnalyticsService.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/services/role-based/__tests__/rolePermissionService.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/schemas/marketing/__contracts__/productContent.contracts.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/utils/__tests__/defensiveDatabase.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/services/executive/__tests__/strategicReportingService.golden.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/schemas/executive/__contracts__/businessMetrics.contracts.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/schemas/inventory/__contracts__/inventoryItem.contracts.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/schemas/__contracts__/productAdmin.contracts.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/schemas/executive/__contracts__/businessIntelligence.contracts.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/schemas/role-based/__contracts__/rolePermission.contracts.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/schemas/marketing/__contracts__/marketingCampaign.contracts.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/services/__tests__/kioskOrderIntegration.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/utils/__tests__/validationMonitor.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/screens/__tests__/ProductDetailScreen.schema-fix.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/utils/__tests__/validation-monitoring-enhancements.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.error
      [VALIDATION_MONITOR] Validation error in TestService.testMethod {
        timestamp: '2025-08-24T20:13:36.487Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'TestService.testMethod',
          errorMessage: 'Test validation error',
          errorCode: 'TEST_VALIDATION_FAILED',
          validationPattern: 'transformation_schema',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Object.recordValidationError (src/utils/__tests__/validation-monitoring-enhancements.test.ts:18:25)

    console.error
      [VALIDATION_MONITOR] Validation error in TestService.testMethod0 {
        timestamp: '2025-08-24T20:13:36.592Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'TestService.testMethod0',
          errorMessage: 'Test error for direct_schema',
          errorCode: 'TEST_ERROR',
          validationPattern: 'direct_schema',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at recordValidationError (src/utils/__tests__/validation-monitoring-enhancements.test.ts:37:27)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/utils/__tests__/validation-monitoring-enhancements.test.ts:36:16)

    console.error
      [VALIDATION_MONITOR] Validation error in TestService.testMethod1 {
        timestamp: '2025-08-24T20:13:36.593Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'TestService.testMethod1',
          errorMessage: 'Test error for simple_validation',
          errorCode: 'TEST_ERROR',
          validationPattern: 'simple_validation',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at recordValidationError (src/utils/__tests__/validation-monitoring-enhancements.test.ts:37:27)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/utils/__tests__/validation-monitoring-enhancements.test.ts:36:16)

    console.error
      [VALIDATION_MONITOR] Validation error in TestService.testMethod2 {
        timestamp: '2025-08-24T20:13:36.593Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'TestService.testMethod2',
          errorMessage: 'Test error for transformation_schema',
          errorCode: 'TEST_ERROR',
          validationPattern: 'transformation_schema',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at recordValidationError (src/utils/__tests__/validation-monitoring-enhancements.test.ts:37:27)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/utils/__tests__/validation-monitoring-enhancements.test.ts:36:16)

    console.warn
      [VALIDATION_MONITOR] Pattern compliance warning in TestService {
        timestamp: '2025-08-24T20:13:36.695Z',
        type: 'PATTERN_COMPLIANCE_ISSUE',
        details: {
          service: 'TestService',
          pattern: 'cartService',
          issue: 'Using DatabaseHelpers instead of direct Supabase',
          severity: 'warning',
          recommendation: 'Switch to direct Supabase queries',
          category: 'validation_pattern_adherence'
        }
      }

      418 |       return;
      419 |     }
    > 420 |     originalWarn(...args);
          |                 ^
      421 |   };
      422 |   
      423 |   console.error = (...args: any[]) => {

      at console.apply [as warn] (src/test/base-setup.ts:420:17)
      at Function.warn [as recordPatternComplianceIssue] (src/utils/validationMonitor.ts:171:17)
      at Object.recordPatternComplianceIssue (src/utils/__tests__/validation-monitoring-enhancements.test.ts:52:25)

    console.info
      [VALIDATION_MONITOR] Pattern compliance info for TestService0 {
        timestamp: '2025-08-24T20:13:36.797Z',
        type: 'PATTERN_COMPLIANCE_ISSUE',
        details: {
          service: 'TestService0',
          pattern: 'direct_supabase',
          issue: 'Test compliance issue with info severity',
          severity: 'info',
          category: 'validation_pattern_adherence'
        }
      }

      at Function.info [as recordPatternComplianceIssue] (src/utils/validationMonitor.ts:174:17)
          at Array.forEach (<anonymous>)

    console.warn
      [VALIDATION_MONITOR] Pattern compliance warning in TestService1 {
        timestamp: '2025-08-24T20:13:36.798Z',
        type: 'PATTERN_COMPLIANCE_ISSUE',
        details: {
          service: 'TestService1',
          pattern: 'direct_supabase',
          issue: 'Test compliance issue with warning severity',
          severity: 'warning',
          category: 'validation_pattern_adherence'
        }
      }

      418 |       return;
      419 |     }
    > 420 |     originalWarn(...args);
          |                 ^
      421 |   };
      422 |   
      423 |   console.error = (...args: any[]) => {

      at console.apply [as warn] (src/test/base-setup.ts:420:17)
      at Function.warn [as recordPatternComplianceIssue] (src/utils/validationMonitor.ts:171:17)
      at recordPatternComplianceIssue (src/utils/__tests__/validation-monitoring-enhancements.test.ts:68:27)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/utils/__tests__/validation-monitoring-enhancements.test.ts:67:22)

    console.error
      [VALIDATION_MONITOR] Pattern compliance error in TestService2 {
        timestamp: '2025-08-24T20:13:36.798Z',
        type: 'PATTERN_COMPLIANCE_ISSUE',
        details: {
          service: 'TestService2',
          pattern: 'direct_supabase',
          issue: 'Test compliance issue with error severity',
          severity: 'error',
          category: 'validation_pattern_adherence'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordPatternComplianceIssue] (src/utils/validationMonitor.ts:168:17)
      at recordPatternComplianceIssue (src/utils/__tests__/validation-monitoring-enhancements.test.ts:68:27)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/utils/__tests__/validation-monitoring-enhancements.test.ts:67:22)

    console.info
      [VALIDATION_MONITOR] Pattern compliance info for TestService0 {
        timestamp: '2025-08-24T20:13:36.900Z',
        type: 'PATTERN_COMPLIANCE_ISSUE',
        details: {
          service: 'TestService0',
          pattern: 'cartService',
          issue: 'Testing cartService compliance',
          severity: 'info',
          category: 'validation_pattern_adherence'
        }
      }

      at Function.info [as recordPatternComplianceIssue] (src/utils/validationMonitor.ts:174:17)
          at Array.forEach (<anonymous>)

    console.info
      [VALIDATION_MONITOR] Pattern compliance info for TestService1 {
        timestamp: '2025-08-24T20:13:36.901Z',
        type: 'PATTERN_COMPLIANCE_ISSUE',
        details: {
          service: 'TestService1',
          pattern: 'direct_supabase',
          issue: 'Testing direct_supabase compliance',
          severity: 'info',
          category: 'validation_pattern_adherence'
        }
      }

      at Function.info [as recordPatternComplianceIssue] (src/utils/validationMonitor.ts:174:17)
          at Array.forEach (<anonymous>)

    console.info
      [VALIDATION_MONITOR] Pattern compliance info for TestService2 {
        timestamp: '2025-08-24T20:13:36.901Z',
        type: 'PATTERN_COMPLIANCE_ISSUE',
        details: {
          service: 'TestService2',
          pattern: 'simple_validation',
          issue: 'Testing simple_validation compliance',
          severity: 'info',
          category: 'validation_pattern_adherence'
        }
      }

      at Function.info [as recordPatternComplianceIssue] (src/utils/validationMonitor.ts:174:17)
          at Array.forEach (<anonymous>)

    console.info
      [VALIDATION_MONITOR] Pattern compliance info for TestService3 {
        timestamp: '2025-08-24T20:13:36.901Z',
        type: 'PATTERN_COMPLIANCE_ISSUE',
        details: {
          service: 'TestService3',
          pattern: 'transformation_schema',
          issue: 'Testing transformation_schema compliance',
          severity: 'info',
          category: 'validation_pattern_adherence'
        }
      }

      at Function.info [as recordPatternComplianceIssue] (src/utils/validationMonitor.ts:174:17)
          at Array.forEach (<anonymous>)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in CartService.getCart {
        timestamp: '2025-08-24T20:13:37.003Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'CartService',
          pattern: 'direct_supabase_query',
          operation: 'getCart',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in TestService0.testOperation0 {
        timestamp: '2025-08-24T20:13:37.106Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'TestService0',
          pattern: 'direct_schema_validation',
          operation: 'testOperation0',
          performanceMs: 100,
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)
          at Array.forEach (<anonymous>)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in TestService1.testOperation1 {
        timestamp: '2025-08-24T20:13:37.107Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'TestService1',
          pattern: 'transformation_schema',
          operation: 'testOperation1',
          performanceMs: 150,
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)
          at Array.forEach (<anonymous>)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in TestService2.testOperation2 {
        timestamp: '2025-08-24T20:13:37.107Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'TestService2',
          pattern: 'simple_input_validation',
          operation: 'testOperation2',
          performanceMs: 200,
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)
          at Array.forEach (<anonymous>)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in TestService3.testOperation3 {
        timestamp: '2025-08-24T20:13:37.107Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'TestService3',
          pattern: 'direct_supabase_query',
          operation: 'testOperation3',
          performanceMs: 250,
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)
          at Array.forEach (<anonymous>)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in CartService.getCart {
        timestamp: '2025-08-24T20:13:37.210Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'CartService',
          pattern: 'direct_supabase_query',
          operation: 'getCart',
          performanceMs: 250,
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.warn
      [VALIDATION_MONITOR] Significant calculation mismatch {
        timestamp: '2025-08-24T20:13:37.313Z',
        type: 'CALCULATION_MISMATCH',
        details: {
          type: 'cart_total',
          expected: 100,
          actual: 99.95,
          difference: 0.05,
          tolerance: 0.01,
          cartId: 'test-cart',
          corrected: true,
          withinTolerance: false
        }
      }

      418 |       return;
      419 |     }
    > 420 |     originalWarn(...args);
          |                 ^
      421 |   };
      422 |   
      423 |   console.error = (...args: any[]) => {

      at console.apply [as warn] (src/test/base-setup.ts:420:17)
      at Function.warn [as recordCalculationMismatch] (src/utils/validationMonitor.ts:78:15)
      at Object.recordCalculationMismatch (src/utils/__tests__/validation-monitoring-enhancements.test.ts:158:25)

    console.info
      [VALIDATION_MONITOR] Pattern compliance info for CartService {
        timestamp: '2025-08-24T20:13:37.313Z',
        type: 'PATTERN_COMPLIANCE_ISSUE',
        details: {
          service: 'CartService',
          pattern: 'transformation_schema',
          issue: 'Schema validation successful',
          severity: 'info',
          category: 'validation_pattern_adherence'
        }
      }

      at Function.info [as recordPatternComplianceIssue] (src/utils/validationMonitor.ts:174:17)

    console.info
      [VALIDATION_MONITOR] Successful pattern usage in CartService.getCart {
        timestamp: '2025-08-24T20:13:37.314Z',
        type: 'PATTERN_SUCCESS',
        details: {
          service: 'CartService',
          pattern: 'direct_supabase_query',
          operation: 'getCart',
          category: 'validation_pattern_success'
        }
      }

      at Function.info [as recordPatternSuccess] (src/utils/validationMonitor.ts:201:13)

    console.error
      [VALIDATION_MONITOR] Validation error in CartService.getCart {
        timestamp: '2025-08-24T20:13:37.417Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'CartService.getCart',
          errorMessage: 'Schema validation failed',
          errorCode: 'SCHEMA_VALIDATION_FAILED',
          validationPattern: 'transformation_schema',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Object.recordValidationError (src/utils/__tests__/validation-monitoring-enhancements.test.ts:190:25)

    console.error
      [VALIDATION_MONITOR] Validation error in OrderService.submitOrder {
        timestamp: '2025-08-24T20:13:37.418Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'OrderService.submitOrder',
          errorMessage: 'Order validation failed',
          errorCode: 'ORDER_VALIDATION_FAILED',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Object.recordValidationError (src/utils/__tests__/validation-monitoring-enhancements.test.ts:198:25)

    console.error
      [VALIDATION_MONITOR] Validation error in TestService {
        timestamp: '2025-08-24T20:13:37.520Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'TestService',
          errorMessage: 'Test error',
          errorCode: 'TEST_ERROR',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Object.recordValidationError (src/utils/__tests__/validation-monitoring-enhancements.test.ts:213:25)

    console.info
      [VALIDATION_MONITOR] Pattern compliance info for TestService {
        timestamp: '2025-08-24T20:13:37.520Z',
        type: 'PATTERN_COMPLIANCE_ISSUE',
        details: {
          service: 'TestService',
          pattern: 'cartService',
          issue: 'Minor compliance issue',
          severity: 'info',
          category: 'validation_pattern_adherence'
        }
      }

      at Function.info [as recordPatternComplianceIssue] (src/utils/validationMonitor.ts:174:17)

    console.error
      [VALIDATION_MONITOR] Validation error in LegacyService.legacyMethod {
        timestamp: '2025-08-24T20:13:37.623Z',
        type: 'VALIDATION_ERROR',
        details: {
          context: 'LegacyService.legacyMethod',
          errorMessage: 'Legacy validation error',
          errorCode: 'LEGACY_ERROR',
          impact: 'data_rejected'
        }
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at Function.error [as recordValidationError] (src/utils/validationMonitor.ts:104:13)
      at Object.recordValidationError (src/utils/__tests__/validation-monitoring-enhancements.test.ts:238:25)

    console.info
      [VALIDATION_MONITOR] Minor calculation correction applied {
        timestamp: '2025-08-24T20:13:37.623Z',
        type: 'CALCULATION_MISMATCH',
        details: {
          type: 'cart_total',
          expected: 50,
          actual: 49.99,
          difference: 0.01,
          tolerance: 0.01,
          corrected: true,
          withinTolerance: true
        }
      }

      at Function.info [as recordCalculationMismatch] (src/utils/validationMonitor.ts:80:15)

    console.warn
      [VALIDATION_MONITOR] Data quality issue detected {
        timestamp: '2025-08-24T20:13:37.624Z',
        type: 'DATA_QUALITY_ISSUE',
        details: {
          type: 'missing_field',
          description: 'Legacy data quality issue',
          severity: 'medium',
          affectedEntity: 'LegacyEntity'
        }
      }

      418 |       return;
      419 |     }
    > 420 |     originalWarn(...args);
          |                 ^
      421 |   };
      422 |   
      423 |   console.error = (...args: any[]) => {

      at console.apply [as warn] (src/test/base-setup.ts:420:17)
      at Function.warn [as recordDataQualityIssue] (src/utils/validationMonitor.ts:135:17)
      at Object.recordDataQualityIssue (src/utils/__tests__/validation-monitoring-enhancements.test.ts:253:25)

PASS src/screens/__tests__/TestScreens.schema-fixes.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/services/__tests__/productService.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.error
      Invalid product data, skipping: {
        productId: 'product-1',
        name: 'Test Product',
        error: '[\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "description"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "category_id"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "updated_at"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  }\n' +
          ']'
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at ProductService.error (src/services/productService.ts:191:19)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      Error transforming product data: ZodError: [
        {
          "code": "invalid_type",
          "expected": "string",
          "received": "undefined",
          "path": [
            "description"
          ],
          "message": "Required"
        },
        {
          "code": "invalid_type",
          "expected": "string",
          "received": "undefined",
          "path": [
            "category_id"
          ],
          "message": "Required"
        },
        {
          "code": "invalid_type",
          "expected": "string",
          "received": "undefined",
          "path": [
            "updated_at"
          ],
          "message": "Required"
        }
      ]
          at Object.get error [as error] (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/zod/v3/types.cjs:45:31)
          at ZodObject.parse (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/zod/v3/types.cjs:120:22)
          at parse (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/schemas/product.schema.ts:90:45)
          at transformProductWithCategory (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/schemas/product.schema.ts:166:10)
          at ProductService.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/productService.ts:324:46)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9) {
        issues: [
          {
            code: 'invalid_type',
            expected: 'string',
            received: 'undefined',
            path: [Array],
            message: 'Required'
          },
          {
            code: 'invalid_type',
            expected: 'string',
            received: 'undefined',
            path: [Array],
            message: 'Required'
          },
          {
            code: 'invalid_type',
            expected: 'string',
            received: 'undefined',
            path: [Array],
            message: 'Required'
          }
        ],
        addIssue: [Function (anonymous)],
        addIssues: [Function (anonymous)],
        errors: [
          {
            code: 'invalid_type',
            expected: 'string',
            received: 'undefined',
            path: [Array],
            message: 'Required'
          },
          {
            code: 'invalid_type',
            expected: 'string',
            received: 'undefined',
            path: [Array],
            message: 'Required'
          },
          {
            code: 'invalid_type',
            expected: 'string',
            received: 'undefined',
            path: [Array],
            message: 'Required'
          }
        ]
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at ProductService.error (src/services/productService.ts:326:17)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      Invalid product data, skipping: {
        productId: 'product-1',
        name: 'Test Product',
        error: '[\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "description"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "number",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "stock_quantity"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "category_id"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "boolean",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "is_available"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "updated_at"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  }\n' +
          ']'
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at ProductService.error (src/services/productService.ts:419:17)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      Error in searchProducts: TypeError: _supabase.supabase.from(...).select(...).eq(...).or is not a function
          at ProductService.or (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/productService.ts:361:10)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at ProductService.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at ProductService.apply [as searchProducts] (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/productService.ts:349:23)
          at Object.searchProducts (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/__tests__/productService.test.ts:238:43)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.then.completed (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/testWorker.js:106:12)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at ProductService.error (src/services/productService.ts:371:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at ProductService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at ProductService.apply [as searchProducts] (src/services/productService.ts:349:23)
      at Object.searchProducts (src/services/__tests__/productService.test.ts:238:43)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.error
      Error in getProducts: TypeError: _supabase.supabase.from(...).select is not a function
          at ProductService.select (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/productService.ts:129:10)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at ProductService.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at ProductService.apply [as getProducts] (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/productService.ts:122:20)
          at Object.getProducts (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/__tests__/productService.test.ts:295:43)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.then.completed (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/testWorker.js:106:12)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at ProductService.error (src/services/productService.ts:205:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at ProductService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at ProductService.apply [as getProducts] (src/services/productService.ts:122:20)
      at Object.getProducts (src/services/__tests__/productService.test.ts:295:43)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.error
      Error updating product stock: TypeError: _supabase.supabase.from(...).update(...).eq(...).select is not a function
          at ProductService.select (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/productService.ts:474:10)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at ProductService.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at ProductService.apply [as updateProductStock] (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/productService.ts:464:27)
          at Object.updateProductStock (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/__tests__/productService.test.ts:341:43)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.then.completed (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/testWorker.js:106:12)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at ProductService.error (src/services/productService.ts:520:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at ProductService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at ProductService.apply [as updateProductStock] (src/services/productService.ts:464:27)
      at Object.updateProductStock (src/services/__tests__/productService.test.ts:341:43)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.error
      Error in getProductById: TypeError: _supabase.supabase.from(...).select is not a function
          at ProductService.select (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/productService.ts:281:10)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at ProductService.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at ProductService.apply [as getProductById] (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/productService.ts:276:23)
          at Object.getProductById (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/__tests__/productService.test.ts:357:43)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.then.completed (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/testWorker.js:106:12)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at ProductService.error (src/services/productService.ts:339:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at ProductService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at ProductService.apply [as getProductById] (src/services/productService.ts:276:23)
      at Object.getProductById (src/services/__tests__/productService.test.ts:357:43)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

PASS src/schemas/__tests__/cart-transform-pattern.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/schemas/inventory/__contracts__/stockMovement.contracts.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/services/__tests__/orderService.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.error
      Unexpected error in submitOrder: Error: Customer information is required
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/orderService.ts:325:13
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
          at apply (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/orderService.ts:318:25)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/__tests__/orderService.test.ts:184:20)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.then.completed (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/testWorker.js:106:12)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at error (src/services/orderService.ts:605:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/services/orderService.ts:318:25)
      at Object.<anonymous> (src/services/__tests__/orderService.test.ts:184:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.error
      Unexpected error in submitOrder: Error: Customer information is required
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/orderService.ts:325:13
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
          at apply (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/orderService.ts:318:25)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/__tests__/orderService.test.ts:197:31)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.then.completed (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/testWorker.js:106:12)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at error (src/services/orderService.ts:605:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/services/orderService.ts:318:25)
      at Object.<anonymous> (src/services/__tests__/orderService.test.ts:197:31)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.error
      Invalid order data: {
        orderId: 'order-123',
        error: '[\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "customer_name"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "customer_email"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "customer_phone"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "number",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "subtotal"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "number",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "tax_amount"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "number",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "total_amount"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "fulfillment_type"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "payment_method"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "payment_status"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "notes"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "pickup_date"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "pickup_time"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "delivery_address"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "special_instructions"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "updated_at"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  }\n' +
          ']'
      }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at error (src/services/orderService.ts:650:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      Error fetching order: { message: 'Order not found' }

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at error (src/services/orderService.ts:635:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.warn
      getCustomerOrders: customerEmail is required

      418 |       return;
      419 |     }
    > 420 |     originalWarn(...args);
          |                 ^
      421 |   };
      422 |   
      423 |   console.error = (...args: any[]) => {

      at console.apply [as warn] (src/test/base-setup.ts:420:17)
      at warn (src/services/orderService.ts:665:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/services/orderService.ts:663:31)
      at Object.<anonymous> (src/services/__tests__/orderService.test.ts:266:45)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.warn
      getCustomerOrders: customerEmail is required

      418 |       return;
      419 |     }
    > 420 |     originalWarn(...args);
          |                 ^
      421 |   };
      422 |   
      423 |   console.error = (...args: any[]) => {

      at console.apply [as warn] (src/test/base-setup.ts:420:17)
      at warn (src/services/orderService.ts:665:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/services/orderService.ts:663:31)
      at Object.<anonymous> (src/services/__tests__/orderService.test.ts:273:37)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.error
      Error updating order status: TypeError: _supabase.supabase.from(...).update(...).eq(...).select is not a function
          at select (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/orderService.ts:731:8)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
          at apply (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/orderService.ts:721:31)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/__tests__/orderService.test.ts:294:45)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.then.completed (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/testWorker.js:106:12)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at error (src/services/orderService.ts:831:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/services/orderService.ts:721:31)
      at Object.<anonymous> (src/services/__tests__/orderService.test.ts:294:45)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.error
      Error updating order status: TypeError: _supabase.supabase.from(...).update(...).eq(...).select is not a function
          at select (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/orderService.ts:731:8)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
          at apply (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/orderService.ts:721:31)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/__tests__/orderService.test.ts:308:37)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.then.completed (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/testWorker.js:106:12)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at error (src/services/orderService.ts:831:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/services/orderService.ts:721:31)
      at Object.<anonymous> (src/services/__tests__/orderService.test.ts:308:37)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.error
      Error bulk updating order status: TypeError: _supabase.supabase.from(...).update(...).in(...).select is not a function
          at select (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/orderService.ts:853:8)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
          at apply (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/orderService.ts:840:35)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/src/services/__tests__/orderService.test.ts:322:49)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.then.completed (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/andrewkhoh/Documents/myfarmstand-mobile/node_modules/jest-runner/build/testWorker.js:106:12)

      427 |       return;
      428 |     }
    > 429 |     originalError(...args);
          |                  ^
      430 |   };
      431 |   
      432 |   return () => {

      at console.apply (src/test/base-setup.ts:429:18)
      at error (src/services/orderService.ts:902:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/services/orderService.ts:840:35)
      at Object.<anonymous> (src/services/__tests__/orderService.test.ts:322:49)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.warn
      Invalid order data, skipping: {
        orderId: 'order-1',
        error: '[\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "user_id"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "customer_name"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "customer_email"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "customer_phone"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "number",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "subtotal"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "number",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "tax_amount"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "number",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "total_amount"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "fulfillment_type"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "payment_method"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "payment_status"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "notes"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "pickup_date"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "pickup_time"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "delivery_address"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "special_instructions"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  },\n' +
          '  {\n' +
          '    "code": "invalid_type",\n' +
          '    "expected": "string",\n' +
          '    "received": "undefined",\n' +
          '    "path": [\n' +
          '      "updated_at"\n' +
          '    ],\n' +
          '    "message": "Required"\n' +
          '  }\n' +
          ']'
      }

      418 |       return;
      419 |     }
    > 420 |     originalWarn(...args);
          |                 ^
      421 |   };
      422 |   
      423 |   console.error = (...args: any[]) => {

      at console.apply [as warn] (src/test/base-setup.ts:420:17)
      at warn (src/services/orderService.ts:982:17)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

PASS src/schemas/marketing/__contracts__/productBundle.contracts.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/hooks/__tests__/useCart.simple-race.test.js
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/screens/__tests__/ShopScreen.category-filter.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/schemas/__tests__/schema-ui-integration.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/schemas/__contracts__/schema-contracts.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/hooks/executive/__tests__/useBusinessMetrics.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/services/__tests__/cartService.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

    console.log
      🛒 getCart() called - fetching from Supabase...

      at Object.log (src/services/cartService.ts:77:13)

    console.log
      👤 User auth status: not authenticated

      at Object.log (src/services/cartService.ts:81:15)

    console.log
      🚫 User not authenticated, returning empty cart

      at Object.log (src/services/cartService.ts:84:17)

    console.log
      🛒 getCart() called - fetching from Supabase...

      at Object.log (src/services/cartService.ts:77:13)

    console.log
      👤 User auth status: authenticated

      at Object.log (src/services/cartService.ts:81:15)

    console.log
      📡 Fetching cart items from Supabase for user: user-123

      at Object.log (src/services/cartService.ts:89:15)

    console.log
      ✅ No cart items found, returning empty cart

      at Object.log (src/services/cartService.ts:102:17)

    console.log
      🛒 getCart() called - fetching from Supabase...

      at Object.log (src/services/cartService.ts:77:13)

    console.log
      👤 User auth status: authenticated

      at Object.log (src/services/cartService.ts:81:15)

    console.log
      📡 Fetching cart items from Supabase for user: user-123

      at Object.log (src/services/cartService.ts:89:15)

    console.log
      📊 Found 1 cart items

      at Object.log (src/services/cartService.ts:106:15)

    console.log
      🛍️ Fetching products for cart items: [ 'product-1' ]

      at Object.log (src/services/cartService.ts:110:15)

    console.log
      ✅ Validated 1 products

      at Object.log (src/services/cartService.ts:150:15)

    console.log
      ✅ Returning cart with 1 items, total: $20

      at Object.log (src/services/cartService.ts:203:15)

PASS src/hooks/executive/__tests__/useSimpleStrategicReporting.test.tsx
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/schemas/__tests__/order-schema-anti-pattern-fix.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/schemas/__tests__/category-nullable-fields.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/schemas/executive/__contracts__/predictiveAnalytics.contracts.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/schemas/__tests__/order-service-pattern-alignment.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/schemas/__contracts__/failure-simulation.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/schemas/executive/__contracts__/strategicReporting.contracts.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

PASS src/hooks/__tests__/prototypes/hook-tests-summary.test.ts
  ● Console

    console.log
      Setting up tests in default mode

      at log (src/test/test-setup.ts:546:11)

FAIL src/services/executive/__tests__/strategicReportingService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       5 |
       6 | import { StrategicReportingService } from '../strategicReportingService';
    >  7 | import { createUser, resetAllFactories } from '../../../test/factories';
         | ^
       8 |
       9 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      10 | jest.mock('../../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/executive/__tests__/strategicReportingService.test.ts:7:1)

FAIL src/services/executive/__tests__/businessIntelligenceService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       5 |
       6 | import { BusinessIntelligenceService } from '../businessIntelligenceService';
    >  7 | import { createUser, resetAllFactories } from '../../../test/factories';
         | ^
       8 |
       9 | // Mock Supabase using the refactored infrastructure
      10 | jest.mock('../../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/executive/__tests__/businessIntelligenceService.test.ts:7:1)

FAIL src/services/executive/__tests__/performanceIntegration.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      4 |
      5 | import { BusinessMetricsService } from '../businessMetricsService';
    > 6 | import { createUser, resetAllFactories } from '../../../test/factories';
        | ^
      7 |
      8 | // Mock Supabase using the refactored infrastructure
      9 | jest.mock('../../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/executive/__tests__/performanceIntegration.test.ts:6:1)

FAIL src/services/executive/__tests__/businessMetricsService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       5 |
       6 | import { BusinessMetricsService } from '../businessMetricsService';
    >  7 | import { createUser, resetAllFactories } from '../../../test/factories';
         | ^
       8 |
       9 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      10 | jest.mock('../../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/executive/__tests__/businessMetricsService.test.ts:7:1)

FAIL src/services/executive/__tests__/executiveDashboardIntegration.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      3 | import { StrategicReportingService } from '../strategicReportingService';
      4 | import { PredictiveAnalyticsService } from '../predictiveAnalyticsService';
    > 5 | import { createUser, resetAllFactories } from '../../../test/factories';
        | ^
      6 |
      7 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      8 | jest.mock('../../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/executive/__tests__/executiveDashboardIntegration.test.ts:5:1)

FAIL src/services/executive/__tests__/predictiveAnalyticsIntegration.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      4 |
      5 | import { PredictiveAnalyticsService } from '../predictiveAnalyticsService';
    > 6 | import { createUser, resetAllFactories } from '../../../test/factories';
        | ^
      7 |
      8 | // Mock Supabase using the refactored infrastructure
      9 | jest.mock('../../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/executive/__tests__/predictiveAnalyticsIntegration.test.ts:6:1)

FAIL src/services/executive/__tests__/crossRoleAnalyticsIntegration.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { BusinessMetricsService } from '../businessMetricsService';
       7 | import { BusinessIntelligenceService } from '../businessIntelligenceService';
    >  8 | import { createUser, resetAllFactories } from '../../../test/factories';
         | ^
       9 |
      10 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      11 | jest.mock('../../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/executive/__tests__/crossRoleAnalyticsIntegration.test.ts:8:1)

FAIL src/services/marketing/__tests__/campaignManagementIntegration.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      2 | import { ProductContentService } from '../productContentService';
      3 | import { ProductBundleService } from '../productBundleService';
    > 4 | import { createUser, createProduct, resetAllFactories } from '../../../test/factories';
        | ^
      5 | import type {
      6 |   MarketingCampaignTransform,
      7 |   CreateMarketingCampaignInput,

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/marketing/__tests__/campaignManagementIntegration.test.ts:4:1)

FAIL src/services/marketing/__tests__/productBundleService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      3 |
      4 | // Factory imports
    > 5 | import { 
        | ^
      6 |   createUser, 
      7 |   createProduct, 
      8 |   createOrder, 

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/marketing/__tests__/productBundleService.test.ts:5:1)

FAIL src/services/role-based/__tests__/roleNavigationService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       9 |
      10 | // Factory imports
    > 11 | import { 
         | ^
      12 |   createUser, 
      13 |   createProduct, 
      14 |   createOrder, 

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/role-based/__tests__/roleNavigationService.test.ts:11:1)

FAIL src/services/inventory/__tests__/stockMovementService.mock.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      3 |
      4 | // Factory imports
    > 5 | import { 
        | ^
      6 |   createUser, 
      7 |   createProduct, 
      8 |   createOrder, 

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/inventory/__tests__/stockMovementService.mock.test.ts:5:1)

FAIL src/services/inventory/__tests__/stockMovementService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      51 | import { supabase } from '../../../config/supabase';
      52 | import { ValidationMonitor } from '../../../utils/validationMonitor';
    > 53 | import { createProduct, createUser, resetAllFactories } from '../../../test/factories';
         | ^
      54 | import type { 
      55 |   StockMovementTransform,
      56 |   CreateStockMovementInput,

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/inventory/__tests__/stockMovementService.test.ts:53:1)

FAIL src/services/__tests__/realtimeService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       5 |
       6 | import { RealtimeService } from '../realtimeService';
    >  7 | import { createUser, createOrder, resetAllFactories } from '../../test/factories';
         | ^
       8 |
       9 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      10 | jest.mock('../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/__tests__/realtimeService.test.ts:7:1)

FAIL src/services/marketing/__tests__/productContentService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      1 | import { ProductContentService } from '../productContentService';
    > 2 | import { createUser, createProduct, resetAllFactories } from '../../../test/factories';
        | ^
      3 | import type { 
      4 |   UpdateProductContentInput,
      5 |   CreateProductContentInput

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/marketing/__tests__/productContentService.test.ts:2:1)

FAIL src/services/inventory/__tests__/inventoryService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       5 |
       6 | import { InventoryService } from '../inventoryService';
    >  7 | import { createProduct, createUser, resetAllFactories } from '../../../test/factories';
         | ^
       8 | import type { 
       9 |   InventoryItemTransform,
      10 |   CreateInventoryItemInput,

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/inventory/__tests__/inventoryService.test.ts:7:1)

FAIL src/services/__tests__/notificationService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       5 |
       6 | import { NotificationService, sendPickupReadyNotification, sendOrderConfirmationNotification } from '../notificationService';
    >  7 | import { createUser, createOrder, resetAllFactories } from '../../test/factories';
         | ^
       8 |
       9 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      10 | jest.mock('../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/__tests__/notificationService.test.ts:7:1)

FAIL src/services/marketing/__tests__/marketingCampaignService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      3 |
      4 | // Factory imports
    > 5 | import { 
        | ^
      6 |   createUser, 
      7 |   createProduct, 
      8 |   createOrder, 

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/marketing/__tests__/marketingCampaignService.test.ts:5:1)

FAIL src/services/marketing/__tests__/contentWorkflowIntegration.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      1 | import { ProductContentService } from '../productContentService';
    > 2 | import { createUser, createProduct, resetAllFactories } from '../../../test/factories';
        | ^
      3 | import type {
      4 |   CreateProductContentInput,
      5 |   UpdateProductContentInput,

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/marketing/__tests__/contentWorkflowIntegration.test.ts:2:1)

FAIL src/services/marketing/__tests__/marketingServiceIntegration.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      2 | import { MarketingCampaignService } from '../marketingCampaignService';
      3 | import { ProductBundleService } from '../productBundleService';
    > 4 | import { createUser, createProduct, resetAllFactories } from '../../../test/factories';
        | ^
      5 |
      6 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      7 | jest.mock('../../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/marketing/__tests__/marketingServiceIntegration.test.ts:4:1)

FAIL src/services/__tests__/tokenService.test.ts
  ● Test suite failed to run

    Cannot find module 'jsonwebtoken' from 'src/services/__tests__/tokenService.test.ts'

      41 |
      42 | // Mock JWT if needed
    > 43 | jest.mock('jsonwebtoken', () => ({
         |      ^
      44 |   decode: jest.fn(),
      45 |   verify: jest.fn(),
      46 | }));

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.mock (src/services/__tests__/tokenService.test.ts:43:6)

FAIL src/services/__tests__/pickupReschedulingService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       5 |
       6 | import { PickupReschedulingService } from '../pickupReschedulingService';
    >  7 | import { createOrder, createUser, resetAllFactories } from '../../test/factories';
         | ^
       8 |
       9 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      10 | jest.mock('../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/__tests__/pickupReschedulingService.test.ts:7:1)

FAIL src/services/__tests__/authService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       5 |
       6 | import { AuthService } from '../authService';
    >  7 | import { createUser, resetAllFactories } from '../../test/factories';
         | ^
       8 |
       9 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      10 | jest.mock('../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/__tests__/authService.test.ts:7:1)

FAIL src/services/__tests__/paymentService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       5 |
       6 | import { paymentService } from '../paymentService';
    >  7 | import { createUser, createOrder, createPayment, createPaymentMethod, resetAllFactories } from '../../test/factories';
         | ^
       8 |
       9 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      10 | jest.mock('../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/__tests__/paymentService.test.ts:7:1)

FAIL src/services/__tests__/stockRestorationService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       5 |
       6 | import { StockRestorationService } from '../stockRestorationService';
    >  7 | import { createOrder, createProduct, createOrderItem, resetAllFactories } from '../../test/factories';
         | ^
       8 |
       9 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      10 | jest.mock('../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/__tests__/stockRestorationService.test.ts:7:1)

FAIL src/hooks/__tests__/prototypes/usePickupRescheduling.race.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/pickupReschedulingService' from 'src/hooks/__tests__/prototypes/usePickupRescheduling.race.test.tsx'

      13 |
      14 | // Import mocked services (services are mocked, React Query is real)
    > 15 | jest.mock('../../services/pickupReschedulingService', () => ({
         |                                                       ^
      16 |   PickupReschedulingService: {
      17 |     reschedulePickup: jest.fn(),
      18 |     wasRecentlyRescheduled: jest.fn(),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/usePickupRescheduling.race.test.tsx:15:55)

FAIL src/hooks/__tests__/prototypes/useNotifications.race.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/notificationService' from 'src/hooks/__tests__/prototypes/useNotifications.race.test.tsx'

      13 |
      14 | // Import mocked notification service (services are mocked, React Query is real)
    > 15 | jest.mock('../../services/notificationService', () => ({
         |                                                 ^
      16 |   NotificationService: {
      17 |     sendNotification: jest.fn(),
      18 |     sendPickupReadyNotification: jest.fn(),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/useNotifications.race.test.tsx:15:49)

FAIL src/hooks/__tests__/useProductAdmin.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, createProduct, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/productAdminService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useProductAdmin.test.tsx:8:1)

FAIL src/hooks/__tests__/useNoShowHandling.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, createOrder, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/noShowHandlingService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useNoShowHandling.test.tsx:8:1)

FAIL src/hooks/__tests__/useRealtime.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/realtimeService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useRealtime.test.tsx:8:1)

FAIL src/hooks/__tests__/useOrders.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, createOrder, createOrderItem, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/orderService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useOrders.test.tsx:8:1)

FAIL src/hooks/__tests__/usePayment.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, createPayment, createPaymentMethod, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/paymentService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/usePayment.test.tsx:8:1)

FAIL src/hooks/__tests__/prototypes/useCheckoutForm.simple.test.js
  ● Test suite failed to run

    Cannot find module '../useCheckoutForm' from 'src/hooks/__tests__/prototypes/useCheckoutForm.simple.test.js'

      1 | // Simple JavaScript test to verify useCheckoutForm functionality
    > 2 | const { useCheckoutForm } = require('../useCheckoutForm');
        |                             ^
      3 |
      4 | // Mock React hooks
      5 | let state = {};

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (src/hooks/__tests__/prototypes/useCheckoutForm.simple.test.js:2:29)

FAIL src/hooks/__tests__/prototypes/useCart.simple.working.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/cartService' from 'src/hooks/__tests__/prototypes/useCart.simple.working.test.tsx'

       5 |
       6 | // Mock all service dependencies first (before any imports)
    >  7 | jest.mock('../../services/cartService', () => ({
         |                                         ^
       8 |   cartService: {
       9 |     getCart: jest.fn(() => Promise.resolve({ items: [], total: 0 })),
      10 |     addToCart: jest.fn(() => Promise.resolve({ success: true })),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/useCart.simple.working.test.tsx:7:41)

FAIL src/hooks/__tests__/prototypes/useCentralizedRealtime.race.test.tsx
  ● Test suite failed to run

    Cannot find module '../useCentralizedRealtime' from 'src/hooks/__tests__/prototypes/useCentralizedRealtime.race.test.tsx'

      14 | import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
      15 | import React from 'react';
    > 16 | import { 
         | ^
      17 |   useCentralizedRealtime, 
      18 |   useForceRefreshUserData 
      19 | } from '../useCentralizedRealtime';

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (src/hooks/__tests__/prototypes/useCentralizedRealtime.race.test.tsx:16:1)

FAIL src/services/__tests__/productAdminService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      61 | import { supabase } from '../../config/supabase';
      62 | import { BroadcastHelper } from '../../utils/broadcastHelper';
    > 63 | import { createProduct, createCategory, createUser, resetAllFactories } from '../../test/factories';
         | ^
      64 |
      65 | // Get mock references
      66 | const mockSupabaseFrom = supabase.from as jest.Mock;

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/__tests__/productAdminService.test.ts:63:1)

FAIL src/hooks/__tests__/prototypes/useAuth.race.simple.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/authService' from 'src/hooks/__tests__/prototypes/useAuth.race.simple.test.tsx'

      12 |
      13 | // Mock AuthService for this test file specifically
    > 14 | jest.mock('../../services/authService', () => ({
         |                                         ^
      15 |   AuthService: {
      16 |     getCurrentUser: jest.fn(),
      17 |     isAuthenticated: jest.fn(),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/useAuth.race.simple.test.tsx:14:41)

FAIL src/hooks/__tests__/prototypes/useAuth.race.test.tsx
  ● Test suite failed to run

    Cannot find module '../useAuth' from 'src/hooks/__tests__/prototypes/useAuth.race.test.tsx'

    However, Jest was able to find:
    	'../useAuth.test.tsx'

    You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['ts', 'tsx', 'js', 'jsx'].

    See https://jestjs.io/docs/configuration#modulefileextensions-arraystring

      16 | import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
      17 | import React from 'react';
    > 18 | import { 
         | ^
      19 |   useLoginMutation, 
      20 |   useRegisterMutation, 
      21 |   useLogoutMutation, 

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (src/hooks/__tests__/prototypes/useAuth.race.test.tsx:18:1)

FAIL src/hooks/inventory/__tests__/useInventoryDashboard.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/react' from 'src/hooks/inventory/__tests__/useInventoryDashboard.test.tsx'

       7 | import { createSupabaseMock } from '../../../test/mocks/supabase.simplified.mock';
       8 | import { hookContracts } from '../../../test/contracts/hook.contracts';
    >  9 | import { renderHook, waitFor } from '@testing-library/react';
         | ^
      10 | import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
      11 | import {
      12 |   useInventoryDashboard,

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (src/hooks/inventory/__tests__/useInventoryDashboard.test.tsx:9:1)

FAIL src/hooks/__tests__/prototypes/simple.test.ts
  ● Test suite failed to run

    Cannot find module '../../test/mocks/supabase.simplified.mock' from 'src/hooks/__tests__/prototypes/simple.test.ts'

      1 | // Simple test file - migrated to new test architecture
    > 2 | import { createSupabaseMock } from '../../test/mocks/supabase.simplified.mock';
        | ^
      3 | import { hookContracts } from '../../test/contracts/hook.contracts';
      4 |
      5 | describe('Simple test - Migrated', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/simple.test.ts:2:1)

FAIL src/hooks/__tests__/prototypes/useAuth.simple.working.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/authService' from 'src/hooks/__tests__/prototypes/useAuth.simple.working.test.tsx'

      4 |
      5 | // Mock everything that might cause compilation issues
    > 6 | jest.mock('../../services/authService', () => ({
        |                                         ^
      7 |   AuthService: {
      8 |     login: jest.fn(() => Promise.resolve({ success: true, user: { id: '1', email: 'test@test.com' } })),
      9 |     getCurrentUser: jest.fn(() => Promise.resolve({ id: '1', email: 'test@test.com' })),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/useAuth.simple.working.test.tsx:6:41)

FAIL src/hooks/__tests__/prototypes/useProducts.simple.working.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/productService' from 'src/hooks/__tests__/prototypes/useProducts.simple.working.test.tsx'

       5 |
       6 | // Mock all service dependencies first (before any imports)
    >  7 | jest.mock('../../services/productService', () => ({
         |                                            ^
       8 |   ProductService: {
       9 |     getAllProducts: jest.fn(() => Promise.resolve([])),
      10 |     getProduct: jest.fn(() => Promise.resolve({ id: '1', name: 'Test Product' })),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/useProducts.simple.working.test.tsx:7:44)

FAIL src/hooks/__tests__/prototypes/useOrders.race.test.tsx
  ● Test suite failed to run

    Cannot find module '../useOrders' from 'src/hooks/__tests__/prototypes/useOrders.race.test.tsx'

    However, Jest was able to find:
    	'../useOrders.test.tsx'

    You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['ts', 'tsx', 'js', 'jsx'].

    See https://jestjs.io/docs/configuration#modulefileextensions-arraystring

      14 | import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
      15 | import React from 'react';
    > 16 | import { 
         | ^
      17 |   useOrders, 
      18 |   useOrder, 
      19 |   useOrderStats, 

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (src/hooks/__tests__/prototypes/useOrders.race.test.tsx:16:1)

FAIL src/hooks/__tests__/prototypes/useAuth.working.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/authService' from 'src/hooks/__tests__/prototypes/useAuth.working.test.tsx'

       8 |
       9 | // 1. Mock services first (hooks should test hook logic, not service implementation)
    > 10 | jest.mock('../../services/authService', () => ({
         |                                         ^
      11 |   AuthService: {
      12 |     login: jest.fn(),
      13 |     register: jest.fn(),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/useAuth.working.test.tsx:10:41)

FAIL src/hooks/__tests__/prototypes/useStockValidation.race.test.tsx
  ● Test suite failed to run

    Cannot find module '../useCart' from 'src/hooks/__tests__/prototypes/useStockValidation.race.test.tsx'

      16 |
      17 | // Import mocked cart hook
    > 18 | jest.mock('../useCart', () => ({
         |                         ^
      19 |   useCart: () => ({
      20 |     getCartQuantity: jest.fn().mockImplementation((productId: string) => {
      21 |       // Return different quantities for different products to test various scenarios

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/useStockValidation.race.test.tsx:18:25)

FAIL src/hooks/__tests__/prototypes/useProducts.race.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/productService' from 'src/hooks/__tests__/prototypes/useProducts.race.test.tsx'

      19 |
      20 | // Import mocked services (services are mocked, React Query is real)
    > 21 | jest.mock('../../services/productService', () => ({
         |                                            ^
      22 |   getProducts: jest.fn(),
      23 |   getProductById: jest.fn(),
      24 |   getProductsByCategory: jest.fn(),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/useProducts.race.test.tsx:21:44)

FAIL src/hooks/__tests__/prototypes/useAuth.simple.test.ts
  ● Test suite failed to run

    Cannot find module '../../services/authService' from 'src/hooks/__tests__/prototypes/useAuth.simple.test.ts'

      4 |
      5 | // Mock AuthService properly
    > 6 | jest.mock('../../services/authService', () => ({
        |                                         ^
      7 |   AuthService: {
      8 |     login: jest.fn(),
      9 |     register: jest.fn(),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/useAuth.simple.test.ts:6:41)

FAIL src/hooks/__tests__/prototypes/useCart.race.test.tsx
  ● Test suite failed to run

    Cannot find module '../useCart' from 'src/hooks/__tests__/prototypes/useCart.race.test.tsx'

    However, Jest was able to find:
    	'../useCart.simple-race.test.js'
    	'../useCart.test.tsx'

    You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['ts', 'tsx', 'js', 'jsx'].

    See https://jestjs.io/docs/configuration#modulefileextensions-arraystring

      13 | import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
      14 | import React from 'react';
    > 15 | import { useCart } from '../useCart';
         | ^
      16 | import { cartService } from '../../services/cartService';
      17 | import type { Product, CartState } from '../../types';
      18 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (src/hooks/__tests__/prototypes/useCart.race.test.tsx:15:1)

FAIL src/hooks/__tests__/useAuth.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/authService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useAuth.test.tsx:8:1)

FAIL src/hooks/__tests__/useCart.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, createCartItem, createProduct, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/cartService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useCart.test.tsx:8:1)

FAIL src/hooks/__tests__/useErrorRecovery.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/errorRecoveryService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useErrorRecovery.test.tsx:8:1)

FAIL src/hooks/__tests__/archive/usePickupRescheduling.legacy.test.ts
  ● Test suite failed to run

    Cannot find module '../../utils/queryKeyFactory' from 'src/hooks/__tests__/archive/usePickupRescheduling.legacy.test.ts'

       8 |
       9 | // Mock query key factory
    > 10 | jest.mock('../../utils/queryKeyFactory', () => require('../../test/mocks/queryKeyFactory.mock'));
         |                                          ^
      11 |
      12 | describe('usePickupRescheduling', () => {
      13 |   it('should pass basic setup test', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/usePickupRescheduling.legacy.test.ts:10:42)

FAIL src/hooks/__tests__/useProducts.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createProduct, createCategory, createUser, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/productService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useProducts.test.tsx:8:1)

FAIL src/hooks/__tests__/archive/useCart.legacy.test.ts
  ● Test suite failed to run

    Cannot find module '../../utils/broadcastFactory' from 'src/hooks/__tests__/archive/useCart.legacy.test.ts'

      1 | // Mock broadcast factory BEFORE any other imports
    > 2 | jest.mock('../../utils/broadcastFactory', () => {
        |                                                 ^
      3 |   const mockBroadcastHelper = {
      4 |     send: jest.fn(),
      5 |     getAuthorizedChannelNames: jest.fn(() => ['test-channel'])

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useCart.legacy.test.ts:2:49)

FAIL src/hooks/__tests__/useStockValidation.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, createProduct, createCartItem, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach - Service not implemented yet
      11 | jest.mock('../../services/stockValidationService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useStockValidation.test.tsx:8:1)

FAIL src/hooks/__tests__/archive/useRealtime.race.test.ts
  ● Test suite failed to run

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/hooks/__tests__/archive/useRealtime.race.test.ts: Unexpected token, expected "," (65:25)

      63 |
      64 |   const wrapper = ({ children }: { children: React.ReactNode }) => (
    > 65 |     <QueryClientProvider client={queryClient}>
         |                          ^
      66 |       {children}
      67 |     </QueryClientProvider>
      68 |   );

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptParserMixin.raise [as unexpected] (node_modules/@babel/parser/src/tokenizer/index.ts:1543:16)
      at TypeScriptParserMixin.unexpected [as expect] (node_modules/@babel/parser/src/parser/util.ts:157:12)
      at TypeScriptParserMixin.expect [as tsParseDelimitedListWorker] (node_modules/@babel/parser/src/plugins/typescript/index.ts:545:16)
      at TypeScriptParserMixin.tsParseDelimitedListWorker [as tsParseDelimitedList] (node_modules/@babel/parser/src/plugins/typescript/index.ts:498:14)
      at TypeScriptParserMixin.tsParseDelimitedList (node_modules/@babel/parser/src/plugins/typescript/index.ts:574:27)
      at TypeScriptParserMixin.tsParseBracketedList [as tsParseTypeParameters] (node_modules/@babel/parser/src/plugins/typescript/index.ts:826:26)
      at tsParseTypeParameters (node_modules/@babel/parser/src/plugins/typescript/index.ts:3739:31)
      at TypeScriptParserMixin.fn [as tryParse] (node_modules/@babel/parser/src/parser/util.ts:174:20)
      at TypeScriptParserMixin.tryParse [as parseMaybeAssign] (node_modules/@babel/parser/src/plugins/typescript/index.ts:3737:26)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowInOrVoidPattern [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1813:16)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at TypeScriptParserMixin.parseMaybeAssign [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2602:14)
      at TypeScriptParserMixin.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at TypeScriptParserMixin.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1837:12)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1582:18)
      at TypeScriptParserMixin.parseVar (node_modules/@babel/parser/src/parser/statement.ts:1246:10)
      at TypeScriptParserMixin.parseVarStatement (node_modules/@babel/parser/src/plugins/typescript/index.ts:3124:33)
      at TypeScriptParserMixin.parseVarStatement (node_modules/@babel/parser/src/parser/statement.ts:607:21)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at TypeScriptParserMixin.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at TypeScriptParserMixin.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at TypeScriptParserMixin.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at TypeScriptParserMixin.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1837:12)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at TypeScriptParserMixin.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at TypeScriptParserMixin.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at TypeScriptParserMixin.parseCoverCallAndAsyncArrowHead (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at TypeScriptParserMixin.parseSubscript (node_modules/@babel/parser/src/plugins/typescript/index.ts:2848:20)
      at TypeScriptParserMixin.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at TypeScriptParserMixin.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at TypeScriptParserMixin.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at TypeScriptParserMixin.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at TypeScriptParserMixin.parseExpression (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)

FAIL src/hooks/__tests__/useKiosk.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/kioskService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useKiosk.test.tsx:8:1)

FAIL src/hooks/__tests__/archive/useRealtime.legacy.test.ts
  ● Test suite failed to run

    Cannot find module '../../services/realtimeService' from 'src/hooks/__tests__/archive/useRealtime.legacy.test.ts'

       9 |
      10 | // Mock services using simplified approach
    > 11 | jest.mock('../../services/realtimeService', () => ({
         |                                             ^
      12 |   RealtimeService: {
      13 |     initializeAllSubscriptions: jest.fn(),
      14 |     cleanupAllSubscriptions: jest.fn(),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useRealtime.legacy.test.ts:11:45)

FAIL src/hooks/__tests__/usePickupRescheduling.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, createOrder, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/pickupReschedulingService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/usePickupRescheduling.test.tsx:8:1)

FAIL src/hooks/__tests__/archive/useNoShowHandling.legacy.test.ts
  ● Test suite failed to run

    Cannot find module '../../utils/queryKeyFactory' from 'src/hooks/__tests__/archive/useNoShowHandling.legacy.test.ts'

       8 |
       9 | // Mock query key factory
    > 10 | jest.mock('../../utils/queryKeyFactory', () => require('../../test/mocks/queryKeyFactory.mock'));
         |                                          ^
      11 |
      12 | describe('useNoShowHandling', () => {
      13 |   it('should pass basic setup test', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useNoShowHandling.legacy.test.ts:10:42)

FAIL src/hooks/__tests__/archive/useProductAdmin.legacy.test.ts
  ● Test suite failed to run

    Cannot find module '../../utils/validationMonitor' from 'src/hooks/__tests__/archive/useProductAdmin.legacy.test.ts'

      22 | };
      23 |
    > 24 | jest.mock('../../utils/validationMonitor', () => ({
         |                                            ^
      25 |   validationMonitor: mockValidationMonitor,
      26 | }));
      27 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useProductAdmin.legacy.test.ts:24:44)

FAIL src/hooks/__tests__/archive/useCheckoutForm.race.test.ts
  ● Test suite failed to run

    Cannot find module '../useCart' from 'src/hooks/__tests__/archive/useCheckoutForm.race.test.ts'

      3 |
      4 | // Mock useCart to simulate server state changes
    > 5 | jest.mock('../useCart', () => ({
        |                         ^
      6 |   useCart: () => ({
      7 |     items: [
      8 |       {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useCheckoutForm.race.test.ts:5:25)

FAIL src/hooks/__tests__/archive/useCentralizedRealtime.race.test.ts
  ● Test suite failed to run

    Cannot find module '../../config/supabase' from 'src/hooks/__tests__/archive/useCentralizedRealtime.race.test.ts'

       7 |
       8 | // Mock dependencies
    >  9 | jest.mock('../../config/supabase', () => ({
         |                                    ^
      10 |   supabase: {
      11 |     channel: jest.fn()
      12 |   }

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useCentralizedRealtime.race.test.ts:9:36)

FAIL src/hooks/__tests__/archive/useAuth.legacy.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/authService' from 'src/hooks/__tests__/archive/useAuth.legacy.test.tsx'

       5 |
       6 | // Mock all service dependencies first (before any imports)
    >  7 | jest.mock('../../services/authService', () => ({
         |                                         ^
       8 |   AuthService: {
       9 |     login: jest.fn(() => Promise.resolve({ success: true, user: { id: '1', email: 'test@test.com' } })),
      10 |     register: jest.fn(() => Promise.resolve({ success: true, user: { id: '1', email: 'test@test.com' } })),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useAuth.legacy.test.tsx:7:41)

FAIL src/hooks/__tests__/archive/useAuth.race.test.ts
  ● Test suite failed to run

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/hooks/__tests__/archive/useAuth.race.test.ts: Unexpected token, expected "," (68:25)

      66 |
      67 |   const wrapper = ({ children }: { children: React.ReactNode }) => (
    > 68 |     <QueryClientProvider client={queryClient}>
         |                          ^
      69 |       {children}
      70 |     </QueryClientProvider>
      71 |   );

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptParserMixin.raise [as unexpected] (node_modules/@babel/parser/src/tokenizer/index.ts:1543:16)
      at TypeScriptParserMixin.unexpected [as expect] (node_modules/@babel/parser/src/parser/util.ts:157:12)
      at TypeScriptParserMixin.expect [as tsParseDelimitedListWorker] (node_modules/@babel/parser/src/plugins/typescript/index.ts:545:16)
      at TypeScriptParserMixin.tsParseDelimitedListWorker [as tsParseDelimitedList] (node_modules/@babel/parser/src/plugins/typescript/index.ts:498:14)
      at TypeScriptParserMixin.tsParseDelimitedList (node_modules/@babel/parser/src/plugins/typescript/index.ts:574:27)
      at TypeScriptParserMixin.tsParseBracketedList [as tsParseTypeParameters] (node_modules/@babel/parser/src/plugins/typescript/index.ts:826:26)
      at tsParseTypeParameters (node_modules/@babel/parser/src/plugins/typescript/index.ts:3739:31)
      at TypeScriptParserMixin.fn [as tryParse] (node_modules/@babel/parser/src/parser/util.ts:174:20)
      at TypeScriptParserMixin.tryParse [as parseMaybeAssign] (node_modules/@babel/parser/src/plugins/typescript/index.ts:3737:26)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowInOrVoidPattern [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1813:16)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at TypeScriptParserMixin.parseMaybeAssign [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2602:14)
      at TypeScriptParserMixin.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at TypeScriptParserMixin.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1837:12)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1582:18)
      at TypeScriptParserMixin.parseVar (node_modules/@babel/parser/src/parser/statement.ts:1246:10)
      at TypeScriptParserMixin.parseVarStatement (node_modules/@babel/parser/src/plugins/typescript/index.ts:3124:33)
      at TypeScriptParserMixin.parseVarStatement (node_modules/@babel/parser/src/parser/statement.ts:607:21)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at TypeScriptParserMixin.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at TypeScriptParserMixin.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at TypeScriptParserMixin.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at TypeScriptParserMixin.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1837:12)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at TypeScriptParserMixin.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at TypeScriptParserMixin.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at TypeScriptParserMixin.parseCoverCallAndAsyncArrowHead (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at TypeScriptParserMixin.parseSubscript (node_modules/@babel/parser/src/plugins/typescript/index.ts:2848:20)
      at TypeScriptParserMixin.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at TypeScriptParserMixin.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at TypeScriptParserMixin.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at TypeScriptParserMixin.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at TypeScriptParserMixin.parseExpression (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)

FAIL src/hooks/__tests__/archive/useOrders.legacy.test.ts
  ● Test suite failed to run

    Cannot find module '../../services/orderService' from 'src/hooks/__tests__/archive/useOrders.legacy.test.ts'

       9 |
      10 | // Mock services using simplified approach
    > 11 | jest.mock('../../services/orderService', () => ({
         |                                          ^
      12 |   orderService: {
      13 |     getOrders: jest.fn(),
      14 |     getOrder: jest.fn(),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useOrders.legacy.test.ts:11:42)

FAIL src/hooks/__tests__/archive/useStockValidation.legacy.test.ts
  ● Test suite failed to run

    Cannot find module '../../utils/queryKeyFactory' from 'src/hooks/__tests__/archive/useStockValidation.legacy.test.ts'

       9 |
      10 | // Mock query key factory
    > 11 | jest.mock('../../utils/queryKeyFactory', () => require('../../test/mocks/queryKeyFactory.mock'));
         |                                          ^
      12 |
      13 | describe('useStockValidation', () => {
      14 |   it('should pass basic setup test', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useStockValidation.legacy.test.ts:11:42)

FAIL src/hooks/__tests__/archive/usePayment.legacy.test.ts
  ● Test suite failed to run

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/hooks/__tests__/archive/usePayment.legacy.test.ts: Unexpected token, expected "," (82:27)

      80 |   const createWrapper = () => {
      81 |     const Wrapper = ({ children }: { children: React.ReactNode }) => (
    > 82 |       <QueryClientProvider client={queryClient}>{children}</QueryClientProvider>
         |                            ^
      83 |     );
      84 |     return Wrapper;
      85 |   };

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptParserMixin.raise [as unexpected] (node_modules/@babel/parser/src/tokenizer/index.ts:1543:16)
      at TypeScriptParserMixin.unexpected [as expect] (node_modules/@babel/parser/src/parser/util.ts:157:12)
      at TypeScriptParserMixin.expect [as tsParseDelimitedListWorker] (node_modules/@babel/parser/src/plugins/typescript/index.ts:545:16)
      at TypeScriptParserMixin.tsParseDelimitedListWorker [as tsParseDelimitedList] (node_modules/@babel/parser/src/plugins/typescript/index.ts:498:14)
      at TypeScriptParserMixin.tsParseDelimitedList (node_modules/@babel/parser/src/plugins/typescript/index.ts:574:27)
      at TypeScriptParserMixin.tsParseBracketedList [as tsParseTypeParameters] (node_modules/@babel/parser/src/plugins/typescript/index.ts:826:26)
      at tsParseTypeParameters (node_modules/@babel/parser/src/plugins/typescript/index.ts:3739:31)
      at TypeScriptParserMixin.fn [as tryParse] (node_modules/@babel/parser/src/parser/util.ts:174:20)
      at TypeScriptParserMixin.tryParse [as parseMaybeAssign] (node_modules/@babel/parser/src/plugins/typescript/index.ts:3737:26)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowInOrVoidPattern [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1813:16)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at TypeScriptParserMixin.parseMaybeAssign [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2602:14)
      at TypeScriptParserMixin.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at TypeScriptParserMixin.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1837:12)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1582:18)
      at TypeScriptParserMixin.parseVar (node_modules/@babel/parser/src/parser/statement.ts:1246:10)
      at TypeScriptParserMixin.parseVarStatement (node_modules/@babel/parser/src/plugins/typescript/index.ts:3124:33)
      at TypeScriptParserMixin.parseVarStatement (node_modules/@babel/parser/src/parser/statement.ts:607:21)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at TypeScriptParserMixin.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at TypeScriptParserMixin.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at TypeScriptParserMixin.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at TypeScriptParserMixin.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1837:12)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1582:18)
      at TypeScriptParserMixin.parseVar (node_modules/@babel/parser/src/parser/statement.ts:1246:10)
      at TypeScriptParserMixin.parseVarStatement (node_modules/@babel/parser/src/plugins/typescript/index.ts:3124:33)
      at TypeScriptParserMixin.parseVarStatement (node_modules/@babel/parser/src/parser/statement.ts:607:21)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at TypeScriptParserMixin.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at TypeScriptParserMixin.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at TypeScriptParserMixin.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at TypeScriptParserMixin.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1837:12)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at TypeScriptParserMixin.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at TypeScriptParserMixin.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at TypeScriptParserMixin.parseCoverCallAndAsyncArrowHead (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at TypeScriptParserMixin.parseSubscript (node_modules/@babel/parser/src/plugins/typescript/index.ts:2848:20)

FAIL src/hooks/__tests__/archive/useNotifications.legacy.test.ts
  ● Test suite failed to run

    Cannot find module '../../utils/queryKeyFactory' from 'src/hooks/__tests__/archive/useNotifications.legacy.test.ts'

       9 |
      10 | // Mock query key factory
    > 11 | jest.mock('../../utils/queryKeyFactory', () => require('../../test/mocks/queryKeyFactory.mock'));
         |                                          ^
      12 |
      13 | describe('useNotifications', () => {
      14 |   it('should pass basic setup test', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useNotifications.legacy.test.ts:11:42)

FAIL src/hooks/__tests__/archive/useProducts.legacy.test.ts
  ● Test suite failed to run

    Cannot find module '../../services/productService' from 'src/hooks/__tests__/archive/useProducts.legacy.test.ts'

       9 |
      10 | // Mock services using simplified approach
    > 11 | jest.mock('../../services/productService', () => ({
         |                                            ^
      12 |   productService: {
      13 |     getProducts: jest.fn(),
      14 |     getProduct: jest.fn(),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useProducts.legacy.test.ts:11:44)

FAIL src/hooks/__tests__/archive/useErrorRecovery.legacy.test.ts
  ● Test suite failed to run

    Cannot find module '../../utils/queryKeyFactory' from 'src/hooks/__tests__/archive/useErrorRecovery.legacy.test.ts'

       9 |
      10 | // Mock query key factory
    > 11 | jest.mock('../../utils/queryKeyFactory', () => require('../../test/mocks/queryKeyFactory.mock'));
         |                                          ^
      12 |
      13 | describe('useErrorRecovery', () => {
      14 |   it('should pass basic setup test', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useErrorRecovery.legacy.test.ts:11:42)

FAIL src/__tests__/payment-integration.test.ts
  ● Test suite failed to run

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/__tests__/payment-integration.test.ts: Unexpected token, expected "," (69:27)

      67 |     
      68 |     wrapper = ({ children }: { children: React.ReactNode }) => (
    > 69 |       <QueryClientProvider client={queryClient}>
         |                            ^
      70 |         {children}
      71 |       </QueryClientProvider>
      72 |     );

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptParserMixin.raise [as unexpected] (node_modules/@babel/parser/src/tokenizer/index.ts:1543:16)
      at TypeScriptParserMixin.unexpected [as expect] (node_modules/@babel/parser/src/parser/util.ts:157:12)
      at TypeScriptParserMixin.expect [as tsParseDelimitedListWorker] (node_modules/@babel/parser/src/plugins/typescript/index.ts:545:16)
      at TypeScriptParserMixin.tsParseDelimitedListWorker [as tsParseDelimitedList] (node_modules/@babel/parser/src/plugins/typescript/index.ts:498:14)
      at TypeScriptParserMixin.tsParseDelimitedList (node_modules/@babel/parser/src/plugins/typescript/index.ts:574:27)
      at TypeScriptParserMixin.tsParseBracketedList [as tsParseTypeParameters] (node_modules/@babel/parser/src/plugins/typescript/index.ts:826:26)
      at tsParseTypeParameters (node_modules/@babel/parser/src/plugins/typescript/index.ts:3739:31)
      at TypeScriptParserMixin.fn [as tryParse] (node_modules/@babel/parser/src/parser/util.ts:174:20)
      at TypeScriptParserMixin.tryParse [as parseMaybeAssign] (node_modules/@babel/parser/src/plugins/typescript/index.ts:3737:26)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowInOrVoidPattern [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1813:16)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at TypeScriptParserMixin.parseMaybeAssign [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2602:14)
      at TypeScriptParserMixin.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at TypeScriptParserMixin.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1837:12)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:345:25)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at TypeScriptParserMixin.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at TypeScriptParserMixin.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at TypeScriptParserMixin.parseExpression (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at TypeScriptParserMixin.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at TypeScriptParserMixin.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at TypeScriptParserMixin.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at TypeScriptParserMixin.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1837:12)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at TypeScriptParserMixin.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at TypeScriptParserMixin.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at TypeScriptParserMixin.parseCoverCallAndAsyncArrowHead (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at TypeScriptParserMixin.parseSubscript (node_modules/@babel/parser/src/plugins/typescript/index.ts:2848:20)
      at TypeScriptParserMixin.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at TypeScriptParserMixin.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at TypeScriptParserMixin.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at TypeScriptParserMixin.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at TypeScriptParserMixin.parseExpression (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at TypeScriptParserMixin.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at TypeScriptParserMixin.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at TypeScriptParserMixin.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at TypeScriptParserMixin.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1837:12)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)

FAIL src/hooks/__tests__/useNotifications.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/notificationService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useNotifications.test.tsx:8:1)

FAIL src/screens/role-based/__tests__/PermissionManagementScreen.test.tsx
  ● Test suite failed to run

    ReferenceError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/screens/role-based/__tests__/PermissionManagementScreen.test.tsx: The module factory of `jest.mock()` is not allowed to reference any out-of-scope variables.
    Invalid variable access: React
    Allowed objects: AbortController, AbortSignal, AggregateError, Array, ArrayBuffer, Atomics, BigInt, BigInt64Array, BigUint64Array, Blob, Boolean, BroadcastChannel, Buffer, ByteLengthQueuingStrategy, CompressionStream, CountQueuingStrategy, Crypto, CryptoKey, CustomEvent, DOMException, DataView, Date, DecompressionStream, Error, EvalError, Event, EventTarget, File, FinalizationRegistry, Float32Array, Float64Array, FormData, Function, Generator, GeneratorFunction, Headers, Infinity, Int16Array, Int32Array, Int8Array, InternalError, Intl, Iterator, JSON, Map, Math, MessageChannel, MessageEvent, MessagePort, NaN, Navigator, Number, Object, Performance, PerformanceEntry, PerformanceMark, PerformanceMeasure, PerformanceObserver, PerformanceObserverEntryList, PerformanceResourceTiming, Promise, Proxy, RangeError, ReadableByteStreamController, ReadableStream, ReadableStreamBYOBReader, ReadableStreamBYOBRequest, ReadableStreamDefaultController, ReadableStreamDefaultReader, ReferenceError, Reflect, RegExp, Request, Response, Set, SharedArrayBuffer, String, SubtleCrypto, Symbol, SyntaxError, TextDecoder, TextDecoderStream, TextEncoder, TextEncoderStream, TransformStream, TransformStreamDefaultController, TypeError, URIError, URL, URLSearchParams, Uint16Array, Uint32Array, Uint8Array, Uint8ClampedArray, WeakMap, WeakRef, WeakSet, WebAssembly, WebSocket, WritableStream, WritableStreamDefaultController, WritableStreamDefaultWriter, __dirname, __filename, arguments, atob, btoa, clearImmediate, clearInterval, clearTimeout, console, crypto, decodeURI, decodeURIComponent, encodeURI, encodeURIComponent, escape, eval, expect, exports, fetch, global, globalThis, isFinite, isNaN, jest, module, navigator, parseFloat, parseInt, performance, process, queueMicrotask, require, setImmediate, setInterval, setTimeout, structuredClone, undefined, unescape.
    Note: This is a precaution to guard against uninitialized mock variables. If it is ensured that the mock is required lazily, variable names prefixed with `mock` (case insensitive) are permitted.

      37 |   useNavigation: () => mockNavigation,
      38 |   useFocusEffect: (callback: () => void) => {
    > 39 |     React.useEffect(callback, []);
         |     ^^^^^
      40 |   },
      41 | }));
      42 |

      at File.buildCodeFrameError (node_modules/@babel/core/src/transformation/file/file.ts:256:12)
      at NodePath.buildError [as buildCodeFrameError] (node_modules/@babel/traverse/src/path/index.ts:142:21)
      at call (node_modules/@babel/traverse/src/visitors.ts:303:14)
      at NodePath.call [as _call] (node_modules/@babel/traverse/src/path/context.ts:36:20)
      at NodePath.call (node_modules/@babel/traverse/src/path/context.ts:21:18)
      at NodePath.call [as visit] (node_modules/@babel/traverse/src/path/context.ts:97:31)
      at TraversalContext.visit [as visitQueue] (node_modules/@babel/traverse/src/context.ts:148:16)
      at TraversalContext.visitQueue [as visitMultiple] (node_modules/@babel/traverse/src/context.ts:99:17)
      at TraversalContext.visitMultiple [as visit] (node_modules/@babel/traverse/src/context.ts:178:19)
      at visit (node_modules/@babel/traverse/src/traverse-node.ts:208:17)
      at NodePath.visit (node_modules/@babel/traverse/src/path/context.ts:104:33)
      at TraversalContext.visit [as visitQueue] (node_modules/@babel/traverse/src/context.ts:148:16)
      at TraversalContext.visitQueue [as visitSingle] (node_modules/@babel/traverse/src/context.ts:109:19)
      at TraversalContext.visitSingle [as visit] (node_modules/@babel/traverse/src/context.ts:180:19)
      at visit (node_modules/@babel/traverse/src/traverse-node.ts:208:17)
      at traverse (node_modules/@babel/traverse/src/index.ts:83:15)
      at transformFile (node_modules/@babel/core/src/transformation/index.ts:119:15)
          at transformFile.next (<anonymous>)
      at transformFile (node_modules/@babel/core/src/transformation/index.ts:49:12)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)

FAIL src/screens/__tests__/ProfileScreen.test.tsx
  ● Test suite failed to run

    Cannot find module '../../contexts/AuthContext' from 'src/screens/__tests__/ProfileScreen.test.tsx'

       7 |
       8 | // Mock the useAuth hook
    >  9 | jest.mock('../../contexts/AuthContext');
         |                                        ^
      10 | const mockUseAuth = useAuth as jest.MockedFunction<typeof useAuth>;
      11 |
      12 | // Mock Alert

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/screens/__tests__/ProfileScreen.test.tsx:9:40)

FAIL src/__tests__/integration/role-based/RoleIntegration.test.tsx
  ● Test suite failed to run

    ReferenceError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/__tests__/integration/role-based/RoleIntegration.test.tsx: The module factory of `jest.mock()` is not allowed to reference any out-of-scope variables.
    Invalid variable access: React
    Allowed objects: AbortController, AbortSignal, AggregateError, Array, ArrayBuffer, Atomics, BigInt, BigInt64Array, BigUint64Array, Blob, Boolean, BroadcastChannel, Buffer, ByteLengthQueuingStrategy, CompressionStream, CountQueuingStrategy, Crypto, CryptoKey, CustomEvent, DOMException, DataView, Date, DecompressionStream, Error, EvalError, Event, EventTarget, File, FinalizationRegistry, Float32Array, Float64Array, FormData, Function, Generator, GeneratorFunction, Headers, Infinity, Int16Array, Int32Array, Int8Array, InternalError, Intl, Iterator, JSON, Map, Math, MessageChannel, MessageEvent, MessagePort, NaN, Navigator, Number, Object, Performance, PerformanceEntry, PerformanceMark, PerformanceMeasure, PerformanceObserver, PerformanceObserverEntryList, PerformanceResourceTiming, Promise, Proxy, RangeError, ReadableByteStreamController, ReadableStream, ReadableStreamBYOBReader, ReadableStreamBYOBRequest, ReadableStreamDefaultController, ReadableStreamDefaultReader, ReferenceError, Reflect, RegExp, Request, Response, Set, SharedArrayBuffer, String, SubtleCrypto, Symbol, SyntaxError, TextDecoder, TextDecoderStream, TextEncoder, TextEncoderStream, TransformStream, TransformStreamDefaultController, TypeError, URIError, URL, URLSearchParams, Uint16Array, Uint32Array, Uint8Array, Uint8ClampedArray, WeakMap, WeakRef, WeakSet, WebAssembly, WebSocket, WritableStream, WritableStreamDefaultController, WritableStreamDefaultWriter, __dirname, __filename, arguments, atob, btoa, clearImmediate, clearInterval, clearTimeout, console, crypto, decodeURI, decodeURIComponent, encodeURI, encodeURIComponent, escape, eval, expect, exports, fetch, global, globalThis, isFinite, isNaN, jest, module, navigator, parseFloat, parseInt, performance, process, queueMicrotask, require, setImmediate, setInterval, setTimeout, structuredClone, undefined, unescape.
    Note: This is a precaution to guard against uninitialized mock variables. If it is ensured that the mock is required lazily, variable names prefixed with `mock` (case insensitive) are permitted.

      36 |   useNavigation: () => mockNavigation,
      37 |   useFocusEffect: (callback: () => void) => {
    > 38 |     React.useEffect(callback, []);
         |     ^^^^^
      39 |   },
      40 | }));
      41 |

      at File.buildCodeFrameError (node_modules/@babel/core/src/transformation/file/file.ts:256:12)
      at NodePath.buildError [as buildCodeFrameError] (node_modules/@babel/traverse/src/path/index.ts:142:21)
      at call (node_modules/@babel/traverse/src/visitors.ts:303:14)
      at NodePath.call [as _call] (node_modules/@babel/traverse/src/path/context.ts:36:20)
      at NodePath.call (node_modules/@babel/traverse/src/path/context.ts:21:18)
      at NodePath.call [as visit] (node_modules/@babel/traverse/src/path/context.ts:97:31)
      at TraversalContext.visit [as visitQueue] (node_modules/@babel/traverse/src/context.ts:148:16)
      at TraversalContext.visitQueue [as visitMultiple] (node_modules/@babel/traverse/src/context.ts:99:17)
      at TraversalContext.visitMultiple [as visit] (node_modules/@babel/traverse/src/context.ts:178:19)
      at visit (node_modules/@babel/traverse/src/traverse-node.ts:208:17)
      at NodePath.visit (node_modules/@babel/traverse/src/path/context.ts:104:33)
      at TraversalContext.visit [as visitQueue] (node_modules/@babel/traverse/src/context.ts:148:16)
      at TraversalContext.visitQueue [as visitSingle] (node_modules/@babel/traverse/src/context.ts:109:19)
      at TraversalContext.visitSingle [as visit] (node_modules/@babel/traverse/src/context.ts:180:19)
      at visit (node_modules/@babel/traverse/src/traverse-node.ts:208:17)
      at traverse (node_modules/@babel/traverse/src/index.ts:83:15)
      at transformFile (node_modules/@babel/core/src/transformation/index.ts:119:15)
          at transformFile.next (<anonymous>)
      at transformFile (node_modules/@babel/core/src/transformation/index.ts:49:12)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)

FAIL src/screens/role-based/__tests__/RoleDashboard.test.tsx
  ● Test suite failed to run

    ReferenceError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/screens/role-based/__tests__/RoleDashboard.test.tsx: The module factory of `jest.mock()` is not allowed to reference any out-of-scope variables.
    Invalid variable access: React
    Allowed objects: AbortController, AbortSignal, AggregateError, Array, ArrayBuffer, Atomics, BigInt, BigInt64Array, BigUint64Array, Blob, Boolean, BroadcastChannel, Buffer, ByteLengthQueuingStrategy, CompressionStream, CountQueuingStrategy, Crypto, CryptoKey, CustomEvent, DOMException, DataView, Date, DecompressionStream, Error, EvalError, Event, EventTarget, File, FinalizationRegistry, Float32Array, Float64Array, FormData, Function, Generator, GeneratorFunction, Headers, Infinity, Int16Array, Int32Array, Int8Array, InternalError, Intl, Iterator, JSON, Map, Math, MessageChannel, MessageEvent, MessagePort, NaN, Navigator, Number, Object, Performance, PerformanceEntry, PerformanceMark, PerformanceMeasure, PerformanceObserver, PerformanceObserverEntryList, PerformanceResourceTiming, Promise, Proxy, RangeError, ReadableByteStreamController, ReadableStream, ReadableStreamBYOBReader, ReadableStreamBYOBRequest, ReadableStreamDefaultController, ReadableStreamDefaultReader, ReferenceError, Reflect, RegExp, Request, Response, Set, SharedArrayBuffer, String, SubtleCrypto, Symbol, SyntaxError, TextDecoder, TextDecoderStream, TextEncoder, TextEncoderStream, TransformStream, TransformStreamDefaultController, TypeError, URIError, URL, URLSearchParams, Uint16Array, Uint32Array, Uint8Array, Uint8ClampedArray, WeakMap, WeakRef, WeakSet, WebAssembly, WebSocket, WritableStream, WritableStreamDefaultController, WritableStreamDefaultWriter, __dirname, __filename, arguments, atob, btoa, clearImmediate, clearInterval, clearTimeout, console, crypto, decodeURI, decodeURIComponent, encodeURI, encodeURIComponent, escape, eval, expect, exports, fetch, global, globalThis, isFinite, isNaN, jest, module, navigator, parseFloat, parseInt, performance, process, queueMicrotask, require, setImmediate, setInterval, setTimeout, structuredClone, undefined, unescape.
    Note: This is a precaution to guard against uninitialized mock variables. If it is ensured that the mock is required lazily, variable names prefixed with `mock` (case insensitive) are permitted.

      32 |   useNavigation: () => mockNavigation,
      33 |   useFocusEffect: (callback: () => void) => {
    > 34 |     React.useEffect(callback, []);
         |     ^^^^^
      35 |   },
      36 | }));
      37 |

      at File.buildCodeFrameError (node_modules/@babel/core/src/transformation/file/file.ts:256:12)
      at NodePath.buildError [as buildCodeFrameError] (node_modules/@babel/traverse/src/path/index.ts:142:21)
      at call (node_modules/@babel/traverse/src/visitors.ts:303:14)
      at NodePath.call [as _call] (node_modules/@babel/traverse/src/path/context.ts:36:20)
      at NodePath.call (node_modules/@babel/traverse/src/path/context.ts:21:18)
      at NodePath.call [as visit] (node_modules/@babel/traverse/src/path/context.ts:97:31)
      at TraversalContext.visit [as visitQueue] (node_modules/@babel/traverse/src/context.ts:148:16)
      at TraversalContext.visitQueue [as visitMultiple] (node_modules/@babel/traverse/src/context.ts:99:17)
      at TraversalContext.visitMultiple [as visit] (node_modules/@babel/traverse/src/context.ts:178:19)
      at visit (node_modules/@babel/traverse/src/traverse-node.ts:208:17)
      at NodePath.visit (node_modules/@babel/traverse/src/path/context.ts:104:33)
      at TraversalContext.visit [as visitQueue] (node_modules/@babel/traverse/src/context.ts:148:16)
      at TraversalContext.visitQueue [as visitSingle] (node_modules/@babel/traverse/src/context.ts:109:19)
      at TraversalContext.visitSingle [as visit] (node_modules/@babel/traverse/src/context.ts:180:19)
      at visit (node_modules/@babel/traverse/src/traverse-node.ts:208:17)
      at traverse (node_modules/@babel/traverse/src/index.ts:83:15)
      at transformFile (node_modules/@babel/core/src/transformation/index.ts:119:15)
          at transformFile.next (<anonymous>)
      at transformFile (node_modules/@babel/core/src/transformation/index.ts:49:12)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)

FAIL src/navigation/__tests__/RoleBasedStackNavigator.test.tsx
  ● Test suite failed to run

    Cannot find module '../../screens/HomeScreen' from 'src/navigation/__tests__/RoleBasedStackNavigator.test.tsx'

      38 |
      39 | // Mock all screen imports  
    > 40 | jest.mock('../../screens/HomeScreen', () => ({ HomeScreen: () => 'HomeScreen' }));
         |      ^
      41 | jest.mock('../../screens/ProductsScreen', () => ({ ProductsScreen: () => 'ProductsScreen' }));
      42 | jest.mock('../../screens/CartScreen', () => ({ CartScreen: () => 'CartScreen' }));
      43 | jest.mock('../../screens/OrdersScreen', () => ({ OrdersScreen: () => 'OrdersScreen' }));

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.mock (src/navigation/__tests__/RoleBasedStackNavigator.test.tsx:40:6)

FAIL src/ARCHIVE/useEntityQuery.test.ts
  ● Test suite failed to run

    Cannot find module '../useAuth' from 'src/ARCHIVE/useEntityQuery.test.ts'

       5 | import { useCurrentUser } from '../useAuth';
       6 |
    >  7 | jest.mock('../useAuth');
         |                        ^
       8 | const mockUseCurrentUser = useCurrentUser as jest.MockedFunction<typeof useCurrentUser>;
       9 |
      10 | jest.mock('../../utils/queryKeyFactory', () => ({

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/ARCHIVE/useEntityQuery.test.ts:7:24)

FAIL archives/kiosk-temporary/useKiosk.simple.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/kioskService' from 'archives/kiosk-temporary/useKiosk.simple.test.tsx'

      11 |
      12 | // Mock the kiosk service (following CLAUDE.md pattern: service layer mocked for hooks)
    > 13 | jest.mock('../../services/kioskService');
         |                                         ^
      14 | const mockKioskService = kioskService as jest.Mocked<typeof kioskService>;
      15 |
      16 | // Real React Query setup following CLAUDE.md patterns

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (archives/kiosk-temporary/useKiosk.simple.test.tsx:13:41)

FAIL archives/kiosk-temporary/useKiosk.final.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/kioskService' from 'archives/kiosk-temporary/useKiosk.final.test.tsx'

      10 |
      11 | // Mock the kiosk service following CLAUDE.md pattern
    > 12 | jest.mock('../../services/kioskService');
         |                                         ^
      13 | const mockKioskService = kioskService as jest.Mocked<typeof kioskService>;
      14 |
      15 | // Real React Query setup following CLAUDE.md patterns

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (archives/kiosk-temporary/useKiosk.final.test.tsx:12:41)

FAIL src/ARCHIVE/useCentralizedRealtime.test.ts
  ● Test suite failed to run

    Cannot find module '../../config/supabase' from 'src/ARCHIVE/useCentralizedRealtime.test.ts'

       9 | import { useCurrentUser } from '../useAuth';
      10 |
    > 11 | jest.mock('../../config/supabase', () => ({
         |                                    ^
      12 |   supabase: {
      13 |     channel: jest.fn(() => ({
      14 |       on: jest.fn().mockReturnThis(),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/ARCHIVE/useCentralizedRealtime.test.ts:11:36)

FAIL archives/kiosk-temporary/KioskTransparent.simple.test.tsx
  ● Test suite failed to run

    Cannot find module '../../hooks/useKiosk' from 'archives/kiosk-temporary/KioskTransparent.simple.test.tsx'

      12 |
      13 | // Mock kiosk hooks
    > 14 | jest.mock('../../hooks/useKiosk', () => ({
         |      ^
      15 |   useKioskAuth: () => ({
      16 |     mutateAsync: jest.fn(() => Promise.resolve({
      17 |       success: true,

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.mock (archives/kiosk-temporary/KioskTransparent.simple.test.tsx:14:6)

FAIL archives/kiosk-temporary/useKiosk.aligned.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/kioskService' from 'archives/kiosk-temporary/useKiosk.aligned.test.tsx'

      29 |
      30 | // Mock dependencies
    > 31 | jest.mock('../../services/kioskService');
         |                                         ^
      32 | jest.mock('../../utils/validationMonitor');
      33 |
      34 | describe('Kiosk Hooks - Aligned Pattern Compliance', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (archives/kiosk-temporary/useKiosk.aligned.test.tsx:31:41)

FAIL archives/kiosk-temporary/kiosk.schema.aligned.test.ts
  ● Test suite failed to run

    Cannot find module '../kiosk.schema' from 'archives/kiosk-temporary/kiosk.schema.aligned.test.ts'

      14 |  */
      15 |
    > 16 | import {
         | ^
      17 |   KioskAuthRequestSchema,
      18 |   DbKioskSessionTransformSchema,
      19 |   DbStaffPinTransformSchema,

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (archives/kiosk-temporary/kiosk.schema.aligned.test.ts:16:1)

FAIL src/screens/role-based/__tests__/RoleSelectionScreen.test.tsx
  ● Test suite failed to run

    TypeError: _reactNative.Platform.select is not a function

      34 |
      35 | jest.mock('@react-navigation/native', () => ({
    > 36 |   ...jest.requireActual('@react-navigation/native'),
         |           ^
      37 |   useNavigation: () => mockNavigation,
      38 | }));
      39 |

      at Object.select (node_modules/@react-navigation/native/src/theming/fonts.tsx:8:31)
      at Object.require (node_modules/@react-navigation/native/src/theming/DefaultTheme.tsx:2:1)
      at Object.require (node_modules/@react-navigation/native/src/NavigationContainer.tsx:19:1)
      at Object.require (node_modules/@react-navigation/native/src/createStaticNavigation.tsx:10:1)
      at Object.require (node_modules/@react-navigation/native/src/index.tsx:1:1)
      at requireActual (src/screens/role-based/__tests__/RoleSelectionScreen.test.tsx:36:11)
      at Object.require (src/screens/role-based/__tests__/RoleSelectionScreen.test.tsx:9:1)

FAIL src/screens/inventory/__tests__/InventoryAlertsScreen.test.tsx
  ● Test suite failed to run

    TypeError: _reactNative.Platform.select is not a function

      18 | const mockNavigate = jest.fn();
      19 | jest.mock('@react-navigation/native', () => ({
    > 20 |   ...jest.requireActual('@react-navigation/native'),
         |           ^
      21 |   useNavigation: () => ({
      22 |     navigate: mockNavigate,
      23 |   }),

      at Object.select (node_modules/@react-navigation/native/src/theming/fonts.tsx:8:31)
      at Object.require (node_modules/@react-navigation/native/src/theming/DefaultTheme.tsx:2:1)
      at Object.require (node_modules/@react-navigation/native/src/NavigationContainer.tsx:19:1)
      at Object.require (node_modules/@react-navigation/native/src/createStaticNavigation.tsx:10:1)
      at Object.require (node_modules/@react-navigation/native/src/index.tsx:1:1)
      at requireActual (src/screens/inventory/__tests__/InventoryAlertsScreen.test.tsx:20:11)
      at Object.require (src/screens/inventory/__tests__/InventoryAlertsScreen.test.tsx:8:1)

FAIL archives/kiosk-temporary/kioskService.aligned.test.ts
  ● Test suite failed to run

    Cannot find module '../../config/supabase' from 'archives/kiosk-temporary/kioskService.aligned.test.ts'

      19 |
      20 | // Mock dependencies
    > 21 | jest.mock('../../config/supabase');
         |                                   ^
      22 | jest.mock('../../utils/validationMonitor');
      23 |
      24 | describe('KioskService - Aligned Pattern Compliance', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (archives/kiosk-temporary/kioskService.aligned.test.ts:21:35)

FAIL src/screens/__tests__/CheckoutScreen.test.tsx
  ● Test suite failed to run

    TypeError: _reactNative.Platform.select is not a function

      32 |
      33 | jest.mock('@react-navigation/native', () => ({
    > 34 |   ...jest.requireActual('@react-navigation/native'),
         |           ^
      35 |   useNavigation: () => ({ navigate: mockNavigate }),
      36 |   useRoute: () => mockRoute,
      37 | }));

      at Object.select (node_modules/@react-navigation/native/src/theming/fonts.tsx:8:31)
      at Object.require (node_modules/@react-navigation/native/src/theming/DefaultTheme.tsx:2:1)
      at Object.require (node_modules/@react-navigation/native/src/NavigationContainer.tsx:19:1)
      at Object.require (node_modules/@react-navigation/native/src/createStaticNavigation.tsx:10:1)
      at Object.require (node_modules/@react-navigation/native/src/index.tsx:1:1)
      at requireActual (src/screens/__tests__/CheckoutScreen.test.tsx:34:11)
      at Object.require (src/test/testUtils.tsx:4:1)
      at Object.require (src/screens/__tests__/CheckoutScreen.test.tsx:4:1)

FAIL src/screens/inventory/__tests__/InventoryDashboardScreen.test.tsx
  ● Test suite failed to run

    TypeError: _reactNative.Platform.select is not a function

      17 | const mockNavigate = jest.fn();
      18 | jest.mock('@react-navigation/native', () => ({
    > 19 |   ...jest.requireActual('@react-navigation/native'),
         |           ^
      20 |   useNavigation: () => ({
      21 |     navigate: mockNavigate,
      22 |   }),

      at Object.select (node_modules/@react-navigation/native/src/theming/fonts.tsx:8:31)
      at Object.require (node_modules/@react-navigation/native/src/theming/DefaultTheme.tsx:2:1)
      at Object.require (node_modules/@react-navigation/native/src/NavigationContainer.tsx:19:1)
      at Object.require (node_modules/@react-navigation/native/src/createStaticNavigation.tsx:10:1)
      at Object.require (node_modules/@react-navigation/native/src/index.tsx:1:1)
      at requireActual (src/screens/inventory/__tests__/InventoryDashboardScreen.test.tsx:19:11)
      at Object.require (src/screens/inventory/__tests__/InventoryDashboardScreen.test.tsx:8:1)

FAIL src/screens/__tests__/OrderConfirmationScreen.test.tsx
  ● Test suite failed to run

    TypeError: _reactNative.Platform.select is not a function

      19 |
      20 | jest.mock('@react-navigation/native', () => ({
    > 21 |   ...jest.requireActual('@react-navigation/native'),
         |           ^
      22 |   useNavigation: () => ({ 
      23 |     navigate: mockNavigate,
      24 |     reset: mockReset,

      at Object.select (node_modules/@react-navigation/native/src/theming/fonts.tsx:8:31)
      at Object.require (node_modules/@react-navigation/native/src/theming/DefaultTheme.tsx:2:1)
      at Object.require (node_modules/@react-navigation/native/src/NavigationContainer.tsx:19:1)
      at Object.require (node_modules/@react-navigation/native/src/createStaticNavigation.tsx:10:1)
      at Object.require (node_modules/@react-navigation/native/src/index.tsx:1:1)
      at requireActual (src/screens/__tests__/OrderConfirmationScreen.test.tsx:21:11)
      at Object.require (src/test/testUtils.tsx:4:1)
      at Object.require (src/screens/__tests__/OrderConfirmationScreen.test.tsx:2:1)

A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
Summary of all failing tests
FAIL src/hooks/marketing/__tests__/useProductBundles.test.tsx (7.59 s)
  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useProductBundles - Bundle Listing with Role-based Access › should fetch product bundles with role-based filtering

    TypeError: _queryKeyFactory.bundleKeys.byStatusPaginated is not a function

      92 |
      93 |   return useQuery({
    > 94 |     queryKey: bundleKeys.byStatusPaginated(status, pagination),
         |                          ^
      95 |     queryFn: async (): Promise<PaginatedResponse<ProductBundleTransform>> => {
      96 |       if (!effectiveUserId) {
      97 |         throw new Error('Authentication required for bundle access');

      at byStatusPaginated (src/hooks/marketing/useProductBundles.ts:94:26)
      at useProductBundles (src/hooks/marketing/__tests__/useProductBundles.test.tsx:182:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductBundles.test.tsx:181:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useProductBundles - Bundle Listing with Role-based Access › should enforce role-based access control for bundle management

    TypeError: _queryKeyFactory.bundleKeys.byStatusPaginated is not a function

      92 |
      93 |   return useQuery({
    > 94 |     queryKey: bundleKeys.byStatusPaginated(status, pagination),
         |                          ^
      95 |     queryFn: async (): Promise<PaginatedResponse<ProductBundleTransform>> => {
      96 |       if (!effectiveUserId) {
      97 |         throw new Error('Authentication required for bundle access');

      at byStatusPaginated (src/hooks/marketing/useProductBundles.ts:94:26)
      at useProductBundles (src/hooks/marketing/__tests__/useProductBundles.test.tsx:212:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductBundles.test.tsx:211:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useProductBundles - Bundle Listing with Role-based Access › should support featured bundle filtering

    TypeError: _queryKeyFactory.bundleKeys.byStatusPaginated is not a function

      92 |
      93 |   return useQuery({
    > 94 |     queryKey: bundleKeys.byStatusPaginated(status, pagination),
         |                          ^
      95 |     queryFn: async (): Promise<PaginatedResponse<ProductBundleTransform>> => {
      96 |       if (!effectiveUserId) {
      97 |         throw new Error('Authentication required for bundle access');

      at byStatusPaginated (src/hooks/marketing/useProductBundles.ts:94:26)
      at useProductBundles (src/hooks/marketing/__tests__/useProductBundles.test.tsx:258:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductBundles.test.tsx:257:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useProductBundles - Bundle Listing with Role-based Access › should handle empty bundle results gracefully

    TypeError: _queryKeyFactory.bundleKeys.byStatusPaginated is not a function

      92 |
      93 |   return useQuery({
    > 94 |     queryKey: bundleKeys.byStatusPaginated(status, pagination),
         |                          ^
      95 |     queryFn: async (): Promise<PaginatedResponse<ProductBundleTransform>> => {
      96 |       if (!effectiveUserId) {
      97 |         throw new Error('Authentication required for bundle access');

      at byStatusPaginated (src/hooks/marketing/useProductBundles.ts:94:26)
      at useProductBundles (src/hooks/marketing/__tests__/useProductBundles.test.tsx:294:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductBundles.test.tsx:293:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useProductBundles - Bundle Listing with Role-based Access › should use centralized query key factory for bundles

    TypeError: _queryKeyFactory.bundleKeys.byStatusPaginated is not a function

      92 |
      93 |   return useQuery({
    > 94 |     queryKey: bundleKeys.byStatusPaginated(status, pagination),
         |                          ^
      95 |     queryFn: async (): Promise<PaginatedResponse<ProductBundleTransform>> => {
      96 |       if (!effectiveUserId) {
      97 |         throw new Error('Authentication required for bundle access');

      at byStatusPaginated (src/hooks/marketing/useProductBundles.ts:94:26)
      at useProductBundles (src/hooks/marketing/__tests__/useProductBundles.test.tsx:324:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductBundles.test.tsx:323:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useBundlePerformance - Sales Tracking and Analytics › should fetch bundle performance with sales metrics

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "bundle-1"

    Number of calls: 0

      378 |
      379 |       expect(result.current.data).toEqual(mockPerformance);
    > 380 |       expect(mockProductBundleService.getBundlePerformance).toHaveBeenCalledWith('bundle-1');
          |                                                             ^
      381 |     });
      382 |
      383 |     it('should handle bundles with no sales data', async () => {

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useProductBundles.test.tsx:380:61)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useCreateBundle - Bundle Creation with Product Associations › should create bundle with product associations and pricing

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"bundleDescription": "Variety of fresh vegetables", "bundleDiscountAmount": 8, "bundleName": "Fresh Produce Pack", "bundlePrice": 45.99, "campaignId": "campaign-2", "displayOrder": 100, "isActive": true, "isFeatured": false, "products": [{"displayOrder": 1, "productId": "product-1", "quantity": 2}, {"displayOrder": 2, "productId": "product-2", "quantity": 1}]}, "user-1"

    Number of calls: 0

      523 |       });
      524 |
    > 525 |       expect(mockProductBundleService.createBundle).toHaveBeenCalledWith(
          |                                                     ^
      526 |         bundleData,
      527 |         'user-1'
      528 |       );

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useProductBundles.test.tsx:525:53)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useBundleInventoryImpact - Cross-role Integration › should calculate inventory impact for bundle quantities

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: [{"productId": "product-1", "quantity": 2}, {"productId": "product-2", "quantity": 1}], 10

    Number of calls: 0

      702 |       });
      703 |
    > 704 |       expect(mockProductBundleService.calculateInventoryImpact).toHaveBeenCalledWith(
          |                                                                 ^
      705 |         bundleProducts,
      706 |         10
      707 |       );

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useProductBundles.test.tsx:704:65)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useBundleInventoryImpact - Cross-role Integration › should provide reorder recommendations for inventory planning

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 1
    Received array:  [{"productId": "product-low-stock", "suggestedLevel": 100}]

      801 |       });
      802 |
    > 803 |       expect(result.current.data?.recommendations.suggestedReorderLevels).toHaveLength(2);
          |                                                                           ^
      804 |     });
      805 |
      806 |     it('should integrate with inventory service for real-time data', async () => {

      at Object.toHaveLength (src/hooks/marketing/__tests__/useProductBundles.test.tsx:803:75)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useBundleInventoryImpact - Cross-role Integration › should integrate with inventory service for real-time data

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      844 |
      845 |       // Integration with inventory service should be seamless
    > 846 |       expect(result.current.data?.availability.isAvailable).toBe(true);
          |                                                             ^
      847 |     });
      848 |   });
      849 |

      at Object.toBe (src/hooks/marketing/__tests__/useProductBundles.test.tsx:846:61)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › useUpdateBundleProducts - Bundle Product Management › should update bundle product associations

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "bundle-1", {"products": [{"displayOrder": 1, "productId": "product-1", "quantity": 3}, {"displayOrder": 2, "productId": "product-3", "quantity": 1}]}, "user-1"

    Number of calls: 0

      890 |       });
      891 |
    > 892 |       expect(mockProductBundleService.updateBundleProducts).toHaveBeenCalledWith(
          |                                                             ^
      893 |         'bundle-1',
      894 |         { products: updatedProducts },
      895 |         'user-1'

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useProductBundles.test.tsx:892:61)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › Performance and Error Handling › should handle service failures gracefully

    TypeError: _queryKeyFactory.bundleKeys.byStatusPaginated is not a function

      92 |
      93 |   return useQuery({
    > 94 |     queryKey: bundleKeys.byStatusPaginated(status, pagination),
         |                          ^
      95 |     queryFn: async (): Promise<PaginatedResponse<ProductBundleTransform>> => {
      96 |       if (!effectiveUserId) {
      97 |         throw new Error('Authentication required for bundle access');

      at byStatusPaginated (src/hooks/marketing/useProductBundles.ts:94:26)
      at useProductBundles (src/hooks/marketing/__tests__/useProductBundles.test.tsx:992:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductBundles.test.tsx:991:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › Performance and Error Handling › should maintain performance targets for bundle operations

    TypeError: _queryKeyFactory.bundleKeys.byStatusPaginated is not a function

      92 |
      93 |   return useQuery({
    > 94 |     queryKey: bundleKeys.byStatusPaginated(status, pagination),
         |                          ^
      95 |     queryFn: async (): Promise<PaginatedResponse<ProductBundleTransform>> => {
      96 |       if (!effectiveUserId) {
      97 |         throw new Error('Authentication required for bundle access');

      at byStatusPaginated (src/hooks/marketing/useProductBundles.ts:94:26)
      at useProductBundles (src/hooks/marketing/__tests__/useProductBundles.test.tsx:1023:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductBundles.test.tsx:1022:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › Performance and Error Handling › should implement proper caching for inventory impact calculations

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

      1079 |
      1080 |       // Implementation should cache expensive inventory calculations
    > 1081 |       expect(mockProductBundleService.calculateInventoryImpact).toHaveBeenCalledTimes(2);
           |                                                                 ^
      1082 |     });
      1083 |   });
      1084 |

      at Object.toHaveBeenCalledTimes (src/hooks/marketing/__tests__/useProductBundles.test.tsx:1081:65)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Bundle Hooks - Phase 3.3.3 (RED Phase) › Cross-System Integration › should support integration with campaign management

    expect(received).toBe(expected) // Object.is equality

    Expected: "campaign-summer"
    Received: undefined

      1111 |       });
      1112 |
    > 1113 |       expect(result.current.data?.campaignId).toBe('campaign-summer');
           |                                               ^
      1114 |     });
      1115 |
      1116 |     it('should trigger inventory notifications for stock level changes', async () => {

      at Object.toBe (src/hooks/marketing/__tests__/useProductBundles.test.tsx:1113:47)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/inventory/__tests__/integration/integrationVerification.test.tsx (9.986 s)
  ● Integration Verification Tests (GREEN Phase) › should verify integration layers work together

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      125 |
      126 |     // Wait for both to load
    > 127 |     await waitFor(() => {
          |                  ^
      128 |       expect(inventoryResult.current.isSuccess).toBe(true);
      129 |       expect(movementResult.current.isSuccess).toBe(true);
      130 |     });

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/integrationVerification.test.tsx:127:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Integration Verification Tests (GREEN Phase) › should verify cache invalidation integration works

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      164 |     );
      165 |
    > 166 |     await waitFor(() => {
          |                  ^
      167 |       expect(result.current.isSuccess).toBe(true);
      168 |     });
      169 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/integrationVerification.test.tsx:166:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Integration Verification Tests (GREEN Phase) › should verify error handling integration across layers

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      184 |     );
      185 |
    > 186 |     await waitFor(() => {
          |                  ^
      187 |       expect(result.current.isError).toBe(true);
      188 |     }, { timeout: 3000 });
      189 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/integrationVerification.test.tsx:186:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/__tests__/integration/analyticsIntegration.test.ts (10.028 s)
  ● Analytics Pipeline Integration Tests › Operational to Strategic Data Flow › should validate complete sales analytics pipeline

    expect(received).toBeGreaterThan(expected)

    Expected: > 0.95
    Received:   0

      78 |       const dataQuality = await validateDataQuality(rawSalesData, strategicMetrics);
      79 |       
    > 80 |       expect(dataQuality.completeness_score).toBeGreaterThan(0.95);
         |                                              ^
      81 |       expect(dataQuality.accuracy_score).toBeGreaterThan(0.98);
      82 |
      83 |       const pipelineTime = performance.now() - pipelineStart;

      at Object.toBeGreaterThan (src/__tests__/integration/analyticsIntegration.test.ts:80:46)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Analytics Pipeline Integration Tests › Real-Time Analytics Processing › should handle real-time inventory updates

    expect(received).toBeNull()

    Received: undefined

      256 |         .insert(inventoryMovement);
      257 |
    > 258 |       expect(movementError).toBeNull();
          |                             ^
      259 |
      260 |       // Step 2: Update inventory levels
      261 |       const { error: updateError } = await supabase

      at Object.toBeNull (src/__tests__/integration/analyticsIntegration.test.ts:258:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Analytics Pipeline Integration Tests › Cross-Role Analytics Integration › should provide role-specific analytics views

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      610 | function validateRoleDataAccess(role: string, analytics: any): void {
      611 |     // Validate that role has appropriate access
    > 612 |     expect(analytics.permissions.length).toBeGreaterThan(0);
          |                                          ^
      613 |   }
      614 |
      615 | async function getAnalyticsForRole(role: string): Promise<any> {

      at toBeGreaterThan (src/__tests__/integration/analyticsIntegration.test.ts:612:42)
      at Object.validateRoleDataAccess (src/__tests__/integration/analyticsIntegration.test.ts:310:9)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/role-based/__tests__/useUserRole.test.tsx (10.443 s)
  ● useUserRole - Phase 1 › should fetch user role successfully

    expect(received).toEqual(expected) // deep equality

    Expected: {"createdAt": "2024-01-01T00:00:00Z", "id": "role-123", "isActive": true, "permissions": ["view_inventory"], "roleType": "inventory_staff", "updatedAt": "2024-01-01T00:00:00Z", "userId": "user-456"}
    Received: undefined

      92 |
      93 |     // Wait for hook to initialize and complete (race test pattern)
    > 94 |     await waitFor(() => {
         |                  ^
      95 |       expect(result.current.data).toEqual(mockRole);
      96 |       expect(result.current.isLoading).toBe(false);
      97 |     }, { timeout: 3000 });

      at Object.<anonymous> (src/hooks/role-based/__tests__/useUserRole.test.tsx:94:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useUserRole - Phase 1 › should handle user role not found

    expect(received).toBeNull()

    Received: undefined

      113 |     });
      114 |
    > 115 |     expect(result.current.data).toBeNull();
          |                                 ^
      116 |     expect(result.current.isLoading).toBe(false);
      117 |   });
      118 |

      at Object.toBeNull (src/hooks/role-based/__tests__/useUserRole.test.tsx:115:33)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useUserRole - Phase 1 › should use current user when no userId provided

    expect(received).toEqual(expected) // deep equality

    Expected: {"createdAt": "2024-01-01T00:00:00Z", "id": "role-current", "isActive": true, "permissions": [], "roleType": "admin", "updatedAt": "2024-01-01T00:00:00Z", "userId": "current-user-123"}
    Received: undefined

      139 |     });
      140 |
    > 141 |     expect(result.current.data).toEqual(mockRole);
          |                                 ^
      142 |     // Verify service was called with current user ID
      143 |     expect(mockRolePermissionService.getUserRole).toHaveBeenCalledWith('current-user-123');
      144 |   });

      at Object.toEqual (src/hooks/role-based/__tests__/useUserRole.test.tsx:141:33)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useUserRole - Phase 1 › should fetch with current user when no userId provided

    expect(received).toBe(expected) // Object.is equality

    Expected: "fetching"
    Received: undefined

      152 |
      153 |     // With current user mocked, the query should fetch
    > 154 |     expect(result.current.fetchStatus).toBe('fetching');
          |                                        ^
      155 |     expect(result.current.queryKey).toEqual(['roles', 'user', 'current-user-123']);
      156 |   });
      157 |

      at Object.toBe (src/hooks/role-based/__tests__/useUserRole.test.tsx:154:40)

  ● useUserRole - Phase 1 › should handle service errors gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      165 |     });
      166 |
    > 167 |     await waitFor(() => {
          |                  ^
      168 |       expect(result.current.isError).toBe(true);
      169 |     });
      170 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useUserRole.test.tsx:167:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useUserRole - Phase 1 › should cache results appropriately

    expect(received).toEqual(expected) // deep equality

    Expected: {"createdAt": "2024-01-01T00:00:00Z", "id": "role-123", "isActive": true, "permissions": [], "roleType": "marketing_staff", "updatedAt": "2024-01-01T00:00:00Z", "userId": "user-456"}
    Received: undefined

      207 |     });
      208 |
    > 209 |     expect(result.current.data).toEqual(mockRole);
          |                                 ^
      210 |
      211 |     // Clear mock calls
      212 |     jest.clearAllMocks();

      at Object.toEqual (src/hooks/role-based/__tests__/useUserRole.test.tsx:209:33)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useUserRole - Phase 1 › should retry network errors but not auth errors

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      229 |     });
      230 |
    > 231 |     await waitFor(() => {
          |                  ^
      232 |       expect(result.current.isError).toBe(true);
      233 |     });
      234 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useUserRole.test.tsx:231:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useUserRole - Phase 1 › should configure appropriate stale time for role data

    TypeError: queryClient.getQueryState is not a function

      245 |     // Role data should be considered fresh for 5 minutes (roles change infrequently)
      246 |     const queryData = queryClient.getQueryData(['roles', 'user', 'user-456']);
    > 247 |     const queryState = queryClient.getQueryState(['roles', 'user', 'user-456']);
          |                                    ^
      248 |     
      249 |     // This verifies the hook is configured with appropriate staletime
      250 |     expect(result.current).toBeDefined();

      at Object.getQueryState (src/hooks/role-based/__tests__/useUserRole.test.tsx:247:36)

  ● useUserRole - Phase 1 › should properly isolate different user roles

    expect(received).toEqual(expected) // deep equality

    Expected: {"createdAt": "2024-01-01T00:00:00Z", "id": "role-1", "isActive": true, "permissions": ["view_inventory"], "roleType": "inventory_staff", "updatedAt": "2024-01-01T00:00:00Z", "userId": "user-1"}
    Received: undefined

      304 |
      305 |     // Verify proper user isolation
    > 306 |     expect(result1.current.data).toEqual(user1Role);
          |                                  ^
      307 |     expect(result2.current.data).toEqual(user2Role);
      308 |     expect(result1.current.data?.roleType).toBe('inventory_staff');
      309 |     expect(result2.current.data?.roleType).toBe('marketing_staff');

      at Object.toEqual (src/hooks/role-based/__tests__/useUserRole.test.tsx:306:34)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/marketing/__tests__/useProductContent.test.tsx
  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useProductContent - Individual Content Fetching › should fetch single product content with transformation

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "content-1", "user-1"

    Number of calls: 0

      182 |
      183 |       expect(result.current.data).toEqual(mockContent);
    > 184 |       expect(mockProductContentService.getProductContent).toHaveBeenCalledWith('content-1', 'user-1');
          |                                                           ^
      185 |     });
      186 |
      187 |     it('should handle content not found gracefully', async () => {

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useProductContent.test.tsx:184:59)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useProductContent - Individual Content Fetching › should enforce role-based access control for content viewing

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "unauthorized-user", "content_management"

    Number of calls: 0

      235 |       });
      236 |
    > 237 |       expect(mockRolePermissionService.hasPermission).toHaveBeenCalledWith(
          |                                                       ^
      238 |         'unauthorized-user',
      239 |         'content_management'
      240 |       );

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useProductContent.test.tsx:237:55)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useProductContent - Individual Content Fetching › should handle concurrent content requests efficiently

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

      308 |       });
      309 |
    > 310 |       expect(mockProductContentService.getProductContent).toHaveBeenCalledTimes(2);
          |                                                           ^
      311 |     });
      312 |   });
      313 |

      at Object.toHaveBeenCalledTimes (src/hooks/marketing/__tests__/useProductContent.test.tsx:310:59)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useContentByStatus - Workflow State Filtering › should fetch content filtered by workflow status

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "draft", {"limit": 10, "page": 1}, "user-1"

    Number of calls: 0

      354 |
      355 |       expect(result.current.data).toEqual(mockContentList);
    > 356 |       expect(mockProductContentService.getContentByStatus).toHaveBeenCalledWith(
          |                                                            ^
      357 |         'draft',
      358 |         { page: 1, limit: 10 },
      359 |         'user-1'

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useProductContent.test.tsx:356:60)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useUpdateProductContent - Content Mutation with Optimistic Updates › should update product content with optimistic UI updates

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "content-1", {"contentStatus": "published", "marketingTitle": "Updated Title"}, "user-1"

    Number of calls: 0

      498 |       });
      499 |
    > 500 |       expect(mockProductContentService.updateProductContent).toHaveBeenCalledWith(
          |                                                              ^
      501 |         'content-1',
      502 |         updateData,
      503 |         'user-1'

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useProductContent.test.tsx:500:62)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useUpdateProductContent - Content Mutation with Optimistic Updates › should support batch content operations with progress tracking

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: [{"data": {"marketingTitle": "Updated 1"}, "id": "content-1"}, {"data": {"marketingTitle": "Updated 2"}, "id": "content-2"}], "user-1"

    Number of calls: 0

      616 |       });
      617 |
    > 618 |       expect(mockProductContentService.batchUpdateContent).toHaveBeenCalledWith(
          |                                                            ^
      619 |         batchUpdates,
      620 |         'user-1'
      621 |       );

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useProductContent.test.tsx:618:60)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useUploadContentImage - File Upload with Progress Tracking › should upload content image with progress callbacks

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      690 |       expect(progressUpdates).toHaveLength(2);
      691 |       expect(progressUpdates[1].percentage).toBe(100);
    > 692 |       expect(mockProductContentService.uploadContentImage).toHaveBeenCalled();
          |                                                            ^
      693 |     });
      694 |
      695 |     it('should validate file type and size constraints', async () => {

      at Object.toHaveBeenCalled (src/hooks/marketing/__tests__/useProductContent.test.tsx:692:60)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useUploadContentImage - File Upload with Progress Tracking › should support multiple concurrent uploads

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

      831 |       ]);
      832 |
    > 833 |       expect(mockProductContentService.uploadContentImage).toHaveBeenCalledTimes(2);
          |                                                            ^
      834 |     });
      835 |   });
      836 |

      at Object.toHaveBeenCalledTimes (src/hooks/marketing/__tests__/useProductContent.test.tsx:833:60)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useContentWorkflow - State Transition Management › should manage content workflow state transitions

    Can't access .root on unmounted test renderer

      858 |       } as any);
      859 |
    > 860 |       const { result } = renderHook(
          |                                    ^
      861 |         () => useContentWorkflow(),
      862 |         { wrapper: createWrapper() }
      863 |       );

      at Object.get [as root] (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14491:19)
      at root (node_modules/@testing-library/react-native/src/render.tsx:102:29)
      at buildRenderResult (node_modules/@testing-library/react-native/src/render.tsx:70:10)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductContent.test.tsx:860:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useContentWorkflow - State Transition Management › should validate workflow transition rules

    Can't access .root on unmounted test renderer

      895 |       } as any);
      896 |
    > 897 |       const { result } = renderHook(
          |                                    ^
      898 |         () => useContentWorkflow(),
      899 |         { wrapper: createWrapper() }
      900 |       );

      at Object.get [as root] (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14491:19)
      at root (node_modules/@testing-library/react-native/src/render.tsx:102:29)
      at buildRenderResult (node_modules/@testing-library/react-native/src/render.tsx:70:10)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductContent.test.tsx:897:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useContentWorkflow - State Transition Management › should support collaborative workflow with real-time updates

    Can't access .root on unmounted test renderer

      936 |       } as any);
      937 |
    > 938 |       const { result } = renderHook(
          |                                    ^
      939 |         () => useContentWorkflow(),
      940 |         { wrapper: createWrapper() }
      941 |       );

      at Object.get [as root] (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14491:19)
      at root (node_modules/@testing-library/react-native/src/render.tsx:102:29)
      at buildRenderResult (node_modules/@testing-library/react-native/src/render.tsx:70:10)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductContent.test.tsx:938:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › useContentWorkflow - State Transition Management › should handle workflow conflicts in collaborative environments

    Can't access .root on unmounted test renderer

      962 |       } as any);
      963 |
    > 964 |       const { result } = renderHook(
          |                                    ^
      965 |         () => useContentWorkflow(),
      966 |         { wrapper: createWrapper() }
      967 |       );

      at Object.get [as root] (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14491:19)
      at root (node_modules/@testing-library/react-native/src/render.tsx:102:29)
      at buildRenderResult (node_modules/@testing-library/react-native/src/render.tsx:70:10)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductContent.test.tsx:964:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › Performance and Error Handling › should handle service timeouts gracefully

    Can't access .root on unmounted test renderer

      1001 |       } as any);
      1002 |
    > 1003 |       const { result } = renderHook(
           |                                    ^
      1004 |         () => useProductContent('content-1', 'user-1'),
      1005 |         { wrapper: createWrapper() }
      1006 |       );

      at Object.get [as root] (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14491:19)
      at root (node_modules/@testing-library/react-native/src/render.tsx:102:29)
      at buildRenderResult (node_modules/@testing-library/react-native/src/render.tsx:70:10)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductContent.test.tsx:1003:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › Performance and Error Handling › should implement proper error recovery strategies

    Can't access .root on unmounted test renderer

      1038 |       } as any);
      1039 |
    > 1040 |       const { result, rerender } = renderHook(
           |                                              ^
      1041 |         () => useProductContent('content-1', 'user-1'),
      1042 |         { wrapper: createWrapper() }
      1043 |       );

      at Object.get [as root] (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14491:19)
      at root (node_modules/@testing-library/react-native/src/render.tsx:102:29)
      at buildRenderResult (node_modules/@testing-library/react-native/src/render.tsx:70:10)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductContent.test.tsx:1040:46)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Product Content Hooks - Phase 3.3.1 (RED Phase) › Performance and Error Handling › should maintain performance targets for content operations

    Can't access .root on unmounted test renderer

      1074 |       } as any);
      1075 |
    > 1076 |       const { result } = renderHook(
           |                                    ^
      1077 |         () => useProductContent('content-1', 'user-1'),
      1078 |         { wrapper: createWrapper() }
      1079 |       );

      at Object.get [as root] (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14491:19)
      at root (node_modules/@testing-library/react-native/src/render.tsx:102:29)
      at buildRenderResult (node_modules/@testing-library/react-native/src/render.tsx:70:10)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useProductContent.test.tsx:1076:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/hooks/inventory/__tests__/useInventoryItems.test.tsx
  ● useInventoryItems Hook Tests (RED Phase) › useInventoryItem › should fetch single inventory item with role-based filtering

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "123"

    Number of calls: 0

      116 |
      117 |       expect(result.current.data).toEqual(mockInventoryItem);
    > 118 |       expect(mockInventoryService.getInventoryItem).toHaveBeenCalledWith('123');
          |                                                     ^
      119 |     });
      120 |
      121 |     it('should handle null inventory ID gracefully', () => {

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useInventoryItems.test.tsx:118:53)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryItems Hook Tests (RED Phase) › useInventoryByProduct › should fetch inventory by product ID with user isolation

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "product-1"

    Number of calls: 0

      255 |
      256 |       expect(result.current.data).toEqual(mockInventory);
    > 257 |       expect(mockInventoryService.getInventoryByProduct).toHaveBeenCalledWith('product-1');
          |                                                          ^
      258 |     });
      259 |
      260 |     it('should handle null product ID', () => {

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useInventoryItems.test.tsx:257:58)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryItems Hook Tests (RED Phase) › useLowStockItems › should fetch low stock items with threshold filtering

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      349 |
      350 |       expect(result.current.data).toEqual(mockLowStockResult);
    > 351 |       expect(mockInventoryService.getLowStockItems).toHaveBeenCalled();
          |                                                     ^
      352 |     });
      353 |
      354 |     it('should auto-refresh low stock items every 5 minutes', () => {

      at Object.toHaveBeenCalled (src/hooks/inventory/__tests__/useInventoryItems.test.tsx:351:53)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/inventory/__tests__/useStockMovements.test.tsx
  ● useStockMovements Hook Tests (RED Phase) › useMovementHistory › should fetch movement history with pagination and filtering

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"inventoryItemId": "123", "limit": 10, "offset": 0}

    Number of calls: 0

      122 |
      123 |       expect(result.current.data).toEqual(mockMovementHistory);
    > 124 |       expect(mockStockMovementService.getMovementHistory).toHaveBeenCalledWith({
          |                                                           ^
      125 |         inventoryItemId: '123',
      126 |         limit: 10,
      127 |         offset: 0

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useStockMovements.test.tsx:124:59)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useStockMovements Hook Tests (RED Phase) › useMovementHistory › should handle pagination correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"inventoryItemId": "123", "limit": 1, "offset": 0}

    Number of calls: 0

      172 |
      173 |       expect(result.current.data?.success).toHaveLength(1);
    > 174 |       expect(mockStockMovementService.getMovementHistory).toHaveBeenCalledWith({
          |                                                           ^
      175 |         inventoryItemId: '123',
      176 |         limit: 1,
      177 |         offset: 0

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useStockMovements.test.tsx:174:59)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useStockMovements Hook Tests (RED Phase) › useStockMovements (with filtering) › should fetch movements with filter criteria

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"endDate": "2024-01-02T00:00:00Z", "movementType": "sale", "startDate": "2024-01-01T00:00:00Z"}

    Number of calls: 0

      303 |
      304 |       expect(result.current.data).toEqual(mockFilteredMovements);
    > 305 |       expect(mockStockMovementService.getMovementsByFilter).toHaveBeenCalledWith({
          |                                                             ^
      306 |         movementType: 'sale',
      307 |         startDate: '2024-01-01T00:00:00Z',
      308 |         endDate: '2024-01-02T00:00:00Z'

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useStockMovements.test.tsx:305:61)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useStockMovements Hook Tests (RED Phase) › useRecordMovement › should record stock movement with complete audit trail

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"inventoryItemId": "123", "movementType": "sale", "newStock": 95, "performedBy": "staff-1", "previousStock": 100, "quantityChange": -5, "reason": "Customer order", "referenceOrderId": "order-456"}

    Number of calls: 0

      456 |       });
      457 |
    > 458 |       expect(mockStockMovementService.recordMovement).toHaveBeenCalledWith(movementInput);
          |                                                       ^
      459 |       expect(result.current.data).toEqual(mockRecordedMovement);
      460 |     });
      461 |

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useStockMovements.test.tsx:458:55)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useStockMovements Hook Tests (RED Phase) › useBatchMovements › should fetch movements by batch ID for bulk operation tracking

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "batch-123"

    Number of calls: 0

      610 |
      611 |       expect(result.current.data).toEqual(mockBatchMovements);
    > 612 |       expect(mockStockMovementService.getBatchMovements).toHaveBeenCalledWith('batch-123');
          |                                                          ^
      613 |     });
      614 |
      615 |     it('should handle empty batch results', async () => {

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useStockMovements.test.tsx:612:58)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useStockMovements Hook Tests (RED Phase) › useBatchMovements › should verify movements are ordered by performed_at

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 0
    Received array:  []

      690 |
      691 |       const movements = result.current.data?.success || [];
    > 692 |       expect(movements).toHaveLength(2);
          |                         ^
      693 |       
      694 |       // Verify chronological order
      695 |       if (movements.length >= 2) {

      at Object.toHaveLength (src/hooks/inventory/__tests__/useStockMovements.test.tsx:692:25)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useStockMovements Hook Tests (RED Phase) › useMovementAnalytics › should provide movement analytics with aggregations

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"endDate": "2024-01-31T23:59:59Z", "groupBy": "day", "startDate": "2024-01-01T00:00:00Z"}

    Number of calls: 0

      749 |
      750 |       expect(result.current.data).toEqual(mockAnalytics);
    > 751 |       expect(mockStockMovementService.getMovementAnalytics).toHaveBeenCalledWith({
          |                                                             ^
      752 |         startDate: '2024-01-01T00:00:00Z',
      753 |         endDate: '2024-01-31T23:59:59Z',
      754 |         groupBy: 'day'

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useStockMovements.test.tsx:751:61)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useStockMovements Hook Tests (RED Phase) › useMovementAnalytics › should handle different grouping options

    expect(received).toEqual(expected) // deep equality

    - Expected  -  6
    + Received  + 13

      Object {
        "success": Array [
          Object {
    -       "averageQuantity": 12.5,
    -       "impact": "neutral",
    -       "movementCount": 2,
    -       "movementType": "adjustment",
    -       "totalQuantity": 25,
    +       "averageQuantity": 50,
    +       "impact": "positive",
    +       "movementCount": 3,
    +       "movementType": "restock",
    +       "totalQuantity": 150,
    +     },
    +     Object {
    +       "averageQuantity": 15,
    +       "impact": "negative",
    +       "movementCount": 5,
    +       "movementType": "sale",
    +       "totalQuantity": 75,
          },
        ],
    -   "totalProcessed": 1,
    +   "totalProcessed": 2,
      }

      781 |       });
      782 |
    > 783 |       expect(result.current.data).toEqual(mockWeeklyAnalytics);
          |                                   ^
      784 |     });
      785 |
      786 |     it('should validate analytics data structure', async () => {

      at Object.toEqual (src/hooks/inventory/__tests__/useStockMovements.test.tsx:783:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx (15.606 s)
  ● useNavigationPermissions Hook › single permission checks › should check permission for allowed screen

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      68 |       );
      69 |
    > 70 |       await waitFor(() => {
         |                    ^
      71 |         expect(result.current.allowed).toBe(true);
      72 |       });
      73 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:70:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useNavigationPermissions Hook › single permission checks › should check permission for denied screen

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      85 |       );
      86 |
    > 87 |       await waitFor(() => {
         |                    ^
      88 |         expect(result.current.allowed).toBe(false);
      89 |       });
      90 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:87:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useNavigationPermissions Hook › single permission checks › should handle permission check errors

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      101 |       );
      102 |
    > 103 |       await waitFor(() => {
          |                    ^
      104 |         expect(result.current.checked).toBe(true);
      105 |       });
      106 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:103:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useNavigationPermissions Hook › batch permission checks › should check permissions for multiple screens

    expect(received).toBe(expected) // Object.is equality

    Expected: 3
    Received: undefined

      128 |       );
      129 |
    > 130 |       await waitFor(() => {
          |                    ^
      131 |         expect(result.current.length).toBe(3);
      132 |       });
      133 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:130:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useNavigationPermissions Hook › batch permission checks › should handle mixed success/error in batch check

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: undefined

      169 |       );
      170 |
    > 171 |       await waitFor(() => {
          |                    ^
      172 |         expect(result.current.length).toBe(2);
      173 |       });
      174 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:171:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useNavigationPermissions Hook › caching behavior › should cache results when enabled

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      198 |       );
      199 |
    > 200 |       await waitFor(() => {
          |                    ^
      201 |         expect(result.current.allowed).toBe(true);
      202 |       });
      203 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:200:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useNavigationPermissions Hook › caching behavior › should not cache when caching is disabled

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      224 |       );
      225 |
    > 226 |       await waitFor(() => {
          |                    ^
      227 |         expect(result.current.allowed).toBe(true);
      228 |       });
      229 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:226:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useNavigationPermissions Hook › different user roles › should work with admin role

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      250 |       );
      251 |
    > 252 |       await waitFor(() => {
          |                    ^
      253 |         expect(result.current.allowed).toBe(true);
      254 |       });
      255 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:252:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useNavigationPermissions Hook › different user roles › should work with farmer role

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      273 |       );
      274 |
    > 275 |       await waitFor(() => {
          |                    ^
      276 |         expect(result.current.allowed).toBe(true);
      277 |       });
      278 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:275:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useNavigationPermissions Hook › loading and error states › should handle user role loading state

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      296 |       );
      297 |
    > 298 |       expect(result.current.checked).toBe(false);
          |                                      ^
      299 |       expect(result.current.allowed).toBe(false);
      300 |     });
      301 |

      at Object.toBe (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:298:38)

  ● useNavigationPermissions Hook › loading and error states › should handle missing user role

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      314 |       );
      315 |
    > 316 |       expect(result.current.checked).toBe(true);
          |                                      ^
      317 |       expect(result.current.allowed).toBe(false);
      318 |     });
      319 |   });

      at Object.toBe (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:316:38)

  ● useNavigationPermissions Hook › utility methods › should provide checkPermission method

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Object {
    -   "allowed": true,
    +   "allowed": false,
        "checked": true,
    -   "error": undefined,
    +   "error": "User role not available",
        "screen": "CartScreen",
      }

      333 |
      334 |       const permission = await result.current.checkPermission('CartScreen');
    > 335 |       expect(permission).toEqual({
          |                          ^
      336 |         screen: 'CartScreen',
      337 |         allowed: true,
      338 |         checked: true,

      at Object.toEqual (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:335:26)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useNavigationPermissions Hook › query key usage › should use user-specific query keys

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      351 |       );
      352 |
    > 353 |       await waitFor(() => {
          |                    ^
      354 |         expect(result.current.checked).toBe(true);
      355 |       });
      356 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useNavigationPermissions.test.tsx:353:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/hooks/inventory/__tests__/integration/performance.test.tsx (15.964 s)
  ● Performance Integration Tests (RED Phase) › Large Dataset Handling › should handle 1000+ inventory items efficiently

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      124 |       );
      125 |
    > 126 |       await waitFor(() => {
          |                    ^
      127 |         expect(result.current.isSuccess).toBe(true);
      128 |       });
      129 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/performance.test.tsx:126:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration Tests (RED Phase) › Large Dataset Handling › should handle 10,000+ stock movements with pagination

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      157 |       );
      158 |
    > 159 |       await waitFor(() => {
          |                    ^
      160 |         expect(result.current.isSuccess).toBe(true);
      161 |       });
      162 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/performance.test.tsx:159:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration Tests (RED Phase) › Large Dataset Handling › should handle large low stock queries with filtering

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      187 |       );
      188 |
    > 189 |       await waitFor(() => {
          |                    ^
      190 |         expect(result.current.isSuccess).toBe(true);
      191 |       });
      192 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/performance.test.tsx:189:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration Tests (RED Phase) › Bulk Operation Performance › should handle bulk updates of 100+ items efficiently

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      236 |       });
      237 |
    > 238 |       await waitFor(() => {
          |                    ^
      239 |         expect(result.current.isSuccess).toBe(true);
      240 |       });
      241 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/performance.test.tsx:238:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Performance Integration Tests (RED Phase) › Bulk Operation Performance › should handle partial failures in large batch operations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      283 |       });
      284 |
    > 285 |       await waitFor(() => {
          |                    ^
      286 |         expect(result.current.isSuccess).toBe(true);
      287 |       });
      288 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/performance.test.tsx:285:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Performance Integration Tests (RED Phase) › Cache Efficiency › should efficiently invalidate related caches after bulk operations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      331 |       );
      332 |
    > 333 |       await waitFor(() => {
          |                    ^
      334 |         expect(lowStockResult.current.isSuccess).toBe(true);
      335 |       });
      336 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/performance.test.tsx:333:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration Tests (RED Phase) › Cache Efficiency › should handle complex query key invalidation patterns efficiently

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      380 |       );
      381 |
    > 382 |       await waitFor(() => {
          |                    ^
      383 |         expect(lowStockResult.current.isSuccess).toBe(true);
      384 |         expect(movementsResult.current.isSuccess).toBe(true);
      385 |       });

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/performance.test.tsx:382:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration Tests (RED Phase) › Memory Usage Validation › should maintain reasonable memory usage with large datasets

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      418 |
      419 |       // Wait for all to load
    > 420 |       await waitFor(() => {
          |                    ^
      421 |         hooks.forEach(hook => {
      422 |           expect(hook.current.isSuccess).toBe(true);
      423 |         });

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/performance.test.tsx:420:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration Tests (RED Phase) › Memory Usage Validation › should handle memory cleanup after component unmount

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      449 |       );
      450 |
    > 451 |       await waitFor(() => {
          |                    ^
      452 |         expect(result.current.isSuccess).toBe(true);
      453 |       });
      454 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/performance.test.tsx:451:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration Tests (RED Phase) › Analytics Performance › should handle complex analytics queries efficiently

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      501 |       );
      502 |
    > 503 |       await waitFor(() => {
          |                    ^
      504 |         expect(result.current.isSuccess).toBe(true);
      505 |       });
      506 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/performance.test.tsx:503:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/tests/allServices.test.ts
  ● All Services Test Suite › AuthService › should login successfully with valid credentials

    Invalid session data received

      76 |       invalidData: session
      77 |     });
    > 78 |     throw new Error('Invalid session data received');
         |           ^
      79 |   }
      80 | };
      81 |

      at validateSupabaseSession (src/services/authService.ts:78:11)
      at Function.validateSupabaseSession (src/services/authService.ts:255:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › AuthService › should validate email format

    expect(received).rejects.toThrow(expected)

    Expected substring: "Please enter a valid email address"
    Received message:   "email must be a valid email address"

          433 |     if (!result.success) {
          434 |       const errorMessage = result.errors?.join('; ') || 'Validation failed';
        > 435 |       throw new Error(errorMessage);
              |             ^
          436 |     }
          437 |
          438 |     return result.data!;

      at Function.<anonymous> (src/utils/validationPipeline.ts:435:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (src/tests/allServices.test.ts:261:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● All Services Test Suite › CartService › should get cart for authenticated user

    TypeError: _supabase.supabase.from(...).select(...).in is not a function

      119 |           min_pre_order_quantity, max_pre_order_quantity, created_at, updated_at
      120 |         `)
    > 121 |         .in('id', productIds)
          |            ^
      122 |         .eq('is_available', true);
      123 |
      124 |       if (productsError) {

      at Object.<anonymous> (src/services/cartService.ts:121:12)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › CartService › should add item to cart successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      352 |       const result = await cartService.addItem(mockProduct, 2);
      353 |
    > 354 |       expect(result.success).toBe(true);
          |                              ^
      355 |       expect(supabase.rpc).toHaveBeenCalledWith('upsert_cart_item', {
      356 |         input_user_id: 'user-123',
      357 |         input_product_id: 'product-123',

      at Object.toBe (src/tests/allServices.test.ts:354:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › CartService › should handle insufficient stock

    expect(received).toContain(expected) // indexOf

    Expected substring: "Only 1 more items can be added"
    Received string:    "Failed to add item to cart. Please try again."

      391 |
      392 |       expect(result.success).toBe(false);
    > 393 |       expect(result.message).toContain('Only 1 more items can be added');
          |                              ^
      394 |     });
      395 |   });
      396 |

      at Object.toContain (src/tests/allServices.test.ts:393:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › OrderService › should validate required customer information

    expect(received).toBe(expected) // Object.is equality

    Expected: "Missing required customer information"
    Received: "Unexpected error: Customer information is required"

      461 |
      462 |       expect(result.success).toBe(false);
    > 463 |       expect(result.error).toBe('Missing required customer information');
          |                            ^
      464 |     });
      465 |
      466 |     it('should get order by ID', async () => {

      at Object.toBe (src/tests/allServices.test.ts:463:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › OrderService › should get order by ID

    expect(received).toBeTruthy()

    Received: null

      478 |       const order = await getOrder('order-123');
      479 |
    > 480 |       expect(order).toBeTruthy();
          |                     ^
      481 |       expect(order?.id).toBe('order-123');
      482 |     });
      483 |

      at Object.toBeTruthy (src/tests/allServices.test.ts:480:21)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › ProductService › should get all products

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      524 |       const result = await productService.getProducts();
      525 |
    > 526 |       expect(result.success).toBe(true);
          |                              ^
      527 |       expect(result.products).toHaveLength(1);
      528 |     });
      529 |

      at Object.toBe (src/tests/allServices.test.ts:526:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › ProductService › should get product by ID

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      542 |       const result = await productService.getProductById('product-123');
      543 |
    > 544 |       expect(result.success).toBe(true);
          |                              ^
      545 |       expect(result.product?.id).toBe('product-123');
      546 |     });
      547 |

      at Object.toBe (src/tests/allServices.test.ts:544:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › ProductService › should search products

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      564 |       const result = await productService.searchProducts('test');
      565 |
    > 566 |       expect(result.success).toBe(true);
          |                              ^
      567 |       expect(result.products).toHaveLength(1);
      568 |     });
      569 |

      at Object.toBe (src/tests/allServices.test.ts:566:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › RealtimeService › should subscribe to order updates

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      640 |       await RealtimeService.subscribeToOrderUpdates();
      641 |       
    > 642 |       expect(supabase.channel).toHaveBeenCalled();
          |                                ^
      643 |     });
      644 |
      645 |     it('should subscribe to product updates', async () => {

      at Object.toHaveBeenCalled (src/tests/allServices.test.ts:642:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › RealtimeService › should subscribe to product updates

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      646 |       await RealtimeService.subscribeToProductUpdates();
      647 |       
    > 648 |       expect(supabase.channel).toHaveBeenCalled();
          |                                ^
      649 |     });
      650 |
      651 |     it('should subscribe to cart updates', async () => {

      at Object.toHaveBeenCalled (src/tests/allServices.test.ts:648:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › RealtimeService › should subscribe to cart updates

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      656 |       await RealtimeService.subscribeToCartUpdates();
      657 |       
    > 658 |       expect(supabase.channel).toHaveBeenCalled();
          |                                ^
      659 |     });
      660 |
      661 |     it('should initialize all subscriptions', async () => {

      at Object.toHaveBeenCalled (src/tests/allServices.test.ts:658:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › RealtimeService › should initialize all subscriptions

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 3
    Received number of calls: 0

      666 |       await RealtimeService.initializeAllSubscriptions();
      667 |       
    > 668 |       expect(supabase.channel).toHaveBeenCalledTimes(3); // order, product, cart
          |                                ^
      669 |     });
      670 |
      671 |     it('should get subscription status', () => {

      at Object.toHaveBeenCalledTimes (src/tests/allServices.test.ts:668:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● All Services Test Suite › Service Integration Tests › should handle cross-service workflows

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      775 |       // Add item to cart
      776 |       const cartResult = await cartService.addItem(mockProduct, 2);
    > 777 |       expect(cartResult.success).toBe(true);
          |                                  ^
      778 |
      779 |       // Submit order
      780 |       (supabase.rpc as jest.Mock).mockResolvedValue({

      at Object.toBe (src/tests/allServices.test.ts:777:34)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/executive/__tests__/useBusinessInsights.test.tsx (16.801 s)
  ● useBusinessInsights Hook - Phase 4.3 › useBusinessInsights › should fetch business insights with role-based filtering

    expect(received).toEqual(expected) // deep equality

    Expected: {"insights": [{"affectedAreas": ["inventory", "marketing"], "confidenceScore": 0.89, "id": "insight-1", "impactLevel": "high", "insightTitle": "Inventory-Marketing Correlation", "insightType": "correlation"}, {"affectedAreas": ["sales"], "confidenceScore": 0.75, "id": "insight-2", "impactLevel": "medium", "insightTitle": "Sales Trend Analysis", "insightType": "trend"}], "metadata": {"averageConfidence": 0.82, "generatedAt": "2024-01-15T10:00:00Z", "totalInsights": 2}}
    Received: undefined

      152 |       });
      153 |
    > 154 |       expect(result.current.data).toEqual(mockInsights);
          |                                   ^
      155 |       expect(result.current.data?.insights).toHaveLength(2);
      156 |       expect(result.current.data?.metadata.averageConfidence).toBe(0.82);
      157 |     });

      at Object.toEqual (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:154:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useBusinessInsights Hook - Phase 4.3 › useBusinessInsights › should filter insights by impact level

    expect(received).toEqual(expected) // deep equality

    Expected: [{"confidenceScore": 0.91, "id": "high-1", "impactLevel": "high"}, {"confidenceScore": 0.95, "id": "critical-1", "impactLevel": "critical"}]
    Received: undefined

      181 |       );
      182 |
    > 183 |       await waitFor(() => {
          |                    ^
      184 |         expect(result.current.data).toEqual(mockHighImpactInsights);
      185 |       });
      186 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:183:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › useBusinessInsights › should support real-time insight updates

    expect(received).toEqual(expected) // deep equality

    Expected: {"insights": [{"confidenceScore": 0.8, "id": "1"}]}
    Received: undefined

      201 |       );
      202 |
    > 203 |       await waitFor(() => {
          |                    ^
      204 |         expect(result.current.data).toEqual(mockInitialInsights);
      205 |       });
      206 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:203:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › useBusinessInsights › should handle insight recommendation actions

    expect(received).toEqual(expected) // deep equality

    Expected: [{"actions": ["Increase inventory levels", "Optimize marketing spend"], "insightId": "rec-1", "priorityScore": 8.5}]
    Received: undefined

      236 |       );
      237 |
    > 238 |       await waitFor(() => {
          |                    ^
      239 |         expect(result.current.recommendations).toEqual(mockRecommendations.recommendations);
      240 |       });
      241 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:238:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › useInsightGeneration › should generate automated insights with confidence scoring

    expect(received).toEqual(expected) // deep equality

    - Expected  - 8
    + Received  + 2

      Object {
    -   "confidenceScore": 0.87,
    -   "id": "gen-1",
    -   "insightType": "correlation",
    -   "statisticalSignificance": 0.001,
    -   "supportingData": Object {
    -     "correlationCoefficient": 0.82,
    -     "sampleSize": 150,
    -   },
    +   "confidenceScore": 0.8,
    +   "id": "1",
      }

      278 |       });
      279 |
    > 280 |       expect(result.current.generatedInsight).toEqual(mockGeneratedInsight);
          |                                               ^
      281 |       expect(result.current.generatedInsight?.statisticalSignificance).toBeLessThan(0.05);
      282 |     });
      283 |

      at Object.toEqual (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:280:47)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useBusinessInsights Hook - Phase 4.3 › useInsightGeneration › should handle insight generation failures gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"confidenceScore": 0.85, "id": "1"}

      295 |
      296 |       await act(async () => {
    > 297 |         await expect(result.current.generateInsight()).rejects.toThrow('Insufficient data');
          |               ^
      298 |       });
      299 |
      300 |       expect(result.current.generationError).toBeDefined();

      at expect (node_modules/expect/build/index.js:113:15)
      at expect (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:297:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at callback (node_modules/@testing-library/react-native/src/act.ts:31:24)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1081:22)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:296:16)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › useAnomalyDetection › should detect anomalies in business metrics with alerting

    expect(received).toEqual(expected) // deep equality

    Expected: [{"actualValue": 1800, "deviationScore": 3.5, "expectedValue": 1000, "insightId": "anomaly-1", "shouldAlert": true}]
    Received: undefined

      357 |       );
      358 |
    > 359 |       await waitFor(() => {
          |                    ^
      360 |         expect(result.current.anomalies).toEqual(mockAnomalies.anomalies);
      361 |       });
      362 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:359:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › useAnomalyDetection › should support real-time anomaly monitoring

    expect(received).toEqual(expected) // deep equality

    Expected: []
    Received: undefined

      384 |       );
      385 |
    > 386 |       await waitFor(() => {
          |                    ^
      387 |         expect(result.current.anomalies).toEqual([]);
      388 |       });
      389 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:386:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › useAnomalyDetection › should provide anomaly trend analysis

    expect(received).toEqual(expected) // deep equality

    Expected: {"anomalies": [{"count": 2, "date": "2024-01-01"}, {"count": 3, "date": "2024-01-02"}, {"count": 1, "date": "2024-01-03"}], "averagePerDay": 2, "trend": "decreasing"}
    Received: undefined

      421 |       );
      422 |
    > 423 |       await waitFor(() => {
          |                    ^
      424 |         expect(result.current.anomalyTrends).toEqual(mockAnomalyTrends);
      425 |       });
      426 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:423:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › Insight Lifecycle Management › should update insight status with lifecycle tracking

    TypeError: result.current.updateInsightStatus is not a function

      445 |
      446 |       await act(async () => {
    > 447 |         await result.current.updateInsightStatus('insight-1', { is_active: false });
          |                              ^
      448 |       });
      449 |
      450 |       expect(result.current.lastUpdatedInsight).toEqual(mockUpdatedInsight);

      at updateInsightStatus (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:447:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at callback (node_modules/@testing-library/react-native/src/act.ts:31:24)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1081:22)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:446:16)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › Insight Lifecycle Management › should track insight view and interaction metrics

    TypeError: result.current.markInsightViewed is not a function

      458 |
      459 |       await act(async () => {
    > 460 |         result.current.markInsightViewed('insight-1');
          |                        ^
      461 |         result.current.markInsightActioned('insight-1', 'recommendation_followed');
      462 |       });
      463 |

      at markInsightViewed (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:460:24)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at callback (node_modules/@testing-library/react-native/src/act.ts:31:24)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1081:22)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:459:16)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › Query Key Factory Integration › should extend query keys with insight-specific parameters

    expect(received).toEqual(expected) // deep equality

    - Expected  - 7
    + Received  + 0

      Array [
        "executive",
        "businessInsights",
    -   Object {
    -     "dateRange": "2024-01-01,2024-01-31",
    -     "impactFilter": Array [
    -       "high",
    -     ],
    -     "insightType": "correlation",
    -   },
      ]

      495 |       );
      496 |
    > 497 |       await waitFor(() => {
          |                    ^
      498 |         expect(result.current.queryKey).toEqual([
      499 |           'executive',
      500 |           'businessInsights',

      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:497:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › Cache Invalidation Strategies › should invalidate related insights when metrics update

    TypeError: result.current.invalidateRelatedInsights is not a function

      517 |
      518 |       await act(async () => {
    > 519 |         await result.current.invalidateRelatedInsights(['inventory', 'marketing']);
          |                              ^
      520 |       });
      521 |
      522 |       expect(queryClient.invalidateQueries).toHaveBeenCalledWith({

      at invalidateRelatedInsights (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:519:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at callback (node_modules/@testing-library/react-native/src/act.ts:31:24)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1081:22)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:518:16)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › Cache Invalidation Strategies › should implement smart cache warming for predictive insights

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      532 |       );
      533 |
    > 534 |       await waitFor(() => {
          |                    ^
      535 |         expect(result.current.isPrefetching).toBe(false);
      536 |       });
      537 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:534:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › Error Recovery and Resilience › should implement circuit breaker for repeated failures

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      556 |       );
      557 |
    > 558 |       await waitFor(() => {
          |                    ^
      559 |         expect(result.current.isError).toBe(true);
      560 |       });
      561 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:558:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useBusinessInsights Hook - Phase 4.3 › Error Recovery and Resilience › should provide fallback insights during outages

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      574 |       );
      575 |
    > 576 |       await waitFor(() => {
          |                    ^
      577 |         expect(result.current.isUsingFallback).toBe(true);
      578 |       });
      579 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useBusinessInsights.test.tsx:576:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/hooks/role-based/__tests__/useRoleNavigation.test.tsx (6.485 s)
  ● useRoleNavigation Hook › generateMenuItems › should fetch menu items for current role

    expect(received).toEqual(expected) // deep equality

    - Expected  - 14
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "HomeScreen",
    -     "icon": "home",
    -     "name": "Home",
    -     "permissions": Array [],
    -   },
    -   Object {
    -     "component": "ProductsScreen",
    -     "icon": "shopping-bag",
    -     "name": "Products",
    -     "permissions": Array [],
    -   },
    - ]
    + Array []

      82 |       });
      83 |
    > 84 |       await waitFor(() => {
         |                    ^
      85 |         expect(result.current.menuItems).toEqual(mockMenuItems);
      86 |       });
      87 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:84:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleNavigation Hook › generateMenuItems › should handle menu generation errors

    expect(received).toBeTruthy()

    Received: null

      100 |       });
      101 |
    > 102 |       expect(result.current.menuError).toBeTruthy();
          |                                        ^
      103 |       expect(result.current.menuItems).toEqual([]);
      104 |     });
      105 |

      at Object.toBeTruthy (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:102:40)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useRoleNavigation Hook › generateMenuItems › should enable caching when specified

    expect(received).toEqual(expected) // deep equality

    - Expected  - 8
    + Received  + 1

    - Array [
    -   Object {
    -     "component": "HomeScreen",
    -     "icon": "home",
    -     "name": "Home",
    -     "permissions": Array [],
    -   },
    - ]
    + Array []

      115 |       });
      116 |
    > 117 |       await waitFor(() => {
          |                    ^
      118 |         expect(result.current.menuItems).toEqual(mockMenuItems);
      119 |       });
      120 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:117:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleNavigation Hook › navigation permissions › should check navigation permissions

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      136 |
      137 |       const canNavigate = await result.current.checkPermission('ProductsScreen');
    > 138 |       expect(canNavigate).toBe(true);
          |                           ^
      139 |       expect(mockRoleNavigationService.canNavigateTo).toHaveBeenCalledWith('customer', 'ProductsScreen');
      140 |     });
      141 |

      at Object.toBe (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:138:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useRoleNavigation Hook › navigation permissions › should get default screen for role

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "customer"

    Number of calls: 0

      153 |       const defaultScreen = await result.current.getDefaultScreen();
      154 |       expect(defaultScreen).toBe('HomeScreen');
    > 155 |       expect(mockRoleNavigationService.getDefaultScreen).toHaveBeenCalledWith('customer');
          |                                                          ^
      156 |     });
      157 |   });
      158 |

      at Object.toHaveBeenCalledWith (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:155:58)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useRoleNavigation Hook › deep link validation › should validate deep links

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 2

      Object {
    -   "isValid": true,
    -   "params": Object {
    -     "productId": "123",
    -   },
    -   "targetScreen": "ProductsScreen",
    +   "error": "User role not available",
    +   "isValid": false,
      }

      176 |
      177 |       const validation = await result.current.validateDeepLink('myfarmstand://products/123');
    > 178 |       expect(validation).toEqual(mockResult);
          |                          ^
      179 |       expect(mockRoleNavigationService.validateDeepLink).toHaveBeenCalledWith(
      180 |         'myfarmstand://products/123',
      181 |         'customer'

      at Object.toEqual (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:178:26)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useRoleNavigation Hook › navigation state management › should track navigation events

    expect(received).toBeDefined()

    Received: undefined

      190 |       });
      191 |
    > 192 |       await waitFor(() => {
          |                    ^
      193 |         expect(result.current.trackNavigation).toBeDefined();
      194 |       });
      195 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:192:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleNavigation Hook › navigation state management › should persist navigation state

    TypeError: result.current.navigateToScreen is not a function

      214 |
      215 |       // Simulate current state
    > 216 |       result.current.navigateToScreen('ProductsScreen');
          |                      ^
      217 |       
      218 |       await result.current.persistCurrentState();
      219 |

      at Object.navigateToScreen (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:216:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useRoleNavigation Hook › different user roles › should work with farmer role

    expect(received).toEqual(expected) // deep equality

    - Expected  - 8
    + Received  + 1

    - Array [
    -   Object {
    -     "component": "FarmerDashboard",
    -     "icon": "dashboard",
    -     "name": "Dashboard",
    -     "permissions": Array [],
    -   },
    - ]
    + Array []

      247 |       });
      248 |
    > 249 |       await waitFor(() => {
          |                    ^
      250 |         expect(result.current.menuItems).toEqual(mockFarmerMenuItems);
      251 |       });
      252 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:249:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleNavigation Hook › different user roles › should work with admin role

    expect(received).toEqual(expected) // deep equality

    - Expected  - 14
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "AdminDashboard",
    -     "icon": "admin-panel",
    -     "name": "Admin Dashboard",
    -     "permissions": Array [],
    -   },
    -   Object {
    -     "component": "UserManagementScreen",
    -     "icon": "people",
    -     "name": "Users",
    -     "permissions": Array [],
    -   },
    - ]
    + Array []

      274 |       });
      275 |
    > 276 |       await waitFor(() => {
          |                    ^
      277 |         expect(result.current.menuItems).toEqual(mockAdminMenuItems);
      278 |       });
      279 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:276:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleNavigation Hook › query key usage › should use centralized query key factory

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      331 |       // Verify that the hook is using navigationKeys from queryKeyFactory
      332 |       // This is implicit through the fact that the query works correctly
    > 333 |       expect(mockRoleNavigationService.generateMenuItems).toHaveBeenCalled();
          |                                                           ^
      334 |     });
      335 |   });
      336 | });

      at Object.toHaveBeenCalled (src/hooks/role-based/__tests__/useRoleNavigation.test.tsx:333:59)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/executive/__tests__/useStrategicReporting.test.tsx
  ● useStrategicReporting Hook - Phase 4.3 › useStrategicReporting › should generate comprehensive strategic reports with all data sources

    expect(received).toEqual(expected) // deep equality

    Expected: {"generatedAt": "2024-01-15T10:00:00Z", "performanceMetrics": {"generationTime": 1200}, "reportData": {"crossRoleAnalysis": {"correlationMatrix": {"inventory-marketing": 0.75, "marketing-sales": 0.82}}, "performanceTrends": {"keyMetrics": {"revenue_growth": 15.2}, "overallPerformance": "above_target"}, "predictiveInsights": {"demandForecast": {"confidence": 0.87, "nextMonth": 1250}}}, "reportMetadata": {"dataSourcesUsed": ["business_metrics", "predictive_forecasts"], "generatedAt": "2024-01-15T10:00:00Z", "reportId": "report-1", "reportType": "executive_summary"}}
    Received: undefined

      153 |       });
      154 |
    > 155 |       expect(result.current.reportData).toEqual(mockReport);
          |                                         ^
      156 |       expect(result.current.reportData?.reportMetadata.dataSourcesUsed).toContain('business_metrics');
      157 |       expect(result.current.reportData?.performanceMetrics.generationTime).toBeLessThan(5000);
      158 |     });

      at Object.toEqual (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:155:41)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useStrategicReporting Hook - Phase 4.3 › useStrategicReporting › should support scheduled report automation

    TypeError: result.current.scheduleReport is not a function

      183 |
      184 |       await act(async () => {
    > 185 |         await result.current.scheduleReport({
          |                              ^
      186 |           frequency: 'weekly',
      187 |           delivery_method: 'email',
      188 |           recipients: ['executive@example.com']

      at scheduleReport (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:185:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at callback (node_modules/@testing-library/react-native/src/act.ts:31:24)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1081:22)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at Object.<anonymous> (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:184:16)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useStrategicReporting Hook - Phase 4.3 › useStrategicReporting › should handle report export in multiple formats

    TypeError: result.current.exportReport is not a function

      220 |
      221 |       await act(async () => {
    > 222 |         await result.current.exportReport({
          |                              ^
      223 |           format: 'pdf',
      224 |           include_charts: true,
      225 |           optimize_for_size: true

      at exportReport (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:222:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at callback (node_modules/@testing-library/react-native/src/act.ts:31:24)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1081:22)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at Object.<anonymous> (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:221:16)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useStrategicReporting Hook - Phase 4.3 › useStrategicReporting › should apply role-based filtering to report data

    expect(received).toEqual(expected) // deep equality

    Expected: {"accessLevel": "inventory_staff", "availableMetrics": ["inventory_only", "inventory_turnover"], "formattedData": {"inventory_metrics": []}, "reportData": {"inventory_only": true}}
    Received: undefined

      258 |       );
      259 |
    > 260 |       await waitFor(() => {
          |                    ^
      261 |         expect(result.current.filteredData).toEqual(mockFilteredReport);
      262 |       });
      263 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:260:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useStrategicReporting Hook - Phase 4.3 › useReportGeneration › should generate dynamic reports with real-time data aggregation

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

    @@ -3,12 +3,12 @@
          "aggregationMethod": "time_series",
          "samplingRate": 0.95,
          "totalDataPoints": 5000,
        },
        "generationMetrics": Object {
    -     "endTime": "2024-01-15T10:00:00Z",
    +     "endTime": "2025-08-24T20:13:23.569Z",
          "processingTime": 60000,
    -     "startTime": "2024-01-15T09:59:00Z",
    +     "startTime": "2025-08-24T20:12:23.569Z",
        },
        "reportId": "gen-1",
        "reportType": "operational_efficiency",
      }

      313 |       });
      314 |
    > 315 |       expect(result.current.generatedReport).toEqual(mockGeneratedReport);
          |                                              ^
      316 |       expect(result.current.generatedReport?.dataAggregation.totalDataPoints).toBeGreaterThan(1000);
      317 |     });
      318 |

      at Object.toEqual (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:315:46)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useStrategicReporting Hook - Phase 4.3 › useReportScheduling › should schedule automated report delivery

    TypeError: allSchedules.filter is not a function

      124 |   // Calculate schedule summary
      125 |   const scheduleSummary = allSchedules ? {
    > 126 |     daily: allSchedules.filter((s: Schedule) => s.frequency === 'daily').length,
          |                         ^
      127 |     weekly: allSchedules.filter((s: Schedule) => s.frequency === 'weekly').length,
      128 |     monthly: allSchedules.filter((s: Schedule) => s.frequency === 'monthly').length
      129 |   } : undefined;

      at filter (src/hooks/executive/useReportScheduling.ts:126:25)
      at useReportScheduling (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:375:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:374:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useStrategicReporting Hook - Phase 4.3 › useReportScheduling › should manage multiple report schedules

    TypeError: allSchedules.filter is not a function

      124 |   // Calculate schedule summary
      125 |   const scheduleSummary = allSchedules ? {
    > 126 |     daily: allSchedules.filter((s: Schedule) => s.frequency === 'daily').length,
          |                         ^
      127 |     weekly: allSchedules.filter((s: Schedule) => s.frequency === 'weekly').length,
      128 |     monthly: allSchedules.filter((s: Schedule) => s.frequency === 'monthly').length
      129 |   } : undefined;

      at filter (src/hooks/executive/useReportScheduling.ts:126:25)
      at useReportScheduling (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:401:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:400:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useStrategicReporting Hook - Phase 4.3 › useReportScheduling › should handle schedule modifications with versioning

    TypeError: allSchedules.filter is not a function

      124 |   // Calculate schedule summary
      125 |   const scheduleSummary = allSchedules ? {
    > 126 |     daily: allSchedules.filter((s: Schedule) => s.frequency === 'daily').length,
          |                         ^
      127 |     weekly: allSchedules.filter((s: Schedule) => s.frequency === 'weekly').length,
      128 |     monthly: allSchedules.filter((s: Schedule) => s.frequency === 'monthly').length
      129 |   } : undefined;

      at filter (src/hooks/executive/useReportScheduling.ts:126:25)
      at useReportScheduling (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:429:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:428:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useStrategicReporting Hook - Phase 4.3 › Report Optimization and Performance › should optimize large report generation with compression

    TypeError: result.current.exportReport is not a function

      463 |
      464 |       await act(async () => {
    > 465 |         await result.current.exportReport({
          |                              ^
      466 |           format: 'pdf',
      467 |           compression: 'high',
      468 |           optimize_for_size: true

      at exportReport (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:465:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at callback (node_modules/@testing-library/react-native/src/act.ts:31:24)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1081:22)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at Object.<anonymous> (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:464:16)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useStrategicReporting Hook - Phase 4.3 › Report Optimization and Performance › should implement progressive report loading for better UX

    expect(received).toBe(expected) // Object.is equality

    Expected: "summary"
    Received: undefined

      497 |       );
      498 |
    > 499 |       await waitFor(() => {
          |                    ^
      500 |         expect(result.current.loadingPhase).toBe('summary');
      501 |       });
      502 |

      at Object.<anonymous> (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:499:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useStrategicReporting Hook - Phase 4.3 › Query Key Factory Integration › should use centralized query key factory for reports

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 0

      Array [
        "executive",
        "strategicReporting",
    -   "report-1",
      ]

      530 |       );
      531 |
    > 532 |       await waitFor(() => {
          |                    ^
      533 |         expect(result.current.queryKey).toEqual(['executive', 'strategicReporting', 'report-1']);
      534 |       });
      535 |     });

      at Object.<anonymous> (src/hooks/executive/__tests__/useStrategicReporting.test.tsx:532:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/hooks/role-based/__tests__/useRoleMenu.test.tsx (18.16 s)
  ● useRoleMenu Hook › basic menu functionality › should load menu items for current role

    expect(received).toEqual(expected) // deep equality

    - Expected  - 29
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "HomeScreen",
    -     "icon": "home",
    -     "name": "Home",
    -     "permissions": Array [
    -       "view:home",
    -     ],
    -     "priority": 1,
    -   },
    -   Object {
    -     "component": "ProductsScreen",
    -     "icon": "shopping-bag",
    -     "name": "Products",
    -     "permissions": Array [
    -       "view:products",
    -     ],
    -     "priority": 2,
    -   },
    -   Object {
    -     "component": "CartScreen",
    -     "icon": "shopping-cart",
    -     "name": "Cart",
    -     "permissions": Array [
    -       "manage:cart",
    -     ],
    -     "priority": 3,
    -   },
    - ]
    + Array []

      107 |       );
      108 |
    > 109 |       await waitFor(() => {
          |                    ^
      110 |         expect(result.current.menuItems).toEqual(mockMenuItems);
      111 |       });
      112 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:109:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › basic menu functionality › should handle menu loading states

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      124 |       );
      125 |
    > 126 |       expect(result.current.isLoading).toBe(true);
          |                                        ^
      127 |       expect(result.current.menuItems).toEqual([]);
      128 |     });
      129 |

      at Object.toBe (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:126:40)

  ● useRoleMenu Hook › basic menu functionality › should handle menu loading errors

    expect(received).toBeTruthy()

    Received: undefined

      140 |       });
      141 |
    > 142 |       expect(result.current.error).toBeTruthy();
          |                                    ^
      143 |       expect(result.current.menuItems).toEqual([]);
      144 |     });
      145 |   });

      at Object.toBeTruthy (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:142:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useRoleMenu Hook › permission filtering › should filter menu items by permissions when enabled

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 0
    Received array:  []

      159 |       );
      160 |
    > 161 |       await waitFor(() => {
          |                    ^
      162 |         expect(result.current.menuItems).toHaveLength(2);
      163 |       });
      164 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:161:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › permission filtering › should not filter when filterByPermissions is false

    expect(received).toHaveLength(expected)

    Expected length: 3
    Received length: 0
    Received array:  []

      182 |       );
      183 |
    > 184 |       await waitFor(() => {
          |                    ^
      185 |         expect(result.current.menuItems).toHaveLength(3);
      186 |       });
      187 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:184:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › menu customization › should save menu customization

    expect(received).toEqual(expected) // deep equality

    - Expected  - 29
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "HomeScreen",
    -     "icon": "home",
    -     "name": "Home",
    -     "permissions": Array [
    -       "view:home",
    -     ],
    -     "priority": 1,
    -   },
    -   Object {
    -     "component": "ProductsScreen",
    -     "icon": "shopping-bag",
    -     "name": "Products",
    -     "permissions": Array [
    -       "view:products",
    -     ],
    -     "priority": 2,
    -   },
    -   Object {
    -     "component": "CartScreen",
    -     "icon": "shopping-cart",
    -     "name": "Cart",
    -     "permissions": Array [
    -       "manage:cart",
    -     ],
    -     "priority": 3,
    -   },
    - ]
    + Array []

      197 |       );
      198 |
    > 199 |       await waitFor(() => {
          |                    ^
      200 |         expect(result.current.menuItems).toEqual(mockMenuItems);
      201 |       });
      202 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:199:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › menu customization › should handle customization save errors

    expect(received).toEqual(expected) // deep equality

    - Expected  - 29
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "HomeScreen",
    -     "icon": "home",
    -     "name": "Home",
    -     "permissions": Array [
    -       "view:home",
    -     ],
    -     "priority": 1,
    -   },
    -   Object {
    -     "component": "ProductsScreen",
    -     "icon": "shopping-bag",
    -     "name": "Products",
    -     "permissions": Array [
    -       "view:products",
    -     ],
    -     "priority": 2,
    -   },
    -   Object {
    -     "component": "CartScreen",
    -     "icon": "shopping-cart",
    -     "name": "Cart",
    -     "permissions": Array [
    -       "manage:cart",
    -     ],
    -     "priority": 3,
    -   },
    - ]
    + Array []

      220 |       );
      221 |
    > 222 |       await waitFor(() => {
          |                    ^
      223 |         expect(result.current.menuItems).toEqual(mockMenuItems);
      224 |       });
      225 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:222:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › menu refresh functionality › should refresh menu items

    expect(received).toEqual(expected) // deep equality

    - Expected  - 29
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "HomeScreen",
    -     "icon": "home",
    -     "name": "Home",
    -     "permissions": Array [
    -       "view:home",
    -     ],
    -     "priority": 1,
    -   },
    -   Object {
    -     "component": "ProductsScreen",
    -     "icon": "shopping-bag",
    -     "name": "Products",
    -     "permissions": Array [
    -       "view:products",
    -     ],
    -     "priority": 2,
    -   },
    -   Object {
    -     "component": "CartScreen",
    -     "icon": "shopping-cart",
    -     "name": "Cart",
    -     "permissions": Array [
    -       "manage:cart",
    -     ],
    -     "priority": 3,
    -   },
    - ]
    + Array []

      246 |       );
      247 |
    > 248 |       await waitFor(() => {
          |                    ^
      249 |         expect(result.current.menuItems).toEqual(mockMenuItems);
      250 |       });
      251 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:248:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › menu refresh functionality › should increment refresh trigger on refresh

    expect(received).toEqual(expected) // deep equality

    - Expected  - 29
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "HomeScreen",
    -     "icon": "home",
    -     "name": "Home",
    -     "permissions": Array [
    -       "view:home",
    -     ],
    -     "priority": 1,
    -   },
    -   Object {
    -     "component": "ProductsScreen",
    -     "icon": "shopping-bag",
    -     "name": "Products",
    -     "permissions": Array [
    -       "view:products",
    -     ],
    -     "priority": 2,
    -   },
    -   Object {
    -     "component": "CartScreen",
    -     "icon": "shopping-cart",
    -     "name": "Cart",
    -     "permissions": Array [
    -       "manage:cart",
    -     ],
    -     "priority": 3,
    -   },
    - ]
    + Array []

      268 |       );
      269 |
    > 270 |       await waitFor(() => {
          |                    ^
      271 |         expect(result.current.menuItems).toEqual(mockMenuItems);
      272 |       });
      273 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:270:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › different user roles › should work with farmer role

    expect(received).toEqual(expected) // deep equality

    - Expected  - 14
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "FarmerDashboard",
    -     "icon": "dashboard",
    -     "name": "Dashboard",
    -     "permissions": Array [],
    -   },
    -   Object {
    -     "component": "ProductManagementScreen",
    -     "icon": "inventory",
    -     "name": "Products",
    -     "permissions": Array [],
    -   },
    - ]
    + Array []

      308 |       );
      309 |
    > 310 |       await waitFor(() => {
          |                    ^
      311 |         expect(result.current.menuItems).toEqual(farmerMenuItems);
      312 |       });
      313 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:310:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › different user roles › should work with admin role

    expect(received).toEqual(expected) // deep equality

    - Expected  - 20
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "AdminDashboard",
    -     "icon": "admin-panel",
    -     "name": "Admin Dashboard",
    -     "permissions": Array [],
    -   },
    -   Object {
    -     "component": "UserManagementScreen",
    -     "icon": "people",
    -     "name": "Users",
    -     "permissions": Array [],
    -   },
    -   Object {
    -     "component": "SystemSettingsScreen",
    -     "icon": "settings",
    -     "name": "Settings",
    -     "permissions": Array [],
    -   },
    - ]
    + Array []

      342 |       );
      343 |
    > 344 |       await waitFor(() => {
          |                    ^
      345 |         expect(result.current.menuItems).toEqual(adminMenuItems);
      346 |       });
      347 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:344:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › caching behavior › should use caching when specified

    expect(received).toEqual(expected) // deep equality

    - Expected  - 29
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "HomeScreen",
    -     "icon": "home",
    -     "name": "Home",
    -     "permissions": Array [
    -       "view:home",
    -     ],
    -     "priority": 1,
    -   },
    -   Object {
    -     "component": "ProductsScreen",
    -     "icon": "shopping-bag",
    -     "name": "Products",
    -     "permissions": Array [
    -       "view:products",
    -     ],
    -     "priority": 2,
    -   },
    -   Object {
    -     "component": "CartScreen",
    -     "icon": "shopping-cart",
    -     "name": "Cart",
    -     "permissions": Array [
    -       "manage:cart",
    -     ],
    -     "priority": 3,
    -   },
    - ]
    + Array []

      357 |       );
      358 |
    > 359 |       await waitFor(() => {
          |                    ^
      360 |         expect(result.current.menuItems).toEqual(mockMenuItems);
      361 |       });
      362 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:359:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › caching behavior › should disable caching when timeout is 0

    expect(received).toEqual(expected) // deep equality

    - Expected  - 29
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "HomeScreen",
    -     "icon": "home",
    -     "name": "Home",
    -     "permissions": Array [
    -       "view:home",
    -     ],
    -     "priority": 1,
    -   },
    -   Object {
    -     "component": "ProductsScreen",
    -     "icon": "shopping-bag",
    -     "name": "Products",
    -     "permissions": Array [
    -       "view:products",
    -     ],
    -     "priority": 2,
    -   },
    -   Object {
    -     "component": "CartScreen",
    -     "icon": "shopping-cart",
    -     "name": "Cart",
    -     "permissions": Array [
    -       "manage:cart",
    -     ],
    -     "priority": 3,
    -   },
    - ]
    + Array []

      370 |       );
      371 |
    > 372 |       await waitFor(() => {
          |                    ^
      373 |         expect(result.current.menuItems).toEqual(mockMenuItems);
      374 |       });
      375 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:372:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● useRoleMenu Hook › query key usage › should use centralized query key factory

    expect(received).toEqual(expected) // deep equality

    - Expected  - 29
    + Received  +  1

    - Array [
    -   Object {
    -     "component": "HomeScreen",
    -     "icon": "home",
    -     "name": "Home",
    -     "permissions": Array [
    -       "view:home",
    -     ],
    -     "priority": 1,
    -   },
    -   Object {
    -     "component": "ProductsScreen",
    -     "icon": "shopping-bag",
    -     "name": "Products",
    -     "permissions": Array [
    -       "view:products",
    -     ],
    -     "priority": 2,
    -   },
    -   Object {
    -     "component": "CartScreen",
    -     "icon": "shopping-cart",
    -     "name": "Cart",
    -     "permissions": Array [
    -       "manage:cart",
    -     ],
    -     "priority": 3,
    -   },
    - ]
    + Array []

      425 |       );
      426 |
    > 427 |       await waitFor(() => {
          |                    ^
      428 |         expect(result.current.menuItems).toEqual(mockMenuItems);
      429 |       });
      430 |

      at Object.<anonymous> (src/hooks/role-based/__tests__/useRoleMenu.test.tsx:427:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/hooks/inventory/__tests__/useInventoryOperations.test.tsx (8.025 s)
  ● useInventoryOperations Hook Tests (RED Phase) › useUpdateStock › should update stock with optimistic updates

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "123", {"currentStock": 75, "performedBy": "user-123", "reason": "Manual adjustment"}

    Number of calls: 0

      130 |       });
      131 |
    > 132 |       expect(mockInventoryService.updateStock).toHaveBeenCalledWith('123', stockUpdate);
          |                                                ^
      133 |     });
      134 |
      135 |     it('should handle stock update with atomic operation and audit trail', async () => {

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:132:48)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › useUpdateStock › should rollback optimistic updates on error

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      208 |       });
      209 |
    > 210 |       await waitFor(() => {
          |                    ^
      211 |         expect(result.current.isError).toBe(true);
      212 |       });
      213 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:210:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › useUpdateVisibility › should update product visibility with role-based access control

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "123", {"isActive": true, "isVisibleToCustomers": false}

    Number of calls: 0

      291 |       });
      292 |
    > 293 |       expect(mockInventoryService.toggleProductVisibility).toHaveBeenCalledWith('123', visibilityUpdate);
          |                                                            ^
      294 |       expect(result.current.data).toEqual(mockUpdatedItem);
      295 |     });
      296 |

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:293:60)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › useUpdateVisibility › should handle visibility update optimistic updates

    expect(received).toEqual(expected) // deep equality

    - Expected  - 3
    + Received  + 3

    @@ -1,13 +1,13 @@
      Object {
        "availableStock": 90,
        "createdAt": "2024-01-01T00:00:00Z",
        "currentStock": 100,
        "id": "123",
    -   "isActive": false,
    -   "isVisibleToCustomers": false,
    -   "lastStockUpdate": "2024-01-01T00:00:00Z",
    +   "isActive": true,
    +   "isVisibleToCustomers": true,
    +   "lastStockUpdate": "2024-01-01T12:00:00Z",
        "maximumThreshold": 500,
        "minimumThreshold": 15,
        "productId": "product-1",
        "reservedStock": 10,
        "updatedAt": "2024-01-01T12:00:00Z",

      329 |       });
      330 |
    > 331 |       expect(result.current.data).toEqual(mockUpdatedItem);
          |                                   ^
      332 |     });
      333 |
      334 |     it('should handle visibility update errors gracefully', async () => {

      at Object.toEqual (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:331:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › useUpdateVisibility › should handle visibility update errors gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      348 |       });
      349 |
    > 350 |       await waitFor(() => {
          |                    ^
      351 |         expect(result.current.isError).toBe(true);
      352 |       });
      353 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:350:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › useBatchUpdateStock › should handle batch stock updates with resilient processing

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: [{"currentStock": 150, "inventoryItemId": "123", "reason": "Bulk restock"}]

    Number of calls: 0

      402 |       });
      403 |
    > 404 |       expect(mockInventoryService.batchUpdateStock).toHaveBeenCalledWith(batchUpdates);
          |                                                     ^
      405 |       expect(result.current.data).toEqual(mockBatchResult);
      406 |     });
      407 |

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:404:53)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › useBatchUpdateStock › should handle partial failures in batch processing

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: undefined

      450 |       });
      451 |
    > 452 |       expect(result.current.data?.success).toHaveLength(1);
          |                                            ^
      453 |       expect(result.current.data?.errors).toHaveLength(1);
      454 |       expect(result.current.data?.totalProcessed).toBe(1);
      455 |     });

      at Object.toHaveLength (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:452:44)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › useBatchUpdateStock › should handle complete batch failure gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      470 |       });
      471 |
    > 472 |       await waitFor(() => {
          |                    ^
      473 |         expect(result.current.isError).toBe(true);
      474 |       });
      475 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:472:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › useBatchUpdateStock › should provide progress tracking for batch operations

    expect(received).toHaveProperty(path)

    Expected path: "isPending"
    Received path: []

    Received value: {"data": {"availableStock": 90, "createdAt": "2024-01-01T00:00:00Z", "currentStock": 100, "id": "123", "isActive": true, "isVisibleToCustomers": true, "lastStockUpdate": "2024-01-01T12:00:00Z", "maximumThreshold": 500, "minimumThreshold": 15, "productId": "product-1", "reservedStock": 10, "updatedAt": "2024-01-01T12:00:00Z"}, "error": null, "isError": false, "isIdle": false, "isLoading": false, "isSuccess": true, "mutate": [Function mockConstructor], "mutateAsync": [Function mockConstructor]}

      484 |
      485 |       // Should provide loading states for progress tracking
    > 486 |       expect(result.current).toHaveProperty('isPending');
          |                              ^
      487 |       expect(result.current).toHaveProperty('isSuccess');
      488 |       expect(result.current).toHaveProperty('isError');
      489 |     });

      at Object.toHaveProperty (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:486:30)

  ● useInventoryOperations Hook Tests (RED Phase) › useCreateInventoryItem › should create inventory item with input validation

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"currentStock": 100, "isActive": true, "isVisibleToCustomers": true, "maximumThreshold": 500, "minimumThreshold": 10, "productId": "new-product", "reservedStock": 0}

    Number of calls: 0

      532 |       });
      533 |
    > 534 |       expect(mockInventoryService.createInventoryItem).toHaveBeenCalledWith(createInput);
          |                                                        ^
      535 |       expect(result.current.data).toEqual(mockCreatedItem);
      536 |     });
      537 |

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:534:56)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › useCreateInventoryItem › should handle creation errors with validation failures

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      555 |       });
      556 |
    > 557 |       await waitFor(() => {
          |                    ^
      558 |         expect(result.current.isError).toBe(true);
      559 |       });
      560 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:557:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › useCreateInventoryItem › should update cache after successful creation

    expect(received).toEqual(expected) // deep equality

    - Expected  - 8
    + Received  + 8

      Object {
    -   "availableStock": 45,
    -   "createdAt": "2024-01-01T12:00:00Z",
    -   "currentStock": 50,
    -   "id": "789",
    +   "availableStock": 90,
    +   "createdAt": "2024-01-01T00:00:00Z",
    +   "currentStock": 100,
    +   "id": "123",
        "isActive": true,
        "isVisibleToCustomers": true,
        "lastStockUpdate": "2024-01-01T12:00:00Z",
    -   "maximumThreshold": 200,
    -   "minimumThreshold": 10,
    -   "productId": "new-product",
    -   "reservedStock": 5,
    +   "maximumThreshold": 500,
    +   "minimumThreshold": 15,
    +   "productId": "product-1",
    +   "reservedStock": 10,
        "updatedAt": "2024-01-01T12:00:00Z",
      }

      599 |       });
      600 |
    > 601 |       expect(result.current.data).toEqual(mockCreatedItem);
          |                                   ^
      602 |     });
      603 |   });
      604 |

      at Object.toEqual (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:601:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › Error Handling and Recovery › should provide comprehensive error states

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      620 |       });
      621 |
    > 622 |       await waitFor(() => {
          |                    ^
      623 |         expect(result.current.isError).toBe(true);
      624 |       });
      625 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:622:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useInventoryOperations Hook Tests (RED Phase) › Error Handling and Recovery › should allow retry after errors

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      660 |       });
      661 |
    > 662 |       await waitFor(() => {
          |                    ^
      663 |         expect(result.current.isError).toBe(true);
      664 |       });
      665 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/useInventoryOperations.test.tsx:662:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx
  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useMarketingCampaigns - Campaign Listing with Role-based Filtering › should fetch campaigns with role-based access control

    TypeError: Cannot read properties of undefined (reading 'byStatusPaginated')

      88 |
      89 |   return useQuery({
    > 90 |     queryKey: campaignKeys.byStatusPaginated(status, pagination),
         |                            ^
      91 |     queryFn: async (): Promise<PaginatedResponse<MarketingCampaignTransform>> => {
      92 |       if (!effectiveUserId) {
      93 |         throw new Error('Authentication required for campaign access');

      at byStatusPaginated (src/hooks/marketing/useMarketingCampaigns.ts:90:28)
      at useMarketingCampaigns (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:189:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:188:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useMarketingCampaigns - Campaign Listing with Role-based Filtering › should handle unauthorized access to campaign data

    TypeError: Cannot read properties of undefined (reading 'byStatusPaginated')

      88 |
      89 |   return useQuery({
    > 90 |     queryKey: campaignKeys.byStatusPaginated(status, pagination),
         |                            ^
      91 |     queryFn: async (): Promise<PaginatedResponse<MarketingCampaignTransform>> => {
      92 |       if (!effectiveUserId) {
      93 |         throw new Error('Authentication required for campaign access');

      at byStatusPaginated (src/hooks/marketing/useMarketingCampaigns.ts:90:28)
      at useMarketingCampaigns (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:219:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:218:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useMarketingCampaigns - Campaign Listing with Role-based Filtering › should support campaign status filtering

    TypeError: Cannot read properties of undefined (reading 'byStatusPaginated')

      88 |
      89 |   return useQuery({
    > 90 |     queryKey: campaignKeys.byStatusPaginated(status, pagination),
         |                            ^
      91 |     queryFn: async (): Promise<PaginatedResponse<MarketingCampaignTransform>> => {
      92 |       if (!effectiveUserId) {
      93 |         throw new Error('Authentication required for campaign access');

      at byStatusPaginated (src/hooks/marketing/useMarketingCampaigns.ts:90:28)
      at useMarketingCampaigns (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:261:17)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at _loop (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:260:38)
          at _loop.next (<anonymous>)
      at Object._loop (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:236:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useMarketingCampaigns - Campaign Listing with Role-based Filtering › should handle pagination for large campaign datasets

    TypeError: Cannot read properties of undefined (reading 'byStatusPaginated')

      88 |
      89 |   return useQuery({
    > 90 |     queryKey: campaignKeys.byStatusPaginated(status, pagination),
         |                            ^
      91 |     queryFn: async (): Promise<PaginatedResponse<MarketingCampaignTransform>> => {
      92 |       if (!effectiveUserId) {
      93 |         throw new Error('Authentication required for campaign access');

      at byStatusPaginated (src/hooks/marketing/useMarketingCampaigns.ts:90:28)
      at useMarketingCampaigns (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:302:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:301:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useMarketingCampaigns - Campaign Listing with Role-based Filtering › should use centralized query key factory for campaigns

    TypeError: Cannot read properties of undefined (reading 'byStatusPaginated')

      88 |
      89 |   return useQuery({
    > 90 |     queryKey: campaignKeys.byStatusPaginated(status, pagination),
         |                            ^
      91 |     queryFn: async (): Promise<PaginatedResponse<MarketingCampaignTransform>> => {
      92 |       if (!effectiveUserId) {
      93 |         throw new Error('Authentication required for campaign access');

      at byStatusPaginated (src/hooks/marketing/useMarketingCampaigns.ts:90:28)
      at useMarketingCampaigns (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:334:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:333:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useCampaignPerformance - Analytics and Metrics Aggregation › should fetch campaign performance metrics with aggregation

    TypeError: Cannot read properties of undefined (reading 'performance')

      142 | export function useCampaignPerformance(campaignId: string) {
      143 |   return useQuery({
    > 144 |     queryKey: campaignKeys.performance(campaignId),
          |                            ^
      145 |     queryFn: async (): Promise<CampaignPerformanceResponse> => {
      146 |       const result = await MarketingCampaignService.getCampaignPerformance(campaignId);
      147 |       

      at performance (src/hooks/marketing/useMarketingCampaigns.ts:144:28)
      at useCampaignPerformance (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:382:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:381:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useCampaignPerformance - Analytics and Metrics Aggregation › should handle campaigns with no performance data

    TypeError: Cannot read properties of undefined (reading 'performance')

      142 | export function useCampaignPerformance(campaignId: string) {
      143 |   return useQuery({
    > 144 |     queryKey: campaignKeys.performance(campaignId),
          |                            ^
      145 |     queryFn: async (): Promise<CampaignPerformanceResponse> => {
      146 |       const result = await MarketingCampaignService.getCampaignPerformance(campaignId);
      147 |       

      at performance (src/hooks/marketing/useMarketingCampaigns.ts:144:28)
      at useCampaignPerformance (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:431:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:430:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useCampaignPerformance - Analytics and Metrics Aggregation › should support real-time performance updates

    TypeError: Cannot read properties of undefined (reading 'performance')

      142 | export function useCampaignPerformance(campaignId: string) {
      143 |   return useQuery({
    > 144 |     queryKey: campaignKeys.performance(campaignId),
          |                            ^
      145 |     queryFn: async (): Promise<CampaignPerformanceResponse> => {
      146 |       const result = await MarketingCampaignService.getCampaignPerformance(campaignId);
      147 |       

      at performance (src/hooks/marketing/useMarketingCampaigns.ts:144:28)
      at useCampaignPerformance (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:461:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:460:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useCampaignPerformance - Analytics and Metrics Aggregation › should cache performance data with appropriate refresh intervals

    TypeError: Cannot read properties of undefined (reading 'performance')

      142 | export function useCampaignPerformance(campaignId: string) {
      143 |   return useQuery({
    > 144 |     queryKey: campaignKeys.performance(campaignId),
          |                            ^
      145 |     queryFn: async (): Promise<CampaignPerformanceResponse> => {
      146 |       const result = await MarketingCampaignService.getCampaignPerformance(campaignId);
      147 |       

      at performance (src/hooks/marketing/useMarketingCampaigns.ts:144:28)
      at useCampaignPerformance (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:495:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:494:45)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useCreateCampaign - Campaign Creation with Validation › should create campaign with business rule validation

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"campaignName": "Summer BBQ Special", "campaignStatus": "planned", "campaignType": "promotional", "description": "Summer BBQ essentials at special prices", "discountPercentage": 20, "endDate": "2024-06-30T23:59:59Z", "startDate": "2024-06-01T00:00:00Z", "targetAudience": "BBQ enthusiasts"}, "user-1"

    Number of calls: 0

      562 |       });
      563 |
    > 564 |       expect(mockMarketingCampaignService.createCampaign).toHaveBeenCalledWith(
          |                                                           ^
      565 |         campaignData,
      566 |         'user-1'
      567 |       );

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:564:59)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useCampaignScheduling - Date Management and Automation › should schedule campaign with date validation

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "campaign-1", {"autoActivate": true, "endDate": "2024-07-31T23:59:59Z", "startDate": "2024-07-01T00:00:00Z"}, "user-1"

    Number of calls: 0

      734 |       });
      735 |
    > 736 |       expect(mockMarketingCampaignService.scheduleCampaign).toHaveBeenCalledWith(
          |                                                             ^
      737 |         'campaign-1',
      738 |         scheduleData,
      739 |         'user-1'

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:736:61)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useCampaignMetrics - Real-time Analytics Collection › should record campaign metrics for analytics

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "campaign-1", "views", 100, "user-1"

    Number of calls: 0

      866 |       });
      867 |
    > 868 |       expect(mockMarketingCampaignService.recordCampaignMetric).toHaveBeenCalledWith(
          |                                                                 ^
      869 |         'campaign-1',
      870 |         'views',
      871 |         100,

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:868:65)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › useUpdateCampaignStatus - Campaign Lifecycle Management › should update campaign status with lifecycle validation

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "campaign-1", "active", "user-1"

    Number of calls: 0

      1015 |       });
      1016 |
    > 1017 |       expect(mockMarketingCampaignService.updateCampaignStatus).toHaveBeenCalledWith(
           |                                                                 ^
      1018 |         'campaign-1',
      1019 |         'active',
      1020 |         'user-1'

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:1017:65)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › Integration with Content and Bundle Systems › should support campaign association with bundles

    TypeError: Cannot read properties of undefined (reading 'byStatusPaginated')

      88 |
      89 |   return useQuery({
    > 90 |     queryKey: campaignKeys.byStatusPaginated(status, pagination),
         |                            ^
      91 |     queryFn: async (): Promise<PaginatedResponse<MarketingCampaignTransform>> => {
      92 |       if (!effectiveUserId) {
      93 |         throw new Error('Authentication required for campaign access');

      at byStatusPaginated (src/hooks/marketing/useMarketingCampaigns.ts:90:28)
      at useMarketingCampaigns (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:1118:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:1117:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › Performance and Error Handling › should handle service failures gracefully

    TypeError: Cannot read properties of undefined (reading 'byStatusPaginated')

      88 |
      89 |   return useQuery({
    > 90 |     queryKey: campaignKeys.byStatusPaginated(status, pagination),
         |                            ^
      91 |     queryFn: async (): Promise<PaginatedResponse<MarketingCampaignTransform>> => {
      92 |       if (!effectiveUserId) {
      93 |         throw new Error('Authentication required for campaign access');

      at byStatusPaginated (src/hooks/marketing/useMarketingCampaigns.ts:90:28)
      at useMarketingCampaigns (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:1144:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:1143:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Marketing Campaign Hooks - Phase 3.3.2 (RED Phase) › Performance and Error Handling › should maintain performance targets for campaign operations

    TypeError: Cannot read properties of undefined (reading 'byStatusPaginated')

      88 |
      89 |   return useQuery({
    > 90 |     queryKey: campaignKeys.byStatusPaginated(status, pagination),
         |                            ^
      91 |     queryFn: async (): Promise<PaginatedResponse<MarketingCampaignTransform>> => {
      92 |       if (!effectiveUserId) {
      93 |         throw new Error('Authentication required for campaign access');

      at byStatusPaginated (src/hooks/marketing/useMarketingCampaigns.ts:90:28)
      at useMarketingCampaigns (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:1175:15)
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderHook (node_modules/@testing-library/react-native/src/render-hook.tsx:49:66)
      at Object.<anonymous> (src/hooks/marketing/__tests__/useMarketingCampaigns.test.tsx:1174:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/__tests__/security/securityAudit.test.ts
  ● Security Audit Tests › RLS Policy Validation › should validate RLS is enabled on critical tables

    expect(received).toBeNull()

    Received: {"message": "No rows returned"}

      60 |           .single();
      61 |
    > 62 |         expect(error).toBeNull();
         |                       ^
      63 |         
      64 |         // In a real test, you would check the actual RLS status
      65 |         // This is a simplified version

      at Object.toBeNull (src/__tests__/security/securityAudit.test.ts:62:23)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Security Audit Tests › Permission Boundary Testing › should test customer role permissions

    TypeError: _this.checkRolePermission is not a function

      171 |       for (const permission of customerPermissions) {
      172 |         // Test permission check
    > 173 |         const hasPermission = await this.checkRolePermission(
          |                                          ^
      174 |           'customer', 
      175 |           permission.resource, 
      176 |           permission.action

      at Object.checkRolePermission (src/__tests__/security/securityAudit.test.ts:173:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Audit Tests › Permission Boundary Testing › should test inventory_staff role permissions

    TypeError: _this.checkRolePermission is not a function

      198 |
      199 |       for (const permission of inventoryStaffPermissions) {
    > 200 |         const hasPermission = await this.checkRolePermission(
          |                                          ^
      201 |           'inventory_staff', 
      202 |           permission.resource, 
      203 |           permission.action

      at Object.checkRolePermission (src/__tests__/security/securityAudit.test.ts:200:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Audit Tests › Permission Boundary Testing › should test marketing_staff role permissions

    TypeError: _this.checkRolePermission is not a function

      225 |
      226 |       for (const permission of marketingStaffPermissions) {
    > 227 |         const hasPermission = await this.checkRolePermission(
          |                                          ^
      228 |           'marketing_staff', 
      229 |           permission.resource, 
      230 |           permission.action

      at Object.checkRolePermission (src/__tests__/security/securityAudit.test.ts:227:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Audit Tests › Permission Boundary Testing › should test executive role permissions

    TypeError: _this.checkRolePermission is not a function

      252 |
      253 |       for (const permission of executivePermissions) {
    > 254 |         const hasPermission = await this.checkRolePermission(
          |                                          ^
      255 |           'executive', 
      256 |           permission.resource, 
      257 |           permission.action

      at Object.checkRolePermission (src/__tests__/security/securityAudit.test.ts:254:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Audit Tests › Permission Boundary Testing › should test admin role permissions

    TypeError: _this.checkRolePermission is not a function

      285 |
      286 |       for (const permission of adminPermissions) {
    > 287 |         const hasPermission = await this.checkRolePermission(
          |                                          ^
      288 |           'admin', 
      289 |           permission.resource, 
      290 |           permission.action

      at Object.checkRolePermission (src/__tests__/security/securityAudit.test.ts:287:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Audit Tests › Permission Boundary Testing › should prevent privilege escalation attempts

    TypeError: _this.testPrivilegeEscalation is not a function

      307 |       for (const attempt of escalationAttempts) {
      308 |         // Attempt to change role should fail
    > 309 |         const canEscalate = await this.testPrivilegeEscalation(attempt.from, attempt.to);
          |                                        ^
      310 |         expect(canEscalate).toBe(false);
      311 |       }
      312 |     });

      at Object.testPrivilegeEscalation (src/__tests__/security/securityAudit.test.ts:309:40)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Audit Tests › Permission Boundary Testing › should validate cross-role data isolation

    TypeError: _this.testDataAccess is not a function

      323 |
      324 |       for (const test of isolationTests) {
    > 325 |         const hasAccess = await this.testDataAccess(test.role, test.shouldNotAccess);
          |                                      ^
      326 |         expect(hasAccess).toBe(false);
      327 |       }
      328 |     });

      at Object.testDataAccess (src/__tests__/security/securityAudit.test.ts:325:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Audit Tests › Input Validation and Injection Prevention › should validate input length limits

    expect(received).toBeDefined()

    Received: undefined

      367 |
      368 |       // Should reject overly long inputs
    > 369 |       expect(error).toBeDefined();
          |                     ^
      370 |     });
      371 |
      372 |     it('should sanitize special characters', async () => {

      at Object.toBeDefined (src/__tests__/security/securityAudit.test.ts:369:21)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Security Audit Tests › Input Validation and Injection Prevention › should validate email formats

    TypeError: _this.validateEmail is not a function

      407 |         // This would typically be tested through the auth system
      408 |         // but we'll simulate the validation
    > 409 |         const isValid = this.validateEmail(email);
          |                              ^
      410 |         expect(isValid).toBe(false);
      411 |       }
      412 |     });

      at Object.validateEmail (src/__tests__/security/securityAudit.test.ts:409:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Audit Tests › Input Validation and Injection Prevention › should validate numeric inputs

    TypeError: _this.validateNumber is not a function

      425 |       for (const num of invalidNumbers) {
      426 |         // Test that invalid numbers are rejected
    > 427 |         const isValid = this.validateNumber(num);
          |                              ^
      428 |         expect(isValid).toBe(false);
      429 |       }
      430 |     });

      at Object.validateNumber (src/__tests__/security/securityAudit.test.ts:427:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Audit Tests › Encryption and Data Protection › should validate password requirements

    TypeError: _this.validatePasswordStrength is not a function

      642 |
      643 |       for (const password of weakPasswords) {
    > 644 |         const isValid = this.validatePasswordStrength(password);
          |                              ^
      645 |         expect(isValid).toBe(false);
      646 |       }
      647 |     });

      at Object.validatePasswordStrength (src/__tests__/security/securityAudit.test.ts:644:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/__tests__/compliance/patternComplianceAudit.test.ts
  ● System-Wide Pattern Compliance Audit › Zod Validation Patterns Audit (System-Wide) › should validate database-first validation adherence in production monitoring systems

    expect(received).toBeGreaterThan(expected)

    Expected: > 0.8
    Received:   0.3

      67 |
      68 |       auditResults.forEach(result => {
    > 69 |         expect(result.database_first_usage).toBeGreaterThan(0.8);
         |                                             ^
      70 |         expect(result.validation_pipeline_present).toBe(true);
      71 |       });
      72 |     });

      at toBeGreaterThan (src/__tests__/compliance/patternComplianceAudit.test.ts:69:45)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/__tests__/compliance/patternComplianceAudit.test.ts:68:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● System-Wide Pattern Compliance Audit › Zod Validation Patterns Audit (System-Wide) › should validate resilient item processing with skip-on-error in all production services

    expect(received).toBeGreaterThan(expected)

    Expected: > 0.7
    Received:   0

      85 |       // Services should implement resilient processing
      86 |       const servicesWithResilience = auditResults.filter(r => r.resilient_patterns_found > 0);
    > 87 |       expect(servicesWithResilience.length / auditResults.length).toBeGreaterThan(0.7);
         |                                                                   ^
      88 |     });
      89 |
      90 |     it('should validate transformation schema architecture compliance across entire system', async () => {

      at Object.toBeGreaterThan (src/__tests__/compliance/patternComplianceAudit.test.ts:87:67)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● System-Wide Pattern Compliance Audit › Zod Validation Patterns Audit (System-Wide) › should validate transformation schema architecture compliance across entire system

    expect(received).toBeGreaterThan(expected)

    Expected: > 0.6
    Received:   0

      103 |       const adoptionRate = withTransformations.length / transformationAudit.length;
      104 |       
    > 105 |       expect(adoptionRate).toBeGreaterThan(0.6); // 60% adoption rate minimum
          |                            ^
      106 |     });
      107 |
      108 |     it('should validate database-interface alignment for production monitoring data', async () => {

      at Object.toBeGreaterThan (src/__tests__/compliance/patternComplianceAudit.test.ts:105:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● System-Wide Pattern Compliance Audit › React Query Patterns Audit (System-Wide) › should validate centralized query key factory usage across ALL phases (zero dual systems)

    expect(received).toBeGreaterThan(expected)

    Expected: > 0.8
    Received:   0

      143 |       // Verify centralized usage
      144 |       const centralizedUsage = queryKeyAudit.filter(audit => audit.has_centralized_keys);
    > 145 |       expect(centralizedUsage.length / queryKeyAudit.length).toBeGreaterThan(0.8);
          |                                                              ^
      146 |     });
      147 |
      148 |     it('should validate user-isolated query keys with proper fallback strategies system-wide', async () => {

      at Object.toBeGreaterThan (src/__tests__/compliance/patternComplianceAudit.test.ts:145:62)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● System-Wide Pattern Compliance Audit › React Query Patterns Audit (System-Wide) › should validate user-isolated query keys with proper fallback strategies system-wide

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      151 |       const isolationCompliance = auditUserIsolation(queryKeyFactoryContent);
      152 |       
    > 153 |       expect(isolationCompliance.user_isolation_present).toBe(true);
          |                                                          ^
      154 |       expect(isolationCompliance.fallback_strategies).toBeGreaterThan(3);
      155 |       expect(isolationCompliance.role_based_keys).toBe(true);
      156 |     });

      at Object.toBe (src/__tests__/compliance/patternComplianceAudit.test.ts:153:58)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● System-Wide Pattern Compliance Audit › React Query Patterns Audit (System-Wide) › should validate entity-specific factory methods across all business domains

    expect(received).toContain(expected) // indexOf

    Expected value: "products"
    Received array: []

      167 |
      168 |       expectedEntities.forEach(entity => {
    > 169 |         expect(entityCoverage.covered_entities).toContain(entity);
          |                                                 ^
      170 |       });
      171 |
      172 |       expect(entityCoverage.coverage_percentage).toBeGreaterThan(0.9);

      at toContain (src/__tests__/compliance/patternComplianceAudit.test.ts:169:49)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/__tests__/compliance/patternComplianceAudit.test.ts:168:24)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● System-Wide Pattern Compliance Audit › React Query Patterns Audit (System-Wide) › should validate smart query invalidation across multi-role workflows

    expect(received).toBeGreaterThan(expected)

    Expected: > 0.6
    Received:   NaN

      214 |       );
      215 |
    > 216 |       expect(smartInvalidations.length / invalidationAudit.length).toBeGreaterThan(0.6);
          |                                                                    ^
      217 |     });
      218 |   });
      219 |

      at Object.toBeGreaterThan (src/__tests__/compliance/patternComplianceAudit.test.ts:216:68)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● System-Wide Pattern Compliance Audit › Database Query Patterns Audit (System-Wide) › should validate cross-role data operations following atomic operation patterns

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      258 |
      259 |       atomicityAudit.forEach(audit => {
    > 260 |         expect(audit.atomic_operations_present).toBe(true);
          |                                                 ^
      261 |         expect(audit.transaction_usage).toBeGreaterThan(0.5);
      262 |       });
      263 |     });

      at toBe (src/__tests__/compliance/patternComplianceAudit.test.ts:260:49)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/__tests__/compliance/patternComplianceAudit.test.ts:259:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● System-Wide Pattern Compliance Audit › Database Query Patterns Audit (System-Wide) › should validate performance optimization patterns validated under production load

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      322 |       performanceAudit.forEach(audit => {
      323 |         expect(audit.optimization_patterns_present).toBe(true);
    > 324 |         expect(audit.production_ready).toBe(true);
          |                                        ^
      325 |         expect(audit.monitoring_integrated).toBe(true);
      326 |       });
      327 |     });

      at toBe (src/__tests__/compliance/patternComplianceAudit.test.ts:324:40)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/__tests__/compliance/patternComplianceAudit.test.ts:322:24)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● System-Wide Pattern Compliance Audit › Schema Contract Management Audit (System-Wide) › should validate service field selection validation in production environment

    expect(received).toBeGreaterThan(expected)

    Expected: > 0.7
    Received:   0

      408 |       );
      409 |
    > 410 |       expect(optimizedServices.length / fieldSelectionAudit.length).toBeGreaterThan(0.7);
          |                                                                     ^
      411 |     });
      412 |
      413 |     it('should validate pre-commit contract validation integration in CI/CD pipeline', async () => {

      at Object.toBeGreaterThan (src/__tests__/compliance/patternComplianceAudit.test.ts:410:69)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● System-Wide Pattern Compliance Audit › Schema Contract Management Audit (System-Wide) › should validate transformation completeness across all business domains

    expect(received).toBeGreaterThan(expected)

    Expected: > 0.8
    Received:   0

      450 |       );
      451 |
    > 452 |       expect(completeTransformations.length / transformationAudit.length).toBeGreaterThan(0.8);
          |                                                                           ^
      453 |     });
      454 |   });
      455 |

      at Object.toBeGreaterThan (src/__tests__/compliance/patternComplianceAudit.test.ts:452:75)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/inventory/__tests__/integration/security.test.tsx (20.35 s)
  ● Security Integration Tests (RED Phase) › Role-based Access Control › should allow admin users full access to all operations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      169 |       );
      170 |
    > 171 |       await waitFor(() => {
          |                    ^
      172 |         expect(readResult.current.isSuccess).toBe(true);
      173 |       });
      174 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:171:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Integration Tests (RED Phase) › Role-based Access Control › should restrict inventory staff to appropriate operations only

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      264 |       );
      265 |
    > 266 |       await waitFor(() => {
          |                    ^
      267 |         expect(readResult.current.isSuccess).toBe(true);
      268 |       });
      269 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:266:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Integration Tests (RED Phase) › Role-based Access Control › should restrict marketing staff to read-only and content updates

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      364 |       );
      365 |
    > 366 |       await waitFor(() => {
          |                    ^
      367 |         expect(readResult.current.isSuccess).toBe(true);
      368 |       });
      369 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:366:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Integration Tests (RED Phase) › Role-based Access Control › should deny all write operations for read-only users

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      443 |       );
      444 |
    > 445 |       await waitFor(() => {
          |                    ^
      446 |         expect(readResult.current.isSuccess).toBe(true);
      447 |       });
      448 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:445:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Integration Tests (RED Phase) › User Data Isolation › should isolate inventory data by user context

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      549 |       );
      550 |
    > 551 |       await waitFor(() => {
          |                    ^
      552 |         expect(userAResult.current.isSuccess).toBe(true);
      553 |       });
      554 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:551:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Integration Tests (RED Phase) › User Data Isolation › should prevent cross-user inventory access

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      569 |       );
      570 |
    > 571 |       await waitFor(() => {
          |                    ^
      572 |         expect(result.current.isError).toBe(true);
      573 |       });
      574 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:571:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Integration Tests (RED Phase) › User Data Isolation › should isolate movement history by user permissions

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      616 |       );
      617 |
    > 618 |       await waitFor(() => {
          |                    ^
      619 |         expect(allowedResult.current.isSuccess).toBe(true);
      620 |       });
      621 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:618:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Integration Tests (RED Phase) › Permission Escalation Prevention › should prevent unauthorized bulk operations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      658 |       });
      659 |
    > 660 |       await waitFor(() => {
          |                    ^
      661 |         expect(result.current.isError).toBe(true);
      662 |       });
      663 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:660:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Security Integration Tests (RED Phase) › Permission Escalation Prevention › should validate permissions for each operation in workflow

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      696 |       );
      697 |
    > 698 |       await waitFor(() => {
          |                    ^
      699 |         expect(readResult.current.isSuccess).toBe(true);
      700 |       });
      701 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:698:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Integration Tests (RED Phase) › Audit Trail Security › should ensure audit trails cannot be tampered with

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      752 |       });
      753 |
    > 754 |       await waitFor(() => {
          |                    ^
      755 |         expect(result.current.isError).toBe(true);
      756 |       });
      757 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:754:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Security Integration Tests (RED Phase) › Audit Trail Security › should protect sensitive analytics data

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      773 |       );
      774 |
    > 775 |       await waitFor(() => {
          |                    ^
      776 |         expect(result.current.isError).toBe(true);
      777 |       });
      778 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:775:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Integration Tests (RED Phase) › Audit Trail Security › should prevent unauthorized access to movement history

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      789 |       );
      790 |
    > 791 |       await waitFor(() => {
          |                    ^
      792 |         expect(result.current.isError).toBe(true);
      793 |       });
      794 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:791:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Security Integration Tests (RED Phase) › Input Validation and Injection Prevention › should reject malicious input in inventory operations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      821 |       });
      822 |
    > 823 |       await waitFor(() => {
          |                    ^
      824 |         expect(result.current.isError).toBe(true);
      825 |       });
      826 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:823:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Security Integration Tests (RED Phase) › Input Validation and Injection Prevention › should validate movement data for consistency

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      851 |       });
      852 |
    > 853 |       await waitFor(() => {
          |                    ^
      854 |         expect(result.current.isError).toBe(true);
      855 |       });
      856 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/security.test.tsx:853:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/marketing/__tests__/campaignManagementIntegration.test.tsx
  ● Campaign Management Hook Integration - Phase 3.4.2 (RED Phase) › Campaign Lifecycle Hook Integration › should invalidate queries during campaign status changes

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"queryKey": ["campaigns", "test-user-123", "detail", "campaign-456"]}

    Number of calls: 0

      398 |
      399 |       // Verify campaign-specific query invalidation
    > 400 |       expect(invalidateQueriesSpy).toHaveBeenCalledWith({
          |                                    ^
      401 |         queryKey: campaignKeys.detail(testCampaignId, testUserId)
      402 |       });
      403 |       

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/campaignManagementIntegration.test.tsx:400:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Campaign Management Hook Integration - Phase 3.4.2 (RED Phase) › Campaign Performance Integration › should handle real-time metrics recording

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 4
    Received number of calls: 0

      543 |
      544 |       // Verify all metric types were recorded
    > 545 |       expect(mockMarketingCampaignService.recordCampaignMetric).toHaveBeenCalledTimes(4);
          |                                                                 ^
      546 |     });
      547 |   });
      548 |

      at Object.toHaveBeenCalledTimes (src/hooks/marketing/__tests__/campaignManagementIntegration.test.tsx:545:65)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Campaign Management Hook Integration - Phase 3.4.2 (RED Phase) › Cross-System Integration Hooks › should invalidate cross-system queries on campaign changes

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"queryKey": ["campaigns", "test-user-123", "detail", "campaign-456"]}

    Number of calls: 0

      724 |
      725 |       // Verify campaign queries were invalidated
    > 726 |       expect(invalidateQueriesSpy).toHaveBeenCalledWith({
          |                                    ^
      727 |         queryKey: campaignKeys.detail(testCampaignId, testUserId)
      728 |       });
      729 |

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/campaignManagementIntegration.test.tsx:726:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Campaign Management Hook Integration - Phase 3.4.2 (RED Phase) › Cross-System Integration Hooks › should handle campaign discount updates affecting bundles

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      798 |       });
      799 |
    > 800 |       expect(result.current.isSuccess).toBe(true);
          |                                        ^
      801 |       expect(result.current.data?.newDiscount).toBe(30);
      802 |       expect(result.current.data?.affectedBundles).toContain(testBundleId);
      803 |

      at Object.toBe (src/hooks/marketing/__tests__/campaignManagementIntegration.test.tsx:800:40)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Campaign Management Hook Integration - Phase 3.4.2 (RED Phase) › Analytics Integration Hooks › should provide executive analytics data through hooks

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      892 |       });
      893 |
    > 894 |       await waitFor(() => {
          |                    ^
      895 |         expect(result.current.isSuccess).toBe(true);
      896 |       });
      897 |

      at Object.<anonymous> (src/hooks/marketing/__tests__/campaignManagementIntegration.test.tsx:894:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Campaign Management Hook Integration - Phase 3.4.2 (RED Phase) › Analytics Integration Hooks › should handle role-based analytics access in hooks

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      960 |           });
      961 |
    > 962 |           await waitFor(() => {
          |                        ^
      963 |             expect(result.current.isSuccess).toBe(true);
      964 |           });
      965 |         } else {

      at _loop2 (src/hooks/marketing/__tests__/campaignManagementIntegration.test.tsx:962:24)
          at _loop2.next (<anonymous>)
      at Object._loop2 (src/hooks/marketing/__tests__/campaignManagementIntegration.test.tsx:913:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/hooks/executive/__tests__/usePredictiveAnalytics.test.tsx
  ● usePredictiveAnalytics Hook - Phase 4.3 › usePredictiveAnalytics › should validate predictive models with historical data

    TypeError: result.current.validateModel is not a function

      189 |
      190 |       await act(async () => {
    > 191 |         await result.current.validateModel({
          |                              ^
      192 |           historicalData: 'last_12_months',
      193 |           validationMethod: 'backtesting'
      194 |         });

      at validateModel (src/hooks/executive/__tests__/usePredictiveAnalytics.test.tsx:191:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at callback (node_modules/@testing-library/react-native/src/act.ts:31:24)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1081:22)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at Object.<anonymous> (src/hooks/executive/__tests__/usePredictiveAnalytics.test.tsx:190:16)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● usePredictiveAnalytics Hook - Phase 4.3 › usePredictiveAnalytics › should support real-time forecast updates

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Object {
        "forecastData": Object {
    -     "revenue": 105000,
    +     "revenue": 100000,
        },
    -   "timestamp": "2024-01-15T10:05:00Z",
    +   "timestamp": "2024-01-15T10:00:00Z",
      }

      240 |       });
      241 |
    > 242 |       await waitFor(() => {
          |                    ^
      243 |         expect(result.current.forecastData).toEqual(mockUpdatedForecast);
      244 |       });
      245 |

      at Object.<anonymous> (src/hooks/executive/__tests__/usePredictiveAnalytics.test.tsx:242:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● usePredictiveAnalytics Hook - Phase 4.3 › usePredictiveAnalytics › should calculate confidence intervals for forecasts

    TypeError: result.current.calculateConfidence is not a function

      275 |
      276 |       await act(async () => {
    > 277 |         await result.current.calculateConfidence({
          |                              ^
      278 |           confidenceLevels: [0.95, 0.90, 0.80]
      279 |         });
      280 |       });

      at calculateConfidence (src/hooks/executive/__tests__/usePredictiveAnalytics.test.tsx:277:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at callback (node_modules/@testing-library/react-native/src/act.ts:31:24)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1081:22)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at Object.<anonymous> (src/hooks/executive/__tests__/usePredictiveAnalytics.test.tsx:276:16)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● usePredictiveAnalytics Hook - Phase 4.3 › Query Key Factory Integration › should use centralized query key factory for analytics

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 2

      Array [
        "executive",
        "predictiveAnalytics",
    -   "demand",
    +   undefined,
    +   undefined,
      ]

      534 |       );
      535 |
    > 536 |       await waitFor(() => {
          |                    ^
      537 |         expect(result.current.queryKey).toEqual(['executive', 'predictiveAnalytics', 'demand']);
      538 |       });
      539 |     });

      at Object.<anonymous> (src/hooks/executive/__tests__/usePredictiveAnalytics.test.tsx:536:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/__tests__/performance/queryPerformance.test.ts
  ● Query Performance Tests › Role Permission Query Performance › should query user roles within 200ms

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, Any<Number>, Any<String>, Any<String>, Any<Object>

    Number of calls: 0

      49 |       expect(error).toBeNull();
      50 |       expect(executionTime).toBeLessThan(200);
    > 51 |       expect(performanceMonitoring.logQueryPerformance).toHaveBeenCalledWith(
         |                                                         ^
      52 |         expect.any(String),
      53 |         expect.any(Number),
      54 |         expect.any(String),

      at Object.toHaveBeenCalledWith (src/__tests__/performance/queryPerformance.test.ts:51:57)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Query Performance Tests › Role Permission Query Performance › should perform role-based access checks within 150ms

    TypeError: _supabase.supabase.rpc(...).single is not a function

      80 |         p_resource: 'inventory',
      81 |         p_action: 'read'
    > 82 |       }).single();
         |          ^
      83 |       
      84 |       const executionTime = performance.now() - startTime;
      85 |       

      at Object.single (src/__tests__/performance/queryPerformance.test.ts:82:10)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/__tests__/deployment/migrationValidation.test.ts
  ● Database Migration Validation Tests › Migration Script Validation › should validate production monitoring schema migration

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      49 |         expect(error).toBeNull();
      50 |         expect(tableInfo).toBeDefined();
    > 51 |         expect(tableInfo?.length).toBeGreaterThan(0);
         |                                   ^
      52 |       }
      53 |
      54 |       // Verify table columns and constraints

      at Object.toBeGreaterThan (src/__tests__/deployment/migrationValidation.test.ts:51:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Database Migration Validation Tests › Migration Script Validation › should validate RLS policies are properly migrated

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      101 |         expect(policyError).toBeNull();
      102 |         expect(policies).toBeDefined();
    > 103 |         expect(policies?.length).toBeGreaterThan(0);
          |                                  ^
      104 |       }
      105 |     });
      106 |

      at Object.toBeGreaterThan (src/__tests__/deployment/migrationValidation.test.ts:103:34)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Database Migration Validation Tests › Migration Script Validation › should validate indexes are properly created

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      125 |         expect(error).toBeNull();
      126 |         expect(indexInfo).toBeDefined();
    > 127 |         expect(indexInfo?.length).toBeGreaterThan(0);
          |                                   ^
      128 |       }
      129 |     });
      130 |

      at Object.toBeGreaterThan (src/__tests__/deployment/migrationValidation.test.ts:127:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Database Migration Validation Tests › Migration Script Validation › should validate stored procedures are properly migrated

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      147 |         expect(error).toBeNull();
      148 |         expect(procInfo).toBeDefined();
    > 149 |         expect(procInfo?.length).toBeGreaterThan(0);
          |                                  ^
      150 |       }
      151 |     });
      152 |

      at Object.toBeGreaterThan (src/__tests__/deployment/migrationValidation.test.ts:149:34)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Database Migration Validation Tests › Migration Script Validation › should validate views are properly created

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      168 |         expect(error).toBeNull();
      169 |         expect(viewInfo).toBeDefined();
    > 170 |         expect(viewInfo?.length).toBeGreaterThan(0);
          |                                  ^
      171 |       }
      172 |     });
      173 |   });

      at Object.toBeGreaterThan (src/__tests__/deployment/migrationValidation.test.ts:170:34)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Database Migration Validation Tests › Data Integrity Validation › should validate data consistency during migration

    TypeError: _this.validateForeignKeyConstraints is not a function

      177 |       // Test data integrity checks
      178 |       const integrityChecks = [
    > 179 |         this.validateForeignKeyConstraints(),
          |              ^
      180 |         this.validateUniqueConstraints(),
      181 |         this.validateCheckConstraints(),
      182 |         this.validateNullConstraints(),

      at Object.validateForeignKeyConstraints (src/__tests__/deployment/migrationValidation.test.ts:179:14)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Data Integrity Validation › should validate existing data compatibility

    TypeError: _this.testExistingUserData is not a function

      196 |       // Test that existing data works with new schema
      197 |       const compatibilityTests = [
    > 198 |         this.testExistingUserData(),
          |              ^
      199 |         this.testExistingOrderData(),
      200 |         this.testExistingProductData(),
      201 |         this.testExistingInventoryData(),

      at Object.testExistingUserData (src/__tests__/deployment/migrationValidation.test.ts:198:14)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Data Integrity Validation › should validate data migration accuracy

    TypeError: _this.validateMigrationAccuracy is not a function

      211 |     it('should validate data migration accuracy', async () => {
      212 |       // Test that data migration preserves all information
    > 213 |       const migrationAccuracy = await this.validateMigrationAccuracy();
          |                                            ^
      214 |       
      215 |       expect(migrationAccuracy.records_migrated).toBeGreaterThan(0);
      216 |       expect(migrationAccuracy.data_loss_percentage).toBe(0);

      at Object.validateMigrationAccuracy (src/__tests__/deployment/migrationValidation.test.ts:213:44)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Data Integrity Validation › should validate production data volume handling

    TypeError: _this.testProductionVolumeHandling is not a function

      220 |     it('should validate production data volume handling', async () => {
      221 |       // Test migration performance with production-scale data
    > 222 |       const volumeTest = await this.testProductionVolumeHandling({
          |                                     ^
      223 |         orders: 100000,
      224 |         users: 10000,
      225 |         products: 1000,

      at Object.testProductionVolumeHandling (src/__tests__/deployment/migrationValidation.test.ts:222:37)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Migration Performance Testing › should validate migration execution time

    TypeError: _this.executeMigrationStep is not a function

      247 |         
      248 |         // Simulate migration step execution
    > 249 |         await this.executeMigrationStep(step.name);
          |                    ^
      250 |         
      251 |         const stepTime = performance.now() - stepStart;
      252 |         expect(stepTime).toBeLessThan(step.estimated_time * 1000);

      at Object.executeMigrationStep (src/__tests__/deployment/migrationValidation.test.ts:249:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Migration Performance Testing › should validate concurrent migration handling

    TypeError: _this.simulateReadOperations is not a function

      257 |       // Test that migration can handle concurrent database operations
      258 |       const concurrentOperations = [
    > 259 |         this.simulateReadOperations(),
          |              ^
      260 |         this.simulateWriteOperations(),
      261 |         this.simulateAnalyticsQueries(),
      262 |       ];

      at Object.simulateReadOperations (src/__tests__/deployment/migrationValidation.test.ts:259:14)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Migration Performance Testing › should validate migration resource usage

    TypeError: _this.startResourceMonitoring is not a function

      278 |
      279 |     it('should validate migration resource usage', async () => {
    > 280 |       const resourceMonitor = this.startResourceMonitoring();
          |                                    ^
      281 |       
      282 |       await this.simulateMigrationExecution();
      283 |       

      at Object.startResourceMonitoring (src/__tests__/deployment/migrationValidation.test.ts:280:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Rollback Procedure Validation › should validate rollback script completeness

    TypeError: _this.getRollbackScript is not a function

      302 |
      303 |       for (const step of rollbackSteps) {
    > 304 |         const rollbackScript = await this.getRollbackScript(step);
          |                                           ^
      305 |         
      306 |         expect(rollbackScript).toBeDefined();
      307 |         expect(rollbackScript.length).toBeGreaterThan(0);

      at Object.getRollbackScript (src/__tests__/deployment/migrationValidation.test.ts:304:43)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Rollback Procedure Validation › should validate rollback execution

    TypeError: _this.createTestMigrationState is not a function

      315 |       
      316 |       // Create test migration state
    > 317 |       await this.createTestMigrationState();
          |                  ^
      318 |       
      319 |       // Execute rollback
      320 |       const rollbackResult = await this.executeRollback();

      at Object.createTestMigrationState (src/__tests__/deployment/migrationValidation.test.ts:317:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Rollback Procedure Validation › should validate data preservation during rollback

    TypeError: _this.captureDataSnapshot is not a function

      332 |     it('should validate data preservation during rollback', async () => {
      333 |       // Test that rollback preserves existing data
    > 334 |       const preRollbackData = await this.captureDataSnapshot();
          |                                          ^
      335 |       
      336 |       await this.executeRollback();
      337 |       

      at Object.captureDataSnapshot (src/__tests__/deployment/migrationValidation.test.ts:334:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Rollback Procedure Validation › should validate partial rollback scenarios

    TypeError: _this.testPartialRollback is not a function

      354 |
      355 |       for (const failurePoint of failurePoints) {
    > 356 |         const rollbackResult = await this.testPartialRollback(failurePoint);
          |                                           ^
      357 |         
      358 |         expect(rollbackResult.success).toBe(true);
      359 |         expect(rollbackResult.database_consistent).toBe(true);

      at Object.testPartialRollback (src/__tests__/deployment/migrationValidation.test.ts:356:43)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Environment-Specific Migration Testing › should validate development environment migration

    TypeError: _this.testEnvironmentMigration is not a function

      364 |   describe('Environment-Specific Migration Testing', () => {
      365 |     it('should validate development environment migration', async () => {
    > 366 |       const devMigration = await this.testEnvironmentMigration('development');
          |                                       ^
      367 |       
      368 |       expect(devMigration.success).toBe(true);
      369 |       expect(devMigration.test_data_preserved).toBe(true);

      at Object.testEnvironmentMigration (src/__tests__/deployment/migrationValidation.test.ts:366:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Environment-Specific Migration Testing › should validate staging environment migration

    TypeError: _this.testEnvironmentMigration is not a function

      372 |
      373 |     it('should validate staging environment migration', async () => {
    > 374 |       const stagingMigration = await this.testEnvironmentMigration('staging');
          |                                           ^
      375 |       
      376 |       expect(stagingMigration.success).toBe(true);
      377 |       expect(stagingMigration.production_like_data).toBe(true);

      at Object.testEnvironmentMigration (src/__tests__/deployment/migrationValidation.test.ts:374:43)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Environment-Specific Migration Testing › should validate production environment migration

    TypeError: _this.testEnvironmentMigration is not a function

      380 |
      381 |     it('should validate production environment migration', async () => {
    > 382 |       const prodMigration = await this.testEnvironmentMigration('production');
          |                                        ^
      383 |       
      384 |       expect(prodMigration.success).toBe(true);
      385 |       expect(prodMigration.zero_downtime).toBe(true);

      at Object.testEnvironmentMigration (src/__tests__/deployment/migrationValidation.test.ts:382:40)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Database Migration Validation Tests › Environment-Specific Migration Testing › should validate cross-environment compatibility

    TypeError: _this.testEnvironmentMigration is not a function

      394 |
      395 |       for (const env of environments) {
    > 396 |         const result = await this.testEnvironmentMigration(env);
          |                                   ^
      397 |         migrationResults.push(result);
      398 |       }
      399 |

      at Object.testEnvironmentMigration (src/__tests__/deployment/migrationValidation.test.ts:396:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/hooks/marketing/__tests__/contentWorkflowIntegration.test.tsx
  ● Content Workflow Hook Integration - Phase 3.4.1 (RED Phase) › Complete Content Lifecycle Hook Integration › should manage complete workflow through hooks

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "content-456", {"contentStatus": "review"}, "test-user-123"

    Number of calls: 0

      200 |
      201 |       expect(workflowResult.current.isSuccess).toBe(true);
    > 202 |       expect(mockProductContentService.updateProductContent).toHaveBeenCalledWith(
          |                                                              ^
      203 |         testContentId,
      204 |         { contentStatus: 'review' },
      205 |         testUserId

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/contentWorkflowIntegration.test.tsx:202:62)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow Hook Integration - Phase 3.4.1 (RED Phase) › Complete Content Lifecycle Hook Integration › should invalidate queries during workflow transitions

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"queryKey": ["content", "test-user-123", "detail", "content-456"]}

    Number of calls: 0

      281 |
      282 |       // Verify proper query invalidation using centralized keys
    > 283 |       expect(invalidateQueriesSpy).toHaveBeenCalledWith({
          |                                    ^
      284 |         queryKey: contentKeys.detail(testContentId, testUserId)
      285 |       });
      286 |       expect(invalidateQueriesSpy).toHaveBeenCalledWith({

      at Object.toHaveBeenCalledWith (src/hooks/marketing/__tests__/contentWorkflowIntegration.test.tsx:283:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow Hook Integration - Phase 3.4.1 (RED Phase) › Cross-Layer Cache Integration › should coordinate cache invalidation across content layers

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      408 |       });
      409 |
    > 410 |       expect(updateResult.current.isSuccess).toBe(true);
          |                                              ^
      411 |       
      412 |       // Mock updated query for content fetch after update
      413 |       mockUseQuery.mockReturnValue({

      at Object.toBe (src/hooks/marketing/__tests__/contentWorkflowIntegration.test.tsx:410:46)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow Hook Integration - Phase 3.4.1 (RED Phase) › Real-Time Collaboration Integration › should handle real-time content updates

    expect(received).toBe(expected) // Object.is equality

    Expected: "Updated by Another User"
    Received: "Original Title"

      585 |       });
      586 |
    > 587 |       await waitFor(() => {
          |                    ^
      588 |         expect(result.current.data?.title).toBe('Updated by Another User');
      589 |       });
      590 |     });

      at Object.<anonymous> (src/hooks/marketing/__tests__/contentWorkflowIntegration.test.tsx:587:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow Hook Integration - Phase 3.4.1 (RED Phase) › Real-Time Collaboration Integration › should handle concurrent edit conflicts

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      633 |       });
      634 |
    > 635 |       expect(result.current.isError).toBe(true);
          |                                      ^
      636 |       expect(result.current.error?.message).toContain('modified by another user');
      637 |     });
      638 |   });

      at Object.toBe (src/hooks/marketing/__tests__/contentWorkflowIntegration.test.tsx:635:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow Hook Integration - Phase 3.4.1 (RED Phase) › Performance Integration Validation › should optimize query key usage for cache efficiency

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "content-1", "test-user-123"

    Number of calls: 0

      757 |       // Verify each query uses distinct cache keys
      758 |       contentIds.forEach(id => {
    > 759 |         expect(mockProductContentService.getProductContent).toHaveBeenCalledWith(
          |                                                             ^
      760 |           id, 
      761 |           testUserId
      762 |         );

      at toHaveBeenCalledWith (src/hooks/marketing/__tests__/contentWorkflowIntegration.test.tsx:759:61)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/hooks/marketing/__tests__/contentWorkflowIntegration.test.tsx:758:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow Hook Integration - Phase 3.4.1 (RED Phase) › Performance Integration Validation › should handle large dataset queries efficiently

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      800 |       );
      801 |
    > 802 |       await waitFor(() => {
          |                    ^
      803 |         expect(result.current.isSuccess).toBe(true);
      804 |       });
      805 |

      at Object.<anonymous> (src/hooks/marketing/__tests__/contentWorkflowIntegration.test.tsx:802:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/services/executive/__tests__/phase4ComplianceAudit.test.ts
  ● Phase 4.5: Pattern Compliance Audit › Zod Validation Patterns Compliance › Single Validation Pass Principle › should validate BusinessMetrics schemas follow single-pass validation

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      37 |         // Single validation pass from DB
      38 |         const dbValidation = BusinessMetricsDatabaseSchema.safeParse(mockDbData);
    > 39 |         expect(dbValidation.success).toBe(true);
         |                                      ^
      40 |
      41 |         // Transform validation (DB → App)
      42 |         const transformValidation = BusinessMetricsTransformSchema.safeParse(mockDbData);

      at Object.toBe (src/services/executive/__tests__/phase4ComplianceAudit.test.ts:39:38)

  ● Phase 4.5: Pattern Compliance Audit › Zod Validation Patterns Compliance › Single Validation Pass Principle › should validate BusinessIntelligence schemas follow single-pass validation

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      59 |
      60 |         const dbValidation = BusinessIntelligenceDatabaseSchema.safeParse(mockInsightData);
    > 61 |         expect(dbValidation.success).toBe(true);
         |                                      ^
      62 |
      63 |         const transformValidation = BusinessIntelligenceTransformSchema.safeParse(mockInsightData);
      64 |         expect(transformValidation.success).toBe(true);

      at Object.toBe (src/services/executive/__tests__/phase4ComplianceAudit.test.ts:61:38)

  ● Phase 4.5: Pattern Compliance Audit › Zod Validation Patterns Compliance › Single Validation Pass Principle › should validate StrategicReporting schemas follow single-pass validation

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      76 |
      77 |         const dbValidation = StrategicReportingDatabaseSchema.safeParse(mockReportData);
    > 78 |         expect(dbValidation.success).toBe(true);
         |                                      ^
      79 |
      80 |         const transformValidation = StrategicReportingTransformSchema.safeParse(mockReportData);
      81 |         expect(transformValidation.success).toBe(true);

      at Object.toBe (src/services/executive/__tests__/phase4ComplianceAudit.test.ts:78:38)

  ● Phase 4.5: Pattern Compliance Audit › Zod Validation Patterns Compliance › Single Validation Pass Principle › should validate PredictiveAnalytics schemas follow single-pass validation

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      93 |
      94 |         const dbValidation = PredictiveAnalyticsDatabaseSchema.safeParse(mockForecastData);
    > 95 |         expect(dbValidation.success).toBe(true);
         |                                      ^
      96 |
      97 |         const transformValidation = PredictiveAnalyticsTransformSchema.safeParse(mockForecastData);
      98 |         expect(transformValidation.success).toBe(true);

      at Object.toBe (src/services/executive/__tests__/phase4ComplianceAudit.test.ts:95:38)

  ● Phase 4.5: Pattern Compliance Audit › React Query Patterns Compliance › Centralized Query Key Factory Usage › should verify no dual query key systems in executive hooks

    TypeError: Cannot read properties of undefined (reading 'createQueryKeyFactory')

      186 |       it('should verify no dual query key systems in executive hooks', () => {
      187 |         // Check that executive keys are properly defined
    > 188 |         const executiveKeys = queryKeyFactory.createQueryKeyFactory({ 
          |                                               ^
      189 |           entity: 'businessMetrics' as any, 
      190 |           isolation: 'user-specific' 
      191 |         });

      at Object.createQueryKeyFactory (src/services/executive/__tests__/phase4ComplianceAudit.test.ts:188:47)

  ● Phase 4.5: Pattern Compliance Audit › React Query Patterns Compliance › Centralized Query Key Factory Usage › should validate user-isolated query keys for analytics

    TypeError: Cannot read properties of undefined (reading 'createQueryKeyFactory')

      199 |       it('should validate user-isolated query keys for analytics', () => {
      200 |         const userId = 'user-123';
    > 201 |         const metricsKeys = queryKeyFactory.createQueryKeyFactory({ 
          |                                             ^
      202 |           entity: 'businessMetrics' as any, 
      203 |           isolation: 'user-specific' 
      204 |         });

      at Object.createQueryKeyFactory (src/services/executive/__tests__/phase4ComplianceAudit.test.ts:201:45)

  ● Phase 4.5: Pattern Compliance Audit › React Query Patterns Compliance › Centralized Query Key Factory Usage › should implement proper fallback strategies

    TypeError: Cannot read properties of undefined (reading 'createQueryKeyFactory')

      210 |
      211 |       it('should implement proper fallback strategies', () => {
    > 212 |         const metricsKeys = queryKeyFactory.createQueryKeyFactory({ 
          |                                             ^
      213 |           entity: 'businessMetrics' as any, 
      214 |           isolation: 'user-specific' 
      215 |         });

      at Object.createQueryKeyFactory (src/services/executive/__tests__/phase4ComplianceAudit.test.ts:212:45)

  ● Phase 4.5: Pattern Compliance Audit › React Query Patterns Compliance › Centralized Query Key Factory Usage › should provide entity-specific factory methods

    TypeError: Cannot read properties of undefined (reading 'createQueryKeyFactory')

      222 |
      223 |       it('should provide entity-specific factory methods', () => {
    > 224 |         const intelligenceKeys = queryKeyFactory.createQueryKeyFactory({ 
          |                                                  ^
      225 |           entity: 'businessIntelligence' as any, 
      226 |           isolation: 'user-specific' 
      227 |         });

      at Object.createQueryKeyFactory (src/services/executive/__tests__/phase4ComplianceAudit.test.ts:224:50)

FAIL src/__tests__/integration/crossRoleWorkflows.test.ts
  ● Cross-Role Workflow Integration Tests › Complete Inventory Management Workflow › should handle complete inventory workflow across all roles

    TypeError: _supabase.supabase.raw is not a function

      73 |           .from('inventory_items')
      74 |           .update({ 
    > 75 |             quantity: supabase.raw(`quantity + ${update.quantity_delta}`),
         |                                ^
      76 |             updated_at: new Date().toISOString(),
      77 |           })
      78 |           .eq('product_id', update.product_id);

      at Object.raw (src/__tests__/integration/crossRoleWorkflows.test.ts:75:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cross-Role Workflow Integration Tests › Complete Inventory Management Workflow › should handle inventory stock-out scenarios

    expect(received).toBeDefined()

    Received: undefined

      142 |       } else {
      143 |         // If order goes through, should be marked appropriately
    > 144 |         expect(order).toBeDefined();
          |                       ^
      145 |       }
      146 |     });
      147 |

      at Object.toBeDefined (src/__tests__/integration/crossRoleWorkflows.test.ts:144:23)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cross-Role Workflow Integration Tests › Complete Inventory Management Workflow › should handle concurrent inventory operations

    TypeError: _supabase.supabase.raw is not a function

      154 |           .from('inventory_items')
      155 |           .update({ 
    > 156 |             quantity: supabase.raw('quantity - 1'),
          |                                ^
      157 |             updated_at: new Date().toISOString(),
      158 |           })
      159 |           .eq('product_id', productId)

      at raw (src/__tests__/integration/crossRoleWorkflows.test.ts:156:32)
          at Function.from (<anonymous>)
      at Object.from (src/__tests__/integration/crossRoleWorkflows.test.ts:152:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Workflow Integration Tests › Marketing Campaign Creation to Execution Workflow › should handle complete marketing campaign workflow

    expect(received).toBeNull()

    Received: undefined

      229 |         .insert(promotionData);
      230 |
    > 231 |       expect(promotionError).toBeNull();
          |                              ^
      232 |
      233 |       // Step 3: Executive approves campaign
      234 |       const { error: approvalError } = await supabase

      at Object.toBeNull (src/__tests__/integration/crossRoleWorkflows.test.ts:231:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cross-Role Workflow Integration Tests › Marketing Campaign Creation to Execution Workflow › should track campaign performance across customer interactions

    expect(received).toBeNull()

    Received: undefined

      284 |           });
      285 |
    > 286 |         expect(error).toBeNull();
          |                       ^
      287 |       }
      288 |
      289 |       // Verify tracking data

      at Object.toBeNull (src/__tests__/integration/crossRoleWorkflows.test.ts:286:23)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cross-Role Workflow Integration Tests › Marketing Campaign Creation to Execution Workflow › should handle campaign budget limits and spending

    expect(received).toBeNull()

    Received: undefined

      321 |         .insert(spendingData);
      322 |
    > 323 |       expect(spendError).toBeNull();
          |                          ^
      324 |
      325 |       // Verify budget tracking
      326 |       const { data: totalSpend } = await supabase

      at Object.toBeNull (src/__tests__/integration/crossRoleWorkflows.test.ts:323:26)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cross-Role Workflow Integration Tests › Executive Analytics Pipeline Workflow › should validate complete analytics data flow

    TypeError: _this.collectSalesData is not a function

      342 |       // Step 1: Operational data collection (from various roles)
      343 |       const operationalData = {
    > 344 |         sales: await this.collectSalesData(),
          |                           ^
      345 |         inventory: await this.collectInventoryData(),
      346 |         marketing: await this.collectMarketingData(),
      347 |         customer: await this.collectCustomerData(),

      at Object.collectSalesData (src/__tests__/integration/crossRoleWorkflows.test.ts:344:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Workflow Integration Tests › Executive Analytics Pipeline Workflow › should generate business intelligence insights

    TypeError: _this.generateBusinessInsights is not a function

      405 |     it('should generate business intelligence insights', async () => {
      406 |       // Test BI insight generation workflow
    > 407 |       const insights = await this.generateBusinessInsights();
          |                                   ^
      408 |       
      409 |       expect(insights).toBeDefined();
      410 |       expect(insights.revenue_trends).toBeDefined();

      at Object.generateBusinessInsights (src/__tests__/integration/crossRoleWorkflows.test.ts:407:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Workflow Integration Tests › Error Handling and Recovery Workflows › should handle system failures gracefully across all roles

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      441 |           
      442 |           // Error should be logged for monitoring
    > 443 |           expect(securityAuditing.logAuditEvent).toHaveBeenCalled();
          |                                                  ^
      444 |         }
      445 |       }
      446 |     });

      at Object.toHaveBeenCalled (src/__tests__/integration/crossRoleWorkflows.test.ts:443:50)
          at Generator.throw (<anonymous>)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)

  ● Cross-Role Workflow Integration Tests › Error Handling and Recovery Workflows › should recover from network interruptions

    TypeError: _this.syncOfflineOperation is not a function

      498 |         // Simulate coming back online and syncing
      499 |         const syncResults = await Promise.allSettled(
    > 500 |           offlineOperations.map(op => this.syncOfflineOperation(op))
          |                                            ^
      501 |         );
      502 |
      503 |         const successfulSyncs = syncResults.filter(r => r.status === 'fulfilled').length;

      at syncOfflineOperation (src/__tests__/integration/crossRoleWorkflows.test.ts:500:44)
          at Array.map (<anonymous>)
      at map (src/__tests__/integration/crossRoleWorkflows.test.ts:500:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/__tests__/integration/crossRoleWorkflows.test.ts:485:32)
      at Object.networkRecoveryTest (src/__tests__/integration/crossRoleWorkflows.test.ts:507:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Workflow Integration Tests › Multi-User Concurrent Scenarios › should handle concurrent user operations

    TypeError: _this.simulateUserSession is not a function

      514 |       const concurrentUsers = 10;
      515 |       const concurrentOperations = Array.from({ length: concurrentUsers }, (_, i) => 
    > 516 |         this.simulateUserSession(`user-${i}`)
          |              ^
      517 |       );
      518 |
      519 |       const results = await Promise.allSettled(concurrentOperations);

      at simulateUserSession (src/__tests__/integration/crossRoleWorkflows.test.ts:516:14)
          at Function.from (<anonymous>)
      at Object.from (src/__tests__/integration/crossRoleWorkflows.test.ts:515:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Workflow Integration Tests › Multi-User Concurrent Scenarios › should maintain system performance under load

    TypeError: _this.simulateCustomerActivity is not a function

      529 |       // Simulate high load across all role types
      530 |       const loadOperations = [
    > 531 |         ...Array.from({ length: 20 }, () => this.simulateCustomerActivity()),
          |                                                  ^
      532 |         ...Array.from({ length: 5 }, () => this.simulateStaffActivity()),
      533 |         ...Array.from({ length: 2 }, () => this.simulateAdminActivity()),
      534 |       ];

      at simulateCustomerActivity (src/__tests__/integration/crossRoleWorkflows.test.ts:531:50)
          at Function.from (<anonymous>)
      at Object.from (src/__tests__/integration/crossRoleWorkflows.test.ts:531:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/__tests__/deployment/environmentConfig.test.ts
  ● Environment Configuration Tests › Environment Variable Validation › should validate Supabase configuration

    expect(received).toMatch(expected)

    Expected pattern: /^eyJ[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/
    Received string:  "sb_publishable_zYP0EsARS8pNo5YloCC9sw_TzgFAmHB"

      90 |       
      91 |       // Validate anon key format (JWT-like structure)
    > 92 |       expect(supabaseAnonKey).toMatch(/^eyJ[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/);
         |                               ^
      93 |
      94 |       // Test connection
      95 |       const { data, error } = await supabase

      at Object.toMatch (src/__tests__/deployment/environmentConfig.test.ts:92:31)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Environment Configuration Tests › Security Configuration Validation › should validate authentication configuration

    expect(received).toBeGreaterThanOrEqual(expected)

    Expected: >= 32
    Received:    0

      339 |       };
      340 |
    > 341 |       expect(authConfig.jwt_secret_length).toBeGreaterThanOrEqual(32);
          |                                            ^
      342 |       expect(authConfig.session_timeout).toBeGreaterThan(0);
      343 |       expect(authConfig.max_login_attempts).toBeGreaterThan(0);
      344 |       expect(authConfig.lockout_duration).toBeGreaterThan(0);

      at Object.toBeGreaterThanOrEqual (src/__tests__/deployment/environmentConfig.test.ts:341:44)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx (22.646 s)
  ● End-to-End Inventory Workflow Integration Tests (RED Phase) › Complete Stock Update Workflow › should execute stock update → audit trail → cache invalidation flow

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      129 |       );
      130 |
    > 131 |       await waitFor(() => {
          |                    ^
      132 |         expect(inventoryResult.current.isSuccess).toBe(true);
      133 |       });
      134 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx:131:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● End-to-End Inventory Workflow Integration Tests (RED Phase) › Complete Stock Update Workflow › should handle partial failures gracefully in bulk operations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      250 |       });
      251 |
    > 252 |       await waitFor(() => {
          |                    ^
      253 |         expect(result.current.isSuccess).toBe(true);
      254 |       });
      255 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx:252:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● End-to-End Inventory Workflow Integration Tests (RED Phase) › Role Permission Enforcement › should enforce role permissions across schema → service → hook layers

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      285 |       });
      286 |
    > 287 |       await waitFor(() => {
          |                    ^
      288 |         expect(result.current.isError).toBe(true);
      289 |       });
      290 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx:287:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● End-to-End Inventory Workflow Integration Tests (RED Phase) › Role Permission Enforcement › should handle read-only access for restricted users

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      331 |       );
      332 |
    > 333 |       await waitFor(() => {
          |                    ^
      334 |         expect(readResult.current.isSuccess).toBe(true);
      335 |       });
      336 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx:333:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● End-to-End Inventory Workflow Integration Tests (RED Phase) › Real-time Update Propagation › should propagate inventory changes to low stock alerts

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      403 |       );
      404 |
    > 405 |       await waitFor(() => {
          |                    ^
      406 |         expect(lowStockResult.current.isSuccess).toBe(true);
      407 |       });
      408 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx:405:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● End-to-End Inventory Workflow Integration Tests (RED Phase) › Error Recovery Workflows › should recover from network errors with retry mechanism

    thrown: "Exceeded timeout of 10000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      442 |   // Integration Test 4: Error Recovery Workflows
      443 |   describe('Error Recovery Workflows', () => {
    > 444 |     it('should recover from network errors with retry mechanism', async () => {
          |     ^
      445 |       const inventoryItem = {
      446 |         id: 'inv-123',
      447 |         productId: 'product-1',

      at it (src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx:444:5)
      at describe (src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx:443:3)
      at Object.describe (src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx:67:1)

  ● End-to-End Inventory Workflow Integration Tests (RED Phase) › Error Recovery Workflows › should handle optimistic update rollback on failure

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      507 |       );
      508 |
    > 509 |       await waitFor(() => {
          |                    ^
      510 |         expect(inventoryResult.current.isSuccess).toBe(true);
      511 |       });
      512 |

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx:509:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● End-to-End Inventory Workflow Integration Tests (RED Phase) › Cross-layer Data Consistency › should maintain data consistency across inventory items and movements

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      594 |       );
      595 |
    > 596 |       await waitFor(() => {
          |                    ^
      597 |         expect(inventoryResult.current.isSuccess).toBe(true);
      598 |         expect(movementResult.current.isSuccess).toBe(true);
      599 |       });

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/endToEndWorkflow.test.tsx:596:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/components/role-based/__tests__/PermissionGate.test.tsx (22.709 s)
  ● PermissionGate Component › Loading States › should show loading state when user role is loading

    TypeError: _reactNative.StyleSheet.flatten is not a function

      84 |       );
      85 |
    > 86 |       expect(getByTestId('permission-gate-loading')).toBeTruthy();
         |              ^
      87 |       expect(getByText('Checking permissions...')).toBeTruthy();
      88 |     });
      89 |

      at flatten (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:79:32)
      at isSubtreeInaccessible (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:38:38)
      at node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:64
          at Array.filter (<anonymous>)
      at filter (node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:18)
      at queryAllByTestIdFn (node_modules/@testing-library/react-native/src/queries/test-id.ts:32:19)
      at getFn (node_modules/@testing-library/react-native/src/queries/make-queries.ts:154:48)
      at Object.getByTestId (src/components/role-based/__tests__/PermissionGate.test.tsx:86:14)

  ● PermissionGate Component › Loading States › should show loading state when screen permissions are being checked

    TypeError: _reactNative.StyleSheet.flatten is not a function

      104 |       );
      105 |
    > 106 |       expect(getByTestId('permission-gate-loading')).toBeTruthy();
          |              ^
      107 |     });
      108 |
      109 |     it('should use custom loading component when provided', () => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:79:32)
      at isSubtreeInaccessible (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:38:38)
      at node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:64
          at Array.filter (<anonymous>)
      at filter (node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:18)
      at queryAllByTestIdFn (node_modules/@testing-library/react-native/src/queries/test-id.ts:32:19)
      at getFn (node_modules/@testing-library/react-native/src/queries/make-queries.ts:154:48)
      at Object.getByTestId (src/components/role-based/__tests__/PermissionGate.test.tsx:106:14)

  ● PermissionGate Component › Loading States › should use custom loading component when provided

    TypeError: _reactNative.StyleSheet.flatten is not a function

      124 |       );
      125 |
    > 126 |       expect(getByText('Custom Loading...')).toBeTruthy();
          |              ^
      127 |     });
      128 |
      129 |     it('should not show loading when showLoading is false', () => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:79:32)
      at isSubtreeInaccessible (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:38:38)
      at node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:64
          at Array.filter (<anonymous>)
      at filter (node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:18)
      at queryAllByTextFn (node_modules/@testing-library/react-native/src/queries/text.ts:22:19)
      at getFn (node_modules/@testing-library/react-native/src/queries/make-queries.ts:154:48)
      at Object.getByText (src/components/role-based/__tests__/PermissionGate.test.tsx:126:14)

  ● PermissionGate Component › Loading States › should not show loading when showLoading is false

    TypeError: _reactNative.StyleSheet.flatten is not a function

      143 |
      144 |       expect(queryByTestId('permission-gate-loading')).toBeFalsy();
    > 145 |       expect(queryByTestId('permission-gate-denied')).toBeTruthy();
          |              ^
      146 |     });
      147 |   });
      148 |

      at flatten (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:79:32)
      at isSubtreeInaccessible (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:38:38)
      at node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:64
          at Array.filter (<anonymous>)
      at filter (node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:18)
      at queryAllByTestIdFn (node_modules/@testing-library/react-native/src/queries/test-id.ts:32:19)
      at singleQueryFn (node_modules/@testing-library/react-native/src/queries/make-queries.ts:135:48)
      at Object.queryByTestId (src/components/role-based/__tests__/PermissionGate.test.tsx:145:14)

  ● PermissionGate Component › Permission Checks › should grant access when user has required role

    _reactNative.StyleSheet.flatten is not a function

      166 |       );
      167 |
    > 168 |       await waitFor(() => {
          |                    ^
      169 |         expect(getByTestId('permission-gate-granted')).toBeTruthy();
      170 |         expect(getByText('Protected Content')).toBeTruthy();
      171 |         expect(mockValidationMonitor.recordPatternSuccess).toHaveBeenCalledWith({

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:168:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Permission Checks › should deny access when user lacks required role

    _reactNative.StyleSheet.flatten is not a function

      185 |       );
      186 |
    > 187 |       await waitFor(() => {
          |                    ^
      188 |         expect(getByTestId('permission-gate-denied')).toBeTruthy();
      189 |         expect(getByText('Access Denied')).toBeTruthy();
      190 |         expect(getByText('Required role: admin or staff')).toBeTruthy();

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:187:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Permission Checks › should grant access when user has required permissions

    _reactNative.StyleSheet.flatten is not a function

      205 |       );
      206 |
    > 207 |       await waitFor(() => {
          |                    ^
      208 |         expect(getByTestId('permission-gate-granted')).toBeTruthy();
      209 |         expect(getByText('Protected Content')).toBeTruthy();
      210 |       });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:207:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Permission Checks › should deny access when user lacks required permissions

    _reactNative.StyleSheet.flatten is not a function

      219 |       );
      220 |
    > 221 |       await waitFor(() => {
          |                    ^
      222 |         expect(getByTestId('permission-gate-denied')).toBeTruthy();
      223 |         expect(getByText('Missing permission: admin:delete')).toBeTruthy();
      224 |       });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:221:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Permission Checks › should check screen access permissions

    _reactNative.StyleSheet.flatten is not a function

      241 |       );
      242 |
    > 243 |       await waitFor(() => {
          |                    ^
      244 |         expect(getByTestId('permission-gate-granted')).toBeTruthy();
      245 |         expect(getByText('Protected Content')).toBeTruthy();
      246 |       });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:243:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Permission Checks › should deny access when screen permission denied

    _reactNative.StyleSheet.flatten is not a function

      263 |       );
      264 |
    > 265 |       await waitFor(() => {
          |                    ^
      266 |         expect(getByTestId('permission-gate-denied')).toBeTruthy();
      267 |         expect(getByText('No access to AdminScreen')).toBeTruthy();
      268 |       });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:265:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Permission Checks › should handle screen permission errors

    _reactNative.StyleSheet.flatten is not a function

      285 |       );
      286 |
    > 287 |       await waitFor(() => {
          |                    ^
      288 |         expect(getByTestId('permission-gate-denied')).toBeTruthy();
      289 |         expect(getByText('Permission service unavailable')).toBeTruthy();
      290 |       });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:287:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Unauthenticated Users › should deny access for unauthenticated users

    _reactNative.StyleSheet.flatten is not a function

      308 |       );
      309 |
    > 310 |       await waitFor(() => {
          |                    ^
      311 |         expect(getByTestId('permission-gate-denied')).toBeTruthy();
      312 |         expect(getByText('User not authenticated')).toBeTruthy();
      313 |       });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:310:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Inversion Logic › should invert permission check when invert=true

    _reactNative.StyleSheet.flatten is not a function

      324 |       );
      325 |
    > 326 |       await waitFor(() => {
          |                    ^
      327 |         expect(getByTestId('permission-gate-granted')).toBeTruthy();
      328 |         expect(getByText('Protected Content')).toBeTruthy();
      329 |       });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:326:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Inversion Logic › should deny access when invert=true and user has role

    _reactNative.StyleSheet.flatten is not a function

      348 |       );
      349 |
    > 350 |       await waitFor(() => {
          |                    ^
      351 |         expect(getByTestId('permission-gate-denied')).toBeTruthy();
      352 |       });
      353 |     });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:350:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Fallback Handling › should render custom fallback component

    _reactNative.StyleSheet.flatten is not a function

      365 |       );
      366 |
    > 367 |       await waitFor(() => {
          |                    ^
      368 |         expect(getByText('Custom Fallback Content')).toBeTruthy();
      369 |       });
      370 |     });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:367:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Fallback Handling › should render fallback function component with reason

    _reactNative.StyleSheet.flatten is not a function

      382 |       );
      383 |
    > 384 |       await waitFor(() => {
          |                    ^
      385 |         expect(getByText('Access Denied: Required role: admin')).toBeTruthy();
      386 |       });
      387 |     });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:384:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Fallback Handling › should render nothing when fallback is null

    'container' property has been renamed to 'UNSAFE_root'.

    Consider using 'root' property which returns root host element.

      388 |
      389 |     it('should render nothing when fallback is null', async () => {
    > 390 |       const { container } = render(
          |               ^
      391 |         <PermissionGate roles={['admin']} fallback={null}>
      392 |           <TestContent />
      393 |         </PermissionGate>,

      at Object.get (node_modules/@testing-library/react-native/src/render.tsx:130:13)
      at Object.container (src/components/role-based/__tests__/PermissionGate.test.tsx:390:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Combined Permission Checks › should require both role and permission when both specified

    _reactNative.StyleSheet.flatten is not a function

      420 |       );
      421 |
    > 422 |       await waitFor(() => {
          |                    ^
      423 |         expect(getByTestId('permission-gate-granted')).toBeTruthy();
      424 |         expect(getByText('Protected Content')).toBeTruthy();
      425 |       });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:422:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Combined Permission Checks › should deny when role matches but permission missing

    _reactNative.StyleSheet.flatten is not a function

      444 |       );
      445 |
    > 446 |       await waitFor(() => {
          |                    ^
      447 |         expect(getByTestId('permission-gate-denied')).toBeTruthy();
      448 |         expect(getByText('Missing permission: admin:delete')).toBeTruthy();
      449 |       });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:446:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Admin Override › should grant admin users access to all permissions

    _reactNative.StyleSheet.flatten is not a function

      470 |       );
      471 |
    > 472 |       await waitFor(() => {
          |                    ^
      473 |         expect(getByTestId('permission-gate-granted')).toBeTruthy();
      474 |         expect(getByText('Protected Content')).toBeTruthy();
      475 |       });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:472:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● PermissionGate Component › Accessibility and Testing › should provide proper test IDs

    _reactNative.StyleSheet.flatten is not a function

      486 |       );
      487 |
    > 488 |       await waitFor(() => {
          |                    ^
      489 |         expect(getByTestId('custom-gate-granted')).toBeTruthy();
      490 |       });
      491 |     });

      at Object.<anonymous> (src/components/role-based/__tests__/PermissionGate.test.tsx:488:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/tests/services.test.ts
  ● Services Test Suite › ErrorRecoveryService › should recover from payment failure with retry strategy

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      "recover_from_error_atomic",
      Object {
    -   "p_error_type": "payment_failed",
    -   "p_metadata": Object {
    +   "input_error_type": "payment_failed",
    +   "input_metadata": Object {
          "amount": 21.6,
          "paymentMethod": "credit_card",
        },
    -   "p_operation": "payment_processing",
    -   "p_order_id": "test-order-123",
    -   "p_original_error": "Payment gateway timeout",
    -   "p_recovery_strategy": "retry",
    -   "p_user_id": "test-user-123",
    +   "input_operation": "payment_processing",
    +   "input_order_id": "test-order-123",
    +   "input_original_error": undefined,
    +   "input_retry_count": undefined,
    +   "input_user_id": "test-user-123",
      },

    Number of calls: 1

      110 |       });
      111 |
    > 112 |       expect(supabase.rpc).toHaveBeenCalledWith('recover_from_error_atomic', {
          |                            ^
      113 |         p_error_type: 'payment_failed',
      114 |         p_order_id: mockOrder.id,
      115 |         p_user_id: mockUser.id,

      at Object.toHaveBeenCalledWith (src/tests/services.test.ts:112:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Services Test Suite › ErrorRecoveryService › should handle stock update failure with compensation

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

      154 |
      155 |       expect(result.compensationApplied).toBe(true);
    > 156 |       expect(result.actionsTaken).toContain('stock_restored');
          |                                   ^
      157 |     });
      158 |
      159 |     it('should escalate critical errors to manual intervention', async () => {

      at Object.toContain (src/tests/services.test.ts:156:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Services Test Suite › ErrorRecoveryService › should escalate critical errors to manual intervention

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      181 |       });
      182 |
    > 183 |       expect(result.manualReviewRequired).toBe(true);
          |                                           ^
      184 |       expect(result.actionsTaken).toContain('admin_notified');
      185 |     });
      186 |

      at Object.toBe (src/tests/services.test.ts:183:43)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Services Test Suite › ErrorRecoveryService › should handle RPC function errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"action": "manual_intervention", "attempts": NaN, "compensationApplied": false, "error": "Order not found", "message": "Recovery RPC failed: Order not found", "recovered": false, "success": false}

      193 |       (supabase.rpc as jest.Mock).mockResolvedValue(mockRpcResponse);
      194 |
    > 195 |       await expect(ErrorRecoveryService.recoverFromError({
          |             ^
      196 |         errorType: 'payment_failed',
      197 |         orderId: 'invalid-order-id',
      198 |         userId: mockUser.id,

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (src/tests/services.test.ts:195:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › ErrorRecoveryService › should validate required parameters

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"action": "manual_intervention", "attempts": NaN, "compensationApplied": false, "error": "Order not found", "message": "Recovery RPC failed: Order not found", "recovered": false, "success": false}

      205 |
      206 |     it('should validate required parameters', async () => {
    > 207 |       await expect(ErrorRecoveryService.recoverFromError({
          |             ^
      208 |         errorType: 'payment_failed',
      209 |         orderId: '',
      210 |         userId: mockUser.id,

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (src/tests/services.test.ts:207:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › NotificationService › should send order confirmation notification successfully

    TypeError: Cannot read properties of undefined (reading 'id')

      302 |           type,
      303 |           title: 'Farm Stand Notification',
    > 304 |           body: `Update for your order #${order.id.slice(-6)}`,
          |                                                 ^
      305 |           data: { orderId: order.id }
      306 |         };
      307 |     }

      at Function.id [as getNotificationTemplate] (src/services/notificationService.ts:304:49)
      at Function.getNotificationTemplate (src/services/notificationService.ts:108:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Function.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Function.apply [as sendNotification] (src/services/notificationService.ts:103:39)
      at Object.sendNotification (src/tests/services.test.ts:235:48)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › NotificationService › should handle pickup ready notification with SMS

    TypeError: Cannot read properties of undefined (reading 'id')

      302 |           type,
      303 |           title: 'Farm Stand Notification',
    > 304 |           body: `Update for your order #${order.id.slice(-6)}`,
          |                                                 ^
      305 |           data: { orderId: order.id }
      306 |         };
      307 |     }

      at Function.id [as getNotificationTemplate] (src/services/notificationService.ts:304:49)
      at Function.getNotificationTemplate (src/services/notificationService.ts:108:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Function.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Function.apply [as sendNotification] (src/services/notificationService.ts:103:39)
      at Object.sendNotification (src/tests/services.test.ts:282:48)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › NotificationService › should handle notification delivery failures

    TypeError: Cannot read properties of undefined (reading 'id')

      302 |           type,
      303 |           title: 'Farm Stand Notification',
    > 304 |           body: `Update for your order #${order.id.slice(-6)}`,
          |                                                 ^
      305 |           data: { orderId: order.id }
      306 |         };
      307 |     }

      at Function.id [as getNotificationTemplate] (src/services/notificationService.ts:304:49)
      at Function.getNotificationTemplate (src/services/notificationService.ts:108:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Function.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Function.apply [as sendNotification] (src/services/notificationService.ts:103:39)
      at Object.sendNotification (src/tests/services.test.ts:310:48)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › NotificationService › should validate notification parameters

    expect(received).rejects.toThrow(expected)

    Expected substring: "User ID is required"
    Received message:   "Cannot read properties of undefined (reading 'id')"

          302 |           type,
          303 |           title: 'Farm Stand Notification',
        > 304 |           body: `Update for your order #${order.id.slice(-6)}`,
              |                                                 ^
          305 |           data: { orderId: order.id }
          306 |         };
          307 |     }

      at Function.id [as getNotificationTemplate] (src/services/notificationService.ts:304:49)
      at Function.getNotificationTemplate (src/services/notificationService.ts:108:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Function.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Function.apply [as sendNotification] (src/services/notificationService.ts:103:39)
      at Object.sendNotification (src/tests/services.test.ts:327:40)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (src/tests/services.test.ts:337:19)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › PickupReschedulingService › should reschedule pickup successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "reschedule_pickup_atomic", {"p_new_pickup_date": "2025-08-16", "p_new_pickup_time": "16:00", "p_order_id": "test-order-123", "p_original_pickup_date": undefined, "p_original_pickup_time": undefined, "p_reason": "Schedule conflict", "p_requested_by": "customer", "p_user_id": "test-user-123"}

    Number of calls: 0

      364 |       });
      365 |
    > 366 |       expect(supabase.rpc).toHaveBeenCalledWith('reschedule_pickup_atomic', {
          |                            ^
      367 |         p_order_id: mockOrder.id,
      368 |         p_user_id: mockUser.id,
      369 |         p_original_pickup_date: undefined, // Will be fetched from order

      at Object.toHaveBeenCalledWith (src/tests/services.test.ts:366:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Services Test Suite › PickupReschedulingService › should handle staff-initiated reschedule with approval

    expect(received).toBe(expected) // Object.is equality

    Expected: "approved"
    Received: undefined

      408 |       });
      409 |
    > 410 |       expect(result.status).toBe('approved');
          |                             ^
      411 |       expect(result.customerNotified).toBe(true);
      412 |     });
      413 |

      at Object.toBe (src/tests/services.test.ts:410:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Services Test Suite › PickupReschedulingService › should validate pickup time constraints

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"error": "New pickup time must be in the future", "message": "Reschedule validation failed: New pickup time must be in the future", "success": false}

      423 |       (supabase.rpc as jest.Mock).mockResolvedValue(mockRpcResponse);
      424 |
    > 425 |       await expect(PickupReschedulingService.reschedulePickup({
          |             ^
      426 |         orderId: mockOrder.id,
      427 |         userId: mockUser.id,
      428 |         newPickupDate: '2025-08-01', // Past date

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (src/tests/services.test.ts:425:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › PickupReschedulingService › should handle order not found error

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"error": "New pickup time must be in the future", "message": "Reschedule validation failed: New pickup time must be in the future", "success": false}

      441 |       (supabase.rpc as jest.Mock).mockResolvedValue(mockRpcResponse);
      442 |
    > 443 |       await expect(PickupReschedulingService.reschedulePickup({
          |             ^
      444 |         orderId: 'invalid-order-id',
      445 |         userId: mockUser.id,
      446 |         newPickupDate: '2025-08-16',

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (src/tests/services.test.ts:443:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › PickupReschedulingService › should broadcast reschedule events

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "pickup-rescheduled", {"action": "pickup_rescheduled", "newPickupDate": "2025-08-16", "newPickupTime": "16:00", "orderId": "test-order-123", "timestamp": Any<String>, "userId": "test-user-123"}

    Number of calls: 0

      476 |       });
      477 |
    > 478 |       expect(sendOrderBroadcast).toHaveBeenCalledWith('pickup-rescheduled', {
          |                                  ^
      479 |         userId: mockUser.id,
      480 |         orderId: mockOrder.id,
      481 |         newPickupDate: '2025-08-16',

      at Object.toHaveBeenCalledWith (src/tests/services.test.ts:478:34)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Services Test Suite › NoShowHandlingService › should process no-show with stock restoration

    TypeError: _noShowHandlingService.NoShowHandlingService.processNoShow is not a function

      507 |       (supabase.rpc as jest.Mock).mockResolvedValue(mockRpcResponse);
      508 |
    > 509 |       const result = await NoShowHandlingService.processNoShow({
          |                                                  ^
      510 |         orderId: mockOrder.id,
      511 |         userId: mockUser.id,
      512 |         originalPickupDate: mockOrder.pickupDate,

      at Object.processNoShow (src/tests/services.test.ts:509:50)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › NoShowHandlingService › should skip no-show processing for recent reschedule

    TypeError: _noShowHandlingService.NoShowHandlingService.processNoShow is not a function

      549 |       (supabase.rpc as jest.Mock).mockResolvedValue(mockRpcResponse);
      550 |
    > 551 |       const result = await NoShowHandlingService.processNoShow({
          |                                                  ^
      552 |         orderId: mockOrder.id,
      553 |         userId: mockUser.id,
      554 |         originalPickupDate: mockOrder.pickupDate,

      at Object.processNoShow (src/tests/services.test.ts:551:50)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › NoShowHandlingService › should handle partial stock restoration failures

    TypeError: _noShowHandlingService.NoShowHandlingService.processNoShow is not a function

      582 |       (supabase.rpc as jest.Mock).mockResolvedValue(mockRpcResponse);
      583 |
    > 584 |       const result = await NoShowHandlingService.processNoShow({
          |                                                  ^
      585 |         orderId: mockOrder.id,
      586 |         userId: mockUser.id,
      587 |         originalPickupDate: mockOrder.pickupDate,

      at Object.processNoShow (src/tests/services.test.ts:584:50)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › NoShowHandlingService › should validate no-show parameters

    TypeError: _noShowHandlingService.NoShowHandlingService.processNoShow is not a function

      595 |
      596 |     it('should validate no-show parameters', async () => {
    > 597 |       await expect(NoShowHandlingService.processNoShow({
          |                                          ^
      598 |         orderId: '',
      599 |         userId: mockUser.id,
      600 |         originalPickupDate: mockOrder.pickupDate,

      at Object.processNoShow (src/tests/services.test.ts:597:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › NoShowHandlingService › should handle grace period validation

    TypeError: _noShowHandlingService.NoShowHandlingService.processNoShow is not a function

      605 |
      606 |     it('should handle grace period validation', async () => {
    > 607 |       await expect(NoShowHandlingService.processNoShow({
          |                                          ^
      608 |         orderId: mockOrder.id,
      609 |         userId: mockUser.id,
      610 |         originalPickupDate: mockOrder.pickupDate,

      at Object.processNoShow (src/tests/services.test.ts:607:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Services Test Suite › Service Integration › should handle service-to-service communication

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

      652 |       });
      653 |
    > 654 |       expect(recoveryResult.actionsTaken).toContain('customer_notification_scheduled');
          |                                           ^
      655 |
      656 |       // Notification should be sent as part of recovery
      657 |       if (recoveryResult.actionsTaken?.includes('customer_notification_scheduled')) {

      at Object.toContain (src/tests/services.test.ts:654:43)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Services Test Suite › Service Integration › should handle atomic operations across services

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      694 |       });
      695 |
    > 696 |       expect(rescheduleResult.success).toBe(true);
          |                                        ^
      697 |
      698 |       // No-show processing should now skip due to recent reschedule
      699 |       const mockNoShowResponse = {

      at Object.toBe (src/tests/services.test.ts:696:40)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Services Test Suite › Service Performance › should handle concurrent service calls

    TypeError: Cannot read properties of undefined (reading 'id')

      302 |           type,
      303 |           title: 'Farm Stand Notification',
    > 304 |           body: `Update for your order #${order.id.slice(-6)}`,
          |                                                 ^
      305 |           data: { orderId: order.id }
      306 |         };
      307 |     }

      at Function.id [as getNotificationTemplate] (src/services/notificationService.ts:304:49)
      at Function.getNotificationTemplate (src/services/notificationService.ts:108:42)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Function.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at Function.apply [as sendNotification] (src/services/notificationService.ts:103:39)
      at sendNotification (src/tests/services.test.ts:755:29)
          at Function.from (<anonymous>)
      at Object.from (src/tests/services.test.ts:754:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/__tests__/performance/frontendPerformance.test.tsx
  ● Frontend Performance Tests › React Query Cache Efficiency › should efficiently manage cache size

    TypeError: queryClient.getQueryCache is not a function

      161 |
      162 |     it('should efficiently manage cache size', () => {
    > 163 |       const cacheEntries = queryClient.getQueryCache().getAll();
          |                                        ^
      164 |       
      165 |       // Initially should be empty
      166 |       expect(cacheEntries.length).toBe(0);

      at Object.getQueryCache (src/__tests__/performance/frontendPerformance.test.tsx:163:40)

  ● Frontend Performance Tests › React Query Cache Efficiency › should invalidate queries efficiently

    TypeError: queryClient.getQueryCache is not a function

      203 |       
      204 |       // Verify invalidation worked
    > 205 |       const queries = queryClient.getQueryCache().getAll();
          |                                   ^
      206 |       const productQueries = queries.filter(q => 
      207 |         q.queryKey[0] === 'products'
      208 |       );

      at Object.getQueryCache (src/__tests__/performance/frontendPerformance.test.tsx:205:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Frontend Performance Tests › Component Render Performance › should optimize memo usage

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: 2

      275 |       rerender(<MemoizedComponent data={sameData} />);
      276 |       
    > 277 |       expect(renderCount).toBe(1); // Should only render once
          |                           ^
      278 |     });
      279 |   });
      280 |

      at Object.toBe (src/__tests__/performance/frontendPerformance.test.tsx:277:27)

FAIL src/hooks/inventory/__tests__/useBulkOperations.test.tsx
  ● Bulk Operations Hooks › useBulkStockUpdate › should execute bulk stock update successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: [{"currentStock": 50, "inventoryItemId": "inv-1", "performedBy": "test-user-1", "reason": "Bulk restock"}, {"currentStock": 25, "inventoryItemId": "inv-2", "performedBy": "test-user-1", "reason": "Bulk adjustment"}]

    Number of calls: 0

      149 |       console.log('Result data:', result.current.data);
      150 |       
    > 151 |       expect(mockInventoryService.batchUpdateStock).toHaveBeenCalledWith(mockBulkUpdates);
          |                                                     ^
      152 |       expect(result.current.data).toEqual(mockBulkResult);
      153 |     });
      154 |

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useBulkOperations.test.tsx:151:53)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Bulk Operations Hooks › useBulkStockUpdate › should invalidate affected queries on success

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

      175 |
      176 |       // Should set updated items in cache
    > 177 |       expect(setQueryDataSpy).toHaveBeenCalledTimes(2); // One for each success item
          |                               ^
      178 |
      179 |       // Should invalidate dashboard, alerts, and low stock queries
      180 |       expect(invalidateQueriesSpy).toHaveBeenCalled();

      at Object.toHaveBeenCalledTimes (src/hooks/inventory/__tests__/useBulkOperations.test.tsx:177:31)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Bulk Operations Hooks › useBulkStockUpdate › should invalidate all queries on complete failure

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      242 |
      243 |       // Should invalidate all inventory queries for consistency
    > 244 |       expect(invalidateQueriesSpy).toHaveBeenCalled();
          |                                    ^
      245 |     });
      246 |   });
      247 |

      at Object.toHaveBeenCalled (src/hooks/inventory/__tests__/useBulkOperations.test.tsx:244:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Bulk Operations Hooks › Error Handling and Edge Cases › should handle empty bulk update arrays

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: []

    Number of calls: 0

      891 |       });
      892 |
    > 893 |       expect(mockInventoryService.batchUpdateStock).toHaveBeenCalledWith([]);
          |                                                     ^
      894 |     });
      895 |   });
      896 | });

      at Object.toHaveBeenCalledWith (src/hooks/inventory/__tests__/useBulkOperations.test.tsx:893:53)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/components/role-based/__tests__/RoleBasedButton.test.tsx
  ● RoleBasedButton Component › Basic Functionality › should render button with correct title

    TypeError: _reactNative.StyleSheet.flatten is not a function

      78 |       );
      79 |
    > 80 |       expect(getByText('Test Button')).toBeTruthy();
         |              ^
      81 |     });
      82 |
      83 |     it('should call onPress when user has permission', async () => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:79:32)
      at isSubtreeInaccessible (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:38:38)
      at node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:64
          at Array.filter (<anonymous>)
      at filter (node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:18)
      at queryAllByTextFn (node_modules/@testing-library/react-native/src/queries/text.ts:22:19)
      at getFn (node_modules/@testing-library/react-native/src/queries/make-queries.ts:154:48)
      at Object.getByText (src/components/role-based/__tests__/RoleBasedButton.test.tsx:80:14)

  ● RoleBasedButton Component › Basic Functionality › should call onPress when user has permission

    TypeError: _reactNative.StyleSheet.flatten is not a function

      91 |       );
      92 |
    > 93 |       const button = getByTestId('test-button');
         |                      ^
      94 |       fireEvent.press(button);
      95 |
      96 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:93:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Basic Functionality › should handle disabled prop independently of permissions

    TypeError: _reactNative.StyleSheet.flatten is not a function

      115 |       );
      116 |
    > 117 |       const button = getByTestId('test-button');
          |                      ^
      118 |       fireEvent.press(button);
      119 |
      120 |       expect(mockOnPress).not.toHaveBeenCalled();

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:117:22)

  ● RoleBasedButton Component › Basic Functionality › should show loading state

    TypeError: _reactNative.StyleSheet.flatten is not a function

      131 |       );
      132 |
    > 133 |       expect(getByText('Test Button...')).toBeTruthy();
          |              ^
      134 |     });
      135 |   });
      136 |

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByText (src/components/role-based/__tests__/RoleBasedButton.test.tsx:133:14)

  ● RoleBasedButton Component › Role-Based Access Control › should allow access when user has required role

    TypeError: _reactNative.StyleSheet.flatten is not a function

      157 |       );
      158 |
    > 159 |       const button = getByTestId('admin-button');
          |                      ^
      160 |       fireEvent.press(button);
      161 |
      162 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:159:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Role-Based Access Control › should deny access and show message when user lacks required role

    TypeError: _reactNative.StyleSheet.flatten is not a function

      176 |       );
      177 |
    > 178 |       const button = getByTestId('admin-button');
          |                      ^
      179 |       fireEvent.press(button);
      180 |
      181 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:178:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Role-Based Access Control › should handle multiple allowed roles

    TypeError: _reactNative.StyleSheet.flatten is not a function

      215 |       );
      216 |
    > 217 |       const button = getByTestId('staff-button');
          |                      ^
      218 |       fireEvent.press(button);
      219 |
      220 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:217:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Permission-Based Access Control › should allow access when user has required permission

    TypeError: _reactNative.StyleSheet.flatten is not a function

      236 |       );
      237 |
    > 238 |       const button = getByTestId('products-button');
          |                      ^
      239 |       fireEvent.press(button);
      240 |
      241 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:238:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Permission-Based Access Control › should deny access when user lacks required permission

    TypeError: _reactNative.StyleSheet.flatten is not a function

      255 |       );
      256 |
    > 257 |       const button = getByTestId('delete-button');
          |                      ^
      258 |       fireEvent.press(button);
      259 |
      260 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:257:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Permission-Based Access Control › should allow admin users to access all permissions

    TypeError: _reactNative.StyleSheet.flatten is not a function

      289 |       );
      290 |
    > 291 |       const button = getByTestId('any-button');
          |                      ^
      292 |       fireEvent.press(button);
      293 |
      294 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:291:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Screen-Based Access Control › should allow access when user can navigate to screen

    TypeError: _reactNative.StyleSheet.flatten is not a function

      318 |       );
      319 |
    > 320 |       const button = getByTestId('admin-nav-button');
          |                      ^
      321 |       fireEvent.press(button);
      322 |
      323 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:320:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Screen-Based Access Control › should deny access when user cannot navigate to screen

    TypeError: _reactNative.StyleSheet.flatten is not a function

      345 |       );
      346 |
    > 347 |       const button = getByTestId('admin-nav-button');
          |                      ^
      348 |       fireEvent.press(button);
      349 |
      350 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:347:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Screen-Based Access Control › should handle navigation permission errors

    TypeError: _reactNative.StyleSheet.flatten is not a function

      377 |       );
      378 |
    > 379 |       const button = getByTestId('admin-nav-button');
          |                      ^
      380 |       fireEvent.press(button);
      381 |
      382 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:379:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Loading States › should show checking state when user role is loading

    TypeError: _reactNative.StyleSheet.flatten is not a function

      404 |       );
      405 |
    > 406 |       expect(getByText('Checking...')).toBeTruthy();
          |              ^
      407 |     });
      408 |
      409 |     it('should show checking state when screen permissions are loading', () => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByText (src/components/role-based/__tests__/RoleBasedButton.test.tsx:406:14)

  ● RoleBasedButton Component › Loading States › should show checking state when screen permissions are loading

    TypeError: _reactNative.StyleSheet.flatten is not a function

      425 |       );
      426 |
    > 427 |       expect(getByText('Checking...')).toBeTruthy();
          |              ^
      428 |     });
      429 |   });
      430 |

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByText (src/components/role-based/__tests__/RoleBasedButton.test.tsx:427:14)

  ● RoleBasedButton Component › Unauthenticated Users › should deny access for unauthenticated users

    TypeError: _reactNative.StyleSheet.flatten is not a function

      447 |       );
      448 |
    > 449 |       const button = getByTestId('test-button');
          |                      ^
      450 |       fireEvent.press(button);
      451 |
      452 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:449:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Custom Messages and Styling › should use custom permission message

    TypeError: _reactNative.StyleSheet.flatten is not a function

      474 |       );
      475 |
    > 476 |       const button = getByTestId('test-button');
          |                      ^
      477 |       fireEvent.press(button);
      478 |
      479 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:476:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Custom Messages and Styling › should not show permission message when showPermissionMessage is false

    TypeError: _reactNative.StyleSheet.flatten is not a function

      498 |       );
      499 |
    > 500 |       const button = getByTestId('test-button');
          |                      ^
      501 |       fireEvent.press(button);
      502 |
      503 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:500:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Custom Messages and Styling › should apply custom disabled style

    TypeError: _reactNative.StyleSheet.flatten is not a function

      520 |       );
      521 |
    > 522 |       const button = getByTestId('test-button');
          |                      ^
      523 |       // Would need to check style application in a real test environment
      524 |       expect(button).toBeTruthy();
      525 |     });

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:522:22)

  ● RoleBasedButton Component › Hide When Denied › should hide button when hideWhenDenied is true and permission denied

    'container' property has been renamed to 'UNSAFE_root'.

    Consider using 'root' property which returns root host element.

      528 |   describe('Hide When Denied', () => {
      529 |     it('should hide button when hideWhenDenied is true and permission denied', async () => {
    > 530 |       const { container } = render(
          |               ^
      531 |         <RoleBasedButton 
      532 |           title="Admin Button" 
      533 |           onPress={mockOnPress}

      at Object.get (node_modules/@testing-library/react-native/src/render.tsx:130:13)
      at Object.container (src/components/role-based/__tests__/RoleBasedButton.test.tsx:530:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Hide When Denied › should show button when hideWhenDenied is true but user has permission

    TypeError: _reactNative.StyleSheet.flatten is not a function

      564 |       );
      565 |
    > 566 |       expect(getByText('Admin Button')).toBeTruthy();
          |              ^
      567 |     });
      568 |
      569 |     it('should show button in loading state even when hideWhenDenied is true', () => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:79:32)
      at isSubtreeInaccessible (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:38:38)
      at node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:64
          at Array.filter (<anonymous>)
      at filter (node_modules/@testing-library/react-native/src/helpers/find-all.ts:34:18)
      at queryAllByTextFn (node_modules/@testing-library/react-native/src/queries/text.ts:22:19)
      at getFn (node_modules/@testing-library/react-native/src/queries/make-queries.ts:154:48)
      at Object.getByText (src/components/role-based/__tests__/RoleBasedButton.test.tsx:566:14)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Hide When Denied › should show button in loading state even when hideWhenDenied is true

    TypeError: _reactNative.StyleSheet.flatten is not a function

      585 |       );
      586 |
    > 587 |       expect(getByText('Checking...')).toBeTruthy();
          |              ^
      588 |     });
      589 |   });
      590 |

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByText (src/components/role-based/__tests__/RoleBasedButton.test.tsx:587:14)

  ● RoleBasedButton Component › Complex Permission Scenarios › should handle multiple permission types

    TypeError: _reactNative.StyleSheet.flatten is not a function

      621 |       );
      622 |
    > 623 |       const button = getByTestId('complex-button');
          |                      ^
      624 |       fireEvent.press(button);
      625 |
      626 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:623:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● RoleBasedButton Component › Complex Permission Scenarios › should deny when any permission check fails

    TypeError: _reactNative.StyleSheet.flatten is not a function

      660 |       );
      661 |
    > 662 |       const button = getByTestId('complex-button');
          |                      ^
      663 |       fireEvent.press(button);
      664 |
      665 |       await waitFor(() => {

      at flatten (node_modules/@testing-library/react-native/src/helpers/map-props.ts:48:29)
      at Object.mapProps [as serialize] (node_modules/@testing-library/react-native/src/helpers/format-element.ts:81:35)
      at printPlugin (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:889:44)
      at format (node_modules/@testing-library/react-native/node_modules/pretty-format/build/index.js:1025:16)
      at formatJson (node_modules/@testing-library/react-native/src/helpers/format-element.ts:67:22)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:99:37)
      at formatErrorMessage (node_modules/@testing-library/react-native/src/queries/make-queries.ts:161:30)
      at Object.getByTestId (src/components/role-based/__tests__/RoleBasedButton.test.tsx:662:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/__tests__/integration/contentWorkflowEndToEnd.test.ts
  ● Content Workflow End-to-End Integration - Phase 3.4.1 (RED Phase) › Complete Workflow Integration (Schema → Service → Hook) › should execute complete content creation and workflow progression

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      63 |         'content_management'
      64 |       );
    > 65 |       expect(hasCreatePermission).toBe(true);
         |                                   ^
      66 |
      67 |       // Step 2: Create content through service layer
      68 |       const createInput: CreateProductContentInput = {

      at Object.toBe (src/__tests__/integration/contentWorkflowEndToEnd.test.ts:65:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow End-to-End Integration - Phase 3.4.1 (RED Phase) › Complete Workflow Integration (Schema → Service → Hook) › should handle workflow validation errors across the stack

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      171 |         testUserId
      172 |       );
    > 173 |       expect(createResult.success).toBe(true);
          |                                    ^
      174 |
      175 |       const contentId = createResult.data!.id;
      176 |

      at Object.toBe (src/__tests__/integration/contentWorkflowEndToEnd.test.ts:173:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow End-to-End Integration - Phase 3.4.1 (RED Phase) › Cross-Layer Cache Coordination › should coordinate cache invalidation across all layers

    TypeError: Cannot read properties of undefined (reading 'id')

      218 |         testUserId
      219 |       );
    > 220 |       const contentId = createResult.data!.id;
          |                                            ^
      221 |
      222 |       // Cache content at multiple query key levels
      223 |       queryClient.setQueryData(

      at Object.id (src/__tests__/integration/contentWorkflowEndToEnd.test.ts:220:44)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow End-to-End Integration - Phase 3.4.1 (RED Phase) › Cross-Layer Cache Coordination › should handle cache invalidation failures gracefully

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 5

      282 |       expect(result.success).toBe(true); // Should succeed on retry
      283 |       expect(result.summary.successCount).toBeGreaterThan(0);
    > 284 |       expect(invalidateQueriesSpy).toHaveBeenCalledTimes(2); // Initial failure + retry
          |                                    ^
      285 |     });
      286 |   });
      287 |

      at Object.toHaveBeenCalledTimes (src/__tests__/integration/contentWorkflowEndToEnd.test.ts:284:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow End-to-End Integration - Phase 3.4.1 (RED Phase) › File Upload Integration with Workflow › should integrate file upload with content workflow

    TypeError: Cannot read properties of undefined (reading 'id')

      300 |         testUserId
      301 |       );
    > 302 |       const contentId = createResult.data!.id;
          |                                            ^
      303 |
      304 |       // Test file upload
      305 |       const mockFileData = {

      at Object.id (src/__tests__/integration/contentWorkflowEndToEnd.test.ts:302:44)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow End-to-End Integration - Phase 3.4.1 (RED Phase) › File Upload Integration with Workflow › should handle file upload errors without affecting content state

    TypeError: Cannot read properties of undefined (reading 'id')

      347 |         testUserId
      348 |       );
    > 349 |       const contentId = createResult.data!.id;
          |                                            ^
      350 |
      351 |       // Test invalid file upload
      352 |       const invalidFileData = {

      at Object.id (src/__tests__/integration/contentWorkflowEndToEnd.test.ts:349:44)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow End-to-End Integration - Phase 3.4.1 (RED Phase) › Performance and Reliability Integration › should maintain performance under load

    expect(received).toBe(expected) // Object.is equality

    Expected: 10
    Received: 0

      397 |       const successCount = results.filter(r => r.success).length;
      398 |
    > 399 |       expect(successCount).toBe(10);
          |                            ^
      400 |       expect(duration).toBeLessThan(5000); // Under 5 seconds for 10 operations
      401 |
      402 |       // Test workflow operations on all created content

      at Object.toBe (src/__tests__/integration/contentWorkflowEndToEnd.test.ts:399:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Content Workflow End-to-End Integration - Phase 3.4.1 (RED Phase) › Performance and Reliability Integration › should handle database connection issues gracefully

    expect(received).toHaveBeenCalledWith(...expected)

    Matcher error: received value must be a mock or spy function

    Received has type:  function
    Received has value: [Function recordValidationError]

      434 |
      435 |       // Verify ValidationMonitor captured the database error
    > 436 |       expect(ValidationMonitor.recordValidationError).toHaveBeenCalledWith({
          |                                                       ^
      437 |         context: expect.stringContaining('ProductContentService'),
      438 |         errorCode: expect.stringContaining('DATABASE'),
      439 |         validationPattern: 'transformation_schema',

      at Object.toHaveBeenCalledWith (src/__tests__/integration/contentWorkflowEndToEnd.test.ts:436:55)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/services/__tests__/noShowHandlingService.test.ts
  ● NoShowHandlingService › processNoShowOrders › should successfully process no-show orders

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      157 |       expect(result).toBeDefined();
      158 |       expect(result.success).toBe(true);
    > 159 |       expect(result.processedOrders).toHaveLength(1);
          |                                      ^
      160 |       expect(result.processedOrders[0].orderId).toBe('order-123');
      161 |       expect(result.processedOrders[0].action).toBe('cancelled');
      162 |       expect(result.processedOrders[0].stockRestored).toBe(true);

      at Object.toHaveLength (src/services/__tests__/noShowHandlingService.test.ts:159:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NoShowHandlingService › processNoShowOrders › should handle config with auto-cancel disabled

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      243 |
      244 |       expect(result.success).toBe(true);
    > 245 |       expect(result.processedOrders).toHaveLength(1);
          |                                      ^
      246 |       expect(result.processedOrders[0].action).toBe('notified');
      247 |       expect(result.processedOrders[0].stockRestored).toBe(false);
      248 |       expect(mockUpdateOrderStatus).not.toHaveBeenCalled();

      at Object.toHaveLength (src/services/__tests__/noShowHandlingService.test.ts:245:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NoShowHandlingService › processNoShowOrders › should handle config with notifications disabled

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      270 |
      271 |       expect(result.success).toBe(true);
    > 272 |       expect(result.processedOrders).toHaveLength(1);
          |                                      ^
      273 |       expect(result.processedOrders[0].action).toBe('cancelled');
      274 |       expect(result.processedOrders[0].notificationSent).toBe(false);
      275 |       expect(mockUpdateOrderStatus).toHaveBeenCalled();

      at Object.toHaveLength (src/services/__tests__/noShowHandlingService.test.ts:272:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NoShowHandlingService › processNoShowOrders › should handle order processing errors

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      314 |
      315 |       expect(result.success).toBe(true);
    > 316 |       expect(result.processedOrders).toHaveLength(1);
          |                                      ^
      317 |       expect(result.processedOrders[0].action).toBe('notified'); // fallback action
      318 |       expect(result.processedOrders[0].stockRestored).toBe(false);
      319 |     });

      at Object.toHaveLength (src/services/__tests__/noShowHandlingService.test.ts:316:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NoShowHandlingService › processNoShowOrders › should handle notification failures gracefully

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      337 |
      338 |       expect(result.success).toBe(true);
    > 339 |       expect(result.processedOrders).toHaveLength(1);
          |                                      ^
      340 |       expect(result.processedOrders[0].action).toBe('cancelled');
      341 |       expect(result.processedOrders[0].notificationSent).toBe(false);
      342 |     });

      at Object.toHaveLength (src/services/__tests__/noShowHandlingService.test.ts:339:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NoShowHandlingService › edge cases › should handle orders with missing customer information

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      496 |
      497 |       expect(result.success).toBe(true);
    > 498 |       expect(result.processedOrders).toHaveLength(1);
          |                                      ^
      499 |     });
      500 |
      501 |     it('should handle orders with different payment methods', async () => {

      at Object.toHaveLength (src/services/__tests__/noShowHandlingService.test.ts:498:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NoShowHandlingService › edge cases › should handle orders with different payment methods

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      518 |
      519 |       expect(result.success).toBe(true);
    > 520 |       expect(result.processedOrders).toHaveLength(1);
          |                                      ^
      521 |       expect(mockSendNotification).toHaveBeenCalledWith(
      522 |         expect.objectContaining({
      523 |           customMessage: expect.not.stringContaining('refunded')

      at Object.toHaveLength (src/services/__tests__/noShowHandlingService.test.ts:520:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/role-based/__tests__/rolePermission.integration.test.tsx
  ● Role Permission Integration Tests - Phase 1 › should handle complete end-to-end role fetching flow

    expect(received).toBe(expected) // Object.is equality

    Expected: "integration-role-123"
    Received: undefined

       98 |     
       99 |     // Verify schema transformation (snake_case → camelCase)
    > 100 |     expect(transformedResult?.id).toBe('integration-role-123');
          |                                   ^
      101 |     expect(transformedResult?.userId).toBe('integration-user-456');  // user_id → userId
      102 |     expect(transformedResult?.roleType).toBe('inventory_staff');      // role_type → roleType
      103 |     expect(transformedResult?.permissions).toEqual(['view_inventory', 'update_stock']);

      at Object.toBe (src/hooks/role-based/__tests__/rolePermission.integration.test.tsx:100:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Role Permission Integration Tests - Phase 1 › should integrate role-based permission checking end-to-end

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      140 |     // Step 2: Test role-based permission (should have view_inventory from ROLE_PERMISSIONS)
      141 |     const hasRolePermission = await RolePermissionService.hasPermission('perm-user-456', 'view_inventory');
    > 142 |     expect(hasRolePermission).toBe(true);
          |                               ^
      143 |
      144 |     // Step 3: Test custom permission
      145 |     const hasCustomPermission = await RolePermissionService.hasPermission('perm-user-456', 'custom_permission');

      at Object.toBe (src/hooks/role-based/__tests__/rolePermission.integration.test.tsx:142:31)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Role Permission Integration Tests - Phase 1 › should handle errors gracefully across schema, service, and hook layers

    expect(received).toBeNull()

    Received: undefined

      172 |     });
      173 |
    > 174 |     await waitFor(() => {
          |                  ^
      175 |       // Hook should handle service errors gracefully
      176 |       expect(result.current.data).toBeNull();
      177 |     });

      at Object.<anonymous> (src/hooks/role-based/__tests__/rolePermission.integration.test.tsx:174:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Role Permission Integration Tests - Phase 1 › should handle role creation with input validation end-to-end

    expect(received).toBe(expected) // Object.is equality

    Expected: "create-user-789"
    Received: undefined

      241 |
      242 |     // Step 4: Verify complete transformation
    > 243 |     expect(result?.userId).toBe('create-user-789');
          |                            ^
      244 |     expect(result?.roleType).toBe('marketing_staff');
      245 |     expect(result?.permissions).toEqual(['view_products', 'update_product_content']);
      246 |

      at Object.toBe (src/hooks/role-based/__tests__/rolePermission.integration.test.tsx:243:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Role Permission Integration Tests - Phase 1 › should handle resilient processing with partial failures

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 0
    Received array:  []

      291 |
      292 |     // Step 3: Verify resilient processing worked
    > 293 |     expect(result.success).toHaveLength(2);  // 2 valid items processed
          |                            ^
      294 |     expect(result.errors).toHaveLength(1);   // 1 invalid item skipped
      295 |     expect(result.totalProcessed).toBe(2);   // Only valid items counted
      296 |

      at Object.toHaveLength (src/hooks/role-based/__tests__/rolePermission.integration.test.tsx:293:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Role Permission Integration Tests - Phase 1 › should integrate with React Query cache management correctly

    expect(received).toBeDefined()

    Received: undefined

      331 |     // Step 3: Verify data is cached
      332 |     const cachedData = queryClient.getQueryData(['roles', 'user', 'cache-user-456']);
    > 333 |     expect(cachedData).toBeDefined();
          |                        ^
      334 |
      335 |     // Step 4: Verify query key structure for proper cache management
      336 |     expect(result.current.queryKey).toEqual(['roles', 'user', 'cache-user-456']);

      at Object.toBeDefined (src/hooks/role-based/__tests__/rolePermission.integration.test.tsx:333:24)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Role Permission Integration Tests - Phase 1 › should integrate current user detection with role fetching

    expect(received).toBe(expected) // Object.is equality

    Expected: "integration-user-123"
    Received: undefined

      420 |
      421 |     // Should fetch current user's role
    > 422 |     expect(result.current.data?.userId).toBe('integration-user-123');
          |                                         ^
      423 |     expect(result.current.queryKey).toEqual(['roles', 'user', 'integration-user-123']);
      424 |   });
      425 | });

      at Object.toBe (src/hooks/role-based/__tests__/rolePermission.integration.test.tsx:422:41)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/schemas/__tests__/kiosk.schema.test.ts
  ● Kiosk Schemas › DbKioskSessionTransformSchema › should validate complete session data

    ReferenceError: KioskSessionSchema is not defined

      31 |
      32 |     it('should validate complete session data', () => {
    > 33 |       const result = KioskSessionSchema.parse(validSessionData);
         |                      ^
      34 |       expect(result).toMatchObject(validSessionData);
      35 |     });
      36 |

      at Object.KioskSessionSchema (src/schemas/__tests__/kiosk.schema.test.ts:33:22)

  ● Kiosk Schemas › DbKioskSessionTransformSchema › should apply default values correctly

    ReferenceError: KioskSessionSchema is not defined

      43 |       };
      44 |
    > 45 |       const result = KioskSessionSchema.parse(minimalData);
         |                      ^
      46 |       expect(result.totalSales).toBe(0);
      47 |       expect(result.transactionCount).toBe(0);
      48 |       expect(result.isActive).toBe(true);

      at Object.KioskSessionSchema (src/schemas/__tests__/kiosk.schema.test.ts:45:22)

  ● Kiosk Schemas › DbKioskSessionTransformSchema › should validate nullable optional fields properly

    ReferenceError: KioskSessionSchema is not defined

      60 |       };
      61 |
    > 62 |       const result = KioskSessionSchema.parse(dataWithNulls);
         |                      ^
      63 |       expect(result.sessionEnd).toBeNull();
      64 |       expect(result.deviceId).toBeNull();
      65 |       expect(result.currentCustomer).toBeNull();

      at Object.KioskSessionSchema (src/schemas/__tests__/kiosk.schema.test.ts:62:22)

  ● Kiosk Schemas › DbKioskSessionSchema › should validate database format

    ReferenceError: DbKioskSessionSchema is not defined

       99 |
      100 |     it('should validate database format', () => {
    > 101 |       const result = DbKioskSessionSchema.parse(validDbData);
          |                      ^
      102 |       expect(result).toMatchObject(validDbData);
      103 |     });
      104 |

      at Object.DbKioskSessionSchema (src/schemas/__tests__/kiosk.schema.test.ts:101:22)

  ● Kiosk Schemas › KioskTransactionSchema › should apply default values

    ZodError: [
      {
        "expected": "'pending' | 'completed' | 'failed'",
        "received": "undefined",
        "code": "invalid_type",
        "path": [
          "payment_status"
        ],
        "message": "Required"
      }
    ]

      311 |       };
      312 |
    > 313 |       const result = DbKioskTransactionTransformSchema.parse(minimalTransaction);
          |                                                        ^
      314 |       expect(result.taxAmount).toBe(0);
      315 |       expect(result.paymentStatus).toBe('pending');
      316 |     });

      at Object.get error [as error] (node_modules/zod/v3/types.cjs:45:31)
      at ZodEffects.parse (node_modules/zod/v3/types.cjs:120:22)
      at Object.parse (src/schemas/__tests__/kiosk.schema.test.ts:313:56)

  ● Kiosk Schemas › Response Schemas › KioskSessionResponseSchema › should validate session response with session data

    ZodError: [
      {
        "code": "invalid_type",
        "expected": "string",
        "received": "undefined",
        "path": [
          "session",
          "staff_id"
        ],
        "message": "Required"
      }
    ]

      366 |         };
      367 |
    > 368 |         const result = KioskSessionResponseSchema.parse(sessionResponse);
          |                                                   ^
      369 |         expect(result.success).toBe(true);
      370 |         expect(result.session).toMatchObject(sessionResponse.session);
      371 |       });

      at Object.get error [as error] (node_modules/zod/v3/types.cjs:45:31)
      at ZodObject.parse (node_modules/zod/v3/types.cjs:120:22)
      at Object.parse (src/schemas/__tests__/kiosk.schema.test.ts:368:51)

FAIL src/hooks/inventory/__tests__/integration/cacheIntegration.test.tsx
  ● Cache Strategy Integration Tests › Smart Invalidation Strategy › should invalidate related caches when stock is updated

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      134 |
      135 |       // Verify all related caches were invalidated
    > 136 |       expect(queryClient.getQueryState(['inventory', 'user-specific', undefined, 'details', undefined, 'item', 'inv-123'])?.isInvalidated).toBe(true);
          |                                                                                                                                            ^
      137 |       expect(queryClient.getQueryState(['inventory', 'user-specific', undefined, 'list', 'items'])?.isInvalidated).toBe(true);
      138 |       expect(queryClient.getQueryState(['inventory', 'user-specific', undefined, 'list', 'low-stock', undefined])?.isInvalidated).toBe(true);
      139 |     });

      at Object.toBe (src/hooks/inventory/__tests__/integration/cacheIntegration.test.tsx:136:140)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cache Strategy Integration Tests › Smart Invalidation Strategy › should coordinate cross-entity cache invalidation

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      162 |
      163 |       // Verify cross-entity caches were affected
    > 164 |       expect(queryClient.getQueryState(['inventory', 'user-specific', undefined, 'details', undefined, 'item', 'inv-123'])?.isInvalidated).toBe(true);
          |                                                                                                                                            ^
      165 |       // Note: Cross-entity invalidation would be tested with actual cache patterns
      166 |     });
      167 |   });

      at Object.toBe (src/hooks/inventory/__tests__/integration/cacheIntegration.test.tsx:164:140)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cache Strategy Integration Tests › Optimistic Update Strategy › should perform optimistic stock updates with intelligent rollback

    expect(received).toMatchObject(expected)

    - Expected  - 2
    + Received  + 2

      Object {
    -   "availableStock": 65,
    -   "currentStock": 75,
    +   "availableStock": 90,
    +   "currentStock": 100,
        "id": "inv-123",
      }

      198 |       // Verify optimistic update was applied
      199 |       const optimisticData = queryClient.getQueryData(['inventory', 'user-specific', undefined, 'details', undefined, 'item', 'inv-123']);
    > 200 |       expect(optimisticData).toMatchObject({
          |                              ^
      201 |         id: 'inv-123',
      202 |         currentStock: 75,
      203 |         availableStock: 65, // 75 - 10 reserved

      at Object.toMatchObject (src/hooks/inventory/__tests__/integration/cacheIntegration.test.tsx:200:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cache Strategy Integration Tests › Optimistic Update Strategy › should update related list caches optimistically

    expect(received).toMatchObject(expected)

    - Expected  - 2
    + Received  + 2

      Object {
    -   "availableStock": 0,
    -   "currentStock": 10,
    +   "availableStock": 90,
    +   "currentStock": 100,
        "id": "inv-123",
      }

      235 |       // Verify list cache was updated optimistically
      236 |       const listData = queryClient.getQueryData(['inventory', 'user-specific', undefined, 'list', 'items']) as any[];
    > 237 |       expect(listData?.[0]).toMatchObject({
          |                             ^
      238 |         id: 'inv-123',
      239 |         currentStock: 10,
      240 |         availableStock: 0, // 10 - 10 reserved

      at Object.toMatchObject (src/hooks/inventory/__tests__/integration/cacheIntegration.test.tsx:237:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cache Strategy Integration Tests › Real-time Update Coordination › should handle real-time stock changes with smart cache updates

    expect(received).toEqual(expected) // deep equality

    Expected: {"availableStock": 75, "createdAt": "2024-01-01T00:00:00Z", "currentStock": 85, "id": "inv-123", "isActive": true, "isVisibleToCustomers": true, "lastStockUpdate": "2024-01-01T11:30:00Z", "maximumThreshold": 500, "minimumThreshold": 15, "productId": "product-1", "reservedStock": 10, "updatedAt": "2024-01-01T11:30:00Z"}
    Received: undefined

      280 |       // Verify primary cache was updated
      281 |       const itemData = queryClient.getQueryData(['inventory', 'user-specific', undefined, 'details', undefined, 'item', 'inv-123']);
    > 282 |       expect(itemData).toEqual(newData);
          |                        ^
      283 |     });
      284 |
      285 |     it('should add movements to audit trail cache during real-time updates', async () => {

      at Object.toEqual (src/hooks/inventory/__tests__/integration/cacheIntegration.test.tsx:282:24)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cache Strategy Integration Tests › Real-time Update Coordination › should add movements to audit trail cache during real-time updates

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      326 |       // Verify movement was added to history cache
      327 |       const historyData = queryClient.getQueryData(['inventory', 'user-specific', undefined, 'details', undefined, 'item', 'inv-123', 'movements', undefined]) as any;
    > 328 |       expect(historyData?.success).toHaveLength(1);
          |                                    ^
      329 |       expect(historyData?.success[0]).toEqual(movement);
      330 |       expect(historyData?.totalProcessed).toBe(1);
      331 |     });

      at Object.toHaveLength (src/hooks/inventory/__tests__/integration/cacheIntegration.test.tsx:328:36)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cache Strategy Integration Tests › Performance Optimization › should perform batch invalidation for bulk operations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      365 |       operations.forEach(op => {
      366 |         const state = queryClient.getQueryState(['inventory', 'user-specific', undefined, 'details', undefined, 'item', op.inventoryItemId]);
    > 367 |         expect(state?.isInvalidated).toBe(true);
          |                                      ^
      368 |       });
      369 |     });
      370 |

      at toBe (src/hooks/inventory/__tests__/integration/cacheIntegration.test.tsx:367:38)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/hooks/inventory/__tests__/integration/cacheIntegration.test.tsx:365:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cache Strategy Integration Tests › Performance Monitoring Integration › should provide performance analysis and recommendations

    expect(received).toContain(expected) // indexOf

    Expected value: StringContaining "Excellent cache hit rate"
    Received array: ["Excellent cache hit rate: 80.0%", "Fast average response time: 44.0ms", "Efficient cross-entity cache coordination"]

    Looks like you wanted to test for object/array equality with the stricter `toContain` matcher. You probably need to use `toContainEqual` instead.

      432 |       
      433 |       expect(analysis.status).toBe('excellent'); // 80% hit rate, fast response
    > 434 |       expect(analysis.highlights).toContain(expect.stringContaining('Excellent cache hit rate'));
          |                                   ^
      435 |       expect(analysis.highlights).toContain(expect.stringContaining('Fast average response time'));
      436 |     });
      437 |   });

      at Object.toContain (src/hooks/inventory/__tests__/integration/cacheIntegration.test.tsx:434:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/tests/simpleServices.test.ts
  ● Simple Services Tests › AuthService Core Functions › should handle login validation

    expect(received).rejects.toThrow(expected)

    Expected substring: "Please enter a valid email address"
    Received message:   "email must be a valid email address"

          433 |     if (!result.success) {
          434 |       const errorMessage = result.errors?.join('; ') || 'Validation failed';
        > 435 |       throw new Error(errorMessage);
              |             ^
          436 |     }
          437 |
          438 |     return result.data!;

      at Function.<anonymous> (src/utils/validationPipeline.ts:435:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (src/tests/simpleServices.test.ts:122:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Simple Services Tests › AuthService Core Functions › should handle successful login

    Invalid session data received

      76 |       invalidData: session
      77 |     });
    > 78 |     throw new Error('Invalid session data received');
         |           ^
      79 |   }
      80 | };
      81 |

      at validateSupabaseSession (src/services/authService.ts:78:11)
      at Function.validateSupabaseSession (src/services/authService.ts:255:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Simple Services Tests › RealtimeService Core Functions › should handle subscription operations

    TypeError: Cannot read properties of undefined (reading 'state')

      366 |     const status = Array.from(this.subscriptions.entries()).map(([channelName, subscription]) => ({
      367 |       channel: channelName,
    > 368 |       state: subscription.state,
          |                           ^
      369 |       isConnected: subscription.state === 'joined'
      370 |     }));
      371 |     

      at state (src/services/realtimeService.ts:368:27)
          at Array.map (<anonymous>)
      at Function.map [as getSubscriptionStatus] (src/services/realtimeService.ts:366:61)
      at Object.getSubscriptionStatus (src/tests/simpleServices.test.ts:245:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Simple Services Tests › OrderService Core Functions › should validate order submission requirements

    expect(received).toBe(expected) // Object.is equality

    Expected: "Missing required customer information"
    Received: "Unexpected error: Customer information is required"

      315 |       
      316 |       expect(result.success).toBe(false);
    > 317 |       expect(result.error).toBe('Missing required customer information');
          |                            ^
      318 |     });
      319 |
      320 |     it('should validate items requirement', async () => {

      at Object.toBe (src/tests/simpleServices.test.ts:317:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Simple Services Tests › OrderService Core Functions › should validate items requirement

    expect(received).toBe(expected) // Object.is equality

    Expected: "Order must contain at least one item"
    Received: "Unexpected error: Order must contain at least one item"

      335 |       
      336 |       expect(result.success).toBe(false);
    > 337 |       expect(result.error).toBe('Order must contain at least one item');
          |                            ^
      338 |     });
      339 |   });
      340 |

      at Object.toBe (src/tests/simpleServices.test.ts:337:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Simple Services Tests › ProductService Core Functions › should handle product operations

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      363 |       
      364 |       expect(result.success).toBe(true);
    > 365 |       expect(result.products).toHaveLength(1);
          |                               ^
      366 |     });
      367 |
      368 |     it('should handle product search', async () => {

      at Object.toHaveLength (src/tests/simpleServices.test.ts:365:31)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/__tests__/unit/KioskContext.test.tsx
  ● KioskContext › Storage Integration › should attempt to hydrate from storage on mount

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "@kiosk_session"

    Number of calls: 0

      147 |
      148 |       // Should attempt to read from storage
    > 149 |       expect(mockAsyncStorage.getItem).toHaveBeenCalledWith('@kiosk_session');
          |                                        ^
      150 |     });
      151 |
      152 |     it('should handle storage errors gracefully', async () => {

      at Object.toHaveBeenCalledWith (src/__tests__/unit/KioskContext.test.tsx:149:40)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/schemas/__tests__/payment.schema.test.ts
  ● Payment Schema Validation - Following Established Patterns › Database-First Validation (Following Pattern) › should handle empty strings as valid nullable fields

    ZodError: [
      {
        "received": "",
        "code": "invalid_enum_value",
        "options": [
          "pending",
          "processing",
          "succeeded",
          "failed",
          "canceled",
          "requires_payment_method",
          "requires_confirmation",
          "requires_action"
        ],
        "path": [
          "status"
        ],
        "message": "Invalid enum value. Expected 'pending' | 'processing' | 'succeeded' | 'failed' | 'canceled' | 'requires_payment_method' | 'requires_confirmation' | 'requires_action', received ''"
      }
    ]

      75 |       };
      76 |
    > 77 |       const result = PaymentTransformSchema.parse(dataWithEmptyStrings);
         |                                             ^
      78 |
      79 |       expect(result.paymentIntentId).toBe('');
      80 |       expect(result.paymentMethodId).toBe('');

      at Object.get error [as error] (node_modules/zod/v3/types.cjs:45:31)
      at ZodEffects.parse (node_modules/zod/v3/types.cjs:120:22)
      at Object.parse (src/schemas/__tests__/payment.schema.test.ts:77:45)

  ● Payment Schema Validation - Following Established Patterns › Calculation Validation (Following Pattern) › should validate payment calculations with tolerance

    expect(received).toEqual(expected) // deep equality

    - Expected  - 0
    + Received  + 1

      Object {
    +   "discount": 0,
        "subtotal": 10,
        "tax": 0.85,
        "tip": 2,
        "total": 12.85,
      }

      255 |
      256 |       const result = PaymentCalculationSchema.parse(validCalculation);
    > 257 |       expect(result).toEqual(validCalculation);
          |                      ^
      258 |     });
      259 |
      260 |     it('should detect calculation mismatches', () => {

      at Object.toEqual (src/schemas/__tests__/payment.schema.test.ts:257:22)

  ● Payment Schema Validation - Following Established Patterns › Request/Response Schema Validation (Following Pattern) › should validate payment operation response

    ZodError: [
      {
        "code": "invalid_type",
        "expected": "string",
        "received": "undefined",
        "path": [
          "payment",
          "user_id"
        ],
        "message": "Required"
      }
    ]

      318 |       };
      319 |
    > 320 |       const result = PaymentOperationResponseSchema.parse(successResponse);
          |                                                     ^
      321 |       expect(result.success).toBe(true);
      322 |       expect(result.payment).toBeDefined();
      323 |       expect(result.error).toBeUndefined();

      at Object.get error [as error] (node_modules/zod/v3/types.cjs:45:31)
      at ZodEffects.parse (node_modules/zod/v3/types.cjs:120:22)
      at Object.parse (src/schemas/__tests__/payment.schema.test.ts:320:53)

FAIL src/__tests__/integration/performanceIntegration.test.ts
  ● Performance Integration - Phase 3.4.4 (RED Phase) › Large Content Dataset Handling Across All Layers › should handle large content queries efficiently

    TypeError: _productContentService.ProductContentService.getContentWithPerformanceOptimization is not a function

      100 |
      101 |       // Test service layer performance
    > 102 |       const serviceResult = await ProductContentService.getContentWithPerformanceOptimization(
          |                                                         ^
      103 |         {
      104 |           status: 'published',
      105 |           pagination: { page: 1, limit: 100 },

      at Object.getContentWithPerformanceOptimization (src/__tests__/integration/performanceIntegration.test.ts:102:57)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › Large Content Dataset Handling Across All Layers › should optimize content transformation performance

    TypeError: _productContentService.ProductContentService.transformContentBatch is not a function

      152 |       }));
      153 |
    > 154 |       const transformationResult = await ProductContentService.transformContentBatch(
          |                                                                ^
      155 |         rawContentData,
      156 |         { 
      157 |           enableParallelProcessing: true,

      at Object.transformContentBatch (src/__tests__/integration/performanceIntegration.test.ts:154:64)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › Large Content Dataset Handling Across All Layers › should handle concurrent content operations efficiently

    TypeError: _productContentService.ProductContentService.createProductContentWithPerformanceTracking is not a function

      187 |       const concurrentResults = await Promise.all(
      188 |         concurrentOperations.map(op => 
    > 189 |           ProductContentService.createProductContentWithPerformanceTracking(
          |                                 ^
      190 |             op.data,
      191 |             testUserId,
      192 |             { trackMetrics: true }

      at createProductContentWithPerformanceTracking (src/__tests__/integration/performanceIntegration.test.ts:189:33)
          at Array.map (<anonymous>)
      at Object.map (src/__tests__/integration/performanceIntegration.test.ts:188:30)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › File Upload Performance with Progress Tracking › should optimize large file upload performance

    TypeError: _productContentService.ProductContentService.uploadLargeContentFileWithOptimization is not a function

      229 |       };
      230 |
    > 231 |       const uploadResult = await ProductContentService.uploadLargeContentFileWithOptimization(
          |                                                        ^
      232 |         'content-123',
      233 |         largeFileData,
      234 |         testUserId,

      at Object.uploadLargeContentFileWithOptimization (src/__tests__/integration/performanceIntegration.test.ts:231:56)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › File Upload Performance with Progress Tracking › should handle multiple file uploads concurrently

    TypeError: _productContentService.ProductContentService.uploadContentFileWithThrottling is not a function

      273 |       const uploadResults = await Promise.all(
      274 |         fileUploads.map(upload => 
    > 275 |           ProductContentService.uploadContentFileWithThrottling(
          |                                 ^
      276 |             upload.contentId,
      277 |             upload.fileData,
      278 |             testUserId,

      at uploadContentFileWithThrottling (src/__tests__/integration/performanceIntegration.test.ts:275:33)
          at Array.map (<anonymous>)
      at Object.map (src/__tests__/integration/performanceIntegration.test.ts:274:21)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › File Upload Performance with Progress Tracking › should optimize file upload error recovery

    TypeError: _productContentService.ProductContentService.uploadFileWithRetryStrategy is not a function

      305 |
      306 |       // Mock upload with retries
    > 307 |       const uploadResult = await ProductContentService.uploadFileWithRetryStrategy(
          |                                                        ^
      308 |         'content-error-test',
      309 |         problematicFileData,
      310 |         testUserId,

      at Object.uploadFileWithRetryStrategy (src/__tests__/integration/performanceIntegration.test.ts:307:56)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › Campaign Metric Aggregation Performance › should aggregate campaign metrics efficiently

    TypeError: _marketingCampaignService.MarketingCampaignService.aggregateMetricsWithPerformanceOptimization is not a function

      339 |       }));
      340 |
    > 341 |       const aggregationResult = await MarketingCampaignService.aggregateMetricsWithPerformanceOptimization(
          |                                                                ^
      342 |         {
      343 |           dateRange: {
      344 |             startDate: '2024-01-01',

      at Object.aggregateMetricsWithPerformanceOptimization (src/__tests__/integration/performanceIntegration.test.ts:341:64)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › Campaign Metric Aggregation Performance › should handle real-time metric updates efficiently

    TypeError: _marketingCampaignService.MarketingCampaignService.recordMetricWithBatching is not a function

      378 |       const updateResults = await Promise.all(
      379 |         realtimeUpdates.map(update => 
    > 380 |           MarketingCampaignService.recordMetricWithBatching(
          |                                    ^
      381 |             update.campaignId,
      382 |             update.metricType,
      383 |             update.value,

      at recordMetricWithBatching (src/__tests__/integration/performanceIntegration.test.ts:380:36)
          at Array.map (<anonymous>)
      at Object.map (src/__tests__/integration/performanceIntegration.test.ts:379:25)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › Campaign Metric Aggregation Performance › should optimize cross-campaign performance analysis

    TypeError: _marketingCampaignService.MarketingCampaignService.performCrossCampaignAnalysisWithOptimization is not a function

      402 |       const operation = performanceTracker.start('cross_campaign_analysis');
      403 |
    > 404 |       const analysisResult = await MarketingCampaignService.performCrossCampaignAnalysisWithOptimization(
          |                                                             ^
      405 |         {
      406 |           campaignIds: Array.from({ length: 50 }, (_, i) => `campaign-${i}`),
      407 |           analysisTypes: ['performance', 'correlation', 'trends', 'forecasting'],

      at Object.performCrossCampaignAnalysisWithOptimization (src/__tests__/integration/performanceIntegration.test.ts:404:61)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › Cache Efficiency with Complex Invalidation Patterns › should handle cache memory pressure efficiently

    TypeError: op is not a function

      487 |
      488 |       // Execute cache loading
    > 489 |       cacheLoadOperations.forEach(op => op());
          |                                         ^
      490 |
      491 |       // Test cache cleanup performance
      492 |       const cleanupResult = await MarketingCampaignService.optimizeCacheMemoryUsage(

      at op (src/__tests__/integration/performanceIntegration.test.ts:489:41)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/__tests__/integration/performanceIntegration.test.ts:489:27)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › Cache Efficiency with Complex Invalidation Patterns › should optimize cross-entity cache coordination

    TypeError: _marketingCampaignService.MarketingCampaignService.coordinateCrossEntityCacheUpdates is not a function

      509 |
      510 |       // Test coordinated cache updates across entities
    > 511 |       const coordinationResult = await MarketingCampaignService.coordinateCrossEntityCacheUpdates(
          |                                                                 ^
      512 |         {
      513 |           campaignUpdate: { campaignId: 'campaign-1', status: 'active' },
      514 |           affectedContent: ['content-1', 'content-2'],

      at Object.coordinateCrossEntityCacheUpdates (src/__tests__/integration/performanceIntegration.test.ts:511:65)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › Memory Usage and Resource Management › should manage memory during intensive operations

    TypeError: _productContentService.ProductContentService.processLargeContentBatch is not a function

      535 |       // Perform memory-intensive operations
      536 |       const intensiveOperations = [
    > 537 |         ProductContentService.processLargeContentBatch(
          |                               ^
      538 |           Array.from({ length: 500 }, (_, i) => ({ id: `content-${i}` })),
      539 |           testUserId
      540 |         ),

      at Object.processLargeContentBatch (src/__tests__/integration/performanceIntegration.test.ts:537:31)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance Integration - Phase 3.4.4 (RED Phase) › Memory Usage and Resource Management › should handle resource cleanup efficiently

    TypeError: _productContentService.ProductContentService.createTemporaryProcessingResources is not a function

      571 |       // Create resources that need cleanup
      572 |       const resourceOperations = await Promise.all([
    > 573 |         ProductContentService.createTemporaryProcessingResources(50),
          |                               ^
      574 |         MarketingCampaignService.createAnalyticsWorkspace(testUserId),
      575 |         ProductBundleService.createInventoryCalculationCache(100)
      576 |       ]);

      at Object.createTemporaryProcessingResources (src/__tests__/integration/performanceIntegration.test.ts:573:31)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/__tests__/integration/crossRoleIntegration.test.ts
  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Marketing Actions → Inventory Impact Tracking › should track inventory impact when creating product bundles

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      60 |       });
      61 |
    > 62 |       mockInventoryService.calculateInventoryImpact.mockResolvedValue({
         |                                                     ^
      63 |         success: true,
      64 |         data: {
      65 |           impact: [{

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:62:53)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Marketing Actions → Inventory Impact Tracking › should handle inventory shortages when activating bundles

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      121 |     test('should handle inventory shortages when activating bundles', async () => {
      122 |       // Mock inventory shortage scenario
    > 123 |       mockInventoryService.calculateInventoryImpact.mockResolvedValue({
          |                                                     ^
      124 |         success: true,
      125 |         data: {
      126 |           impact: [{

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:123:53)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Marketing Actions → Inventory Impact Tracking › should reserve inventory when campaign activates bundles

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      172 |       
      173 |       // Mock successful inventory reservation
    > 174 |       mockInventoryService.reserveInventoryForCampaign.mockResolvedValue({
          |                                                        ^
      175 |         success: true,
      176 |         data: {
      177 |           reservationId: 'reservation-123',

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:174:56)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Bundle Creation → Inventory Reservation Validation › should validate inventory availability before bundle creation

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      220 |       ];
      221 |
    > 222 |       mockInventoryService.validateBundleInventoryRequirements.mockResolvedValue({
          |                                                                ^
      223 |         success: true,
      224 |         data: {
      225 |           overallValidation: {

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:222:64)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Bundle Creation → Inventory Reservation Validation › should handle partial inventory availability scenarios

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      273 |       ];
      274 |
    > 275 |       mockInventoryService.validateBundleInventoryRequirements.mockResolvedValue({
          |                                                                ^
      276 |         success: true,
      277 |         data: {
      278 |           overallValidation: {

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:275:64)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Bundle Creation → Inventory Reservation Validation › should integrate with executive analytics for inventory insights

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      320 |       
      321 |       // Mock executive analytics data collection
    > 322 |       mockBusinessMetricsService.recordInventoryImpactMetric.mockResolvedValue({
          |                                                              ^
      323 |         success: true,
      324 |         data: {
      325 |           metricId: 'metric-123',

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:322:62)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Campaign Performance → Executive Analytics Pipeline › should aggregate campaign data for executive dashboards

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      392 |
      393 |       // Mock executive analytics aggregation
    > 394 |       mockBusinessMetricsService.aggregateCampaignDataForExecutive.mockResolvedValue({
          |                                                                    ^
      395 |         success: true,
      396 |         data: {
      397 |           executiveSummary: {

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:394:68)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Campaign Performance → Executive Analytics Pipeline › should provide real-time executive notifications for significant changes

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      443 |     test('should provide real-time executive notifications for significant changes', async () => {
      444 |       // Mock significant performance change detection
    > 445 |       mockBusinessMetricsService.detectSignificantPerformanceChanges.mockResolvedValue({
          |                                                                      ^
      446 |         success: true,
      447 |         data: {
      448 |           significantChanges: [

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:445:70)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Campaign Performance → Executive Analytics Pipeline › should correlate marketing performance with inventory metrics

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      502 |       
      503 |       // Mock correlation analysis
    > 504 |       mockBusinessMetricsService.analyzeCampaignInventoryCorrelation.mockResolvedValue({
          |                                                                      ^
      505 |         success: true,
      506 |         data: {
      507 |           correlationAnalysis: {

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:504:70)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Role Permission Boundaries Across Marketing Operations › should enforce role boundaries for cross-system operations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      584 |
      585 |         if (roleTest.shouldAccess.inventory) {
    > 586 |           expect(inventoryAccess.success).toBe(true);
          |                                           ^
      587 |         } else {
      588 |           expect(inventoryAccess.success).toBe(false);
      589 |           expect(inventoryAccess.error).toContain('inventory access');

      at toBe (src/__tests__/integration/crossRoleIntegration.test.ts:586:43)
          at _loop.next (<anonymous>)
      at Object._loop (src/__tests__/integration/crossRoleIntegration.test.ts:571:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Role Permission Boundaries Across Marketing Operations › should handle permission escalation for cross-department operations

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      607 |     test('should handle permission escalation for cross-department operations', async () => {
      608 |       // Test permission escalation workflow
    > 609 |       mockRolePermissionService.requestPermissionEscalation.mockResolvedValue({
          |                                                             ^
      610 |         success: true,
      611 |         data: {
      612 |           escalationId: 'escalation-123',

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:609:61)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Cross-Role Integration - Phase 3.4.3 (RED Phase) › Role Permission Boundaries Across Marketing Operations › should audit cross-role access attempts

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      655 |       
      656 |       // Mock audit trail creation
    > 657 |       mockRolePermissionService.auditCrossRoleAccess.mockResolvedValue({
          |                                                      ^
      658 |         success: true,
      659 |         data: {
      660 |           auditId: 'audit-123',

      at Object.mockResolvedValue (src/__tests__/integration/crossRoleIntegration.test.ts:657:54)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/schemas/__tests__/validation-transform-pattern.test.ts
  ● Validation Transform Pattern › ProductSchema Transform Pattern › should handle empty product name

    expect(received).toThrow()

    Received function did not throw

      145 |       // Remove categories for this test
      146 |       const { categories, ...productData } = invalidData;
    > 147 |       expect(() => transformProductWithCategory(productData, categories ? [categories] : [])).toThrow();
          |                                                                                               ^
      148 |     });
      149 |
      150 |     it('should handle missing category data', () => {

      at Object.toThrow (src/schemas/__tests__/validation-transform-pattern.test.ts:147:95)

FAIL src/hooks/inventory/__tests__/integration/systemIntegration.test.tsx
  ● Inventory System Integration Test (REFACTOR Phase) › Complete Workflow Integration › should validate optimized system architecture

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      129 |       );
      130 |
    > 131 |       await waitFor(() => {
          |                    ^
      132 |         expect(result.current.isSuccess).toBe(true);
      133 |         expect(result.current.data).toEqual(testItem);
      134 |       }, { timeout: 1000 });

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/systemIntegration.test.tsx:131:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Inventory System Integration Test (REFACTOR Phase) › Complete Workflow Integration › should handle error scenarios with optimal recovery

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      158 |       );
      159 |
    > 160 |       await waitFor(() => {
          |                    ^
      161 |         expect(result.current.isError).toBe(true);
      162 |         expect(result.current.error).toEqual(notFoundError);
      163 |       }, { timeout: 1000 });

      at Object.<anonymous> (src/hooks/inventory/__tests__/integration/systemIntegration.test.tsx:160:20)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/utils/__tests__/validationPipeline.test.ts
  ● ValidationPipeline › validateInput › should handle validation errors with different strictness levels

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      129 |
      130 |       // In lenient mode, it will still fail for this many critical errors
    > 131 |       expect(lenientResult.success).toBe(false);
          |                                     ^
      132 |       expect(mockValidationMonitor.recordValidationError).toHaveBeenCalled();
      133 |     });
      134 |

      at Object.toBe (src/utils/__tests__/validationPipeline.test.ts:131:37)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● ValidationPipeline › ValidationUtils › should create email schema that normalizes emails

    ZodError: [
      {
        "validation": "email",
        "code": "invalid_string",
        "message": "Must be a valid email address",
        "path": []
      }
    ]

      222 |       const emailSchema = ValidationUtils.createEmailSchema();
      223 |       
    > 224 |       const result = emailSchema.parse('  TEST@EXAMPLE.COM  ');
          |                                  ^
      225 |       expect(result).toBe('test@example.com');
      226 |     });
      227 |

      at Object.get error [as error] (node_modules/zod/v3/types.cjs:45:31)
      at ZodEffects.parse (node_modules/zod/v3/types.cjs:120:22)
      at Object.parse (src/utils/__tests__/validationPipeline.test.ts:224:34)

  ● ValidationPipeline › Security features › should detect and prevent XSS attempts

    expect(received).resolves.toMatchObject(expected)

    - Expected  - 4
    + Received  + 2

      Object {
    -   "errors": ArrayContaining [
    -     StringContaining "dangerous content",
    -   ],
    -   "success": false,
    +   "errors": undefined,
    +   "success": true,
      }

      332 |           }
      333 |         )
    > 334 |       ).resolves.toMatchObject({
          |                  ^
      335 |         success: false,
      336 |         errors: expect.arrayContaining([
      337 |           expect.stringContaining('dangerous content')

      at Object.toMatchObject (node_modules/expect/build/index.js:174:22)
      at Object.toMatchObject (src/utils/__tests__/validationPipeline.test.ts:334:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/__tests__/integration/CustomerTransparency.test.tsx
  ● Customer Transparency Integration Tests › UI Transparency › should show identical UI whether kiosk mode is active or not

    ReferenceError: ShopScreen is not defined

      85 |       const { container: normalContainer } = render(
      86 |         <TestWrapper>
    > 87 |           <ShopScreen />
         |            ^
      88 |         </TestWrapper>
      89 |       );
      90 |

      at Object.ShopScreen (src/__tests__/integration/CustomerTransparency.test.tsx:87:12)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Customer Transparency Integration Tests › UI Transparency › should not show kiosk-specific controls to customers in normal mode

    ReferenceError: ShopScreen is not defined

      111 |       render(
      112 |         <TestWrapper>
    > 113 |           <ShopScreen />
          |            ^
      114 |         </TestWrapper>
      115 |       );
      116 |

      at Object.ShopScreen (src/__tests__/integration/CustomerTransparency.test.tsx:113:12)

  ● Customer Transparency Integration Tests › UI Transparency › should preserve all customer functionality when kiosk context is available

    ReferenceError: ShopScreen is not defined

      123 |       render(
      124 |         <TestWrapper>
    > 125 |           <ShopScreen />
          |            ^
      126 |         </TestWrapper>
      127 |       );
      128 |

      at Object.ShopScreen (src/__tests__/integration/CustomerTransparency.test.tsx:125:12)

  ● Customer Transparency Integration Tests › Kiosk Context Integration › should provide kiosk context without affecting customer experience

    expect(received).not.toThrow()

    Error name:    "ReferenceError"
    Error message: "ShopScreen is not defined"

          143 |         return (
          144 |           <TestWrapper>
        > 145 |             <ShopScreen />
              |              ^
          146 |           </TestWrapper>
          147 |         );
          148 |       };

      at ShopScreen (src/__tests__/integration/CustomerTransparency.test.tsx:145:14)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at src/__tests__/integration/CustomerTransparency.test.tsx:151:26
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (src/__tests__/integration/CustomerTransparency.test.tsx:151:51)
      at Object.toThrow (src/__tests__/integration/CustomerTransparency.test.tsx:151:51)

  ● Customer Transparency Integration Tests › Kiosk Context Integration › should handle kiosk hooks gracefully when no session is active

    ReferenceError: ShopScreen is not defined

      156 |       render(
      157 |         <TestWrapper>
    > 158 |           <ShopScreen />
          |            ^
      159 |         </TestWrapper>
      160 |       );
      161 |

      at Object.ShopScreen (src/__tests__/integration/CustomerTransparency.test.tsx:158:12)

  ● Customer Transparency Integration Tests › Hidden Staff Entry Point › should have hidden staff access that does not interfere with customer experience

    ReferenceError: ShopScreen is not defined

      170 |       render(
      171 |         <TestWrapper>
    > 172 |           <ShopScreen />
          |            ^
      173 |         </TestWrapper>
      174 |       );
      175 |

      at Object.ShopScreen (src/__tests__/integration/CustomerTransparency.test.tsx:172:12)

  ● Customer Transparency Integration Tests › Component Isolation › should not leak kiosk functionality into customer-facing components

    ReferenceError: ShopScreen is not defined

      187 |       render(
      188 |         <TestWrapper>
    > 189 |           <ShopScreen />
          |            ^
      190 |         </TestWrapper>
      191 |       );
      192 |

      at Object.ShopScreen (src/__tests__/integration/CustomerTransparency.test.tsx:189:12)

  ● KioskProvider Integration › should provide kiosk context throughout the app without side effects

    expect(received).not.toThrow()

    Error name:    "ReferenceError"
    Error message: "ShopScreen is not defined"

          206 |     const TestApp = () => (
          207 |       <TestWrapper>
        > 208 |         <ShopScreen />
              |          ^
          209 |       </TestWrapper>
          210 |     );
          211 |

      at ShopScreen (src/__tests__/integration/CustomerTransparency.test.tsx:208:10)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10917:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at src/__tests__/integration/CustomerTransparency.test.tsx:212:24
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.toThrow (src/__tests__/integration/CustomerTransparency.test.tsx:212:43)
      at Object.toThrow (src/__tests__/integration/CustomerTransparency.test.tsx:212:43)

  ● KioskProvider Integration › should maintain performance with kiosk context provider

    ReferenceError: ShopScreen is not defined

      219 |     render(
      220 |       <TestWrapper>
    > 221 |         <ShopScreen />
          |          ^
      222 |       </TestWrapper>
      223 |     );
      224 |

      at Object.ShopScreen (src/__tests__/integration/CustomerTransparency.test.tsx:221:10)

FAIL src/schemas/inventory/__contracts__/inventorySchema.contracts.test.ts
  ● Inventory Schema Contracts › StockMovementTransformSchema › should populate all required interface fields

    expect(received).toBe(expected) // Object.is equality

    Expected: "inv-1"
    Received: "550e8400-e29b-41d4-a716-446655440001"

      122 |       
      123 |       // Verify correct data transformation
    > 124 |       expect(result.inventoryItemId).toBe('inv-1');
          |                                      ^
      125 |       expect(result.movementType).toBe('adjustment');
      126 |       expect(result.quantityChange).toBe(-5);
      127 |       expect(result.performedBy).toBe('user-1');

      at Object.toBe (src/schemas/inventory/__contracts__/inventorySchema.contracts.test.ts:124:38)

FAIL src/utils/__tests__/broadcast-performance.test.ts
  ● Broadcast Performance Improvements › Parallel Broadcasting › should send multiple target broadcasts in parallel

    TypeError: sendMultiTargetBroadcast is not a function

      45 |       );
      46 |
    > 47 |       const results = await sendMultiTargetBroadcast(
         |                             ^
      48 |         'orders',
      49 |         'order-status-updated',
      50 |         { 

      at Object.sendMultiTargetBroadcast (src/utils/__tests__/broadcast-performance.test.ts:47:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Broadcast Performance Improvements › Parallel Broadcasting › should handle mixed success/failure results in parallel broadcasts

    TypeError: sendMultiTargetBroadcast is not a function

      77 |         .mockRejectedValueOnce(new Error('Network error'));
      78 |
    > 79 |       const results = await sendMultiTargetBroadcast(
         |                             ^
      80 |         'orders',
      81 |         'order-status-updated',
      82 |         { 

      at Object.sendMultiTargetBroadcast (src/utils/__tests__/broadcast-performance.test.ts:79:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Broadcast Performance Improvements › Channel Name Caching › should cache channel names to avoid repeated HMAC calculations

    TypeError: Cannot read properties of undefined (reading 'generateSecureChannelName')

      104 |       // First call should generate the name
      105 |       const startTime1 = performance.now();
    > 106 |       const name1 = SecureChannelNameGenerator.generateSecureChannelName(entity, target, userId);
          |                                                ^
      107 |       const duration1 = performance.now() - startTime1;
      108 |
      109 |       // Second call should be cached (much faster)

      at Object.generateSecureChannelName (src/utils/__tests__/broadcast-performance.test.ts:106:48)

  ● Broadcast Performance Improvements › Channel Name Caching › should cache backup channel names separately

    TypeError: Cannot read properties of undefined (reading 'generateSecureChannelName')

      126 |       const target = 'admin-only';
      127 |
    > 128 |       const primaryName = SecureChannelNameGenerator.generateSecureChannelName(entity, target);
          |                                                      ^
      129 |       const backupName = SecureChannelNameGenerator.generateBackupChannelName(entity, target);
      130 |
      131 |       // Names should be different but both cached

      at Object.generateSecureChannelName (src/utils/__tests__/broadcast-performance.test.ts:128:54)

  ● Broadcast Performance Improvements › Channel Name Caching › should use different cache keys for different entities/targets/users

    TypeError: Cannot read properties of undefined (reading 'generateSecureChannelName')

      140 |
      141 |     it('should use different cache keys for different entities/targets/users', () => {
    > 142 |       const user1Channel = SecureChannelNameGenerator.generateSecureChannelName('orders', 'user-specific', 'user1');
          |                                                       ^
      143 |       const user2Channel = SecureChannelNameGenerator.generateSecureChannelName('orders', 'user-specific', 'user2');
      144 |       const adminChannel = SecureChannelNameGenerator.generateSecureChannelName('orders', 'admin-only');
      145 |       const cartChannel = SecureChannelNameGenerator.generateSecureChannelName('cart', 'user-specific', 'user1');

      at Object.generateSecureChannelName (src/utils/__tests__/broadcast-performance.test.ts:142:55)

  ● Broadcast Performance Improvements › Performance Monitoring › should log performance metrics for multi-target broadcasts

    TypeError: sendMultiTargetBroadcast is not a function

      157 |       mockSend.mockResolvedValue({ status: 'ok' });
      158 |
    > 159 |       await sendMultiTargetBroadcast(
          |             ^
      160 |         'orders',
      161 |         'order-status-updated',
      162 |         { 

      at Object.sendMultiTargetBroadcast (src/utils/__tests__/broadcast-performance.test.ts:159:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Broadcast Performance Improvements › Error Handling › should handle errors gracefully without blocking other broadcasts

    TypeError: sendMultiTargetBroadcast is not a function

      186 |         .mockRejectedValueOnce(new Error('Channel error'));
      187 |
    > 188 |       const results = await sendMultiTargetBroadcast(
          |                             ^
      189 |         'orders',
      190 |         'order-status-updated',
      191 |         { 

      at Object.sendMultiTargetBroadcast (src/utils/__tests__/broadcast-performance.test.ts:188:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL src/hooks/executive/__tests__/useSimpleBusinessInsights.test.tsx
  ● useSimpleBusinessInsights Hook › when user has executive role › should fetch business insights successfully

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      109 |       expect(result.current.metadata).toEqual(mockInsights.metadata);
      110 |       expect(result.current.isSuccess).toBe(true);
    > 111 |       expect(mockService.getInsights).toHaveBeenCalled();
          |                                       ^
      112 |     });
      113 |
      114 |     it('should handle insights with filtering options', async () => {

      at Object.toHaveBeenCalled (src/hooks/executive/__tests__/useSimpleBusinessInsights.test.tsx:111:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useSimpleBusinessInsights Hook › when user has executive role › should handle insights with filtering options

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"impactFilter": ["high"], "insightType": "correlation", "minConfidence": 0.8}

    Number of calls: 0

      152 |       expect(result.current.insights).toHaveLength(1);
      153 |       expect(result.current.insights[0].insightType).toBe('correlation');
    > 154 |       expect(mockService.getInsights).toHaveBeenCalledWith({
          |                                       ^
      155 |         insightType: 'correlation',
      156 |         minConfidence: 0.8,
      157 |         impactFilter: ['high']

      at Object.toHaveBeenCalledWith (src/hooks/executive/__tests__/useSimpleBusinessInsights.test.tsx:154:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/executive/__tests__/useSimplePredictiveAnalytics.test.tsx
  ● useSimplePredictiveAnalytics Hook › when user has executive role › should fetch predictive analytics successfully

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      134 |       expect(result.current.forecastData).toEqual(mockForecast);
      135 |       expect(result.current.isSuccess).toBe(true);
    > 136 |       expect(mockService.getForecast).toHaveBeenCalled();
          |                                       ^
      137 |     });
      138 |
      139 |     it('should handle predictive analytics with options', async () => {

      at Object.toHaveBeenCalled (src/hooks/executive/__tests__/useSimplePredictiveAnalytics.test.tsx:136:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useSimplePredictiveAnalytics Hook › when user has executive role › should handle predictive analytics with options

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"forecastType": "demand", "includeConfidenceIntervals": true, "timeHorizon": "quarter"}

    Number of calls: 0

      190 |
      191 |       expect(result.current.forecastData).toEqual(mockForecastWithOptions);
    > 192 |       expect(mockService.getForecast).toHaveBeenCalledWith({
          |                                       ^
      193 |         forecastType: 'demand',
      194 |         timeHorizon: 'quarter',
      195 |         includeConfidenceIntervals: true

      at Object.toHaveBeenCalledWith (src/hooks/executive/__tests__/useSimplePredictiveAnalytics.test.tsx:192:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/hooks/executive/__tests__/useSimpleBusinessMetrics.test.tsx
  ● useSimpleBusinessMetrics Hook › when user has executive role › should fetch business metrics successfully

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

       98 |       expect(result.current.metrics).toEqual(mockMetrics);
       99 |       expect(result.current.isSuccess).toBe(true);
    > 100 |       expect(mockService.getMetrics).toHaveBeenCalled();
          |                                      ^
      101 |     });
      102 |
      103 |     it('should handle metrics with options', async () => {

      at Object.toHaveBeenCalled (src/hooks/executive/__tests__/useSimpleBusinessMetrics.test.tsx:100:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● useSimpleBusinessMetrics Hook › when user has executive role › should handle metrics with options

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"category": "revenue", "dateRange": "2024-01-01,2024-01-31"}

    Number of calls: 0

      132 |
      133 |       expect(result.current.metrics).toEqual(mockMetrics);
    > 134 |       expect(mockService.getMetrics).toHaveBeenCalledWith({
          |                                      ^
      135 |         dateRange: '2024-01-01,2024-01-31',
      136 |         category: 'revenue'
      137 |       });

      at Object.toHaveBeenCalledWith (src/hooks/executive/__tests__/useSimpleBusinessMetrics.test.tsx:134:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL src/services/executive/__tests__/strategicReportingService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       5 |
       6 | import { StrategicReportingService } from '../strategicReportingService';
    >  7 | import { createUser, resetAllFactories } from '../../../test/factories';
         | ^
       8 |
       9 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      10 | jest.mock('../../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/executive/__tests__/strategicReportingService.test.ts:7:1)

FAIL src/services/executive/__tests__/businessIntelligenceService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       5 |
       6 | import { BusinessIntelligenceService } from '../businessIntelligenceService';
    >  7 | import { createUser, resetAllFactories } from '../../../test/factories';
         | ^
       8 |
       9 | // Mock Supabase using the refactored infrastructure
      10 | jest.mock('../../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/executive/__tests__/businessIntelligenceService.test.ts:7:1)

FAIL src/services/executive/__tests__/performanceIntegration.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      4 |
      5 | import { BusinessMetricsService } from '../businessMetricsService';
    > 6 | import { createUser, resetAllFactories } from '../../../test/factories';
        | ^
      7 |
      8 | // Mock Supabase using the refactored infrastructure
      9 | jest.mock('../../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/executive/__tests__/performanceIntegration.test.ts:6:1)

FAIL src/services/executive/__tests__/businessMetricsService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       5 |
       6 | import { BusinessMetricsService } from '../businessMetricsService';
    >  7 | import { createUser, resetAllFactories } from '../../../test/factories';
         | ^
       8 |
       9 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      10 | jest.mock('../../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/executive/__tests__/businessMetricsService.test.ts:7:1)

FAIL src/services/executive/__tests__/executiveDashboardIntegration.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      3 | import { StrategicReportingService } from '../strategicReportingService';
      4 | import { PredictiveAnalyticsService } from '../predictiveAnalyticsService';
    > 5 | import { createUser, resetAllFactories } from '../../../test/factories';
        | ^
      6 |
      7 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      8 | jest.mock('../../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/executive/__tests__/executiveDashboardIntegration.test.ts:5:1)

FAIL src/services/executive/__tests__/predictiveAnalyticsIntegration.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      4 |
      5 | import { PredictiveAnalyticsService } from '../predictiveAnalyticsService';
    > 6 | import { createUser, resetAllFactories } from '../../../test/factories';
        | ^
      7 |
      8 | // Mock Supabase using the refactored infrastructure
      9 | jest.mock('../../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/executive/__tests__/predictiveAnalyticsIntegration.test.ts:6:1)

FAIL src/services/executive/__tests__/crossRoleAnalyticsIntegration.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { BusinessMetricsService } from '../businessMetricsService';
       7 | import { BusinessIntelligenceService } from '../businessIntelligenceService';
    >  8 | import { createUser, resetAllFactories } from '../../../test/factories';
         | ^
       9 |
      10 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      11 | jest.mock('../../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/executive/__tests__/crossRoleAnalyticsIntegration.test.ts:8:1)

FAIL src/services/marketing/__tests__/campaignManagementIntegration.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      2 | import { ProductContentService } from '../productContentService';
      3 | import { ProductBundleService } from '../productBundleService';
    > 4 | import { createUser, createProduct, resetAllFactories } from '../../../test/factories';
        | ^
      5 | import type {
      6 |   MarketingCampaignTransform,
      7 |   CreateMarketingCampaignInput,

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/marketing/__tests__/campaignManagementIntegration.test.ts:4:1)

FAIL src/services/marketing/__tests__/productBundleService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      3 |
      4 | // Factory imports
    > 5 | import { 
        | ^
      6 |   createUser, 
      7 |   createProduct, 
      8 |   createOrder, 

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/marketing/__tests__/productBundleService.test.ts:5:1)

FAIL src/services/role-based/__tests__/roleNavigationService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       9 |
      10 | // Factory imports
    > 11 | import { 
         | ^
      12 |   createUser, 
      13 |   createProduct, 
      14 |   createOrder, 

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/role-based/__tests__/roleNavigationService.test.ts:11:1)

FAIL src/services/inventory/__tests__/stockMovementService.mock.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      3 |
      4 | // Factory imports
    > 5 | import { 
        | ^
      6 |   createUser, 
      7 |   createProduct, 
      8 |   createOrder, 

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/inventory/__tests__/stockMovementService.mock.test.ts:5:1)

FAIL src/services/inventory/__tests__/stockMovementService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      51 | import { supabase } from '../../../config/supabase';
      52 | import { ValidationMonitor } from '../../../utils/validationMonitor';
    > 53 | import { createProduct, createUser, resetAllFactories } from '../../../test/factories';
         | ^
      54 | import type { 
      55 |   StockMovementTransform,
      56 |   CreateStockMovementInput,

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/inventory/__tests__/stockMovementService.test.ts:53:1)

FAIL src/services/__tests__/realtimeService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       5 |
       6 | import { RealtimeService } from '../realtimeService';
    >  7 | import { createUser, createOrder, resetAllFactories } from '../../test/factories';
         | ^
       8 |
       9 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      10 | jest.mock('../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/__tests__/realtimeService.test.ts:7:1)

FAIL src/services/marketing/__tests__/productContentService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      1 | import { ProductContentService } from '../productContentService';
    > 2 | import { createUser, createProduct, resetAllFactories } from '../../../test/factories';
        | ^
      3 | import type { 
      4 |   UpdateProductContentInput,
      5 |   CreateProductContentInput

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/marketing/__tests__/productContentService.test.ts:2:1)

FAIL src/services/inventory/__tests__/inventoryService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       5 |
       6 | import { InventoryService } from '../inventoryService';
    >  7 | import { createProduct, createUser, resetAllFactories } from '../../../test/factories';
         | ^
       8 | import type { 
       9 |   InventoryItemTransform,
      10 |   CreateInventoryItemInput,

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/inventory/__tests__/inventoryService.test.ts:7:1)

FAIL src/services/__tests__/notificationService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       5 |
       6 | import { NotificationService, sendPickupReadyNotification, sendOrderConfirmationNotification } from '../notificationService';
    >  7 | import { createUser, createOrder, resetAllFactories } from '../../test/factories';
         | ^
       8 |
       9 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      10 | jest.mock('../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/__tests__/notificationService.test.ts:7:1)

FAIL src/services/marketing/__tests__/marketingCampaignService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      3 |
      4 | // Factory imports
    > 5 | import { 
        | ^
      6 |   createUser, 
      7 |   createProduct, 
      8 |   createOrder, 

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/marketing/__tests__/marketingCampaignService.test.ts:5:1)

FAIL src/services/marketing/__tests__/contentWorkflowIntegration.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      1 | import { ProductContentService } from '../productContentService';
    > 2 | import { createUser, createProduct, resetAllFactories } from '../../../test/factories';
        | ^
      3 | import type {
      4 |   CreateProductContentInput,
      5 |   UpdateProductContentInput,

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/marketing/__tests__/contentWorkflowIntegration.test.ts:2:1)

FAIL src/services/marketing/__tests__/marketingServiceIntegration.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      2 | import { MarketingCampaignService } from '../marketingCampaignService';
      3 | import { ProductBundleService } from '../productBundleService';
    > 4 | import { createUser, createProduct, resetAllFactories } from '../../../test/factories';
        | ^
      5 |
      6 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      7 | jest.mock('../../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/marketing/__tests__/marketingServiceIntegration.test.ts:4:1)

FAIL src/services/__tests__/tokenService.test.ts
  ● Test suite failed to run

    Cannot find module 'jsonwebtoken' from 'src/services/__tests__/tokenService.test.ts'

      41 |
      42 | // Mock JWT if needed
    > 43 | jest.mock('jsonwebtoken', () => ({
         |      ^
      44 |   decode: jest.fn(),
      45 |   verify: jest.fn(),
      46 | }));

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.mock (src/services/__tests__/tokenService.test.ts:43:6)

FAIL src/services/__tests__/pickupReschedulingService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       5 |
       6 | import { PickupReschedulingService } from '../pickupReschedulingService';
    >  7 | import { createOrder, createUser, resetAllFactories } from '../../test/factories';
         | ^
       8 |
       9 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      10 | jest.mock('../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/__tests__/pickupReschedulingService.test.ts:7:1)

FAIL src/services/__tests__/authService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       5 |
       6 | import { AuthService } from '../authService';
    >  7 | import { createUser, resetAllFactories } from '../../test/factories';
         | ^
       8 |
       9 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      10 | jest.mock('../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/__tests__/authService.test.ts:7:1)

FAIL src/services/__tests__/paymentService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       5 |
       6 | import { paymentService } from '../paymentService';
    >  7 | import { createUser, createOrder, createPayment, createPaymentMethod, resetAllFactories } from '../../test/factories';
         | ^
       8 |
       9 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      10 | jest.mock('../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/__tests__/paymentService.test.ts:7:1)

FAIL src/services/__tests__/stockRestorationService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       5 |
       6 | import { StockRestorationService } from '../stockRestorationService';
    >  7 | import { createOrder, createProduct, createOrderItem, resetAllFactories } from '../../test/factories';
         | ^
       8 |
       9 | // Mock Supabase using the refactored infrastructure - CREATE MOCK IN THE JEST.MOCK CALL
      10 | jest.mock('../../config/supabase', () => {

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/__tests__/stockRestorationService.test.ts:7:1)

FAIL src/hooks/__tests__/prototypes/usePickupRescheduling.race.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/pickupReschedulingService' from 'src/hooks/__tests__/prototypes/usePickupRescheduling.race.test.tsx'

      13 |
      14 | // Import mocked services (services are mocked, React Query is real)
    > 15 | jest.mock('../../services/pickupReschedulingService', () => ({
         |                                                       ^
      16 |   PickupReschedulingService: {
      17 |     reschedulePickup: jest.fn(),
      18 |     wasRecentlyRescheduled: jest.fn(),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/usePickupRescheduling.race.test.tsx:15:55)

FAIL src/hooks/__tests__/prototypes/useNotifications.race.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/notificationService' from 'src/hooks/__tests__/prototypes/useNotifications.race.test.tsx'

      13 |
      14 | // Import mocked notification service (services are mocked, React Query is real)
    > 15 | jest.mock('../../services/notificationService', () => ({
         |                                                 ^
      16 |   NotificationService: {
      17 |     sendNotification: jest.fn(),
      18 |     sendPickupReadyNotification: jest.fn(),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/useNotifications.race.test.tsx:15:49)

FAIL src/hooks/__tests__/useProductAdmin.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, createProduct, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/productAdminService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useProductAdmin.test.tsx:8:1)

FAIL src/hooks/__tests__/useNoShowHandling.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, createOrder, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/noShowHandlingService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useNoShowHandling.test.tsx:8:1)

FAIL src/hooks/__tests__/useRealtime.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/realtimeService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useRealtime.test.tsx:8:1)

FAIL src/hooks/__tests__/useOrders.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, createOrder, createOrderItem, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/orderService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useOrders.test.tsx:8:1)

FAIL src/hooks/__tests__/usePayment.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, createPayment, createPaymentMethod, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/paymentService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/usePayment.test.tsx:8:1)

FAIL src/hooks/__tests__/prototypes/useCheckoutForm.simple.test.js
  ● Test suite failed to run

    Cannot find module '../useCheckoutForm' from 'src/hooks/__tests__/prototypes/useCheckoutForm.simple.test.js'

      1 | // Simple JavaScript test to verify useCheckoutForm functionality
    > 2 | const { useCheckoutForm } = require('../useCheckoutForm');
        |                             ^
      3 |
      4 | // Mock React hooks
      5 | let state = {};

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (src/hooks/__tests__/prototypes/useCheckoutForm.simple.test.js:2:29)

FAIL src/hooks/__tests__/prototypes/useCart.simple.working.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/cartService' from 'src/hooks/__tests__/prototypes/useCart.simple.working.test.tsx'

       5 |
       6 | // Mock all service dependencies first (before any imports)
    >  7 | jest.mock('../../services/cartService', () => ({
         |                                         ^
       8 |   cartService: {
       9 |     getCart: jest.fn(() => Promise.resolve({ items: [], total: 0 })),
      10 |     addToCart: jest.fn(() => Promise.resolve({ success: true })),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/useCart.simple.working.test.tsx:7:41)

FAIL src/hooks/__tests__/prototypes/useCentralizedRealtime.race.test.tsx
  ● Test suite failed to run

    Cannot find module '../useCentralizedRealtime' from 'src/hooks/__tests__/prototypes/useCentralizedRealtime.race.test.tsx'

      14 | import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
      15 | import React from 'react';
    > 16 | import { 
         | ^
      17 |   useCentralizedRealtime, 
      18 |   useForceRefreshUserData 
      19 | } from '../useCentralizedRealtime';

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (src/hooks/__tests__/prototypes/useCentralizedRealtime.race.test.tsx:16:1)

FAIL src/services/__tests__/productAdminService.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

      61 | import { supabase } from '../../config/supabase';
      62 | import { BroadcastHelper } from '../../utils/broadcastHelper';
    > 63 | import { createProduct, createCategory, createUser, resetAllFactories } from '../../test/factories';
         | ^
      64 |
      65 | // Get mock references
      66 | const mockSupabaseFrom = supabase.from as jest.Mock;

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/services/__tests__/productAdminService.test.ts:63:1)

FAIL src/hooks/__tests__/prototypes/useAuth.race.simple.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/authService' from 'src/hooks/__tests__/prototypes/useAuth.race.simple.test.tsx'

      12 |
      13 | // Mock AuthService for this test file specifically
    > 14 | jest.mock('../../services/authService', () => ({
         |                                         ^
      15 |   AuthService: {
      16 |     getCurrentUser: jest.fn(),
      17 |     isAuthenticated: jest.fn(),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/useAuth.race.simple.test.tsx:14:41)

FAIL src/hooks/__tests__/prototypes/useAuth.race.test.tsx
  ● Test suite failed to run

    Cannot find module '../useAuth' from 'src/hooks/__tests__/prototypes/useAuth.race.test.tsx'

    However, Jest was able to find:
    	'../useAuth.test.tsx'

    You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['ts', 'tsx', 'js', 'jsx'].

    See https://jestjs.io/docs/configuration#modulefileextensions-arraystring

      16 | import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
      17 | import React from 'react';
    > 18 | import { 
         | ^
      19 |   useLoginMutation, 
      20 |   useRegisterMutation, 
      21 |   useLogoutMutation, 

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (src/hooks/__tests__/prototypes/useAuth.race.test.tsx:18:1)

FAIL src/hooks/inventory/__tests__/useInventoryDashboard.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/react' from 'src/hooks/inventory/__tests__/useInventoryDashboard.test.tsx'

       7 | import { createSupabaseMock } from '../../../test/mocks/supabase.simplified.mock';
       8 | import { hookContracts } from '../../../test/contracts/hook.contracts';
    >  9 | import { renderHook, waitFor } from '@testing-library/react';
         | ^
      10 | import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
      11 | import {
      12 |   useInventoryDashboard,

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (src/hooks/inventory/__tests__/useInventoryDashboard.test.tsx:9:1)

FAIL src/hooks/__tests__/prototypes/simple.test.ts
  ● Test suite failed to run

    Cannot find module '../../test/mocks/supabase.simplified.mock' from 'src/hooks/__tests__/prototypes/simple.test.ts'

      1 | // Simple test file - migrated to new test architecture
    > 2 | import { createSupabaseMock } from '../../test/mocks/supabase.simplified.mock';
        | ^
      3 | import { hookContracts } from '../../test/contracts/hook.contracts';
      4 |
      5 | describe('Simple test - Migrated', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/simple.test.ts:2:1)

FAIL src/hooks/__tests__/prototypes/useAuth.simple.working.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/authService' from 'src/hooks/__tests__/prototypes/useAuth.simple.working.test.tsx'

      4 |
      5 | // Mock everything that might cause compilation issues
    > 6 | jest.mock('../../services/authService', () => ({
        |                                         ^
      7 |   AuthService: {
      8 |     login: jest.fn(() => Promise.resolve({ success: true, user: { id: '1', email: 'test@test.com' } })),
      9 |     getCurrentUser: jest.fn(() => Promise.resolve({ id: '1', email: 'test@test.com' })),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/useAuth.simple.working.test.tsx:6:41)

FAIL src/hooks/__tests__/prototypes/useProducts.simple.working.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/productService' from 'src/hooks/__tests__/prototypes/useProducts.simple.working.test.tsx'

       5 |
       6 | // Mock all service dependencies first (before any imports)
    >  7 | jest.mock('../../services/productService', () => ({
         |                                            ^
       8 |   ProductService: {
       9 |     getAllProducts: jest.fn(() => Promise.resolve([])),
      10 |     getProduct: jest.fn(() => Promise.resolve({ id: '1', name: 'Test Product' })),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/useProducts.simple.working.test.tsx:7:44)

FAIL src/hooks/__tests__/prototypes/useOrders.race.test.tsx
  ● Test suite failed to run

    Cannot find module '../useOrders' from 'src/hooks/__tests__/prototypes/useOrders.race.test.tsx'

    However, Jest was able to find:
    	'../useOrders.test.tsx'

    You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['ts', 'tsx', 'js', 'jsx'].

    See https://jestjs.io/docs/configuration#modulefileextensions-arraystring

      14 | import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
      15 | import React from 'react';
    > 16 | import { 
         | ^
      17 |   useOrders, 
      18 |   useOrder, 
      19 |   useOrderStats, 

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (src/hooks/__tests__/prototypes/useOrders.race.test.tsx:16:1)

FAIL src/hooks/__tests__/prototypes/useAuth.working.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/authService' from 'src/hooks/__tests__/prototypes/useAuth.working.test.tsx'

       8 |
       9 | // 1. Mock services first (hooks should test hook logic, not service implementation)
    > 10 | jest.mock('../../services/authService', () => ({
         |                                         ^
      11 |   AuthService: {
      12 |     login: jest.fn(),
      13 |     register: jest.fn(),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/useAuth.working.test.tsx:10:41)

FAIL src/hooks/__tests__/prototypes/useStockValidation.race.test.tsx
  ● Test suite failed to run

    Cannot find module '../useCart' from 'src/hooks/__tests__/prototypes/useStockValidation.race.test.tsx'

      16 |
      17 | // Import mocked cart hook
    > 18 | jest.mock('../useCart', () => ({
         |                         ^
      19 |   useCart: () => ({
      20 |     getCartQuantity: jest.fn().mockImplementation((productId: string) => {
      21 |       // Return different quantities for different products to test various scenarios

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/useStockValidation.race.test.tsx:18:25)

FAIL src/hooks/__tests__/prototypes/useProducts.race.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/productService' from 'src/hooks/__tests__/prototypes/useProducts.race.test.tsx'

      19 |
      20 | // Import mocked services (services are mocked, React Query is real)
    > 21 | jest.mock('../../services/productService', () => ({
         |                                            ^
      22 |   getProducts: jest.fn(),
      23 |   getProductById: jest.fn(),
      24 |   getProductsByCategory: jest.fn(),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/useProducts.race.test.tsx:21:44)

FAIL src/hooks/__tests__/prototypes/useAuth.simple.test.ts
  ● Test suite failed to run

    Cannot find module '../../services/authService' from 'src/hooks/__tests__/prototypes/useAuth.simple.test.ts'

      4 |
      5 | // Mock AuthService properly
    > 6 | jest.mock('../../services/authService', () => ({
        |                                         ^
      7 |   AuthService: {
      8 |     login: jest.fn(),
      9 |     register: jest.fn(),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/prototypes/useAuth.simple.test.ts:6:41)

FAIL src/hooks/__tests__/prototypes/useCart.race.test.tsx
  ● Test suite failed to run

    Cannot find module '../useCart' from 'src/hooks/__tests__/prototypes/useCart.race.test.tsx'

    However, Jest was able to find:
    	'../useCart.simple-race.test.js'
    	'../useCart.test.tsx'

    You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['ts', 'tsx', 'js', 'jsx'].

    See https://jestjs.io/docs/configuration#modulefileextensions-arraystring

      13 | import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
      14 | import React from 'react';
    > 15 | import { useCart } from '../useCart';
         | ^
      16 | import { cartService } from '../../services/cartService';
      17 | import type { Product, CartState } from '../../types';
      18 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (src/hooks/__tests__/prototypes/useCart.race.test.tsx:15:1)

FAIL src/hooks/__tests__/useAuth.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/authService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useAuth.test.tsx:8:1)

FAIL src/hooks/__tests__/useCart.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, createCartItem, createProduct, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/cartService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useCart.test.tsx:8:1)

FAIL src/hooks/__tests__/useErrorRecovery.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/errorRecoveryService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useErrorRecovery.test.tsx:8:1)

FAIL src/hooks/__tests__/archive/usePickupRescheduling.legacy.test.ts
  ● Test suite failed to run

    Cannot find module '../../utils/queryKeyFactory' from 'src/hooks/__tests__/archive/usePickupRescheduling.legacy.test.ts'

       8 |
       9 | // Mock query key factory
    > 10 | jest.mock('../../utils/queryKeyFactory', () => require('../../test/mocks/queryKeyFactory.mock'));
         |                                          ^
      11 |
      12 | describe('usePickupRescheduling', () => {
      13 |   it('should pass basic setup test', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/usePickupRescheduling.legacy.test.ts:10:42)

FAIL src/hooks/__tests__/useProducts.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createProduct, createCategory, createUser, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/productService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useProducts.test.tsx:8:1)

FAIL src/hooks/__tests__/archive/useCart.legacy.test.ts
  ● Test suite failed to run

    Cannot find module '../../utils/broadcastFactory' from 'src/hooks/__tests__/archive/useCart.legacy.test.ts'

      1 | // Mock broadcast factory BEFORE any other imports
    > 2 | jest.mock('../../utils/broadcastFactory', () => {
        |                                                 ^
      3 |   const mockBroadcastHelper = {
      4 |     send: jest.fn(),
      5 |     getAuthorizedChannelNames: jest.fn(() => ['test-channel'])

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useCart.legacy.test.ts:2:49)

FAIL src/hooks/__tests__/useStockValidation.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, createProduct, createCartItem, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach - Service not implemented yet
      11 | jest.mock('../../services/stockValidationService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useStockValidation.test.tsx:8:1)

FAIL src/hooks/__tests__/archive/useRealtime.race.test.ts
  ● Test suite failed to run

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/hooks/__tests__/archive/useRealtime.race.test.ts: Unexpected token, expected "," (65:25)

      63 |
      64 |   const wrapper = ({ children }: { children: React.ReactNode }) => (
    > 65 |     <QueryClientProvider client={queryClient}>
         |                          ^
      66 |       {children}
      67 |     </QueryClientProvider>
      68 |   );

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptParserMixin.raise [as unexpected] (node_modules/@babel/parser/src/tokenizer/index.ts:1543:16)
      at TypeScriptParserMixin.unexpected [as expect] (node_modules/@babel/parser/src/parser/util.ts:157:12)
      at TypeScriptParserMixin.expect [as tsParseDelimitedListWorker] (node_modules/@babel/parser/src/plugins/typescript/index.ts:545:16)
      at TypeScriptParserMixin.tsParseDelimitedListWorker [as tsParseDelimitedList] (node_modules/@babel/parser/src/plugins/typescript/index.ts:498:14)
      at TypeScriptParserMixin.tsParseDelimitedList (node_modules/@babel/parser/src/plugins/typescript/index.ts:574:27)
      at TypeScriptParserMixin.tsParseBracketedList [as tsParseTypeParameters] (node_modules/@babel/parser/src/plugins/typescript/index.ts:826:26)
      at tsParseTypeParameters (node_modules/@babel/parser/src/plugins/typescript/index.ts:3739:31)
      at TypeScriptParserMixin.fn [as tryParse] (node_modules/@babel/parser/src/parser/util.ts:174:20)
      at TypeScriptParserMixin.tryParse [as parseMaybeAssign] (node_modules/@babel/parser/src/plugins/typescript/index.ts:3737:26)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowInOrVoidPattern [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1813:16)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at TypeScriptParserMixin.parseMaybeAssign [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2602:14)
      at TypeScriptParserMixin.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at TypeScriptParserMixin.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1837:12)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1582:18)
      at TypeScriptParserMixin.parseVar (node_modules/@babel/parser/src/parser/statement.ts:1246:10)
      at TypeScriptParserMixin.parseVarStatement (node_modules/@babel/parser/src/plugins/typescript/index.ts:3124:33)
      at TypeScriptParserMixin.parseVarStatement (node_modules/@babel/parser/src/parser/statement.ts:607:21)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at TypeScriptParserMixin.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at TypeScriptParserMixin.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at TypeScriptParserMixin.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at TypeScriptParserMixin.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1837:12)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at TypeScriptParserMixin.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at TypeScriptParserMixin.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at TypeScriptParserMixin.parseCoverCallAndAsyncArrowHead (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at TypeScriptParserMixin.parseSubscript (node_modules/@babel/parser/src/plugins/typescript/index.ts:2848:20)
      at TypeScriptParserMixin.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at TypeScriptParserMixin.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at TypeScriptParserMixin.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at TypeScriptParserMixin.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at TypeScriptParserMixin.parseExpression (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)

FAIL src/hooks/__tests__/useKiosk.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/kioskService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useKiosk.test.tsx:8:1)

FAIL src/hooks/__tests__/archive/useRealtime.legacy.test.ts
  ● Test suite failed to run

    Cannot find module '../../services/realtimeService' from 'src/hooks/__tests__/archive/useRealtime.legacy.test.ts'

       9 |
      10 | // Mock services using simplified approach
    > 11 | jest.mock('../../services/realtimeService', () => ({
         |                                             ^
      12 |   RealtimeService: {
      13 |     initializeAllSubscriptions: jest.fn(),
      14 |     cleanupAllSubscriptions: jest.fn(),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useRealtime.legacy.test.ts:11:45)

FAIL src/hooks/__tests__/usePickupRescheduling.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, createOrder, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/pickupReschedulingService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/usePickupRescheduling.test.tsx:8:1)

FAIL src/hooks/__tests__/archive/useNoShowHandling.legacy.test.ts
  ● Test suite failed to run

    Cannot find module '../../utils/queryKeyFactory' from 'src/hooks/__tests__/archive/useNoShowHandling.legacy.test.ts'

       8 |
       9 | // Mock query key factory
    > 10 | jest.mock('../../utils/queryKeyFactory', () => require('../../test/mocks/queryKeyFactory.mock'));
         |                                          ^
      11 |
      12 | describe('useNoShowHandling', () => {
      13 |   it('should pass basic setup test', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useNoShowHandling.legacy.test.ts:10:42)

FAIL src/hooks/__tests__/archive/useProductAdmin.legacy.test.ts
  ● Test suite failed to run

    Cannot find module '../../utils/validationMonitor' from 'src/hooks/__tests__/archive/useProductAdmin.legacy.test.ts'

      22 | };
      23 |
    > 24 | jest.mock('../../utils/validationMonitor', () => ({
         |                                            ^
      25 |   validationMonitor: mockValidationMonitor,
      26 | }));
      27 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useProductAdmin.legacy.test.ts:24:44)

FAIL src/hooks/__tests__/archive/useCheckoutForm.race.test.ts
  ● Test suite failed to run

    Cannot find module '../useCart' from 'src/hooks/__tests__/archive/useCheckoutForm.race.test.ts'

      3 |
      4 | // Mock useCart to simulate server state changes
    > 5 | jest.mock('../useCart', () => ({
        |                         ^
      6 |   useCart: () => ({
      7 |     items: [
      8 |       {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useCheckoutForm.race.test.ts:5:25)

FAIL src/hooks/__tests__/archive/useCentralizedRealtime.race.test.ts
  ● Test suite failed to run

    Cannot find module '../../config/supabase' from 'src/hooks/__tests__/archive/useCentralizedRealtime.race.test.ts'

       7 |
       8 | // Mock dependencies
    >  9 | jest.mock('../../config/supabase', () => ({
         |                                    ^
      10 |   supabase: {
      11 |     channel: jest.fn()
      12 |   }

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useCentralizedRealtime.race.test.ts:9:36)

FAIL src/hooks/__tests__/archive/useAuth.legacy.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/authService' from 'src/hooks/__tests__/archive/useAuth.legacy.test.tsx'

       5 |
       6 | // Mock all service dependencies first (before any imports)
    >  7 | jest.mock('../../services/authService', () => ({
         |                                         ^
       8 |   AuthService: {
       9 |     login: jest.fn(() => Promise.resolve({ success: true, user: { id: '1', email: 'test@test.com' } })),
      10 |     register: jest.fn(() => Promise.resolve({ success: true, user: { id: '1', email: 'test@test.com' } })),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useAuth.legacy.test.tsx:7:41)

FAIL src/hooks/__tests__/archive/useAuth.race.test.ts
  ● Test suite failed to run

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/hooks/__tests__/archive/useAuth.race.test.ts: Unexpected token, expected "," (68:25)

      66 |
      67 |   const wrapper = ({ children }: { children: React.ReactNode }) => (
    > 68 |     <QueryClientProvider client={queryClient}>
         |                          ^
      69 |       {children}
      70 |     </QueryClientProvider>
      71 |   );

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptParserMixin.raise [as unexpected] (node_modules/@babel/parser/src/tokenizer/index.ts:1543:16)
      at TypeScriptParserMixin.unexpected [as expect] (node_modules/@babel/parser/src/parser/util.ts:157:12)
      at TypeScriptParserMixin.expect [as tsParseDelimitedListWorker] (node_modules/@babel/parser/src/plugins/typescript/index.ts:545:16)
      at TypeScriptParserMixin.tsParseDelimitedListWorker [as tsParseDelimitedList] (node_modules/@babel/parser/src/plugins/typescript/index.ts:498:14)
      at TypeScriptParserMixin.tsParseDelimitedList (node_modules/@babel/parser/src/plugins/typescript/index.ts:574:27)
      at TypeScriptParserMixin.tsParseBracketedList [as tsParseTypeParameters] (node_modules/@babel/parser/src/plugins/typescript/index.ts:826:26)
      at tsParseTypeParameters (node_modules/@babel/parser/src/plugins/typescript/index.ts:3739:31)
      at TypeScriptParserMixin.fn [as tryParse] (node_modules/@babel/parser/src/parser/util.ts:174:20)
      at TypeScriptParserMixin.tryParse [as parseMaybeAssign] (node_modules/@babel/parser/src/plugins/typescript/index.ts:3737:26)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowInOrVoidPattern [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1813:16)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at TypeScriptParserMixin.parseMaybeAssign [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2602:14)
      at TypeScriptParserMixin.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at TypeScriptParserMixin.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1837:12)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1582:18)
      at TypeScriptParserMixin.parseVar (node_modules/@babel/parser/src/parser/statement.ts:1246:10)
      at TypeScriptParserMixin.parseVarStatement (node_modules/@babel/parser/src/plugins/typescript/index.ts:3124:33)
      at TypeScriptParserMixin.parseVarStatement (node_modules/@babel/parser/src/parser/statement.ts:607:21)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at TypeScriptParserMixin.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at TypeScriptParserMixin.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at TypeScriptParserMixin.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at TypeScriptParserMixin.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1837:12)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at TypeScriptParserMixin.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at TypeScriptParserMixin.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at TypeScriptParserMixin.parseCoverCallAndAsyncArrowHead (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at TypeScriptParserMixin.parseSubscript (node_modules/@babel/parser/src/plugins/typescript/index.ts:2848:20)
      at TypeScriptParserMixin.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at TypeScriptParserMixin.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at TypeScriptParserMixin.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at TypeScriptParserMixin.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at TypeScriptParserMixin.parseExpression (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)

FAIL src/hooks/__tests__/archive/useOrders.legacy.test.ts
  ● Test suite failed to run

    Cannot find module '../../services/orderService' from 'src/hooks/__tests__/archive/useOrders.legacy.test.ts'

       9 |
      10 | // Mock services using simplified approach
    > 11 | jest.mock('../../services/orderService', () => ({
         |                                          ^
      12 |   orderService: {
      13 |     getOrders: jest.fn(),
      14 |     getOrder: jest.fn(),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useOrders.legacy.test.ts:11:42)

FAIL src/hooks/__tests__/archive/useStockValidation.legacy.test.ts
  ● Test suite failed to run

    Cannot find module '../../utils/queryKeyFactory' from 'src/hooks/__tests__/archive/useStockValidation.legacy.test.ts'

       9 |
      10 | // Mock query key factory
    > 11 | jest.mock('../../utils/queryKeyFactory', () => require('../../test/mocks/queryKeyFactory.mock'));
         |                                          ^
      12 |
      13 | describe('useStockValidation', () => {
      14 |   it('should pass basic setup test', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useStockValidation.legacy.test.ts:11:42)

FAIL src/hooks/__tests__/archive/usePayment.legacy.test.ts
  ● Test suite failed to run

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/hooks/__tests__/archive/usePayment.legacy.test.ts: Unexpected token, expected "," (82:27)

      80 |   const createWrapper = () => {
      81 |     const Wrapper = ({ children }: { children: React.ReactNode }) => (
    > 82 |       <QueryClientProvider client={queryClient}>{children}</QueryClientProvider>
         |                            ^
      83 |     );
      84 |     return Wrapper;
      85 |   };

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptParserMixin.raise [as unexpected] (node_modules/@babel/parser/src/tokenizer/index.ts:1543:16)
      at TypeScriptParserMixin.unexpected [as expect] (node_modules/@babel/parser/src/parser/util.ts:157:12)
      at TypeScriptParserMixin.expect [as tsParseDelimitedListWorker] (node_modules/@babel/parser/src/plugins/typescript/index.ts:545:16)
      at TypeScriptParserMixin.tsParseDelimitedListWorker [as tsParseDelimitedList] (node_modules/@babel/parser/src/plugins/typescript/index.ts:498:14)
      at TypeScriptParserMixin.tsParseDelimitedList (node_modules/@babel/parser/src/plugins/typescript/index.ts:574:27)
      at TypeScriptParserMixin.tsParseBracketedList [as tsParseTypeParameters] (node_modules/@babel/parser/src/plugins/typescript/index.ts:826:26)
      at tsParseTypeParameters (node_modules/@babel/parser/src/plugins/typescript/index.ts:3739:31)
      at TypeScriptParserMixin.fn [as tryParse] (node_modules/@babel/parser/src/parser/util.ts:174:20)
      at TypeScriptParserMixin.tryParse [as parseMaybeAssign] (node_modules/@babel/parser/src/plugins/typescript/index.ts:3737:26)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowInOrVoidPattern [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1813:16)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at TypeScriptParserMixin.parseMaybeAssign [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2602:14)
      at TypeScriptParserMixin.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at TypeScriptParserMixin.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1837:12)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1582:18)
      at TypeScriptParserMixin.parseVar (node_modules/@babel/parser/src/parser/statement.ts:1246:10)
      at TypeScriptParserMixin.parseVarStatement (node_modules/@babel/parser/src/plugins/typescript/index.ts:3124:33)
      at TypeScriptParserMixin.parseVarStatement (node_modules/@babel/parser/src/parser/statement.ts:607:21)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at TypeScriptParserMixin.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at TypeScriptParserMixin.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at TypeScriptParserMixin.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at TypeScriptParserMixin.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1837:12)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1582:18)
      at TypeScriptParserMixin.parseVar (node_modules/@babel/parser/src/parser/statement.ts:1246:10)
      at TypeScriptParserMixin.parseVarStatement (node_modules/@babel/parser/src/plugins/typescript/index.ts:3124:33)
      at TypeScriptParserMixin.parseVarStatement (node_modules/@babel/parser/src/parser/statement.ts:607:21)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at TypeScriptParserMixin.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at TypeScriptParserMixin.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at TypeScriptParserMixin.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at TypeScriptParserMixin.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1837:12)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at TypeScriptParserMixin.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at TypeScriptParserMixin.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at TypeScriptParserMixin.parseCoverCallAndAsyncArrowHead (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at TypeScriptParserMixin.parseSubscript (node_modules/@babel/parser/src/plugins/typescript/index.ts:2848:20)

FAIL src/hooks/__tests__/archive/useNotifications.legacy.test.ts
  ● Test suite failed to run

    Cannot find module '../../utils/queryKeyFactory' from 'src/hooks/__tests__/archive/useNotifications.legacy.test.ts'

       9 |
      10 | // Mock query key factory
    > 11 | jest.mock('../../utils/queryKeyFactory', () => require('../../test/mocks/queryKeyFactory.mock'));
         |                                          ^
      12 |
      13 | describe('useNotifications', () => {
      14 |   it('should pass basic setup test', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useNotifications.legacy.test.ts:11:42)

FAIL src/hooks/__tests__/archive/useProducts.legacy.test.ts
  ● Test suite failed to run

    Cannot find module '../../services/productService' from 'src/hooks/__tests__/archive/useProducts.legacy.test.ts'

       9 |
      10 | // Mock services using simplified approach
    > 11 | jest.mock('../../services/productService', () => ({
         |                                            ^
      12 |   productService: {
      13 |     getProducts: jest.fn(),
      14 |     getProduct: jest.fn(),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useProducts.legacy.test.ts:11:44)

FAIL src/hooks/__tests__/archive/useErrorRecovery.legacy.test.ts
  ● Test suite failed to run

    Cannot find module '../../utils/queryKeyFactory' from 'src/hooks/__tests__/archive/useErrorRecovery.legacy.test.ts'

       9 |
      10 | // Mock query key factory
    > 11 | jest.mock('../../utils/queryKeyFactory', () => require('../../test/mocks/queryKeyFactory.mock'));
         |                                          ^
      12 |
      13 | describe('useErrorRecovery', () => {
      14 |   it('should pass basic setup test', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/hooks/__tests__/archive/useErrorRecovery.legacy.test.ts:11:42)

FAIL src/__tests__/payment-integration.test.ts
  ● Test suite failed to run

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/__tests__/payment-integration.test.ts: Unexpected token, expected "," (69:27)

      67 |     
      68 |     wrapper = ({ children }: { children: React.ReactNode }) => (
    > 69 |       <QueryClientProvider client={queryClient}>
         |                            ^
      70 |         {children}
      71 |       </QueryClientProvider>
      72 |     );

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptParserMixin.raise [as unexpected] (node_modules/@babel/parser/src/tokenizer/index.ts:1543:16)
      at TypeScriptParserMixin.unexpected [as expect] (node_modules/@babel/parser/src/parser/util.ts:157:12)
      at TypeScriptParserMixin.expect [as tsParseDelimitedListWorker] (node_modules/@babel/parser/src/plugins/typescript/index.ts:545:16)
      at TypeScriptParserMixin.tsParseDelimitedListWorker [as tsParseDelimitedList] (node_modules/@babel/parser/src/plugins/typescript/index.ts:498:14)
      at TypeScriptParserMixin.tsParseDelimitedList (node_modules/@babel/parser/src/plugins/typescript/index.ts:574:27)
      at TypeScriptParserMixin.tsParseBracketedList [as tsParseTypeParameters] (node_modules/@babel/parser/src/plugins/typescript/index.ts:826:26)
      at tsParseTypeParameters (node_modules/@babel/parser/src/plugins/typescript/index.ts:3739:31)
      at TypeScriptParserMixin.fn [as tryParse] (node_modules/@babel/parser/src/parser/util.ts:174:20)
      at TypeScriptParserMixin.tryParse [as parseMaybeAssign] (node_modules/@babel/parser/src/plugins/typescript/index.ts:3737:26)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowInOrVoidPattern [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1813:16)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at TypeScriptParserMixin.parseMaybeAssign [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2602:14)
      at TypeScriptParserMixin.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at TypeScriptParserMixin.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1837:12)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:345:25)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at TypeScriptParserMixin.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at TypeScriptParserMixin.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at TypeScriptParserMixin.parseExpression (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at TypeScriptParserMixin.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at TypeScriptParserMixin.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at TypeScriptParserMixin.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at TypeScriptParserMixin.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1837:12)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:257:12)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3192:12)
      at TypeScriptParserMixin.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:256:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowIn [as parseMaybeAssignAllowInOrVoidPattern] (node_modules/@babel/parser/src/parser/expression.ts:3306:17)
      at TypeScriptParserMixin.parseMaybeAssignAllowInOrVoidPattern [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2788:18)
      at TypeScriptParserMixin.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1034:14)
      at TypeScriptParserMixin.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:914:29)
      at TypeScriptParserMixin.parseCoverCallAndAsyncArrowHead (node_modules/@babel/parser/src/parser/expression.ts:796:19)
      at TypeScriptParserMixin.parseSubscript (node_modules/@babel/parser/src/plugins/typescript/index.ts:2848:20)
      at TypeScriptParserMixin.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:755:19)
      at TypeScriptParserMixin.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:740:17)
      at TypeScriptParserMixin.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:713:21)
      at TypeScriptParserMixin.parseUpdate (node_modules/@babel/parser/src/parser/expression.ts:675:23)
      at TypeScriptParserMixin.parseMaybeUnary (node_modules/@babel/parser/src/plugins/typescript/index.ts:3853:20)
      at TypeScriptParserMixin.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:409:14)
      at TypeScriptParserMixin.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:421:23)
      at TypeScriptParserMixin.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:376:23)
      at TypeScriptParserMixin.parseMaybeConditional (node_modules/@babel/parser/src/parser/expression.ts:301:21)
      at TypeScriptParserMixin.parseMaybeAssign (node_modules/@babel/parser/src/plugins/typescript/index.ts:3725:22)
      at TypeScriptParserMixin.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:226:23)
      at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:217:39)
      at TypeScriptParserMixin.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3187:16)
      at TypeScriptParserMixin.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:217:17)
      at TypeScriptParserMixin.parseExpression (node_modules/@babel/parser/src/parser/statement.ts:683:23)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:426:17)
      at TypeScriptParserMixin.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1439:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
      at TypeScriptParserMixin.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2616:24)
      at TypeScriptParserMixin.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2553:10)
      at TypeScriptParserMixin.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1837:12)
      at TypeScriptParserMixin.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1162:21)
      at TypeScriptParserMixin.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:734:23)

FAIL src/hooks/__tests__/useNotifications.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    SyntaxError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/test/factories/index.ts: Identifier 'ProductFactory' has already been declared. (23:9)

      21 |
      22 | // Import all for internal use
    > 23 | import { ProductFactory } from './product.factory';
         |          ^
      24 | import { 
      25 |   orderFactory,
      26 |   orderItemFactory,

       6 | import { renderHook, waitFor, act } from '@testing-library/react-native';
       7 | import { createWrapper } from '../../test/test-utils';
    >  8 | import { createUser, resetAllFactories } from '../../test/factories';
         | ^
       9 |
      10 | // Mock services using simplified approach
      11 | jest.mock('../../services/notificationService', () => ({

      at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
      at TypeScriptParserMixin.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)
      at TypeScriptScopeHandler.raise [as declareName] (node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at TypeScriptParserMixin.declareName [as declareNameFromIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:818:16)
      at TypeScriptParserMixin.declareNameFromIdentifier [as checkIdentifier] (node_modules/@babel/parser/src/parser/lval.ts:813:12)
      at TypeScriptParserMixin.checkIdentifier [as checkLVal] (node_modules/@babel/parser/src/parser/lval.ts:713:12)
      at TypeScriptParserMixin.checkLVal [as finishImportSpecifier] (node_modules/@babel/parser/src/parser/statement.ts:3223:10)
      at TypeScriptParserMixin.finishImportSpecifier (node_modules/@babel/parser/src/parser/statement.ts:3480:17)
      at TypeScriptParserMixin.parseImportSpecifier (node_modules/@babel/parser/src/plugins/typescript/index.ts:4357:20)
      at TypeScriptParserMixin.parseImportSpecifier [as parseNamedImportSpecifiers] (node_modules/@babel/parser/src/parser/statement.ts:3441:36)
      at TypeScriptParserMixin.parseNamedImportSpecifiers [as parseImportSpecifiersAndAfter] (node_modules/@babel/parser/src/parser/statement.ts:3173:37)
      at TypeScriptParserMixin.parseImportSpecifiersAndAfter (node_modules/@babel/parser/src/parser/statement.ts:3142:17)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/plugins/typescript/index.ts:3009:28)
      at TypeScriptParserMixin.parseImport (node_modules/@babel/parser/src/parser/statement.ts:642:25)
      at TypeScriptParserMixin.parseStatementContent (node_modules/@babel/parser/src/plugins/typescript/index.ts:3183:20)
      at TypeScriptParserMixin.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:477:17)
      at TypeScriptParserMixin.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:414:17)
      at TypeScriptParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1438:16)
      at TypeScriptParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1412:10)
      at TypeScriptParserMixin.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:229:10)
      at TypeScriptParserMixin.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at TypeScriptParserMixin.parseTopLevel (node_modules/@babel/parser/src/parser/index.ts:93:10)
      at TypeScriptParserMixin.parse (node_modules/@babel/parser/src/plugins/typescript/index.ts:4307:20)
      at parse (node_modules/@babel/parser/src/index.ts:92:38)
      at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
          at parser.next (<anonymous>)
      at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)
          at normalizeFile.next (<anonymous>)
      at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
      at Object.require (src/hooks/__tests__/useNotifications.test.tsx:8:1)

FAIL src/screens/role-based/__tests__/PermissionManagementScreen.test.tsx
  ● Test suite failed to run

    ReferenceError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/screens/role-based/__tests__/PermissionManagementScreen.test.tsx: The module factory of `jest.mock()` is not allowed to reference any out-of-scope variables.
    Invalid variable access: React
    Allowed objects: AbortController, AbortSignal, AggregateError, Array, ArrayBuffer, Atomics, BigInt, BigInt64Array, BigUint64Array, Blob, Boolean, BroadcastChannel, Buffer, ByteLengthQueuingStrategy, CompressionStream, CountQueuingStrategy, Crypto, CryptoKey, CustomEvent, DOMException, DataView, Date, DecompressionStream, Error, EvalError, Event, EventTarget, File, FinalizationRegistry, Float32Array, Float64Array, FormData, Function, Generator, GeneratorFunction, Headers, Infinity, Int16Array, Int32Array, Int8Array, InternalError, Intl, Iterator, JSON, Map, Math, MessageChannel, MessageEvent, MessagePort, NaN, Navigator, Number, Object, Performance, PerformanceEntry, PerformanceMark, PerformanceMeasure, PerformanceObserver, PerformanceObserverEntryList, PerformanceResourceTiming, Promise, Proxy, RangeError, ReadableByteStreamController, ReadableStream, ReadableStreamBYOBReader, ReadableStreamBYOBRequest, ReadableStreamDefaultController, ReadableStreamDefaultReader, ReferenceError, Reflect, RegExp, Request, Response, Set, SharedArrayBuffer, String, SubtleCrypto, Symbol, SyntaxError, TextDecoder, TextDecoderStream, TextEncoder, TextEncoderStream, TransformStream, TransformStreamDefaultController, TypeError, URIError, URL, URLSearchParams, Uint16Array, Uint32Array, Uint8Array, Uint8ClampedArray, WeakMap, WeakRef, WeakSet, WebAssembly, WebSocket, WritableStream, WritableStreamDefaultController, WritableStreamDefaultWriter, __dirname, __filename, arguments, atob, btoa, clearImmediate, clearInterval, clearTimeout, console, crypto, decodeURI, decodeURIComponent, encodeURI, encodeURIComponent, escape, eval, expect, exports, fetch, global, globalThis, isFinite, isNaN, jest, module, navigator, parseFloat, parseInt, performance, process, queueMicrotask, require, setImmediate, setInterval, setTimeout, structuredClone, undefined, unescape.
    Note: This is a precaution to guard against uninitialized mock variables. If it is ensured that the mock is required lazily, variable names prefixed with `mock` (case insensitive) are permitted.

      37 |   useNavigation: () => mockNavigation,
      38 |   useFocusEffect: (callback: () => void) => {
    > 39 |     React.useEffect(callback, []);
         |     ^^^^^
      40 |   },
      41 | }));
      42 |

      at File.buildCodeFrameError (node_modules/@babel/core/src/transformation/file/file.ts:256:12)
      at NodePath.buildError [as buildCodeFrameError] (node_modules/@babel/traverse/src/path/index.ts:142:21)
      at call (node_modules/@babel/traverse/src/visitors.ts:303:14)
      at NodePath.call [as _call] (node_modules/@babel/traverse/src/path/context.ts:36:20)
      at NodePath.call (node_modules/@babel/traverse/src/path/context.ts:21:18)
      at NodePath.call [as visit] (node_modules/@babel/traverse/src/path/context.ts:97:31)
      at TraversalContext.visit [as visitQueue] (node_modules/@babel/traverse/src/context.ts:148:16)
      at TraversalContext.visitQueue [as visitMultiple] (node_modules/@babel/traverse/src/context.ts:99:17)
      at TraversalContext.visitMultiple [as visit] (node_modules/@babel/traverse/src/context.ts:178:19)
      at visit (node_modules/@babel/traverse/src/traverse-node.ts:208:17)
      at NodePath.visit (node_modules/@babel/traverse/src/path/context.ts:104:33)
      at TraversalContext.visit [as visitQueue] (node_modules/@babel/traverse/src/context.ts:148:16)
      at TraversalContext.visitQueue [as visitSingle] (node_modules/@babel/traverse/src/context.ts:109:19)
      at TraversalContext.visitSingle [as visit] (node_modules/@babel/traverse/src/context.ts:180:19)
      at visit (node_modules/@babel/traverse/src/traverse-node.ts:208:17)
      at traverse (node_modules/@babel/traverse/src/index.ts:83:15)
      at transformFile (node_modules/@babel/core/src/transformation/index.ts:119:15)
          at transformFile.next (<anonymous>)
      at transformFile (node_modules/@babel/core/src/transformation/index.ts:49:12)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)

FAIL src/screens/__tests__/ProfileScreen.test.tsx
  ● Test suite failed to run

    Cannot find module '../../contexts/AuthContext' from 'src/screens/__tests__/ProfileScreen.test.tsx'

       7 |
       8 | // Mock the useAuth hook
    >  9 | jest.mock('../../contexts/AuthContext');
         |                                        ^
      10 | const mockUseAuth = useAuth as jest.MockedFunction<typeof useAuth>;
      11 |
      12 | // Mock Alert

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/screens/__tests__/ProfileScreen.test.tsx:9:40)

FAIL src/__tests__/integration/role-based/RoleIntegration.test.tsx
  ● Test suite failed to run

    ReferenceError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/__tests__/integration/role-based/RoleIntegration.test.tsx: The module factory of `jest.mock()` is not allowed to reference any out-of-scope variables.
    Invalid variable access: React
    Allowed objects: AbortController, AbortSignal, AggregateError, Array, ArrayBuffer, Atomics, BigInt, BigInt64Array, BigUint64Array, Blob, Boolean, BroadcastChannel, Buffer, ByteLengthQueuingStrategy, CompressionStream, CountQueuingStrategy, Crypto, CryptoKey, CustomEvent, DOMException, DataView, Date, DecompressionStream, Error, EvalError, Event, EventTarget, File, FinalizationRegistry, Float32Array, Float64Array, FormData, Function, Generator, GeneratorFunction, Headers, Infinity, Int16Array, Int32Array, Int8Array, InternalError, Intl, Iterator, JSON, Map, Math, MessageChannel, MessageEvent, MessagePort, NaN, Navigator, Number, Object, Performance, PerformanceEntry, PerformanceMark, PerformanceMeasure, PerformanceObserver, PerformanceObserverEntryList, PerformanceResourceTiming, Promise, Proxy, RangeError, ReadableByteStreamController, ReadableStream, ReadableStreamBYOBReader, ReadableStreamBYOBRequest, ReadableStreamDefaultController, ReadableStreamDefaultReader, ReferenceError, Reflect, RegExp, Request, Response, Set, SharedArrayBuffer, String, SubtleCrypto, Symbol, SyntaxError, TextDecoder, TextDecoderStream, TextEncoder, TextEncoderStream, TransformStream, TransformStreamDefaultController, TypeError, URIError, URL, URLSearchParams, Uint16Array, Uint32Array, Uint8Array, Uint8ClampedArray, WeakMap, WeakRef, WeakSet, WebAssembly, WebSocket, WritableStream, WritableStreamDefaultController, WritableStreamDefaultWriter, __dirname, __filename, arguments, atob, btoa, clearImmediate, clearInterval, clearTimeout, console, crypto, decodeURI, decodeURIComponent, encodeURI, encodeURIComponent, escape, eval, expect, exports, fetch, global, globalThis, isFinite, isNaN, jest, module, navigator, parseFloat, parseInt, performance, process, queueMicrotask, require, setImmediate, setInterval, setTimeout, structuredClone, undefined, unescape.
    Note: This is a precaution to guard against uninitialized mock variables. If it is ensured that the mock is required lazily, variable names prefixed with `mock` (case insensitive) are permitted.

      36 |   useNavigation: () => mockNavigation,
      37 |   useFocusEffect: (callback: () => void) => {
    > 38 |     React.useEffect(callback, []);
         |     ^^^^^
      39 |   },
      40 | }));
      41 |

      at File.buildCodeFrameError (node_modules/@babel/core/src/transformation/file/file.ts:256:12)
      at NodePath.buildError [as buildCodeFrameError] (node_modules/@babel/traverse/src/path/index.ts:142:21)
      at call (node_modules/@babel/traverse/src/visitors.ts:303:14)
      at NodePath.call [as _call] (node_modules/@babel/traverse/src/path/context.ts:36:20)
      at NodePath.call (node_modules/@babel/traverse/src/path/context.ts:21:18)
      at NodePath.call [as visit] (node_modules/@babel/traverse/src/path/context.ts:97:31)
      at TraversalContext.visit [as visitQueue] (node_modules/@babel/traverse/src/context.ts:148:16)
      at TraversalContext.visitQueue [as visitMultiple] (node_modules/@babel/traverse/src/context.ts:99:17)
      at TraversalContext.visitMultiple [as visit] (node_modules/@babel/traverse/src/context.ts:178:19)
      at visit (node_modules/@babel/traverse/src/traverse-node.ts:208:17)
      at NodePath.visit (node_modules/@babel/traverse/src/path/context.ts:104:33)
      at TraversalContext.visit [as visitQueue] (node_modules/@babel/traverse/src/context.ts:148:16)
      at TraversalContext.visitQueue [as visitSingle] (node_modules/@babel/traverse/src/context.ts:109:19)
      at TraversalContext.visitSingle [as visit] (node_modules/@babel/traverse/src/context.ts:180:19)
      at visit (node_modules/@babel/traverse/src/traverse-node.ts:208:17)
      at traverse (node_modules/@babel/traverse/src/index.ts:83:15)
      at transformFile (node_modules/@babel/core/src/transformation/index.ts:119:15)
          at transformFile.next (<anonymous>)
      at transformFile (node_modules/@babel/core/src/transformation/index.ts:49:12)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)

FAIL src/screens/role-based/__tests__/RoleDashboard.test.tsx
  ● Test suite failed to run

    ReferenceError: /Users/andrewkhoh/Documents/myfarmstand-mobile/src/screens/role-based/__tests__/RoleDashboard.test.tsx: The module factory of `jest.mock()` is not allowed to reference any out-of-scope variables.
    Invalid variable access: React
    Allowed objects: AbortController, AbortSignal, AggregateError, Array, ArrayBuffer, Atomics, BigInt, BigInt64Array, BigUint64Array, Blob, Boolean, BroadcastChannel, Buffer, ByteLengthQueuingStrategy, CompressionStream, CountQueuingStrategy, Crypto, CryptoKey, CustomEvent, DOMException, DataView, Date, DecompressionStream, Error, EvalError, Event, EventTarget, File, FinalizationRegistry, Float32Array, Float64Array, FormData, Function, Generator, GeneratorFunction, Headers, Infinity, Int16Array, Int32Array, Int8Array, InternalError, Intl, Iterator, JSON, Map, Math, MessageChannel, MessageEvent, MessagePort, NaN, Navigator, Number, Object, Performance, PerformanceEntry, PerformanceMark, PerformanceMeasure, PerformanceObserver, PerformanceObserverEntryList, PerformanceResourceTiming, Promise, Proxy, RangeError, ReadableByteStreamController, ReadableStream, ReadableStreamBYOBReader, ReadableStreamBYOBRequest, ReadableStreamDefaultController, ReadableStreamDefaultReader, ReferenceError, Reflect, RegExp, Request, Response, Set, SharedArrayBuffer, String, SubtleCrypto, Symbol, SyntaxError, TextDecoder, TextDecoderStream, TextEncoder, TextEncoderStream, TransformStream, TransformStreamDefaultController, TypeError, URIError, URL, URLSearchParams, Uint16Array, Uint32Array, Uint8Array, Uint8ClampedArray, WeakMap, WeakRef, WeakSet, WebAssembly, WebSocket, WritableStream, WritableStreamDefaultController, WritableStreamDefaultWriter, __dirname, __filename, arguments, atob, btoa, clearImmediate, clearInterval, clearTimeout, console, crypto, decodeURI, decodeURIComponent, encodeURI, encodeURIComponent, escape, eval, expect, exports, fetch, global, globalThis, isFinite, isNaN, jest, module, navigator, parseFloat, parseInt, performance, process, queueMicrotask, require, setImmediate, setInterval, setTimeout, structuredClone, undefined, unescape.
    Note: This is a precaution to guard against uninitialized mock variables. If it is ensured that the mock is required lazily, variable names prefixed with `mock` (case insensitive) are permitted.

      32 |   useNavigation: () => mockNavigation,
      33 |   useFocusEffect: (callback: () => void) => {
    > 34 |     React.useEffect(callback, []);
         |     ^^^^^
      35 |   },
      36 | }));
      37 |

      at File.buildCodeFrameError (node_modules/@babel/core/src/transformation/file/file.ts:256:12)
      at NodePath.buildError [as buildCodeFrameError] (node_modules/@babel/traverse/src/path/index.ts:142:21)
      at call (node_modules/@babel/traverse/src/visitors.ts:303:14)
      at NodePath.call [as _call] (node_modules/@babel/traverse/src/path/context.ts:36:20)
      at NodePath.call (node_modules/@babel/traverse/src/path/context.ts:21:18)
      at NodePath.call [as visit] (node_modules/@babel/traverse/src/path/context.ts:97:31)
      at TraversalContext.visit [as visitQueue] (node_modules/@babel/traverse/src/context.ts:148:16)
      at TraversalContext.visitQueue [as visitMultiple] (node_modules/@babel/traverse/src/context.ts:99:17)
      at TraversalContext.visitMultiple [as visit] (node_modules/@babel/traverse/src/context.ts:178:19)
      at visit (node_modules/@babel/traverse/src/traverse-node.ts:208:17)
      at NodePath.visit (node_modules/@babel/traverse/src/path/context.ts:104:33)
      at TraversalContext.visit [as visitQueue] (node_modules/@babel/traverse/src/context.ts:148:16)
      at TraversalContext.visitQueue [as visitSingle] (node_modules/@babel/traverse/src/context.ts:109:19)
      at TraversalContext.visitSingle [as visit] (node_modules/@babel/traverse/src/context.ts:180:19)
      at visit (node_modules/@babel/traverse/src/traverse-node.ts:208:17)
      at traverse (node_modules/@babel/traverse/src/index.ts:83:15)
      at transformFile (node_modules/@babel/core/src/transformation/index.ts:119:15)
          at transformFile.next (<anonymous>)
      at transformFile (node_modules/@babel/core/src/transformation/index.ts:49:12)
          at run.next (<anonymous>)
      at transform (node_modules/@babel/core/src/transform.ts:29:20)
          at transform.next (<anonymous>)
      at evaluateSync (node_modules/gensync/index.js:251:28)
      at sync (node_modules/gensync/index.js:89:14)
      at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
      at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)

FAIL src/navigation/__tests__/RoleBasedStackNavigator.test.tsx
  ● Test suite failed to run

    Cannot find module '../../screens/HomeScreen' from 'src/navigation/__tests__/RoleBasedStackNavigator.test.tsx'

      38 |
      39 | // Mock all screen imports  
    > 40 | jest.mock('../../screens/HomeScreen', () => ({ HomeScreen: () => 'HomeScreen' }));
         |      ^
      41 | jest.mock('../../screens/ProductsScreen', () => ({ ProductsScreen: () => 'ProductsScreen' }));
      42 | jest.mock('../../screens/CartScreen', () => ({ CartScreen: () => 'CartScreen' }));
      43 | jest.mock('../../screens/OrdersScreen', () => ({ OrdersScreen: () => 'OrdersScreen' }));

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.mock (src/navigation/__tests__/RoleBasedStackNavigator.test.tsx:40:6)

FAIL src/ARCHIVE/useEntityQuery.test.ts
  ● Test suite failed to run

    Cannot find module '../useAuth' from 'src/ARCHIVE/useEntityQuery.test.ts'

       5 | import { useCurrentUser } from '../useAuth';
       6 |
    >  7 | jest.mock('../useAuth');
         |                        ^
       8 | const mockUseCurrentUser = useCurrentUser as jest.MockedFunction<typeof useCurrentUser>;
       9 |
      10 | jest.mock('../../utils/queryKeyFactory', () => ({

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/ARCHIVE/useEntityQuery.test.ts:7:24)

FAIL archives/kiosk-temporary/useKiosk.simple.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/kioskService' from 'archives/kiosk-temporary/useKiosk.simple.test.tsx'

      11 |
      12 | // Mock the kiosk service (following CLAUDE.md pattern: service layer mocked for hooks)
    > 13 | jest.mock('../../services/kioskService');
         |                                         ^
      14 | const mockKioskService = kioskService as jest.Mocked<typeof kioskService>;
      15 |
      16 | // Real React Query setup following CLAUDE.md patterns

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (archives/kiosk-temporary/useKiosk.simple.test.tsx:13:41)

FAIL archives/kiosk-temporary/useKiosk.final.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/kioskService' from 'archives/kiosk-temporary/useKiosk.final.test.tsx'

      10 |
      11 | // Mock the kiosk service following CLAUDE.md pattern
    > 12 | jest.mock('../../services/kioskService');
         |                                         ^
      13 | const mockKioskService = kioskService as jest.Mocked<typeof kioskService>;
      14 |
      15 | // Real React Query setup following CLAUDE.md patterns

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (archives/kiosk-temporary/useKiosk.final.test.tsx:12:41)

FAIL src/ARCHIVE/useCentralizedRealtime.test.ts
  ● Test suite failed to run

    Cannot find module '../../config/supabase' from 'src/ARCHIVE/useCentralizedRealtime.test.ts'

       9 | import { useCurrentUser } from '../useAuth';
      10 |
    > 11 | jest.mock('../../config/supabase', () => ({
         |                                    ^
      12 |   supabase: {
      13 |     channel: jest.fn(() => ({
      14 |       on: jest.fn().mockReturnThis(),

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/ARCHIVE/useCentralizedRealtime.test.ts:11:36)

FAIL archives/kiosk-temporary/KioskTransparent.simple.test.tsx
  ● Test suite failed to run

    Cannot find module '../../hooks/useKiosk' from 'archives/kiosk-temporary/KioskTransparent.simple.test.tsx'

      12 |
      13 | // Mock kiosk hooks
    > 14 | jest.mock('../../hooks/useKiosk', () => ({
         |      ^
      15 |   useKioskAuth: () => ({
      16 |     mutateAsync: jest.fn(() => Promise.resolve({
      17 |       success: true,

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.mock (archives/kiosk-temporary/KioskTransparent.simple.test.tsx:14:6)

FAIL archives/kiosk-temporary/useKiosk.aligned.test.tsx
  ● Test suite failed to run

    Cannot find module '../../services/kioskService' from 'archives/kiosk-temporary/useKiosk.aligned.test.tsx'

      29 |
      30 | // Mock dependencies
    > 31 | jest.mock('../../services/kioskService');
         |                                         ^
      32 | jest.mock('../../utils/validationMonitor');
      33 |
      34 | describe('Kiosk Hooks - Aligned Pattern Compliance', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (archives/kiosk-temporary/useKiosk.aligned.test.tsx:31:41)

FAIL archives/kiosk-temporary/kiosk.schema.aligned.test.ts
  ● Test suite failed to run

    Cannot find module '../kiosk.schema' from 'archives/kiosk-temporary/kiosk.schema.aligned.test.ts'

      14 |  */
      15 |
    > 16 | import {
         | ^
      17 |   KioskAuthRequestSchema,
      18 |   DbKioskSessionTransformSchema,
      19 |   DbStaffPinTransformSchema,

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (archives/kiosk-temporary/kiosk.schema.aligned.test.ts:16:1)

FAIL src/screens/role-based/__tests__/RoleSelectionScreen.test.tsx
  ● Test suite failed to run

    TypeError: _reactNative.Platform.select is not a function

      34 |
      35 | jest.mock('@react-navigation/native', () => ({
    > 36 |   ...jest.requireActual('@react-navigation/native'),
         |           ^
      37 |   useNavigation: () => mockNavigation,
      38 | }));
      39 |

      at Object.select (node_modules/@react-navigation/native/src/theming/fonts.tsx:8:31)
      at Object.require (node_modules/@react-navigation/native/src/theming/DefaultTheme.tsx:2:1)
      at Object.require (node_modules/@react-navigation/native/src/NavigationContainer.tsx:19:1)
      at Object.require (node_modules/@react-navigation/native/src/createStaticNavigation.tsx:10:1)
      at Object.require (node_modules/@react-navigation/native/src/index.tsx:1:1)
      at requireActual (src/screens/role-based/__tests__/RoleSelectionScreen.test.tsx:36:11)
      at Object.require (src/screens/role-based/__tests__/RoleSelectionScreen.test.tsx:9:1)

FAIL src/screens/inventory/__tests__/InventoryAlertsScreen.test.tsx
  ● Test suite failed to run

    TypeError: _reactNative.Platform.select is not a function

      18 | const mockNavigate = jest.fn();
      19 | jest.mock('@react-navigation/native', () => ({
    > 20 |   ...jest.requireActual('@react-navigation/native'),
         |           ^
      21 |   useNavigation: () => ({
      22 |     navigate: mockNavigate,
      23 |   }),

      at Object.select (node_modules/@react-navigation/native/src/theming/fonts.tsx:8:31)
      at Object.require (node_modules/@react-navigation/native/src/theming/DefaultTheme.tsx:2:1)
      at Object.require (node_modules/@react-navigation/native/src/NavigationContainer.tsx:19:1)
      at Object.require (node_modules/@react-navigation/native/src/createStaticNavigation.tsx:10:1)
      at Object.require (node_modules/@react-navigation/native/src/index.tsx:1:1)
      at requireActual (src/screens/inventory/__tests__/InventoryAlertsScreen.test.tsx:20:11)
      at Object.require (src/screens/inventory/__tests__/InventoryAlertsScreen.test.tsx:8:1)

FAIL archives/kiosk-temporary/kioskService.aligned.test.ts
  ● Test suite failed to run

    Cannot find module '../../config/supabase' from 'archives/kiosk-temporary/kioskService.aligned.test.ts'

      19 |
      20 | // Mock dependencies
    > 21 | jest.mock('../../config/supabase');
         |                                   ^
      22 | jest.mock('../../utils/validationMonitor');
      23 |
      24 | describe('KioskService - Aligned Pattern Compliance', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (archives/kiosk-temporary/kioskService.aligned.test.ts:21:35)

FAIL src/screens/__tests__/CheckoutScreen.test.tsx
  ● Test suite failed to run

    TypeError: _reactNative.Platform.select is not a function

      32 |
      33 | jest.mock('@react-navigation/native', () => ({
    > 34 |   ...jest.requireActual('@react-navigation/native'),
         |           ^
      35 |   useNavigation: () => ({ navigate: mockNavigate }),
      36 |   useRoute: () => mockRoute,
      37 | }));

      at Object.select (node_modules/@react-navigation/native/src/theming/fonts.tsx:8:31)
      at Object.require (node_modules/@react-navigation/native/src/theming/DefaultTheme.tsx:2:1)
      at Object.require (node_modules/@react-navigation/native/src/NavigationContainer.tsx:19:1)
      at Object.require (node_modules/@react-navigation/native/src/createStaticNavigation.tsx:10:1)
      at Object.require (node_modules/@react-navigation/native/src/index.tsx:1:1)
      at requireActual (src/screens/__tests__/CheckoutScreen.test.tsx:34:11)
      at Object.require (src/test/testUtils.tsx:4:1)
      at Object.require (src/screens/__tests__/CheckoutScreen.test.tsx:4:1)

FAIL src/screens/inventory/__tests__/InventoryDashboardScreen.test.tsx
  ● Test suite failed to run

    TypeError: _reactNative.Platform.select is not a function

      17 | const mockNavigate = jest.fn();
      18 | jest.mock('@react-navigation/native', () => ({
    > 19 |   ...jest.requireActual('@react-navigation/native'),
         |           ^
      20 |   useNavigation: () => ({
      21 |     navigate: mockNavigate,
      22 |   }),

      at Object.select (node_modules/@react-navigation/native/src/theming/fonts.tsx:8:31)
      at Object.require (node_modules/@react-navigation/native/src/theming/DefaultTheme.tsx:2:1)
      at Object.require (node_modules/@react-navigation/native/src/NavigationContainer.tsx:19:1)
      at Object.require (node_modules/@react-navigation/native/src/createStaticNavigation.tsx:10:1)
      at Object.require (node_modules/@react-navigation/native/src/index.tsx:1:1)
      at requireActual (src/screens/inventory/__tests__/InventoryDashboardScreen.test.tsx:19:11)
      at Object.require (src/screens/inventory/__tests__/InventoryDashboardScreen.test.tsx:8:1)

FAIL src/screens/__tests__/OrderConfirmationScreen.test.tsx
  ● Test suite failed to run

    TypeError: _reactNative.Platform.select is not a function

      19 |
      20 | jest.mock('@react-navigation/native', () => ({
    > 21 |   ...jest.requireActual('@react-navigation/native'),
         |           ^
      22 |   useNavigation: () => ({ 
      23 |     navigate: mockNavigate,
      24 |     reset: mockReset,

      at Object.select (node_modules/@react-navigation/native/src/theming/fonts.tsx:8:31)
      at Object.require (node_modules/@react-navigation/native/src/theming/DefaultTheme.tsx:2:1)
      at Object.require (node_modules/@react-navigation/native/src/NavigationContainer.tsx:19:1)
      at Object.require (node_modules/@react-navigation/native/src/createStaticNavigation.tsx:10:1)
      at Object.require (node_modules/@react-navigation/native/src/index.tsx:1:1)
      at requireActual (src/screens/__tests__/OrderConfirmationScreen.test.tsx:21:11)
      at Object.require (src/test/testUtils.tsx:4:1)
      at Object.require (src/screens/__tests__/OrderConfirmationScreen.test.tsx:2:1)


Test Suites: 142 failed, 36 passed, 178 total
Tests:       456 failed, 1 skipped, 746 passed, 1203 total
Snapshots:   0 total
Time:        34.95 s
Ran all test suites.
